nano_msg_ubsub_free(nano_pipe_db *db)
{
	nano_pipe_db *ptr, *tmp;
	uint8_t       len;

	if (NULL == db) {
		return;
	}
	if (db == db->root) {
		ptr = db;
		tmp = db->next;
		while (ptr) {
			ptr->root = tmp;
			ptr       = ptr->next;
		}
	} else {
		tmp            = db->prev;
		tmp->next      = db->next;
		db->next->prev = tmp;
	}

	len = strlen(db->topic);
	nng_free(db->topic, len);
	nng_free(db, sizeof(nano_pipe_db));
	return;
}
