write_bits(netdissect_options *ndo,
           unsigned int val, const char *fmt)
{
    const char *p = fmt;
    u_int i = 0;

    while ((p = strchr(fmt, '|'))) {
	u_int l = ND_BYTES_BETWEEN(p, fmt);
	if (l && (val & (1 << i)))
	    ND_PRINT("%.*s ", (int)l, fmt);
	fmt = p + 1;
	i++;
    }
}
