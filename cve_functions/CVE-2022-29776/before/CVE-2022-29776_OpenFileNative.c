    FILE* CFileBinary::OpenFileNative(const std::wstring& sFileName, const std::wstring& sMode)
    {
#if defined(_WIN32) || defined(_WIN32_WCE) || defined(_WIN64)
        FILE* pFile = NULL;
        _wfopen_s(&pFile, sFileName.c_str(), sMode.c_str());

        return pFile;
#else
        BYTE* pUtf8 = NULL;
        LONG lLen = 0;
        CUtf8Converter::GetUtf8StringFromUnicode(sFileName.c_str(), sFileName.length(), pUtf8, lLen, false);

        BYTE* pMode = NULL;
        LONG lLenMode;
        CUtf8Converter::GetUtf8StringFromUnicode(sMode.c_str(), sMode.length(), pMode, lLenMode, false);

        FILE* pFile = fopen((char*)pUtf8, (char*)pMode);

        delete [] pUtf8;
        delete [] pMode;

        return pFile;
#endif
    }
