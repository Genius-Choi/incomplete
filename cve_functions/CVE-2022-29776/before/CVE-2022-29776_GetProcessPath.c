    std::wstring GetProcessPath()
    {
#if defined (_WIN64) || defined(_WIN32)
        wchar_t buf [NS_FILE_MAX_PATH];
        GetModuleFileNameW(GetModuleHandle(NULL), buf, NS_FILE_MAX_PATH);
        return std::wstring(buf);
#endif

#if defined(__linux__) || defined(_MAC) && !defined(_IOS)
        char buf[NS_FILE_MAX_PATH];
        memset(buf, 0, NS_FILE_MAX_PATH);
        if (readlink ("/proc/self/exe", buf, NS_FILE_MAX_PATH) <= 0)
        {
#ifdef _MAC
            uint32_t _size = NS_FILE_MAX_PATH;
            _NSGetExecutablePath(buf, &_size);
            std::string sUTF8(buf);
            std::wstring sRet = CUtf8Converter::GetUnicodeStringFromUTF8((BYTE*)sUTF8.c_str(), sUTF8.length());
            return sRet;
#endif
            return L"";
        }

        std::string sUTF8(buf);
        std::wstring sRet = CUtf8Converter::GetUnicodeStringFromUTF8((BYTE*)sUTF8.c_str(), sUTF8.length());
        return sRet;
#endif

        return L"";
    }
