    bool CFileBinary::Copy(const std::wstring&  strSrc, const std::wstring& strDst)
    {
        if (strSrc == strDst)
            return true;

        std::ifstream src;
        std::ofstream dst;

        int nLenBuffer = 1024 * 1024; // 10
        CFileBinary oFile;
        if (oFile.OpenFile(strSrc))
        {
            int nFileSize = (int)oFile.GetFileSize();
            if (nFileSize < nLenBuffer)
                nLenBuffer = nFileSize;

            oFile.CloseFile();
        }
        else
        {
#ifdef _WIN32
            return (0 != ::CopyFileW(strSrc.c_str(), strDst.c_str(), 1));
#endif
        }

        char* pBuffer_in = NULL;
        char* pBuffer_out = NULL;

        if (nLenBuffer > 0)
        {
            pBuffer_in = new char[nLenBuffer];
            pBuffer_out = new char[nLenBuffer];

            src.rdbuf()->pubsetbuf(pBuffer_in, nLenBuffer);
            dst.rdbuf()->pubsetbuf(pBuffer_out, nLenBuffer);
        }

#if defined(_WIN32) || defined(_WIN32_WCE) || defined(_WIN64)
        src.open(strSrc.c_str(), std::ios::binary);
        dst.open(strDst.c_str(), std::ios::binary);
#else
        BYTE* pUtf8Src = NULL;
        LONG lLenSrc = 0;
        CUtf8Converter::GetUtf8StringFromUnicode(strSrc.c_str(), strSrc.length(), pUtf8Src, lLenSrc, false);
        BYTE* pUtf8Dst = NULL;
        LONG lLenDst = 0;
        CUtf8Converter::GetUtf8StringFromUnicode(strDst.c_str(), strDst.length(), pUtf8Dst, lLenDst, false);

        src.open((char*)pUtf8Src, std::ios::binary);
        dst.open((char*)pUtf8Dst, std::ios::binary);

        delete [] pUtf8Src;
        delete [] pUtf8Dst;
#endif

        bool bRet = false;

        if (src.is_open() && dst.is_open())
        {
            dst << src.rdbuf();
            src.close();
            dst.close();

            bRet = true;
        }
        RELEASEARRAYOBJECTS(pBuffer_in);
        RELEASEARRAYOBJECTS(pBuffer_out);
        return bRet;
    }
