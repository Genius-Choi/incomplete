    std::wstring CFileBinary::CreateTempFileWithUniqueName(const std::wstring& strFolderPathRoot, const std::wstring& Prefix)
    {
#if defined(_WIN32) || defined(_WIN32_WCE) || defined(_WIN64)
        wchar_t pBuffer[MAX_PATH + 1];
        ::GetTempFileNameW(strFolderPathRoot.c_str(), Prefix.c_str(), 0, pBuffer);
        std::wstring sRet(pBuffer);
        return sRet;
#else
        char pcRes[MAX_PATH];
        BYTE* pData = (BYTE*)pcRes;

        std::wstring sPrefix = strFolderPathRoot + L"/" + Prefix + L"_XXXXXX";
        LONG lLen = 0;
        NSFile::CUtf8Converter::GetUtf8StringFromUnicode(sPrefix.c_str(), (LONG)sPrefix.length(), pData, lLen);
        pcRes[lLen] = '\0';

        int res = mkstemp(pcRes);
        if (-1 != res)
            close(res);

        std::string sRes = pcRes;
        return NSFile::CUtf8Converter::GetUnicodeStringFromUTF8((BYTE*)sRes.c_str(), sRes.length());
#endif
    }
