bool CxMemFile::Alloc(uint32_t dwNewLen)
{
	if (dwNewLen > (uint32_t)m_Edge)
	{
		// find new buffer size
		uint32_t dwNewBufferSize = (uint32_t)(((dwNewLen>>16)+1)<<16);

		// allocate new buffer
		if (m_pBuffer == NULL) m_pBuffer = (uint8_t*)malloc(dwNewBufferSize);
		else	m_pBuffer = (uint8_t*)realloc(m_pBuffer, dwNewBufferSize);
		// I own this buffer now (caller knows nothing about it)
		m_bFreeOnClose = true;

		m_Edge = dwNewBufferSize;
	}
	return (m_pBuffer!=0);
}
