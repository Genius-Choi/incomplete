wstran_pipe_send_start(ws_pipe *p)
{
	nni_msg *msg;
	nng_aio *aio = p->user_txaio;
	msg          = nni_aio_get_msg(aio);

	if (msg == NULL || p->ws_param == NULL) {
		// TODO error handler
		nni_println("ERROR: sending NULL msg or pipe is invalid!");
		nni_aio_finish(aio, NNG_ECANCELED, 0);
		return;
	}

	if (p->ws_param->pro_ver == 4) {
		wstran_pipe_send_start_v4(p, msg, aio);
		return;
	} else if (p->ws_param->pro_ver == 5) {
		wstran_pipe_send_start_v5(p, msg, aio);
		return;
	}

}
