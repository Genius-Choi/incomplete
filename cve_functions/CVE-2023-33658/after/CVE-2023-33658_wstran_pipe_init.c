wstran_pipe_init(void *arg, nni_pipe *pipe)
{
	log_trace("************wstran_pipe_init************");
	ws_pipe *p = arg;

	nni_pipe_set_conn_param(pipe, p->ws_param);
	p->npipe      = pipe;

	if (!p->conf->sqlite.enable) {
		nni_qos_db_init_id_hash(pipe->nano_qos_db);
	}

	p->gotrxhead  = 0;
	p->wantrxhead = 0;
	p->ep_aio     = NULL;

	p->qos_buf = nng_zalloc(16 + NNI_NANO_MAX_PACKET_SIZE);
	// the size limit of qos_buf reserve 1 byte for property length
	p->qlength = 16 + NNI_NANO_MAX_PACKET_SIZE;
	return (0);
}
