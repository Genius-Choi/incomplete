void OSDMonitor::do_application_enable(int64_t pool_id,
                                       const std::string &app_name,
				       const std::string &app_key,
				       const std::string &app_value)
{
  assert(paxos->is_plugged() && is_writeable());

  dout(20) << __func__ << ": pool_id=" << pool_id << ", app_name=" << app_name
           << dendl;

  assert(osdmap.require_osd_release >= CEPH_RELEASE_LUMINOUS);

  auto pp = osdmap.get_pg_pool(pool_id);
  assert(pp != nullptr);

  pg_pool_t p = *pp;
  if (pending_inc.new_pools.count(pool_id)) {
    p = pending_inc.new_pools[pool_id];
  }

  if (app_key.empty()) {
    p.application_metadata.insert({app_name, {}});
  } else {
    p.application_metadata.insert({app_name, {{app_key, app_value}}});
  }
  p.last_change = pending_inc.epoch;
  pending_inc.new_pools[pool_id] = p;
}
