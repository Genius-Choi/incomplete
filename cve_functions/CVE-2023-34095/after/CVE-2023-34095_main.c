int main(int argc, char **argv)
{
    cpdb_printer_callback printer_cb = (cpdb_printer_callback)printer_callback;

    setlocale (LC_ALL, "");
    cpdbInit();

    locale = getenv("LANGUAGE");

    char *dialog_bus_name = malloc(300);
    if (argc > 1) //this is for creating multiple instances of a dialog simultaneously
        f = cpdbGetNewFrontendObj(argv[1], printer_cb);
    else
        f = cpdbGetNewFrontendObj(NULL, printer_cb);

    /** Uncomment the line below if you don't want to use the previously saved settings**/
    cpdbIgnoreLastSavedSettings(f);
    g_thread_new("parse_commands_thread", parse_commands, NULL);
    cpdbConnectToDBus(f);
    displayAllPrinters(f);
    GMainLoop *loop = g_main_loop_new(NULL, FALSE);
    g_main_loop_run(loop);
}
