cpdb_frontend_obj_t *cpdbGetNewFrontendObj(const char *instance_name,
                                           cpdb_printer_callback printer_cb)
{
    cpdb_frontend_obj_t *f = g_new0(cpdb_frontend_obj_t, 1);
    
    f->skeleton = print_frontend_skeleton_new();
    f->connection = NULL;
    f->own_id = 0;
    f->name_done = FALSE;
    if (instance_name == NULL)
        f->bus_name = cpdbGetStringCopy(CPDB_DIALOG_BUS_NAME);
    else
        f->bus_name = cpdbConcat(CPDB_DIALOG_BUS_NAME, instance_name);
    f->printer_cb = printer_cb;
    f->num_backends = 0;
    f->backend = g_hash_table_new_full(g_str_hash,
                                       g_str_equal,
                                       free,
                                       g_object_unref);
    f->num_printers = 0;
    f->printer = g_hash_table_new_full(g_str_hash,
                                       g_str_equal,
                                       free,
                                       NULL);
    f->last_saved_settings = cpdbReadSettingsFromDisk();
    return f;
}
