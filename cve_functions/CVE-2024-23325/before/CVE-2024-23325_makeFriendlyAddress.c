std::string Ipv6Instance::Ipv6Helper::makeFriendlyAddress() const {
  char str[INET6_ADDRSTRLEN];
  const char* ptr = inet_ntop(AF_INET6, &address_.sin6_addr, str, INET6_ADDRSTRLEN);
  ASSERT(str == ptr);
  if (address_.sin6_scope_id != 0) {
    // Note that here we don't use the `if_indextoname` that will give a more user friendly
    // output just because in the past created a performance bottleneck if the machine had a
    // lot of IPv6 Link local addresses.
    return absl::StrCat(ptr, "%", scopeId());
  }
  return ptr;
}
