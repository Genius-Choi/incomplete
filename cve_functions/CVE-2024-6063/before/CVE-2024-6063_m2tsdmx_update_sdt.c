static void m2tsdmx_update_sdt(GF_M2TS_Demuxer *ts, void *for_pid)
{
	u32 i, count = gf_list_count(ts->programs);
	for (i=0; i<count; i++) {
		u32 j, nb_streams;
		GF_M2TS_Program *prog = gf_list_get(ts->programs, i);
		GF_M2TS_SDT *sdt = gf_m2ts_get_sdt_info(ts, prog->number);
		if (!sdt) continue;

		nb_streams = gf_list_count(prog->streams);
		for (j=0; j<nb_streams; j++) {
			GF_M2TS_ES *es = gf_list_get(prog->streams, j);
			if (!es->user) continue;
			if (for_pid && (es->user != for_pid)) continue;
			//TODO, translate non standard character maps to UTF8
			//we for now comment in test mode to avoid non UTF characters in text dumps
			if (isalnum(sdt->service[0]) || !gf_sys_is_test_mode())
				gf_filter_pid_set_property((GF_FilterPid *)es->user, GF_PROP_PID_SERVICE_NAME, &PROP_STRING(sdt->service ) );

			if (isalnum(sdt->provider[0]) || !gf_sys_is_test_mode())
				gf_filter_pid_set_property((GF_FilterPid *)es->user, GF_PROP_PID_SERVICE_PROVIDER, &PROP_STRING( sdt->provider ) );
		}
	}
}
