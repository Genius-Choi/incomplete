static void m2tdmx_merge_props(GF_FilterPid *pid, GF_M2TS_ES *stream, GF_FilterPacket *pck)
{
	if (stream->props) {
		char szID[100];
		while (gf_list_count(stream->props)) {
			GF_M2TS_Prop *p = gf_list_pop_front(stream->props);
			switch(p->type) {
				case M2TS_TEMI_INFO: {
					GF_M2TS_Prop_TEMIInfo *t = (GF_M2TS_Prop_TEMIInfo*)p;
					snprintf(szID, 100, "%s:%d", t->is_loc ? "temi_l" : "temi_t", t->timeline_id);
					break;
				}
				case M2TS_SCTE35:
					snprintf(szID, 100, "scte35");
					break;
				case M2TS_ID3:
					snprintf(szID, 100, "id3");
					break;
				default:
					GF_LOG(GF_LOG_ERROR, GF_LOG_CONTAINER, ("[M2TSDmx] unknown property %d - skipping\n", p->type) );
					gf_free(p);
					continue;
			}

			gf_filter_pck_set_property_dyn(pck, szID, &PROP_DATA_NO_COPY(p->data, p->len));
			gf_free(p);
		}
		gf_list_del(stream->props);
		stream->props = NULL;

		if (!(stream->flags & GF_M2TS_ES_TEMI_INFO)) {
			stream->flags |= GF_M2TS_ES_TEMI_INFO;
			gf_filter_pid_set_property(pid, GF_PROP_PID_HAS_TEMI, &PROP_BOOL(GF_TRUE) );
		}
	}
}
