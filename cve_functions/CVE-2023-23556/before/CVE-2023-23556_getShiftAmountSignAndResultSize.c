getShiftAmountSignAndResultSize(
    ShiftOpIs shiftOp,
    ImmutableBigIntRef lhs,
    ImmutableBigIntRef rhs) {
  const auto &[shiftAmnt, isNegative] = getShiftAmountAndSign(rhs);
  const auto actualShiftOp = (shiftOp == ShiftOpIs::Left) == isNegative
      ? ShiftOpIs::Right
      : ShiftOpIs::Left;

  return std::make_tuple(
      shiftAmnt,
      actualShiftOp,
      shiftResultSizeImpl(actualShiftOp, lhs, shiftAmnt));
}
