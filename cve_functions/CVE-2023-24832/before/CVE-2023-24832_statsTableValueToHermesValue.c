CallResult<HermesValue> statsTableValueToHermesValue(
    Runtime &runtime,
    const MockedEnvironment::StatsTableValue &val) {
  if (val.isNum()) {
    return HermesValue::encodeDoubleValue(val.num());
  }

  auto strRes =
      StringPrimitive::create(runtime, createASCIIRef(val.str().c_str()));
  if (LLVM_UNLIKELY(strRes == ExecutionStatus::EXCEPTION)) {
    return ExecutionStatus::EXCEPTION;
  }
  return *strRes;
}
