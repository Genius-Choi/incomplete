extern "C" HRESULT CacheEnsureAcquisitionFolder(
    __in BURN_CACHE* pCache
    )
{
    Assert(pCache->fInitializedCache);

    HRESULT hr = S_OK;

    hr = DirEnsureExists(pCache->sczAcquisitionFolder, NULL);
    ExitOnFailure(hr, "Failed create acquisition folder.");

    // Best effort to ensure our acquisition folder is not encrypted.
    ::DecryptFileW(pCache->sczAcquisitionFolder, 0);

LExit:
    return hr;
}
