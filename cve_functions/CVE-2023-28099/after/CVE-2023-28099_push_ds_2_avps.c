static inline int push_ds_2_avps( ds_dest_t *ds, ds_partition_t *partition )
{
	char buf[PTR_STRING_SIZE]; /* a hexa string */
	int_str avp_val;

	avp_val.s.len = snprintf( buf, PTR_STR_SIZE, "%p", ds->sock );
	avp_val.s.s = buf;
	if(add_avp(AVP_VAL_STR| partition->sock_avp_type,
				partition->sock_avp_name, avp_val)!=0) {
		LM_ERR("failed to add SOCK avp\n");
		return -1;
	}

	avp_val.s = ds->dst_uri;
	if(add_avp(AVP_VAL_STR| partition->dst_avp_type,
				partition->dst_avp_name, avp_val)!=0) {
		LM_ERR("failed to add DST avp\n");
		return -1;
	}

	if (partition->attrs_avp_name >= 0) {
		avp_val.s = ds->attrs;
		if(add_avp(AVP_VAL_STR| partition->attrs_avp_type,
					partition->attrs_avp_name, avp_val)!=0) {
			LM_ERR("failed to add ATTR avp\n");
			return -1;
		}
	}

	if (partition->script_attrs_avp_name >= 0) {
		avp_val.s = ds->script_attrs;
		if(add_avp(AVP_VAL_STR| partition->script_attrs_avp_type,
		partition->script_attrs_avp_name, avp_val)!=0) {
			LM_ERR("failed to add Script ATTR avp\n");
			return -1;
		}
	}
	return 0;
}
