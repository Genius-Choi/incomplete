int ds_get_script_attrs(struct sip_msg *_m,str *uri,int set, 
	ds_partition_t *partition, pv_spec_t *attrs)
{
	pv_value_t val;
	ds_set_p list;
	int j;

	memset(&val, 0, sizeof(pv_value_t));
	val.flags = PV_VAL_STR;

	lock_start_read( partition->lock );

	for(list = (*partition->data)->sets ; list!= NULL; list= list->next) {
		if ((set == -1) || (set == list->id)) {
			/* interate through all elements/destinations in the list */
			for(j=0; j<list->nr; j++) {
				if (list->dlist[j].dst_uri.len == uri->len && 
				memcmp(list->dlist[j].dst_uri.s,uri->s,uri->len) == 0) {

					val.rs = list->dlist[j].script_attrs;	
					if (pv_set_value(_m,attrs,0,&val) != 0) {
						LM_ERR("Failed to set value for script attrs \n");
					}
					lock_stop_read( partition->lock );
					return 1;
				} 
			}
		}
	}

	lock_stop_read( partition->lock );
	return -1;
}
