static void ds_destroy_data_set( ds_data_t *d)
{
	ds_set_p  sp;
	ds_set_p  sp_curr;
	ds_dest_p dest;
	str ds_str = {MI_SSTR("dispatcher")};

	/* free the list of sets */
	sp = d->sets;
	while(sp) {
		sp_curr = sp;
		sp = sp->next;

		dest = sp_curr->dlist;
		if (dest) {
			do {
				if(dest->uri.s!=NULL)
					shm_free(dest->uri.s);
				if(dest->param)
					shm_free(dest->param);
				if (dest->fs_sock)
					fs_api.put_stats_evs(dest->fs_sock, &ds_str);
				if (dest->script_attrs.s)
					shm_free(dest->script_attrs.s);
				dest = dest->next;
			}while(dest);
			shm_free(sp_curr->dlist);
		}
		shm_free(sp_curr);
	}

	/* free the data holder */
	shm_free(d);
}
