scrolling_screenlines(int byfold UNUSED)
{
    return (curwin->w_p_wrap && curwin->w_p_sms)
# ifdef FEAT_FOLDING
	|| (byfold && hasAnyFolding(curwin))
# endif
# ifdef FEAT_DIFF
	|| curwin->w_p_diff
# endif
	;
}
