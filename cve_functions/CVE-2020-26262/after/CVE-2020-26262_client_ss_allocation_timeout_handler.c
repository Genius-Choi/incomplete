static void client_ss_allocation_timeout_handler(ioa_engine_handle e, void *arg) {

	UNUSED_ARG(e);

	if (!arg)
		return;

	relay_endpoint_session *rsession = (relay_endpoint_session*)arg;

	if(!(rsession->s))
		return;

	ts_ur_super_session* ss = get_ioa_socket_session(rsession->s);

	if (!ss)
		return;

	allocation* a =  get_allocation_ss(ss);

	turn_turnserver* server = (turn_turnserver*) (ss->server);

	if (!server) {
		clear_allocation(a);
		return;
	}

	FUNCSTART;

	int family = get_ioa_socket_address_family(rsession->s);

	set_allocation_family_invalid(a,family);

	if(!get_relay_socket(a, AF_INET) && !get_relay_socket(a, AF_INET6)) {
		shutdown_client_connection(server, ss, 0, "allocation timeout");
	}

	FUNCEND;
}
