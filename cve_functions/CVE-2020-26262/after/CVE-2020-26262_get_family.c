static inline int get_family(int stun_family, ioa_engine_handle e, ioa_socket_handle client_socket) {
	switch(stun_family) {
	case STUN_ATTRIBUTE_REQUESTED_ADDRESS_FAMILY_VALUE_IPV4:
		return AF_INET;
		break;
	case STUN_ATTRIBUTE_REQUESTED_ADDRESS_FAMILY_VALUE_IPV6:
		return AF_INET6;
		break;
	case STUN_ATTRIBUTE_REQUESTED_ADDRESS_FAMILY_VALUE_DEFAULT:
		if(e->default_relays && get_ioa_socket_address_family(client_socket) == AF_INET6)
				return AF_INET6;
		else
				return AF_INET;
	default:
		return AF_INET;
	};
}
