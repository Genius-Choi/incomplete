wsemul_vt100_output_esc_percent(struct wsemul_vt100_emuldata *edp,
    struct wsemul_inputstate *instate)
{
	switch (instate->inchar) {
#ifdef HAVE_UTF8_SUPPORT
	case 'G':
		edp->flags |= VTFL_UTF8;
		edp->kstate.mbleft = edp->instate.mbleft = 0;
		break;
	case '@':
		edp->flags &= ~VTFL_UTF8;
		break;
#endif
	default:
#ifdef VT100_PRINTUNKNOWN
		printf("ESC% %x unknown\n", instate->inchar);
#endif
		break;
	}
	edp->state = VT100_EMUL_STATE_NORMAL;
	return 0;
}
