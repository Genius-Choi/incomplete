constructMaxLength(unsigned long maxPDU, DUL_MAXLENGTH * max,
       unsigned long *rtnLen)
{
    unsigned long compatMode = dcmEnableBackwardCompatibility.get();
    max->type = DUL_TYPEMAXLENGTH;
    max->rsv1 = 0;
    max->length = 4;
    if (compatMode & 0x8000) max->maxLength = DUL_DULCOMPAT | DUL_DIMSECOMPAT | compatMode;
    else max->maxLength = maxPDU;
    *rtnLen = 8;

    return EC_Normal;
}
