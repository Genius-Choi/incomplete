static u8 gf_opus_read_length(u8 *data, u32 data_length, u32 offset, u16 *read_length) {
    if (!data || !data_length || !read_length) {
        GF_LOG(GF_LOG_ERROR, GF_LOG_CODING, ("Cannot read Opus length value\n"));
        return 0;
    }
    if (offset >= data_length) {
        GF_LOG(GF_LOG_ERROR, GF_LOG_CODING, ("Not enough bytes to read Opus length\n"));
        return 0;
    }
    if (data[offset] < 252) {
        *read_length = data[offset];
        return 1;
    } else {
        if (offset+1 >= data_length) {
            GF_LOG(GF_LOG_ERROR, GF_LOG_CODING, ("Not enough bytes to read 2-byte Opus length\n"));
            return 0;
        }
        *read_length = data[offset+1]*4+data[offset];
        return 2;
    }
}
