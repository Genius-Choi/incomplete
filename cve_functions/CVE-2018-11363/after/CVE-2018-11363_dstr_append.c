static int dstr_append(struct dstr *str, const char *extend)
{
    int len = strlen(extend);
    if (dstr_ensure(str, str->used_len + len + 1) < 0)
        return -ENOMEM;
    strcpy(&str->data[str->used_len], extend);
    str->used_len += len;
    return len;
}
