    void CFontFileType1::CFFEncodeNumber(FontFileOutputFunc pOutputFunc, void *pOutputStream, double dValue)
    {
        char nChar = 0;

        WriteChar( 0x1e ); // начало десятичного числа

        std::wstring sValue = std::to_wstring(dValue);
        bool bFirstNibble = true;
        for ( int nIndex = 0; nIndex < sValue.length(); nIndex++ )
        {
            int nCurChar = sValue.c_str()[ nIndex ];
            if ( '0' <= nCurChar && nCurChar <= '9' )
                nCurChar -= (int)('0');
            else if ( '.' == nCurChar )
                nCurChar = 0x0a;
            else if ( '-' == nCurChar )
                nCurChar = 0x0e;
            else
                continue;

            if ( bFirstNibble )
                nChar = nCurChar << 4;
            else
            {
                nChar += nCurChar;
                WriteChar( nChar );
            }

            bFirstNibble = !bFirstNibble;
        }

        // Записываем окончаниедесятичного числа
        if ( bFirstNibble )
            nChar = (char)0xff;
        else
            nChar += 0x0f;

        WriteChar( nChar );
    }
