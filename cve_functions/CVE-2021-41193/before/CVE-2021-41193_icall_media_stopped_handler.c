static void icall_media_stopped_handler(struct icall *icall, void *arg)
{
	struct wcall *wcall = arg;
	struct calling_instance *inst = wcall ? wcall->inst : NULL;

	(void)icall;
	
	if (!WCALL_VALID(wcall)) {
		warning("wcall(%p): ecall_media_stopped_handler: "
			"invalid wcall inst=%p\n", wcall, inst);
		return;
	}

	if (wcall->state != WCALL_STATE_TERM_LOCAL) {
		info("wcall(%p): ecall_media_stopped_handler: "
		     " ignoring media stopped in state %s\n",
		     wcall, wcall_state_name(wcall->state));
		return;
	}

	info(APITAG "wcall(%p): mstoph(%p)\n", wcall, inst->mstoph);

	if (inst->mstoph) {
		uint64_t now = tmr_jiffies();
		inst->mstoph(wcall->convid, inst->arg);
		info(APITAG "wcall(%p): mstoph took %llu ms \n",
		     wcall, tmr_jiffies() - now);
	}
}
