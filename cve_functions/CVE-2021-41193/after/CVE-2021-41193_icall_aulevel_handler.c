static void icall_aulevel_handler(struct icall *icall, struct list *levell, void *arg)
{
	struct wcall *wcall = arg;
	struct calling_instance *inst = wcall ? wcall->inst : NULL;
	char *json_str = NULL;
	char *info_str = NULL;
	uint64_t now;
	int err = 0;

	if (!WCALL_VALID(wcall)) {
		warning("wcall(%p): icall_aulevel_handler wcall not valid\n",
			wcall);
		return;
	}

	info("icall_aulevel_handler(%p): %d levels\n", wcall, list_count(levell));
	
	if (!inst->active_speakerh)
		return;
	
	err = audio_level_json(levell,
			       inst->userid, inst->clientid,
			       &json_str, &info_str);
	if (err) {
		warning("icall_aulevel_handler(%p): could not create json\n", wcall);
		return;
	}
		
	info(APITAG "wcall(%p): calling active_speakerh:%p with: %s\n",
	     wcall, inst->clients_reqh, info_str);
	now = tmr_jiffies();
	
	inst->active_speakerh(inst2wuser(inst), wcall->convid, json_str, inst->arg);
	
	info(APITAG "wcall(%p): active_speakerh took %llu ms\n",
	     wcall, tmr_jiffies() - now);

	mem_deref(json_str);
	mem_deref(info_str);
}
