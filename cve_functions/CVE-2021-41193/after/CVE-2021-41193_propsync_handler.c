static void propsync_handler(struct ecall *ecall)
{
	int vstate = ICALL_VIDEO_STATE_STOPPED;
	bool vstate_present = false;
	bool muted = false;
	bool muted_present = false;

	if (!ecall) {
		warning("ecall(%p): propsyc_handler ecall is NULL, "
			"ignoring props\n", ecall);
		return;
	}

	info("econn(%p): c3_props_recv: %H\n", ecall->econn,
	     econn_props_print, ecall->props_remote);
	info("ecall(%p): propsync_handler current recv_state %s\n",
	     ecall, icall_vstate_name(ecall->video.recv_state));

	propsync_get_states(ecall->props_remote,
			    &vstate_present,
			    &vstate,
			    &muted_present,
			    &muted);
    
	if (vstate_present && vstate != ecall->video.recv_state) {
		info("ecall(%p): propsync_handler updating recv_state "
		     "%s -> %s\n",
		     ecall,
		     icall_vstate_name(ecall->video.recv_state),
		     icall_vstate_name(vstate));
		
		ecall->video.recv_state = vstate;

		if (ecall->icall.vstate_changedh) {
			ICALL_CALL_CB(ecall->icall, vstate_changedh,
				      &ecall->icall, ecall->userid_peer,
				      ecall->clientid_peer, vstate, ecall->icall.arg);
		}
	}

	if (muted_present && muted != ecall->audio.remote_muted_state) {
		info("ecall(%p): propsync_handler updating mute_state "
		     "%s -> %s\n",
		     ecall,
		     muted ? "true" : "false",
		     ecall->audio.remote_muted_state ? "true" : "false");
		ecall->audio.remote_muted_state = muted;

		ICALL_CALL_CB(ecall->icall, muted_changedh,
			      &ecall->icall, 
			      ecall->userid_peer,
			      ecall->clientid_peer,
			      muted ? 1 : 0,
			      ecall->icall.arg);
	}

}
