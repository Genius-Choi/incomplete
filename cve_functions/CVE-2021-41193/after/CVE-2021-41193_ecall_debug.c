int ecall_debug(struct re_printf *pf, const struct ecall *ecall)
{
	char convid_anon[ANON_ID_LEN];
	char userid_anon[ANON_ID_LEN];
	char clientid_anon[ANON_CLIENT_LEN];
	int err = 0;

	if (!ecall)
		return 0;

	err |= re_hprintf(pf, "ECALL SUMMARY %p:\n", ecall);
	err |= re_hprintf(pf, "convid:      %s\n", anon_id(convid_anon, ecall->convid));
	err |= re_hprintf(pf, "userid_self: %s\n", anon_id(userid_anon, ecall->userid_self));
	err |= re_hprintf(pf, "clientid:    %s\n",
			  anon_client(clientid_anon, ecall->clientid_self));
	err |= re_hprintf(pf, "async_sdp:   %s\n",
			  async_sdp_name(ecall->sdp.async));
	err |= re_hprintf(pf, "answered:    %s\n",
			  ecall->answered ? "Yes" : "No");
	err |= re_hprintf(pf, "estab_time:  %d ms\n", ecall->call_estab_time);
	err |= re_hprintf(pf, "audio_setup_time:  %d ms\n",
			  ecall->audio_setup_time);

	if (ecall->flow && ecall->flow->debug) {
		err |= re_hprintf(pf, "mediaflow:   %H\n",
				  ecall->flow->debug, ecall->flow);
	}
	else {
		err |= re_hprintf(pf, "mediaflow:   None\n");
	}

	err |= re_hprintf(pf, "props_local:  %H\n",
			  econn_props_print, ecall->props_local);
	err |= re_hprintf(pf, "props_remote: %H\n",
			  econn_props_print, ecall->props_remote);

	if (ecall->econn) {
		err |= econn_debug(pf, ecall->econn);
	}
	else {
		err |= re_hprintf(pf, "econn:   None\n");
	}

	if (ecall->userid_peer) {
		err |= re_hprintf(pf, "userid_peer: %s\n",
				  anon_id(userid_anon, ecall->userid_peer));
	}
/* TODO fix dce status
	if (peerflow_get_dce(ecall->flow)) {
		err |= re_hprintf(pf, "DCE: %H\n",
				  dce_status, peerflow_get_dce(ecall->flow));
	}
*/
	err |= ecall_show_trace(pf, ecall);

	return err;
}
