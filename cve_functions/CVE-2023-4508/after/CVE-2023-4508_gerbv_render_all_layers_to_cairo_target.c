gerbv_render_all_layers_to_cairo_target (gerbv_project_t *gerbvProject,
		cairo_t *cr, gerbv_render_info_t *renderInfo)
{
	int i;

	/* Fill the background with the appropriate color. */
	cairo_set_source_rgba (cr,
			(double) gerbvProject->background.red/G_MAXUINT16,
			(double) gerbvProject->background.green/G_MAXUINT16,
			(double) gerbvProject->background.blue/G_MAXUINT16, 1);
	cairo_paint (cr);

	for (i = gerbvProject->last_loaded; i >= 0; i--) {
		if (gerbvProject->file[i] && gerbvProject->file[i]->isVisible) {
			cairo_push_group (cr);
			gerbv_render_layer_to_cairo_target (cr,
					gerbvProject->file[i], renderInfo);
			cairo_pop_group_to_source (cr);
			cairo_paint_with_alpha (cr, (double)
					gerbvProject->file[i]->alpha/G_MAXUINT16);
		}
	}
}
