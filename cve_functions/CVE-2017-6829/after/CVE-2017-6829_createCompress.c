IMA *IMA::createCompress(Track *track, File *fh, bool canSeek,
	bool headerless, AFframecount *chunkFrames)
{
	assert(fh->tell() == track->fpos_first_frame);

	IMA *ima = new IMA(Compress, track, fh, canSeek);

	if (!ima->m_imaType)
	{
		_af_error(AF_BAD_CODEC_CONFIG, "IMA type not set");
		delete ima;
		return NULL;
	}

	*chunkFrames = ima->m_framesPerPacket;
	return ima;
}
