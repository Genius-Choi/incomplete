    SipMsgData_t::SipMsgData_t( msg_t* msg, nta_outgoing_t* orq, const char* source ) : m_source(source) {
        su_time_t now = su_now() ;
        unsigned short second, minute, hour;
        char time[64] ;
        tport_t *tport = nta_outgoing_transport( orq ) ;    //adds a a reference
        //assert( tport ) ; //why would this ever be null?

        second = (unsigned short)(now.tv_sec % 60);
        minute = (unsigned short)((now.tv_sec / 60) % 60);
        hour = (unsigned short)((now.tv_sec / 3600) % 24);
        sprintf(time, "%02u:%02u:%02u.%06lu", hour, minute, second, now.tv_usec) ;
 
        m_time.assign( time ) ;

        if( tport_is_udp(tport ) ) m_protocol = "udp" ;
        else if( tport_is_tcp( tport)  ) m_protocol = "tcp" ;
        else if( tport_has_tls( tport ) ) m_protocol = "tls" ;
        else m_protocol = "unknown";

        init( msg ) ;

        if( 0 == strcmp(source, "application") ) {
            if( NULL != tport ) {
                const tp_name_t* name = tport_name(tport) ;
                m_address = name->tpn_host ;
                m_port = name->tpn_port ;                
            }
            //
            /*
            else {
                m_address = theOneAndOnlyController->getMyDefaultSipAddress() ;
                m_port = theOneAndOnlyController->getMyDefaultSipPort() ;
            }
            */
        }


        tport_unref( tport ) ;

    }
