  void expectUnhealthyTransition(size_t index, bool first_check) {
    EXPECT_CALL(*this, onHostStatus(_, HealthTransition::Changed));
    EXPECT_CALL(*test_sessions_[index]->timeout_timer_, disableTimer());
    EXPECT_CALL(*test_sessions_[index]->interval_timer_, enableTimer(_, _));
    if (first_check) {
      EXPECT_CALL(event_logger_, logUnhealthy(_, _, _, _));
    }
    EXPECT_CALL(event_logger_, logEjectUnhealthy(_, _, _));
  }
