m_microtime(const struct mbuf *m, struct timeval *tv)
{
	if (ISSET(m->m_pkthdr.csum_flags, M_TIMESTAMP)) {
		struct timeval btv, utv;

		NSEC_TO_TIMEVAL(m->m_pkthdr.ph_timestamp, &utv);
		microboottime(&btv);
		timeradd(&btv, &utv, tv);
	} else
		microtime(tv);
}
