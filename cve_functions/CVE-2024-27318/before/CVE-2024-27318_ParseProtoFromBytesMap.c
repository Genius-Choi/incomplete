std::pair<std::unique_ptr<Ts[]>, std::unordered_map<std::string, T*>> ParseProtoFromBytesMap(
    std::unordered_map<std::string, py::bytes> bytesMap) {
  std::unique_ptr<Ts[]> values(new Ts[bytesMap.size()]);
  std::unordered_map<std::string, T*> result;
  size_t i = 0;
  for (auto kv : bytesMap) {
    ParseProtoFromPyBytes(&values[i], kv.second);
    result[kv.first] = &values[i];
    i++;
  }
  return std::make_pair(std::move(values), result);
}
