public void close_altfile(constant char *altfilename, constant char *filename)
{
#if HAVE_POPEN
	constant char *lessclose;
	char *qfilename;
	char *qaltfilename;
	FILE *fd;
	char *cmd;
	size_t len;
	
	if (!secure_allow(SF_LESSOPEN))
		return;
	if ((lessclose = lgetenv("LESSCLOSE")) == NULL)
		return;
	if (num_pct_s(lessclose) > 2) 
	{
		error("LESSCLOSE ignored; must contain no more than 2 %%s", NULL_PARG);
		return;
	}
	qfilename = shell_quote(filename);
	qaltfilename = shell_quote(altfilename);
	len = strlen(lessclose) + strlen(qfilename) + strlen(qaltfilename) + 2;
	cmd = (char *) ecalloc(len, sizeof(char));
	SNPRINTF2(cmd, len, lessclose, qfilename, qaltfilename);
	free(qaltfilename);
	free(qfilename);
	fd = shellcmd(cmd);
	free(cmd);
	if (fd != NULL)
		pclose(fd);
#endif
}
