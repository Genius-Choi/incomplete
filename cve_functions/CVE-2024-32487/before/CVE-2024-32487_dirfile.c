public char * dirfile(constant char *dirname, constant char *filename, int must_exist)
{
	char *pathname;
	size_t len;
	int f;

	if (dirname == NULL || *dirname == '\0')
		return (NULL);
	/*
	 * Construct the full pathname.
	 */
	len = strlen(dirname) + strlen(filename) + 2;
	pathname = (char *) calloc(len, sizeof(char));
	if (pathname == NULL)
		return (NULL);
	SNPRINTF3(pathname, len, "%s%s%s", dirname, PATHNAME_SEP, filename);
	if (must_exist)
	{
		/*
		 * Make sure the file exists.
		 */
		f = open(pathname, OPEN_READ);
		if (f < 0)
		{
			free(pathname);
			pathname = NULL;
		} else
		{
			close(f);
		}
	}
	return (pathname);
}
