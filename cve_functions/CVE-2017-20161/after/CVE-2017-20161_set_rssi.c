static int set_rssi(struct wlaninfo *w) {
	int i = -1;
//	if(w->essid[0]) i = get_wlan_by_essid(w->essid);
	lock();
	if(i == -1) i = get_wlan_by_mac(w->mac);
	if(i == -1) i = get_new_wlan();
	if(i != -1) {
		struct wlaninfo *d = &wlans[i];
		if(w->essid[0]) strcpy(d->essid, w->essid);
		memcpy(d->mac, w->mac, 6);
		d->total_rssi += w->last_rssi;
		d->count++;
		d->last_rssi = w->last_rssi;
		d->channel = w->channel;
	}
	unlock();
	return i;
}
