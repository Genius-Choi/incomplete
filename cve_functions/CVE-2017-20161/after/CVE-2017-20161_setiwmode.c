static int setiwmode(const char *dev, int mode) {
	int fd, ret = -1;
	if((fd = socket(AF_INET, SOCK_DGRAM, 0)) < 0) return -1;
	struct iwreq iwr = {.u.mode = mode};
	strcpy(iwr.ifr_name, dev);
	ret = ioctl(fd, SIOCSIWMODE, &iwr);
	close(fd);
	return ret;
}
