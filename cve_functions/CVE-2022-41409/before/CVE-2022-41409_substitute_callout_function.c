substitute_callout_function(pcre2_substitute_callout_block_8 *scb,
  void *data_ptr)
{
int yield = 0;
BOOL utf = (FLD(compiled_code, overall_options) & PCRE2_UTF) != 0;
(void)data_ptr;   /* Not used */

fprintf(outfile, "%2d(%d) Old %" SIZ_FORM " %" SIZ_FORM " \"",
  scb->subscount, scb->oveccount,
  scb->ovector[0], scb->ovector[1]);

PCHARSV(scb->input, scb->ovector[0], scb->ovector[1] - scb->ovector[0],
  utf, outfile);

fprintf(outfile, "\" New %" SIZ_FORM " %" SIZ_FORM " \"",
  scb->output_offsets[0], scb->output_offsets[1]);

PCHARSV(scb->output, scb->output_offsets[0],
  scb->output_offsets[1] - scb->output_offsets[0], utf, outfile);

if (scb->subscount == dat_datctl.substitute_stop)
  {
  yield = -1;
  fprintf(outfile, " STOPPED");
  }
else if (scb->subscount == dat_datctl.substitute_skip)
  {
  yield = +1;
  fprintf(outfile, " SKIPPED");
  }

fprintf(outfile, "\"\n");
return yield;
}
