void write(Socket& s, ConstBuffer<uint8_t> buf, Yield yield)
{
  suppressC4100(yield);
#ifdef BUILD_TEST
  if constexpr (is_same_v<Socket, pichi::test::Stream>)
    asio::write(s, asio::buffer(buf));
  else
#endif // BUILD_TEST
    asio::async_write(s, asio::buffer(buf), yield);
}
