static int copyData(struct archive *archive, struct archive *writer) {
  const void *buff;
  size_t size;
  la_int64_t offset;

  for (;;) {
    auto res = archive_read_data_block(archive, &buff, &size, &offset);
    if (res == ARCHIVE_EOF) {
      return ARCHIVE_OK;
    }
    if (res < ARCHIVE_OK) {
      return res;
    }
    res = (int)archive_write_data_block(writer, buff, size, offset);
    if (res < ARCHIVE_OK) {
      LOG.info(archive_error_string(writer));
      return res;
    }
  }
}
