downloadWithFallback(std::string url, const std::string &hash,
                     std::optional<std::string> fallbackUrl) {
  auto mainUrlDownload = cachedDownload(url);
  if (mainUrlDownload.has_value()) {
    if (validateHash(mainUrlDownload.value(), hash)) {
      return mainUrlDownload;
    }
  }
  if (!fallbackUrl.has_value()) {
    LOG.warn(std::format("No fallback URL for {} listed", url));
    return std::nullopt;
  }
  LOG.info(std::format("Attempting fallback URL {} for {}", fallbackUrl.value(),
                       url));
  auto fallbackUrlDownload = cachedDownload(fallbackUrl.value());
  if (fallbackUrlDownload.has_value()) {
    if (validateHash(fallbackUrlDownload.value(), hash)) {
      return fallbackUrlDownload;
    }
  }
  LOG.warn("Unable to find any matching URL!");
  return std::nullopt;
}
