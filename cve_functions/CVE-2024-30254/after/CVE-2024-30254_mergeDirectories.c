void mergeDirectories(const std::filesystem::path &sourcePath,
                      const std::filesystem::path &destinationPath) {
  try {
    for (const auto &entry :
         std::filesystem::recursive_directory_iterator(sourcePath)) {
      auto relativePath = std::filesystem::relative(entry.path(), sourcePath);
      auto destination = destinationPath / relativePath;

      if (std::filesystem::is_directory(entry.status())) {
        std::filesystem::create_directories(destination);
      } else if (std::filesystem::is_regular_file(entry.status())) {
#ifdef _WIN32
        // https://sourceforge.net/p/mingw-w64/bugs/852/
        if (std::filesystem::exists(destination)) {
          std::filesystem::remove(destination);
        }
#endif
        std::filesystem::copy_file(
            entry.path(), destination,
            std::filesystem::copy_options::overwrite_existing);
      }
    }
  } catch (const std::exception &ex) {
    LOG.error(std::format("Error: {}", ex.what()));
  }
}
