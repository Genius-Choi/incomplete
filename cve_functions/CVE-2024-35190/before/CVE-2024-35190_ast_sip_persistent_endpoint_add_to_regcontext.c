int ast_sip_persistent_endpoint_add_to_regcontext(const char *regcontext)
{
	if (ast_strlen_zero(regcontext)) {
		return 0;
	}

	/* Make sure the regcontext exists */
	if (!ast_context_find_or_create(NULL, NULL, regcontext, "PJSIP")) {
		ast_log(LOG_ERROR, "Failed to create regcontext '%s'\n", regcontext);
		return -1;
	}

	/* Add any online endpoints */
	ao2_callback(persistent_endpoints, OBJ_NODATA, add_to_regcontext, (void *)regcontext);
	return 0;
}
