static bool parseServerPortFromTransport(PRTSP_MESSAGE response, uint16_t* port) {
    char* transport;
    char* portStart;

    transport = getOptionContent(response->options, "Transport");
    if (transport == NULL) {
        return false;
    }

    // Look for the server_port= entry in the Transport option
    portStart = strstr(transport, "server_port=");
    if (portStart == NULL) {
        return false;
    }

    // Skip the prefix
    portStart += strlen("server_port=");

    // Validate the port number
    long int rawPort = strtol(portStart, NULL, 10);
    if (rawPort <= 0 || rawPort > 65535) {
        return false;
    }

    *port = (uint16_t)rawPort;
    return true;
}
