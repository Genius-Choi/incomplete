static uint64_t get_mod_sequence_value(mailimap * session)
{
    uint64_t mod_sequence_value;
    clistiter * cur;
    
    mod_sequence_value = 0;
    for(cur = clist_begin(session->imap_response_info->rsp_extension_list) ; cur != NULL ; cur = clist_next(cur)) {
        struct mailimap_extension_data * ext_data;
        struct mailimap_condstore_resptextcode * resptextcode;
        
        ext_data = (struct mailimap_extension_data *) clist_content(cur);
        if (ext_data->ext_extension->ext_id != MAILIMAP_EXTENSION_CONDSTORE) {
            continue;
        }
        if (ext_data->ext_type != MAILIMAP_CONDSTORE_TYPE_RESP_TEXT_CODE) {
            continue;
        }
        
        resptextcode = (struct mailimap_condstore_resptextcode *) ext_data->ext_data;
        switch (resptextcode->cs_type) {
            case MAILIMAP_CONDSTORE_RESPTEXTCODE_HIGHESTMODSEQ:
                mod_sequence_value = resptextcode->cs_data.cs_modseq_value;
                break;
            case MAILIMAP_CONDSTORE_RESPTEXTCODE_NOMODSEQ:
                mod_sequence_value = 0;
                break;
        }
    }
    
    return mod_sequence_value;
}
