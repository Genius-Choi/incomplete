static int pbap_probe(struct obc_session *session)
{
	struct pbap_data *pbap;
	const char *path;

	path = obc_session_get_path(session);

	DBG("%s", path);

	pbap = g_try_new0(struct pbap_data, 1);
	if (!pbap)
		return -ENOMEM;

	pbap->session = obc_session_ref(session);

	parse_service_record(pbap);

	DBG("%s, version 0x%04x supported features 0x%08x", path, pbap->version,
						pbap->supported_features);

	if (!g_dbus_register_interface(conn, path, PBAP_INTERFACE, pbap_methods,
						NULL, pbap_properties, pbap,
						pbap_free)) {
		pbap_free(pbap);
		return -ENOMEM;
	}

	return 0;
}
