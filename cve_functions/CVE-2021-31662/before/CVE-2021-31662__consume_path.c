static char *_consume_path(uri_parser_result_t *result, char *uri,
                           char *uri_end)
{
    assert(uri);

    result->path = uri;
    result->path_len = (uri_end - uri);

    /* check for query start '?' */
    char *path_end = _strchrb(uri, uri_end, '?');

    /* no query string found, return! */
    if (!path_end) {
        return (result->path + result->path_len);
    }

    /* there is a query string */
    result->query = path_end + 1;
    /* do not count '?' */
    result->query_len = result->path_len - (path_end - uri) - 1;
    /* cut path part before query and '?' */
    result->path_len -= result->query_len + 1;

    return (result->query + result->query_len);
}
