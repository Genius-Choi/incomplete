void NppParameters::feedUserKeywordList(TiXmlNode *node)
{
	const TCHAR * udlVersion = _userLangArray[_nbUserLang - 1]->_udlVersion.c_str();
	int id = -1;

	for (TiXmlNode *childNode = node->FirstChildElement(TEXT("Keywords"));
		childNode ;
		childNode = childNode->NextSibling(TEXT("Keywords")))
	{
		const TCHAR * keywordsName = (childNode->ToElement())->Attribute(TEXT("name"));
		TiXmlNode *valueNode = childNode->FirstChild();
		if (valueNode)
		{
			const TCHAR *kwl = nullptr;
			if (!lstrcmp(udlVersion, TEXT("")) && !lstrcmp(keywordsName, TEXT("Delimiters")))	// support for old style (pre 2.0)
			{
				basic_string<TCHAR> temp;
				kwl = (valueNode)?valueNode->Value():TEXT("000000");

				temp += TEXT("00");	 if (kwl[0] != '0') temp += kwl[0];	 temp += TEXT(" 01");
				temp += TEXT(" 02");	if (kwl[3] != '0') temp += kwl[3];
				temp += TEXT(" 03");	if (kwl[1] != '0') temp += kwl[1];	 temp += TEXT(" 04");
				temp += TEXT(" 05");	if (kwl[4] != '0') temp += kwl[4];
				temp += TEXT(" 06");	if (kwl[2] != '0') temp += kwl[2];	 temp += TEXT(" 07");
				temp += TEXT(" 08");	if (kwl[5] != '0') temp += kwl[5];

				temp += TEXT(" 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23");
				wcscpy_s(_userLangArray[_nbUserLang - 1]->_keywordLists[SCE_USER_KWLIST_DELIMITERS], temp.c_str());
			}
			else if (!lstrcmp(keywordsName, TEXT("Comment")))
			{
				kwl = (valueNode)?valueNode->Value():TEXT("");
				//int len = _tcslen(kwl);
				basic_string<TCHAR> temp{TEXT(" ")};

				temp += kwl;
				size_t pos = 0;

				pos = temp.find(TEXT(" 0"));
				while (pos != string::npos)
				{
					temp.replace(pos, 2, TEXT(" 00"));
					pos = temp.find(TEXT(" 0"), pos+1);
				}
				pos = temp.find(TEXT(" 1"));
				while (pos != string::npos)
				{
					temp.replace(pos, 2, TEXT(" 03"));
					pos = temp.find(TEXT(" 1"));
				}
				pos = temp.find(TEXT(" 2"));
				while (pos != string::npos)
				{
					temp.replace(pos, 2, TEXT(" 04"));
					pos = temp.find(TEXT(" 2"));
				}

				temp += TEXT(" 01 02");
				if (temp[0] == ' ')
					temp.erase(0, 1);

				wcscpy_s(_userLangArray[_nbUserLang - 1]->_keywordLists[SCE_USER_KWLIST_COMMENTS], temp.c_str());
			}
			else
			{
				kwl = (valueNode)?valueNode->Value():TEXT("");
				if (globalMappper().keywordIdMapper.find(keywordsName) != globalMappper().keywordIdMapper.end())
				{
					id = globalMappper().keywordIdMapper[keywordsName];
					if (_tcslen(kwl) < max_char)
					{
						wcscpy_s(_userLangArray[_nbUserLang - 1]->_keywordLists[id], kwl);
					}
					else
					{
						wcscpy_s(_userLangArray[_nbUserLang - 1]->_keywordLists[id], TEXT("imported string too long, needs to be < max_char(30720)"));
					}
				}
			}
		}
	}
}
