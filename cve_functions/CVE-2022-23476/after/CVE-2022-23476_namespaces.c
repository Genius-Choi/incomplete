namespaces(VALUE self)
{
  xmlTextReaderPtr reader;
  xmlNodePtr ptr;
  VALUE attr ;

  Data_Get_Struct(self, xmlTextReader, reader);

  attr = rb_hash_new() ;

  if (! has_attributes(reader)) {
    return attr ;
  }

  ptr = xmlTextReaderExpand(reader);
  if (ptr == NULL) { return Qnil; }

  Nokogiri_xml_node_namespaces(ptr, attr);

  return attr ;
}
