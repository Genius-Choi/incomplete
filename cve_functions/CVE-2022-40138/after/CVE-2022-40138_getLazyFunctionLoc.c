SourceErrorManager::SourceCoords CodeBlock::getLazyFunctionLoc(
    bool start) const {
  assert(isLazy() && "Function must be lazy");
  SourceErrorManager::SourceCoords coords;
#ifndef HERMESVM_LEAN
  auto *provider = (hbc::BCProviderLazy *)getRuntimeModule()->getBytecode();
  auto *func = provider->getBytecodeFunction();
  auto *lazyData = func->getLazyCompilationData();
  lazyData->context->getSourceErrorManager().findBufferLineAndLoc(
      start ? lazyData->span.Start : lazyData->span.End, coords);
#endif
  return coords;
}
