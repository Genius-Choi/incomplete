upx_uint64_t PackMachBase<T>::get_mod_init_func(Mach_segment_command const *segptr)
{
    for (Mach_section_command const *secptr = (Mach_section_command const *)(1+ segptr);
        ptr_udiff(secptr, segptr) < segptr->cmdsize;
        ++secptr
    ) {
        if (sizeof(Addr) == secptr->size
        && !strcmp("__mod_init_func", secptr->sectname)) {
            o__mod_init_func = secptr->offset;
            fi->seek(o__mod_init_func, SEEK_SET);
            Addr tmp;
            fi->readx(&tmp, sizeof(Addr));
            return tmp;
        }
    }
    return 0;
}
