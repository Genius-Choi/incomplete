void StelScriptMgr::defVecClasses(QScriptEngine *engine)
{
	// Allow Vec3f management in scripts
	qScriptRegisterMetaType(engine, vec3fToScriptValue, vec3fFromScriptValue);
	QScriptValue ctorVec3f = engine->newFunction(createVec3f);
	engine->globalObject().setProperty("Vec3f", ctorVec3f);
	engine->globalObject().setProperty("Color", engine->newFunction(createColor));

	// Allow Vec3d management in scripts
	qScriptRegisterMetaType(engine, vec3dToScriptValue, vec3dFromScriptValue);
	QScriptValue ctorVec3d = engine->newFunction(createVec3d);
	engine->globalObject().setProperty("Vec3d", ctorVec3d);

	// Configure the new replacement types so that new scripts should work also with the old engine.

	qRegisterMetaType<V3d>();
	QMetaType::registerConverter<V3d,QString>(&V3d::toString);
	QMetaType::registerConverter<V3d, Vec3d>(&V3d::toVec3d);
	//QMetaType::registerConverter<Vec3d, V3d>(&V3d::fromVec3d);
	QScriptValue v3dMetaObject = engine->newQMetaObject(&V3d::staticMetaObject);
	engine->globalObject().setProperty("V3d", v3dMetaObject);

	qRegisterMetaType<V3f>();
	QMetaType::registerConverter<V3f,QString>(&V3f::toString);
	QMetaType::registerConverter<V3f, Vec3f>(&V3f::toVec3f);
	//QMetaType::registerConverter<Vec3f, V3f>(&V3f::fromVec3f);
	QScriptValue v3fMetaObject = engine->newQMetaObject(&V3f::staticMetaObject);
	engine->globalObject().setProperty("V3f", v3fMetaObject);
}
