rec_parser_init_common (rec_parser_t parser,
                        const char *source)
{
  if (source)
    {
      parser->source = strdup (source);
      if (!parser->source)
        return false;
    }
  else
    parser->source = NULL;

  parser->eof = false;
  parser->error = REC_PARSER_NOERROR;
  parser->line = 1;
  parser->character = 0;
  parser->prev_descriptor = NULL;
  parser->p = parser->in_buffer;

  return true;
}
