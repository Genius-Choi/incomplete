void Monitor::do_health_to_clog(bool force)
{
  // outputting to clog may have been disabled in the conf
  // since we were scheduled.
  if (!cct->_conf->mon_health_to_clog ||
      cct->_conf->mon_health_to_clog_interval <= 0)
    return;

  dout(10) << __func__ << (force ? " (force)" : "") << dendl;

  list<string> status;
  health_status_t overall = get_health(status, NULL, NULL);

  dout(25) << __func__
           << (force ? " (force)" : "")
           << dendl;

  string summary = joinify(status.begin(), status.end(), string("; "));

  if (!force &&
      overall == health_status_cache.overall &&
      !health_status_cache.summary.empty() &&
      health_status_cache.summary == summary) {
    // we got a dup!
    return;
  }

  clog->info() << summary;

  health_status_cache.overall = overall;
  health_status_cache.summary = summary;
}
