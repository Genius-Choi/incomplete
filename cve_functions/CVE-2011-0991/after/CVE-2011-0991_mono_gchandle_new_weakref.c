mono_gchandle_new_weakref (MonoObject *obj, gboolean track_resurrection)
{
	guint32 handle = alloc_handle (&gc_handles [track_resurrection? HANDLE_WEAK_TRACK: HANDLE_WEAK], obj, track_resurrection);

#ifndef HAVE_SGEN_GC
	if (track_resurrection)
		mono_gc_add_weak_track_handle (obj, handle);
#endif

	return handle;
}
