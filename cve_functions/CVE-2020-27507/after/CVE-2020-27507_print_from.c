static inline char* print_from(char* w, dlg_t* dialog, struct cell* t, int bracket)
{
	t->from.s = w;
	t->from.len = FROM_LEN + dialog->loc_uri.len + CRLF_LEN
		+ ((dialog->loc_uri.s[dialog->loc_uri.len - 1]!='>')?2:0);

	memapp(w, FROM, FROM_LEN);
	if(bracket) memapp(w, "<", 1);
	memapp(w, dialog->loc_uri.s, dialog->loc_uri.len);
	if(bracket) memapp(w, ">", 1);

	if (dialog->id.loc_tag.len) {
		t->from.len += FROMTAG_LEN + dialog->id.loc_tag.len;
		memapp(w, FROMTAG, FROMTAG_LEN);
		memapp(w, dialog->id.loc_tag.s, dialog->id.loc_tag.len);
	}

	memapp(w, CRLF, CRLF_LEN);
	return w;
}
