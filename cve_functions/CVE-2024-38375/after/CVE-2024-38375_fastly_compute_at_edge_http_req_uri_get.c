bool fastly_compute_at_edge_http_req_uri_get(fastly_compute_at_edge_http_types_request_handle_t h,
                                             fastly_world_string_t *ret,
                                             fastly_compute_at_edge_types_error_t *err) {
  ret->ptr = static_cast<uint8_t *>(cabi_malloc(URI_MAX_LEN, 1));
  if (!convert_result(
          fastly::req_uri_get(h, reinterpret_cast<char *>(ret->ptr), URI_MAX_LEN, &ret->len),
          err)) {
    cabi_free(ret->ptr);
    return false;
  }
  ret->ptr = static_cast<uint8_t *>(cabi_realloc(ret->ptr, URI_MAX_LEN, 1, ret->len));
  return true;
}
