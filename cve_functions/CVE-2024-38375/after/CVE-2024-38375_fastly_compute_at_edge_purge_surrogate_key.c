bool fastly_compute_at_edge_purge_surrogate_key(
    fastly_world_string_t *surrogate_key, fastly_compute_at_edge_purge_options_mask_t options_mask,
    fastly_world_option_string_t *ret, fastly_compute_at_edge_types_error_t *err) {
  fastly::PurgeOptions options{nullptr, 0, nullptr};

  // Currently this host-call has been implemented to support the `SimpleCache.delete(key)` method,
  // which uses hard-purging and not soft-purging.
  // TODO: Create a JS API for this hostcall which supports hard-purging and another which supports
  // soft-purging. E.G. `fastly.purgeSurrogateKey(key)` and `fastly.softPurgeSurrogateKey(key)`
  MOZ_ASSERT(!(options_mask & FASTLY_COMPUTE_AT_EDGE_PURGE_OPTIONS_MASK_SOFT_PURGE));
  MOZ_ASSERT(!(options_mask & FASTLY_COMPUTE_AT_EDGE_PURGE_OPTIONS_MASK_RET_BUF));

  ret->is_some = false;

  return convert_result(fastly::purge_surrogate_key(reinterpret_cast<char *>(surrogate_key->ptr),
                                                    surrogate_key->len, options_mask, &options),
                        err);
}
