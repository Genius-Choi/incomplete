void pico_tcp_out_all(struct pico_stack *S, void *arg)
{
    struct pico_socket_tcp *t = (struct pico_socket_tcp *)arg;
    (void)S;
    if (t) {
        struct pico_socket *s = &t->sock;
        pico_tcp_output(&t->sock, (int)t->tcpq_out.frames);
        if ((s->ev_pending) && s->wakeup) {
            s->wakeup(s->ev_pending, s);
            if(!s->parent)
                s->ev_pending = 0;
        }

        if(pico_socket_sanity_check(s) < 0)
        {
            pico_socket_del(s);
        }
    }
}
