GF_Err gf_filter_pid_allow_direct_dispatch(GF_FilterPid *pid)
{
	if (PID_IS_INPUT(pid)) {
		GF_LOG(GF_LOG_ERROR, GF_LOG_FILTER, ("Attempt to set direct dispatch mode on input pid %s in filter %s not allowed\n", pid->pid->name, pid->filter->name));
		return GF_BAD_PARAM;
	}
#ifndef GPAC_DISABLE_THREADS
	if (pid->filter->session->threads)
		return GF_OK;
#endif
	pid->direct_dispatch = GF_TRUE;
	return GF_OK;
}
