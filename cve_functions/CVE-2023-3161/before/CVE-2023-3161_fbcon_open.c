static int fbcon_open(struct fb_info *info)
{
	struct fbcon_ops *ops;

	if (!try_module_get(info->fbops->owner))
		return -ENODEV;

	lock_fb_info(info);
	if (info->fbops->fb_open &&
	    info->fbops->fb_open(info, 0)) {
		unlock_fb_info(info);
		module_put(info->fbops->owner);
		return -ENODEV;
	}
	unlock_fb_info(info);

	ops = kzalloc(sizeof(struct fbcon_ops), GFP_KERNEL);
	if (!ops) {
		fbcon_release(info);
		return -ENOMEM;
	}

	INIT_DELAYED_WORK(&ops->cursor_work, fb_flashcursor);
	ops->info = info;
	info->fbcon_par = ops;
	ops->cur_blink_jiffies = HZ / 5;

	return 0;
}
