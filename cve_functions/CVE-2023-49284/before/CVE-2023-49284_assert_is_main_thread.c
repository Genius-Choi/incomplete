void assert_is_main_thread(const char *who) {
    if (!likely(is_main_thread()) && !unlikely(thread_asserts_cfg_for_testing)) {
        FLOGF(error, L"%s called off of main thread.", who);
        FLOGF(error, L"Break on debug_thread_error to debug.");
        debug_thread_error();
    }
}
