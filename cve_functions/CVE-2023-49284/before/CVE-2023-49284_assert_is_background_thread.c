void assert_is_background_thread(const char *who) {
    if (unlikely(is_main_thread()) && !unlikely(thread_asserts_cfg_for_testing)) {
        FLOGF(error, L"%s called on the main thread (may block!).", who);
        FLOG(error, L"Break on debug_thread_error to debug.");
        debug_thread_error();
    }
}
