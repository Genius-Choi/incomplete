          [&](HeaderMapPtr&& response_headers, bool end_stream) -> void {
            parent_.chargeStats(*response_headers);
            parent_.response_headers_ = std::move(response_headers);
            parent_.response_encoder_->encodeHeaders(*parent_.response_headers_, end_stream);
            parent_.state_.local_complete_ = end_stream;
          },
