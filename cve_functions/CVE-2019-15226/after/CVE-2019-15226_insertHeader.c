static void insertHeader(std::vector<nghttp2_nv>& headers, const HeaderEntry& header) {
  uint8_t flags = 0;
  if (header.key().type() == HeaderString::Type::Reference) {
    flags |= NGHTTP2_NV_FLAG_NO_COPY_NAME;
  }
  if (header.value().type() == HeaderString::Type::Reference) {
    flags |= NGHTTP2_NV_FLAG_NO_COPY_VALUE;
  }
  const absl::string_view header_key = header.key().getStringView();
  const absl::string_view header_value = header.value().getStringView();
  headers.push_back({remove_const<uint8_t>(header_key.data()),
                     remove_const<uint8_t>(header_value.data()), header_key.size(),
                     header_value.size(), flags});
}
