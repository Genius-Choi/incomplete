ClientConnectionImpl::ClientConnectionImpl(Network::Connection& connection,
                                           Http::ConnectionCallbacks& callbacks,
                                           Stats::Scope& stats, const Http2Settings& http2_settings,
                                           const uint32_t max_request_headers_kb)
    : ConnectionImpl(connection, stats, http2_settings, max_request_headers_kb),
      callbacks_(callbacks) {
  ClientHttp2Options client_http2_options(http2_settings);
  nghttp2_session_client_new2(&session_, http2_callbacks_.callbacks(), base(),
                              client_http2_options.options());
  sendSettings(http2_settings, true);
  allow_metadata_ = http2_settings.allow_metadata_;
}
