bool icCurvesFromXml(LPIccCurve *pCurve, icUInt32Number nChannels, xmlNode *pNode, icConvertType nType, std::string &parseStr)
{
  icUInt32Number i;
  xmlNode *pCurveNode;

  for (i=0, pCurveNode = pNode; i<nChannels && pCurveNode; pCurveNode=pCurveNode->next) {
    if (pCurveNode->type==XML_ELEMENT_NODE) {
      CIccCurve *pCurveTag = NULL;
      if (!icXmlStrCmp(pCurveNode->name, "Curve")) {
        pCurveTag = new CIccTagXmlCurve;
      }
      else if (!icXmlStrCmp(pCurveNode->name, "ParametricCurve")) {
        pCurveTag = new CIccTagXmlParametricCurve();
      }

      if (pCurveTag) {
        IIccExtensionTag *pExt = pCurveTag->GetExtension();

        if (pExt) {
          if (!strcmp(pExt->GetExtDerivedClassName(), "CIccCurveXml")) {
            CIccCurveXml *pCurveXml = (CIccCurveXml *)pExt;

            if (pCurveXml->ParseXml(pCurveNode, nType, parseStr)) {
              pCurve[i] = pCurveTag;
              i++;
            }
            // added else statement
            else  {
              char num[40];
              parseStr += "Unable to parse curve at Line";
              sprintf(num, "%d\n", pCurveNode->line);
              parseStr += num;
              return false;
            }
          }
          else if (!strcmp(pExt->GetExtClassName(), "CIccTagXml")) {
            CIccTagXml *pXmlTag = (CIccTagXml *)pExt;

            if (pXmlTag->ParseXml(pCurveNode, parseStr)) {
              pCurve[i] = pCurveTag;
              i++;
            }
            // added else statement
            else {
              char num[40];
              parseStr += "Unable to parse curve tag at Line";
              sprintf(num, "%d\n", pCurveNode->line);
              parseStr += num;
              return false;
            }
          }
        }
      }
    }
  }
  if (!i != nChannels) {
    parseStr += "Channel number mismatch!\n";
  }
  return i==nChannels;
}
