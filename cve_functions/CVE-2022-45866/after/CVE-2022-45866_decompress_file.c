void decompress_file(string dest_file)
{
    pthread_t thread[MAX_THREAD_COUNT];
    size_t i;
    end_of_file = false;
    chunks_read = 0;
    chunks_written = 0;
    void *status;

	try_aopen(dest_file.c_str(), 'w');

    for(i = 0; i < threads; i++)
    {
        pthread_create(&thread[i], NULL, decompress_file_thread, (void *)i);
    }

    for(i = 0; i < threads; i++)
    {
        pthread_join(thread[i], &status);
    }

	if(dest_file != "<stdout>")
		aclose_write();
}
