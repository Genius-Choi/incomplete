void print_usage()
{
    string usage =
    "Compression:\n"
    "    qpress [-rovfCBPLKT] <source file/dir search pattern> <destination file>\n"
    "    qpress -i[ovfBPLKT] <filename to give stdin data> <destination file>\n\n"
    "Decompression:\n"
    "    qpress -d[ovfBPTn] <source file> <destination directory>\n\n"
    "Benchmark and recovery:\n"
    "    qpress -m[LT] <source file>\n"
    "    qpress -R <corrupted compressed file> <destination directory>\n\n"
    "Flags:\n"
    "    -d   Decompress\n"
    "    -Ln  Set compression level to n where n = 1, 2 or 3 (default = 1)\n"
    "    -r   Include sub directories during compression\n"
    "    -v   Show progress information during compression and decompression\n"
	"    -i   Read from stdin (omit source file or file/dir search pattern)\n"
	"    -o   Write to stdout (omit destination file or directory)\n"
    "    -f   Overwrite existing files during compression and decompression (default\n"
    "         is to abort)\n"
    "    -C   Continue if a source file cannot be opened during compression (default\n"
    "         is to abort)\n"
    "    -Tn  Use n threads/cores where n = 1 to " + str(MAX_THREAD_COUNT) + " (default = " + str(DEFAULT_THREAD_COUNT) + "). Be aware of\n"
    "         memory usage with large n\n"
    "    -Kn  Read from disk in n KiB chunks during compression where n = " + str(AIO_MAX_SECTOR_SIZE >> 10) + " to\n" +
    "         " + str(MAX_COMPRESS_CHUNK_SIZE >> 10) + " (default = " + str(DEFAULT_COMPRESS_CHUNK_SIZE >> 10) + "). Be aware of memory usage with large n\n"
	//  "================================================================================\n"
    "    -B   Windows only: Disable file system caching (FILE_FLAG_NO_BUFFERING) to\n"
    "         prevent cache of other applications from being be flushed. Keep\n"
    "         enabled if files are small and need further processing\n"
    "    -Pn  Windows only: Set CPU and disk I/O priority to n where 1 = BACKGORUND\n"
	"         (Vista, 7, 2008 only), 2 = IDLE, 3 = NORMAL or 4 = ABOVE (default = 3)\n\n"
    "Examples of compression:\n"
#ifdef WINDOWS
    "    qpress -rv d:\\dir\\* database.qp\n"
    "    qpress -vfK4096T2 ../dir/*.xml database.qp 2> log.txt\n"
    "    qpress -ovL3K *.xml > database.qp\n"
    "    type database.xml | qpress -io database.xml > database.qp\n"
    "    type database.xml | qpress -i database.xml database.qp\n\n"
    "Examples of decompression:\n"
    "    qpress -d database.qp d:\\dir\n"
    "    qpress -do database.qp > database.xml\n"
    "    type database.qp | qpress -di .\n\n"
#else
    "    qpress -v file1.xml file2.xml file3.xml database.qp\n"
    "    qpress -vfK4096T2 *.xml database.qp 2> log.txt\n"
    "    qpress -ovL3K *.xml > database.qp\n"
    "    cat database.xml | qpress -i database.xml database.qp\n"
    "    cat database.xml | qpress -io database.xml > database.qp\n\n"
    "Examples of decompression:\n"
    "    qpress -d database.qp ./dir\n"
    "    qpress -do database.qp > database.xml\n"
    "    cat database.qp | qpress -di .\n\n"
#endif
    "Notes:\n"
    "When compressing on *nix with -r flag, file/dir search pattern only filters in\n"
	"top level directory (directories matching in top level will be included fully).\n\n"
//  "================================================================================\n" // 80 chars of "="
    "If a compressed file contains multiple files and is decompressed to stdout, all\n"
    "files will be concatenated in a continuous stream.\n\n"
    "It's recommended to use .qp as filename suffix.\n";
    PRINT(FATAL_ERROR, "qpress 1.1 - Copyright 2006-2010 Lasse Reinhold - www.quicklz.com\n");
    PRINT(FATAL_ERROR, "Using QuickLZ 1.4.1 compression library\n");

	PRINT(FATAL_ERROR, "Compiled for: ");
	#ifdef WINDOWS
		PRINT(FATAL_ERROR, "[Windows] *nix    ");
	#else
		PRINT(FATAL_ERROR, "Windows [*nix]    ");
	#endif

	#ifdef X86X64
		PRINT(FATAL_ERROR, "[x86/x64] RISC    ");
	#else
		PRINT(FATAL_ERROR, "x86/x64 [RISC]    ");
	#endif

	if(sizeof(size_t) == 8)
		PRINT(FATAL_ERROR, "32-bit [64-bit]");
	else
		PRINT(FATAL_ERROR, "[32-bit] 64-bit");

    PRINT(FATAL_ERROR, "\n\n%s", usage.c_str());
	exit(-1);
}
