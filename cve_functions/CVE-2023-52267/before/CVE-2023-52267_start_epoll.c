int EpollSocket::start_epoll() {
    /* Ignore broken pipe signal. */
    signal(SIGPIPE, SIG_IGN);

    int ret = init_tp();
    CHECK_RET(ret, "thread pool start error:%d", ret);

    ret = this->listen_on();
    CHECK_RET(ret, "listen err:%d", ret);

    ret = this->create_epoll();
    CHECK_RET(ret, "create epoll err:%d", ret);

    ret = this->add_listen_sock_to_epoll();
    CHECK_RET(ret , "add listen sock to epoll fail:%d", ret);

    return start_event_loop();
}
