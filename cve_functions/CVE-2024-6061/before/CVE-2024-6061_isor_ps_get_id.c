static s32 isor_ps_get_id(u8 nal_type, u8 *data, u32 size, Bool is_avc)
{
	s32 res=-1;
	GF_BitStream *bs = gf_bs_new(data, size, GF_BITSTREAM_READ);
	gf_bs_enable_emulation_byte_removal(bs, GF_TRUE);
	switch (nal_type) {
	case GF_AVC_NALU_PIC_PARAM:
		gf_bs_read_u8(bs); //nal header
		res = gf_bs_read_ue(bs);
		break;
	case GF_AVC_NALU_SEQ_PARAM:
		gf_bs_read_u32(bs); //nal header + start of sps
		res = gf_bs_read_ue(bs);
		break;
	case GF_HEVC_NALU_VID_PARAM:
		gf_bs_read_u16(bs); //nal header
		res = gf_bs_read_int(bs, 4);
		break;
	case GF_HEVC_NALU_SEQ_PARAM:
#ifndef GPAC_DISABLE_AV_PARSERS
		res = gf_hevc_read_sps(data, size, NULL);
#else
		res = -1;
#endif
		break;
	case GF_HEVC_NALU_PIC_PARAM:
		gf_bs_read_u16(bs); //nal header
		res = gf_bs_read_ue(bs);
		break;
	case GF_VVC_NALU_VID_PARAM:
		gf_bs_read_u16(bs); //nal header
		res = gf_bs_read_int(bs, 4);
		break;
	case GF_VVC_NALU_SEQ_PARAM:
		gf_bs_read_u16(bs); //nal header
		res = gf_bs_read_int(bs, 4);
		break;
	case GF_VVC_NALU_PIC_PARAM:
		gf_bs_read_u16(bs); //nal header
		res = gf_bs_read_int(bs, 6);
		break;
	//case GF_AVC_NALU_SEQ_PARAM_EXT: - same value as VVC_DEC_PARAM
	case GF_VVC_NALU_DEC_PARAM:
		if (is_avc) {
			gf_bs_read_u8(bs); //nal header
			res = (s32) gf_bs_read_ue(bs);
		} else {
			res = 0; //no ID for DCI
		}
		break;
	}
	gf_bs_del(bs);
	return res;
}
