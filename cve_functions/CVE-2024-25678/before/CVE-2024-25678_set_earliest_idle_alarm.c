set_earliest_idle_alarm (struct ietf_full_conn *conn, lsquic_time_t idle_conn_to)
{
    lsquic_time_t exp;

    if (conn->ifc_pub.last_prog
        && (assert(conn->ifc_mflags & MF_NOPROG_TIMEOUT),
            exp = conn->ifc_pub.last_prog + conn->ifc_enpub->enp_noprog_timeout,
            exp < idle_conn_to))
        idle_conn_to = exp;
    if (idle_conn_to)
        lsquic_alarmset_set(&conn->ifc_alset, AL_IDLE, idle_conn_to);
}
