ietf_full_conn_ci_mtu_probe_acked (struct lsquic_conn *lconn,
                                   const struct lsquic_packet_out *packet_out)
{
    struct ietf_full_conn *const conn = (struct ietf_full_conn *) lconn;
    struct conn_path *cpath;
    struct dplpmtud_state *ds;
    unsigned char path_id;

    path_id = packet_out->po_path->np_path_id;
    cpath = &conn->ifc_paths[path_id];
    ds = &cpath->cop_dplpmtud;
    if (ds->ds_probe_packno != packet_out->po_packno)
    {
        LSQ_DEBUG("Acked MTU probe packet %"PRIu64" on path %hhu, but it is "
            "old: discard", packet_out->po_packno, path_id);
        return;
    }
    ds->ds_flags &= ~DS_PROBE_SENT;
    ds->ds_probe_count = 0;

    cpath->cop_path.np_pack_size = lsquic_packet_out_sent_sz(&conn->ifc_conn,
                                                                    packet_out);
    LSQ_INFO("update path %hhu MTU to %hu bytes", path_id,
                                                cpath->cop_path.np_pack_size);
    conn->ifc_mflags &= ~MF_CHECK_MTU_PROBE;
    lsquic_alarmset_set(&conn->ifc_alset, AL_MTU_PROBE,
                packet_out->po_sent + conn->ifc_enpub->enp_mtu_probe_timer);
    LSQ_DEBUG("set alarm to %"PRIu64" usec ", packet_out->po_sent + conn->ifc_enpub->enp_mtu_probe_timer);
}
