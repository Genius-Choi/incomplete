nano_dismsg_composer(reason_code code, char* rstr, uint8_t *ref, property *prop)
{
	NNI_ARG_UNUSED(rstr);
	NNI_ARG_UNUSED(ref);
	NNI_ARG_UNUSED(prop);
	uint8_t  buf[5] = { 0x00 };
	nni_msg *msg;

	nni_msg_alloc(&msg, 0);

	switch (code)
	{
	case PROTOCOL_ERROR:
		buf[0] = (uint8_t)PROTOCOL_ERROR;
		nng_msg_append(msg, buf, 1);
		break;
	default:
		buf[0] = (uint8_t)UNSPECIFIED_ERROR;
		nng_msg_append(msg, buf, 1);
		break;
	}

	nng_msg_append(msg, buf+1, 1);
	buf[0] = CMD_DISCONNECT;
	buf[1] = 2;
	nng_msg_header_append(msg, buf, 2);
	nng_msg_set_cmd_type(msg, CMD_DISCONNECT);
	return msg;
}
