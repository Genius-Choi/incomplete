add_mathjax_script_node_to_file(gchar *filename, gchar *data)
{
    xmlDocPtr mathdocument = xmlParseFile (filename);
    xmlNodePtr mathroot = xmlDocGetRootElement(mathdocument);

    if (mathroot == NULL)
        return;

    xmlNodePtr head = mathroot->children;

    while(head != NULL) {
        if (!xmlStrcmp(head->name,(xmlChar*)"head")) {
            break;
        }
        head = head->next;
    }

    if (xmlStrcmp(head->name,(xmlChar*)"head")) {
        return ;
    }

    xmlNodePtr script = xmlNewTextChild (head,NULL,(xmlChar*)"script",(xmlChar*)"");
    xmlNewProp(script,(xmlChar*)"type",(xmlChar*)"text/javascript");
    xmlNewProp(script,(xmlChar*)"src",(xmlChar*)data);

    xmlSaveFormatFile(filename, mathdocument, 0);
    xmlFreeDoc (mathdocument);
}
