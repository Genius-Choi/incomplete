static int fs_delete(lua_State *L) {
    lastCFunction = __func__;
    std::string str = checkstring(L, 1);
    if (fixpath_ro(get_comp(L), str)) err(L, 1, "Access denied");
    bool isRoot = false;
    const path_t path = fixpath(get_comp(L), str, true, true, NULL, &isRoot);
    if (isRoot) luaL_error(L, "Cannot delete mount, use mounter.unmount instead");
    if (path.empty()) return 0;
    if (std::regex_search((*path.begin()).native(), pathregex("^\\d+:"))) err(L, 1, "Permission denied");
    std::error_code e;
    fs::remove_all(path, e);
    if (e) err(L, 1, e.message().c_str());
    return 0;
}
