static fs::space_info getSpace(const path_t& path) {
    std::error_code e;
    fs::space_info retval;
    path_t p = path;
    do {
        retval = fs::space(p, e);
        p = p.parent_path();
    } while (((e && e.value() == ENOENT) || retval.capacity == -1) && p.has_parent_path());
    return retval;
}
