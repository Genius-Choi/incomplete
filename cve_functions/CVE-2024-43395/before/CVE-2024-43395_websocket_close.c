static int websocket_close(lua_State *L) {
    lastCFunction = __func__;
    ws_handle * ws = *(ws_handle**)lua_touserdata(L, lua_upvalueindex(1));
    if (ws == NULL) return 0;
    std::lock_guard<std::mutex> lock(ws->lock);
    if (ws->ws == NULL) return 0;
    ws->ws = NULL;
    return 0;
}
