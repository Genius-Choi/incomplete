gpio_set_config(struct virtio_gpio *gpio, unsigned int offset,
		unsigned long config)
{
	struct gpio_line *line;

	line = gpio->vlines[offset];

	/*
	 * gpio userspace API can only provide GPIOLINE_FLAG_OPEN_DRAIN
	 * and GPIOLINE_FLAG_OPEN_SOURCE settings currenlty, other
	 * settings will return an success.
	 */
	config = PIN_CONF_UNPACKED(config);
	switch (config) {
	case PIN_CONFIG_DRIVE_OPEN_DRAIN:
		config = GPIOLINE_FLAG_OPEN_DRAIN;
		break;
	case PIN_CONFIG_DRIVE_OPEN_SOURCE:
		config = GPIOLINE_FLAG_OPEN_SOURCE;
		break;
	default:
		return 0;
	}

	return native_gpio_open_line(line, config, 0);
}
