virtio_console_deinit(struct vmctx *ctx, struct pci_vdev *dev, char *opts)
{
	struct virtio_console *console;
	int rc;

	console = (struct virtio_console *)dev->arg;
	if (console) {
		rc = virtio_console_close_all(console);
		/*
		 * if all the ports are without mevent attached,
		 * no teardown will be called, we should destroy
		 * console here explicitly.
		 */
		if (!rc)
			virtio_console_destroy(console);
	}
}
