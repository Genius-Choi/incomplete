virtio_input_get_absinfo(struct virtio_input *vi, int axis,
			 struct virtio_input_config *cfg)
{
	struct virtio_input_config ev_cfg;
	struct input_absinfo abs;
	bool has_ev_abs;
	int rc;

	if (!cfg)
		return false;

	has_ev_abs = virtio_input_get_evbits(vi, EV_ABS, &ev_cfg);
	if (!has_ev_abs)
		return false;

	rc = ioctl(vi->fd, EVIOCGABS(axis), &abs);
	if (rc < 0)
		return false;

	cfg->u.abs.min = abs.minimum;
	cfg->u.abs.max = abs.maximum;
	cfg->u.abs.fuzz = abs.fuzz;
	cfg->u.abs.flat = abs.flat;
	cfg->u.abs.res = abs.resolution;

	cfg->select = VIRTIO_INPUT_CFG_ABS_INFO;
	cfg->subsel = axis;
	cfg->size = sizeof(struct virtio_input_absinfo);
	return true;
}
