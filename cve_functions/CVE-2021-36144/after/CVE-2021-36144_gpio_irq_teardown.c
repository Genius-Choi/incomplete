gpio_irq_teardown(void *param)
{
	struct gpio_irq_desc *desc;

	DPRINTF(("%s", "virtio gpio tear down\n"));
	desc = (struct gpio_irq_desc *) param;
	desc->mask = false;
	desc->mode = IRQ_TYPE_NONE;
	if (desc->fd > -1) {
		close(desc->fd);
		desc->fd = -1;
	}

	/* if deinit is not set, switch the pin to GPIO mode */
	if (!desc->deinit)
		native_gpio_open_line(desc->gpio, 0, 0);
}
