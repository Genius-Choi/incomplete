static void dasher_udpate_periods_and_manifest(GF_Filter *filter, GF_DasherCtx *ctx)
{
	if (!ctx->subdur_done) {
		ctx->last_dyn_period_id++;
		ctx->next_pid_id_in_period = 0;
	}
	//update duration
	dasher_update_period_duration(ctx, GF_TRUE);

	if (ctx->state)
		dasher_context_update_period_end(ctx);

	//we have a MPD ready, flush it
	if (!ctx->gencues && ctx->mpd)
		dasher_send_manifest(filter, ctx, GF_FALSE);
}
