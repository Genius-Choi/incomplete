void FormatDataBuffer(CBlock *pblock, uint *pdata) {
    uint i;

    struct {
        int nVersion;
        uint256 hashPrevBlock;
        uint256 hashMerkleRoot;
        uint nTime;
        uint nBits;
        uint nNonce;
    } data;

    data.nVersion       = pblock->nVersion;
    data.hashPrevBlock  = pblock->hashPrevBlock;
    data.hashMerkleRoot = pblock->hashMerkleRoot;
    data.nTime          = pblock->nTime;
    data.nBits          = pblock->nBits;
    data.nNonce         = pblock->nNonce;

    if(fNeoScrypt) {
        /* Copy the LE data */
        for(i = 0; i < 20; i++)
          pdata[i] = ((uint *) &data)[i];
    } else {
        /* Block header size in bits */
        pdata[31] = 640;
        /* Convert LE to BE and copy */
        for(i = 0; i < 20; i++)
          pdata[i] = ByteReverse(((uint *) &data)[i]);
        /* Erase the remaining part */
        for(i = 20; i < 31; i++)
          pdata[i] = 0;
    }
}
