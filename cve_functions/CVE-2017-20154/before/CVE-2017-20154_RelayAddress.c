void static RelayAddress(CAddress& addr, bool fReachable) {

    LOCK(cs_vNodes);

    // Use deterministic randomness to send to the same nodes for 12 hours
    // at a time so the setAddrKnowns of the chosen nodes prevent repeats
    static uint256 hashSalt;
    if(hashSalt == 0)
      RAND_bytes((uchar*)&hashSalt, sizeof(hashSalt));
    int64 hashAddr = addr.GetHash();
    uint256 hashRand = hashSalt ^ (hashAddr << 32) ^ ((GetTime() + hashAddr) / (12 * 60 * 60));
    hashRand = Hash(BEGIN(hashRand), END(hashRand));
    multimap<uint256, CNode*> mapMix;
    BOOST_FOREACH(CNode* pnode, vNodes) {
        uint nPointer;
        memcpy(&nPointer, &pnode, sizeof(nPointer));
        uint256 hashKey = hashRand ^ nPointer;
        hashKey = Hash(BEGIN(hashKey), END(hashKey));
        mapMix.insert(make_pair(hashKey, pnode));
    }
    int nRelayNodes = fReachable ? 2 : 1;
    for(multimap<uint256, CNode*>::iterator mi = mapMix.begin();
      mi != mapMix.end() && nRelayNodes-- > 0; ++mi) {
        ((*mi).second)->PushAddress(addr);
        if(fDebug) printf("relaying: address %s\n", addr.ToString().c_str());
    }
}
