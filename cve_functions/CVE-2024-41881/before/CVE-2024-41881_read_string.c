read_string(uschar *p, item **nest_stack, int *nest_stackptr, int pinflags)
{
BOOL hadtext = inliterallayout;
while (*p != 0)
  {
  if (*p == '<')
    {
    if (misc_istext_elname(p+1)) hadtext = TRUE;
    p = read_element(p, nest_stack, nest_stackptr);
    if (!hadtext) while (isspace(*p)) p++;
    }
  else
    {
    BOOL dummy = FALSE;
    p = read_text(p, &dummy, pinflags);
    hadtext = TRUE;
    }
  }
}
