c_SimpleXMLElement* c_SimpleXMLElement::Clone(ObjectData* obj) {
  auto thiz = static_cast<c_SimpleXMLElement*>(obj);
  c_SimpleXMLElement *node =
    static_cast<c_SimpleXMLElement*>(obj->cloneImpl());
  node->m_root = node; // raw pointer, must be to the *new* element
  node->m_doc = thiz->m_doc;
  node->m_node = thiz->m_node;
  node->m_is_text = thiz->m_is_text;
  node->m_free_text = thiz->m_free_text;
  node->m_is_attribute = thiz->m_is_attribute;
  node->m_is_children = thiz->m_is_children;
  node->m_is_property = thiz->m_is_property;
  node->m_is_array = thiz->m_is_array;
  node->m_children =
    create_children(node->m_root, thiz->m_doc, thiz->m_node, String(), false);
  node->m_attributes = collect_attributes(thiz->m_node, String(), false);
  return node;
}
