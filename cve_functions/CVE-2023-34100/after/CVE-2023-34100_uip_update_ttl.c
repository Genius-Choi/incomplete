uip_update_ttl(void)
{
  if(UIP_IP_BUF->ttl <= 1) {
    uip_icmp6_error_output(ICMP6_TIME_EXCEEDED, ICMP6_TIME_EXCEED_TRANSIT, 0);
    UIP_STAT(++uip_stat.ip.drop);
    return false;
  } else {
    UIP_IP_BUF->ttl = UIP_IP_BUF->ttl - 1;
    return true;
  }
}
