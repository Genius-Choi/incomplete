uip_send(const void *data, int len)
{
  int copylen;

  if(uip_sappdata != NULL) {
    copylen = MIN(len, UIP_BUFSIZE - UIP_IPTCPH_LEN -
        (int)((char *)uip_sappdata - (char *)UIP_TCP_PAYLOAD));
  } else {
    copylen = MIN(len, UIP_BUFSIZE - UIP_IPTCPH_LEN);
  }
  if(copylen > 0) {
    uip_slen = copylen;
    if(data != uip_sappdata) {
      if(uip_sappdata == NULL) {
        memcpy(UIP_TCP_PAYLOAD, (data), uip_slen);
      } else {
        memcpy(uip_sappdata, (data), uip_slen);
      }
    }
  }
}
