static void pico_ipv4_process_finally_try_forward(struct pico_stack *S, struct pico_frame *f)
{
    struct pico_ipv4_hdr *hdr = (struct pico_ipv4_hdr *) f->net_hdr;
    if ((pico_ipv4_is_broadcast(S, hdr->dst.addr)) || ((f->flags & PICO_FRAME_FLAG_BCAST) != 0)) {
        /* don't forward broadcast frame, discard! */
        pico_frame_discard(f);
    } else if (pico_ipv4_forward(S, f) != 0) {
        pico_frame_discard(f);
        /* dbg("Forward failed.\n"); */
    }
}
