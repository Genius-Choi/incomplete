int pico_setsockopt_ipv4(struct pico_socket *s, int option, void *value)
{
    struct pico_socket_ipv4 *s4 = (struct pico_socket_ipv4 *)s;
    switch(option) {
        case PICO_SOCKET_OPT_IP_HDRINCL:
            if (s4->proto == PICO_RAWSOCKET_RAW) {
                pico_err = PICO_ERR_EINVAL;
                return -1;
            }
            s4->hdr_included = (*(int*)value)?1:0;
            return 0;
        case PICO_SOCKET_OPT_IP_DONTROUTE:
            s4->dontroute = (*(int*)value)?1:0;
            return 0;
        case PICO_SOCKET_OPT_IP_BINDTODEVICE:
            s->dev = (struct pico_device *)value;
            s->local_addr.ip4.addr = 0;
            return 0;
    }
    /* switch's default */
    pico_err = PICO_ERR_EINVAL;
    return -1;
}
