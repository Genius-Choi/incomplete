xrdp_mm_trans_process_unicode_ack(struct xrdp_mm *self,
                                  struct stream *s)
{
    int status;
    if (!s_check_rem(s, 4))
    {
        return 1;
    }
    in_uint32_le(s, status);
    switch (status)
    {
        case 0:
            LOG(LOG_LEVEL_INFO, "Chansrv is handling Unicode input");
            self->wm->client_info->unicode_input_support = UIS_ACTIVE;
            break;

        case 1:
            LOG(LOG_LEVEL_INFO, "Chansrv does not support Unicode input");
            break;

        case 2:
            LOG(LOG_LEVEL_INFO,
                "Chansrv reported an error starting the Unicode input method");
            break;

        default:
            LOG(LOG_LEVEL_INFO,
                "Chansrv reported an unknown status %d"
                " starting the Unicode input method", status);
            break;
    }

    return 0;
}
