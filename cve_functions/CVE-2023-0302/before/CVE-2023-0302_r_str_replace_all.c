R_API R_MUSTUSE char* r_str_replace_all(char *str, const char *key, const char *val) {
	if (strstr (val, key)) {
		// XXX value cant contain the key otherwise we go into infinite loop
		R_LOG_ERROR ("RStr.replaceAll() value can't contain key");
		free (str);
		return NULL;
	}
	char *res = str;
	while (strstr (str, key)) {
		res = r_str_replace (str, key, val, true);
		if (!res) {
			return str;
		}
		str = res;
	}
	return res;
}
