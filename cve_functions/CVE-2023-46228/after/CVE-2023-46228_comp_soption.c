bool comp_soption(zckCtx *zck, zck_soption option, const void *value,
                  size_t length) {
    VALIDATE_BOOL(zck);

    /* Cannot change compression parameters after compression has started */
    if(zck && zck->comp.started) {
        set_error(zck,
                  "Unable to set compression parameters after initialization");
        return false;
    }
    if(option == ZCK_COMP_DICT) {
        zck_log(ZCK_LOG_DEBUG, "Adding dictionary of size %lli", (long long) length);
        zck->comp.dict = (char *)value;
        zck->comp.dict_size = length;
    } else {
        if(zck && zck->comp.set_parameter)
            return zck->comp.set_parameter(zck, &(zck->comp), option, value);

        set_error(zck, "Unsupported compression parameter: %i", option);
        return false;
    }
    return true;
}
