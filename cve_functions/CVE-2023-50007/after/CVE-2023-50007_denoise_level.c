static void denoise_level(double *out, const double *in,
                          const double *filter,
                          double percent, int length)
{
    const double x = percent * 0.01;
    const double y = 1.0 - x;

    for (int i = 0; i < length; i++)
        out[i] = x * filter[i] + in[i] * y;
}
