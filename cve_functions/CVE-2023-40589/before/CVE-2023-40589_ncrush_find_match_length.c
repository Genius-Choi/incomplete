static int ncrush_find_match_length(const BYTE* Ptr1, const BYTE* Ptr2, BYTE* HistoryPtr)
{
	BYTE val1, val2;
	const BYTE* Ptr = Ptr1;

	WINPR_ASSERT(Ptr1);
	WINPR_ASSERT(Ptr2);
	WINPR_ASSERT(HistoryPtr);

	do
	{
		if (Ptr1 > HistoryPtr)
			break;

		val1 = *Ptr1++;
		val2 = *Ptr2++;
	} while (val1 == val2);

	const intptr_t psize = Ptr1 - (Ptr + 1);
	WINPR_ASSERT(psize <= INT_MAX);
	WINPR_ASSERT(psize >= -INT_MAX);
	return (int)psize;
}
