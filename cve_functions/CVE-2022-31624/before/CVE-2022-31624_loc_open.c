static File loc_open(const char *FileName, int Flags)
				/* Path-name of file */
				/* Read | write .. */
				/* Special flags */
{
  File fd;
#ifdef _WIN32
  HANDLE h;
  /*
    We could just use _open() here. but prefer to open in unix-similar way
    just like my_open() does it on Windows.
    This gives atomic multiprocess-safe appends, and possibility to rename
    or even delete file while it is open, and CRT lacks this features.
  */
  assert(Flags == (O_APPEND | O_CREAT | O_WRONLY));
  h= CreateFile(FileName, FILE_APPEND_DATA,
    FILE_SHARE_READ|FILE_SHARE_WRITE|FILE_SHARE_DELETE, NULL,
    OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
  if (h == INVALID_HANDLE_VALUE)
  {
    fd= -1;
    my_osmaperr(GetLastError());
  }
  else
  {
    fd= _open_osfhandle((intptr)h, O_WRONLY|O_BINARY);
  }
#else
  fd= open(FileName, Flags, my_umask);
#endif
  my_errno= errno;
  return fd;
} 
