static VFileType lookupVirtualFile(const String& filename) {
  if (filename.empty() || !StaticContentCache::TheFileCache) {
    return VFileType::NotFound;
  }

  String cwd;
  std::string root;
  bool isRelative = !FileUtil::isAbsolutePath(filename.slice());
  if (isRelative) {
    cwd = g_context->getCwd();
    root = RuntimeOption::SourceRoot;
    if (cwd.empty() || FileUtil::isDirSeparator(cwd[cwd.size() - 1])) {
      root.pop_back();
    }
  }

  if (!isRelative || !root.compare(cwd.data())) {
    return StaticContentCache::TheFileCache->getFileType(filename.data());
  }

  return VFileType::NotFound;
}
