static int accessSyscall(
    const String& uri_or_path,
    int mode,
    bool useFileCache = false) {
  Stream::Wrapper* w = Stream::getWrapperFromURI(uri_or_path);
  if (!w) return -1;

  if (useFileCache && dynamic_cast<FileStreamWrapper*>(w)) {
    String path(uri_or_path);
    if (UNLIKELY(StringUtil::IsFileUrl(uri_or_path.data()))) {
      path = StringUtil::DecodeFileUrl(uri_or_path);
      if (path.empty()) {
        return -1;
      }
    }
    return ::access(File::TranslatePathWithFileCache(path).data(), mode);
  }
  return w->access(uri_or_path, mode);
}
