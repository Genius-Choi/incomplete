  int sock_cb(CURL *e, curl_socket_t s, int what, void *cbp, void *sockp) {
    std::shared_ptr<RequestHandler> p = RequestHandler::getInstance() ;
    RequestHandler::GlobalInfo *g = &(p->getGlobal()) ;

    int *actionp = (int *) sockp;
    static const char *whatstr[] = { "none", "IN", "OUT", "INOUT", "REMOVE"};

    if(what == CURL_POLL_REMOVE) {
      remsock(actionp, g);
    }
    else {
      if(!actionp) {
        addsock(s, e, what, g);
      }
      else {
        setsock(actionp, s, e, what, *actionp, g);
      }
    }
    return 0;  
  }
