header_address(pbelle_sip_messageParser ctx)
{
    belle_sip_header_address_t* ret;


    /* Initialize rule variables
     */

     ret=belle_sip_header_address_new();
     
    {
        // ../grammars/belle_sip_message.g:685:3: ( ( ( name_addr_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )* ) | addr_spec_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ) )
        // ../grammars/belle_sip_message.g:685:5: ( ( name_addr_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )* ) | addr_spec_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] )
        {
            // ../grammars/belle_sip_message.g:685:5: ( ( name_addr_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )* ) | addr_spec_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] )
            {
                int alt56=2;
                alt56 = cdfa56.predict(ctx, RECOGNIZER, ISTREAM, &cdfa56);
                if  (HASEXCEPTION())
                {
                    goto ruleheader_addressEx;
                }
                if (HASFAILED())
                {
                    return ret;
                }

                switch (alt56)
                {
            	case 1:
            	    // ../grammars/belle_sip_message.g:685:7: ( name_addr_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )* )
            	    {
            	        // ../grammars/belle_sip_message.g:685:7: ( name_addr_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )* )
            	        // ../grammars/belle_sip_message.g:685:8: name_addr_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)] ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )*
            	        {
            	            FOLLOWPUSH(FOLLOW_name_addr_with_generic_uri_in_header_address2690);
            	            name_addr_with_generic_uri(ctx, BELLE_SIP_HEADER_ADDRESS(
            	            ret
            	            ));

            	            FOLLOWPOP();
            	            if  (HASEXCEPTION())
            	            {
            	                goto ruleheader_addressEx;
            	            }
            	            if (HASFAILED())
            	            {
            	                return ret;
            	            }


            	            // ../grammars/belle_sip_message.g:685:68: ( SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )? )*

            	            for (;;)
            	            {
            	                int alt55=2;
            	                switch ( LA(1) )
            	                {
            	                case SEMI:
            	                	{
            	                		alt55=1;
            	                	}
            	                    break;

            	                }

            	                switch (alt55)
            	                {
            	            	case 1:
            	            	    // ../grammars/belle_sip_message.g:685:69: SEMI ( lws )? generic_param[BELLE_SIP_PARAMETERS($ret)] ( lws )?
            	            	    {
            	            	         MATCHT(SEMI, &FOLLOW_SEMI_in_header_address2695);
            	            	        if  (HASEXCEPTION())
            	            	        {
            	            	            goto ruleheader_addressEx;
            	            	        }
            	            	        if (HASFAILED())
            	            	        {
            	            	            return ret;
            	            	        }


            	            	        // ../grammars/belle_sip_message.g:685:74: ( lws )?
            	            	        {
            	            	            int alt53=2;
            	            	            switch ( LA(1) )
            	            	            {
            	            	                case CRLF:
            	            	                case SP:
            	            	                	{
            	            	                		alt53=1;
            	            	                	}
            	            	                    break;
            	            	            }

            	            	            switch (alt53)
            	            	            {
            	            	        	case 1:
            	            	        	    // ../grammars/belle_sip_message.g:685:74: lws
            	            	        	    {
            	            	        	        FOLLOWPUSH(FOLLOW_lws_in_header_address2697);
            	            	        	        lws(ctx);

            	            	        	        FOLLOWPOP();
            	            	        	        if  (HASEXCEPTION())
            	            	        	        {
            	            	        	            goto ruleheader_addressEx;
            	            	        	        }
            	            	        	        if (HASFAILED())
            	            	        	        {
            	            	        	            return ret;
            	            	        	        }


            	            	        	    }
            	            	        	    break;

            	            	            }
            	            	        }

            	            	        FOLLOWPUSH(FOLLOW_generic_param_in_header_address2700);
            	            	        generic_param(ctx, BELLE_SIP_PARAMETERS(
            	            	        ret
            	            	        ));

            	            	        FOLLOWPOP();
            	            	        if  (HASEXCEPTION())
            	            	        {
            	            	            goto ruleheader_addressEx;
            	            	        }
            	            	        if (HASFAILED())
            	            	        {
            	            	            return ret;
            	            	        }


            	            	        // ../grammars/belle_sip_message.g:685:122: ( lws )?
            	            	        {
            	            	            int alt54=2;
            	            	            switch ( LA(1) )
            	            	            {
            	            	                case CRLF:
            	            	                case SP:
            	            	                	{
            	            	                		alt54=1;
            	            	                	}
            	            	                    break;
            	            	            }

            	            	            switch (alt54)
            	            	            {
            	            	        	case 1:
            	            	        	    // ../grammars/belle_sip_message.g:685:122: lws
            	            	        	    {
            	            	        	        FOLLOWPUSH(FOLLOW_lws_in_header_address2704);
            	            	        	        lws(ctx);

            	            	        	        FOLLOWPOP();
            	            	        	        if  (HASEXCEPTION())
            	            	        	        {
            	            	        	            goto ruleheader_addressEx;
            	            	        	        }
            	            	        	        if (HASFAILED())
            	            	        	        {
            	            	        	            return ret;
            	            	        	        }


            	            	        	    }
            	            	        	    break;

            	            	            }
            	            	        }

            	            	    }
            	            	    break;

            	            	default:
            	            	    goto loop55;	/* break out of the loop */
            	            	    break;
            	                }
            	            }
            	            loop55: ; /* Jump out to here if this rule does not match */


            	        }


            	    }
            	    break;
            	case 2:
            	    // ../grammars/belle_sip_message.g:686:4: addr_spec_with_generic_uri[BELLE_SIP_HEADER_ADDRESS($ret)]
            	    {
            	        FOLLOWPUSH(FOLLOW_addr_spec_with_generic_uri_in_header_address2713);
            	        addr_spec_with_generic_uri(ctx, BELLE_SIP_HEADER_ADDRESS(
            	        ret
            	        ));

            	        FOLLOWPOP();
            	        if  (HASEXCEPTION())
            	        {
            	            goto ruleheader_addressEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            return ret;
            	        }


            	    }
            	    break;

                }
            }

            if ( BACKTRACKING==0 )
            {

                						if (!belle_sip_header_address_get_uri(ret
                ) && !belle_sip_header_address_get_absolute_uri((ret
                ))) {
                							belle_sip_object_unref(ret
                );
                							ret=NULL;

                						}
                					
            }


        }

    }

    // This is where rules clean up and exit
    //
    goto ruleheader_addressEx; /* Prevent compiler warnings */
    ruleheader_addressEx: ;

    if	(HASEXCEPTION())
    {
	/* catch(decl,action)
	 */
	{

	       belle_sip_debug("[%s]  reason [%s]",(const char*)EXCEPTION->name,(const char*)EXCEPTION->message);
	       if (ret
	    ) belle_sip_object_unref(ret
	    );
	       ret=NULL;


	}


    }
    else
    {
    }
    return ret;
}
