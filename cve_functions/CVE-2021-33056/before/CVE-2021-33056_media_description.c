media_description(pbelle_sdpParser ctx)
{
    belle_sdpParser_media_description_return retval;


    pANTLR3_BASE_TREE root_0;

    pANTLR3_COMMON_TOKEN    CR210;
    pANTLR3_COMMON_TOKEN    LF211;
    pANTLR3_COMMON_TOKEN    CR213;
    pANTLR3_COMMON_TOKEN    LF214;
    pANTLR3_COMMON_TOKEN    CR216;
    pANTLR3_COMMON_TOKEN    LF217;
    pANTLR3_COMMON_TOKEN    CR219;
    pANTLR3_COMMON_TOKEN    LF220;
    pANTLR3_COMMON_TOKEN    CR222;
    pANTLR3_COMMON_TOKEN    LF223;
    pANTLR3_COMMON_TOKEN    CR225;
    pANTLR3_COMMON_TOKEN    LF226;
    belle_sdpParser_media_return media209;
    #undef	RETURN_TYPE_media209
    #define	RETURN_TYPE_media209 belle_sdpParser_media_return

    belle_sdpParser_info_return info212;
    #undef	RETURN_TYPE_info212
    #define	RETURN_TYPE_info212 belle_sdpParser_info_return

    belle_sdpParser_connection_return connection215;
    #undef	RETURN_TYPE_connection215
    #define	RETURN_TYPE_connection215 belle_sdpParser_connection_return

    belle_sdpParser_bandwidth_return bandwidth218;
    #undef	RETURN_TYPE_bandwidth218
    #define	RETURN_TYPE_bandwidth218 belle_sdpParser_bandwidth_return

    belle_sdpParser_key_field_return key_field221;
    #undef	RETURN_TYPE_key_field221
    #define	RETURN_TYPE_key_field221 belle_sdpParser_key_field_return

    belle_sdpParser_attribute_return attribute224;
    #undef	RETURN_TYPE_attribute224
    #define	RETURN_TYPE_attribute224 belle_sdpParser_attribute_return

    pANTLR3_BASE_TREE CR210_tree;
    pANTLR3_BASE_TREE LF211_tree;
    pANTLR3_BASE_TREE CR213_tree;
    pANTLR3_BASE_TREE LF214_tree;
    pANTLR3_BASE_TREE CR216_tree;
    pANTLR3_BASE_TREE LF217_tree;
    pANTLR3_BASE_TREE CR219_tree;
    pANTLR3_BASE_TREE LF220_tree;
    pANTLR3_BASE_TREE CR222_tree;
    pANTLR3_BASE_TREE LF223_tree;
    pANTLR3_BASE_TREE CR225_tree;
    pANTLR3_BASE_TREE LF226_tree;

    /* Initialize rule variables
     */
    ctx->pbelle_sdpParser_media_descriptionTop = pbelle_sdpParser_media_descriptionPush(ctx);
    root_0 = NULL;

    (SCOPE_TOP(media_description))->current= belle_sdp_media_description_new(); 
    retval.ret=(SCOPE_TOP(media_description))->current;
     
    CR210       = NULL;
    LF211       = NULL;
    CR213       = NULL;
    LF214       = NULL;
    CR216       = NULL;
    LF217       = NULL;
    CR219       = NULL;
    LF220       = NULL;
    CR222       = NULL;
    LF223       = NULL;
    CR225       = NULL;
    LF226       = NULL;
    media209.tree = NULL;

    info212.tree = NULL;

    connection215.tree = NULL;

    bandwidth218.tree = NULL;

    key_field221.tree = NULL;

    attribute224.tree = NULL;
    retval.start = LT(1); retval.stop = retval.start;


    CR210_tree   = NULL;
    LF211_tree   = NULL;
    CR213_tree   = NULL;
    LF214_tree   = NULL;
    CR216_tree   = NULL;
    LF217_tree   = NULL;
    CR219_tree   = NULL;
    LF220_tree   = NULL;
    CR222_tree   = NULL;
    LF223_tree   = NULL;
    CR225_tree   = NULL;
    LF226_tree   = NULL;


    retval.tree  = NULL;

    {
        // ../grammars/belle_sdp.g:406:22: ( media CR LF ( info CR LF )? ( connection CR LF )? ( bandwidth CR LF )* ( key_field CR LF )? ( attribute CR LF )* )
        // ../grammars/belle_sdp.g:406:22: media CR LF ( info CR LF )? ( connection CR LF )? ( bandwidth CR LF )* ( key_field CR LF )? ( attribute CR LF )*
        {
            root_0 = (pANTLR3_BASE_TREE)(ADAPTOR->nilNode(ADAPTOR));


            FOLLOWPUSH(FOLLOW_media_in_media_description2269);
            media209=media(ctx);

            FOLLOWPOP();
            if  (HASEXCEPTION())
            {
                goto rulemedia_descriptionEx;
            }
            if (HASFAILED())
            {
                pbelle_sdpParser_media_descriptionPop(ctx);

                return retval;
            }

            if ( BACKTRACKING==0 ) ADAPTOR->addChild(ADAPTOR, root_0, media209.tree);

            CR210 = (pANTLR3_COMMON_TOKEN) MATCHT(CR, &FOLLOW_CR_in_media_description2271);
            if  (HASEXCEPTION())
            {
                goto rulemedia_descriptionEx;
            }
            if (HASFAILED())
            {
                pbelle_sdpParser_media_descriptionPop(ctx);

                return retval;
            }

            if ( BACKTRACKING==0 ) {
            CR210_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, CR210));
            ADAPTOR->addChild(ADAPTOR, root_0, CR210_tree);
            }

            LF211 = (pANTLR3_COMMON_TOKEN) MATCHT(LF, &FOLLOW_LF_in_media_description2273);
            if  (HASEXCEPTION())
            {
                goto rulemedia_descriptionEx;
            }
            if (HASFAILED())
            {
                pbelle_sdpParser_media_descriptionPop(ctx);

                return retval;
            }

            if ( BACKTRACKING==0 ) {
            LF211_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, LF211));
            ADAPTOR->addChild(ADAPTOR, root_0, LF211_tree);
            }

            if ( BACKTRACKING==0 )
            {
                belle_sdp_media_description_set_media((SCOPE_TOP(media_description))->current,
                media209.ret
                );
            }


            // ../grammars/belle_sdp.g:407:21: ( info CR LF )?
            {
                int alt43=2;
                alt43 = cdfa43.predict(ctx, RECOGNIZER, ISTREAM, &cdfa43);
                if  (HASEXCEPTION())
                {
                    goto rulemedia_descriptionEx;
                }
                if (HASFAILED())
                {
                    pbelle_sdpParser_media_descriptionPop(ctx);

                    return retval;
                }

                switch (alt43)
                {
            	case 1:
            	    // ../grammars/belle_sdp.g:407:22: info CR LF
            	    {
            	        FOLLOWPUSH(FOLLOW_info_in_media_description2299);
            	        info212=info(ctx);

            	        FOLLOWPOP();
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) ADAPTOR->addChild(ADAPTOR, root_0, info212.tree);

            	        if ( BACKTRACKING==0 )
            	        {
            	            belle_sdp_media_description_set_info((SCOPE_TOP(media_description))->current,
            	            info212.ret
            	            );
            	        }


            	        CR213 = (pANTLR3_COMMON_TOKEN) MATCHT(CR, &FOLLOW_CR_in_media_description2303);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        CR213_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, CR213));
            	        ADAPTOR->addChild(ADAPTOR, root_0, CR213_tree);
            	        }

            	        LF214 = (pANTLR3_COMMON_TOKEN) MATCHT(LF, &FOLLOW_LF_in_media_description2305);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        LF214_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, LF214));
            	        ADAPTOR->addChild(ADAPTOR, root_0, LF214_tree);
            	        }

            	    }
            	    break;

                }
            }

            // ../grammars/belle_sdp.g:408:22: ( connection CR LF )?
            {
                int alt44=2;
                alt44 = cdfa44.predict(ctx, RECOGNIZER, ISTREAM, &cdfa44);
                if  (HASEXCEPTION())
                {
                    goto rulemedia_descriptionEx;
                }
                if (HASFAILED())
                {
                    pbelle_sdpParser_media_descriptionPop(ctx);

                    return retval;
                }

                switch (alt44)
                {
            	case 1:
            	    // ../grammars/belle_sdp.g:408:23: connection CR LF
            	    {
            	        FOLLOWPUSH(FOLLOW_connection_in_media_description2331);
            	        connection215=connection(ctx);

            	        FOLLOWPOP();
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) ADAPTOR->addChild(ADAPTOR, root_0, connection215.tree);

            	        if ( BACKTRACKING==0 )
            	        {
            	             belle_sdp_media_description_set_connection((SCOPE_TOP(media_description))->current,
            	            connection215.ret
            	            );
            	        }


            	        CR216 = (pANTLR3_COMMON_TOKEN) MATCHT(CR, &FOLLOW_CR_in_media_description2335);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        CR216_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, CR216));
            	        ADAPTOR->addChild(ADAPTOR, root_0, CR216_tree);
            	        }

            	        LF217 = (pANTLR3_COMMON_TOKEN) MATCHT(LF, &FOLLOW_LF_in_media_description2337);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        LF217_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, LF217));
            	        ADAPTOR->addChild(ADAPTOR, root_0, LF217_tree);
            	        }

            	    }
            	    break;

                }
            }

            // ../grammars/belle_sdp.g:409:22: ( bandwidth CR LF )*

            for (;;)
            {
                int alt45=2;
                alt45 = cdfa45.predict(ctx, RECOGNIZER, ISTREAM, &cdfa45);
                if  (HASEXCEPTION())
                {
                    goto rulemedia_descriptionEx;
                }
                if (HASFAILED())
                {
                    pbelle_sdpParser_media_descriptionPop(ctx);

                    return retval;
                }

                switch (alt45)
                {
            	case 1:
            	    // ../grammars/belle_sdp.g:409:23: bandwidth CR LF
            	    {
            	        FOLLOWPUSH(FOLLOW_bandwidth_in_media_description2363);
            	        bandwidth218=bandwidth(ctx);

            	        FOLLOWPOP();
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) ADAPTOR->addChild(ADAPTOR, root_0, bandwidth218.tree);

            	        if ( BACKTRACKING==0 )
            	        {
            	            belle_sdp_media_description_add_bandwidth((SCOPE_TOP(media_description))->current,
            	            bandwidth218.ret
            	            );
            	        }


            	        CR219 = (pANTLR3_COMMON_TOKEN) MATCHT(CR, &FOLLOW_CR_in_media_description2367);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        CR219_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, CR219));
            	        ADAPTOR->addChild(ADAPTOR, root_0, CR219_tree);
            	        }

            	        LF220 = (pANTLR3_COMMON_TOKEN) MATCHT(LF, &FOLLOW_LF_in_media_description2369);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        LF220_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, LF220));
            	        ADAPTOR->addChild(ADAPTOR, root_0, LF220_tree);
            	        }

            	    }
            	    break;

            	default:
            	    goto loop45;	/* break out of the loop */
            	    break;
                }
            }
            loop45: ; /* Jump out to here if this rule does not match */


            // ../grammars/belle_sdp.g:410:22: ( key_field CR LF )?
            {
                int alt46=2;
                alt46 = cdfa46.predict(ctx, RECOGNIZER, ISTREAM, &cdfa46);
                if  (HASEXCEPTION())
                {
                    goto rulemedia_descriptionEx;
                }
                if (HASFAILED())
                {
                    pbelle_sdpParser_media_descriptionPop(ctx);

                    return retval;
                }

                switch (alt46)
                {
            	case 1:
            	    // ../grammars/belle_sdp.g:410:23: key_field CR LF
            	    {
            	        FOLLOWPUSH(FOLLOW_key_field_in_media_description2395);
            	        key_field221=key_field(ctx);

            	        FOLLOWPOP();
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) ADAPTOR->addChild(ADAPTOR, root_0, key_field221.tree);

            	        CR222 = (pANTLR3_COMMON_TOKEN) MATCHT(CR, &FOLLOW_CR_in_media_description2397);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        CR222_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, CR222));
            	        ADAPTOR->addChild(ADAPTOR, root_0, CR222_tree);
            	        }

            	        LF223 = (pANTLR3_COMMON_TOKEN) MATCHT(LF, &FOLLOW_LF_in_media_description2399);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        LF223_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, LF223));
            	        ADAPTOR->addChild(ADAPTOR, root_0, LF223_tree);
            	        }

            	    }
            	    break;

                }
            }

            // ../grammars/belle_sdp.g:411:22: ( attribute CR LF )*

            for (;;)
            {
                int alt47=2;
                alt47 = cdfa47.predict(ctx, RECOGNIZER, ISTREAM, &cdfa47);
                if  (HASEXCEPTION())
                {
                    goto rulemedia_descriptionEx;
                }
                if (HASFAILED())
                {
                    pbelle_sdpParser_media_descriptionPop(ctx);

                    return retval;
                }

                switch (alt47)
                {
            	case 1:
            	    // ../grammars/belle_sdp.g:411:23: attribute CR LF
            	    {
            	        FOLLOWPUSH(FOLLOW_attribute_in_media_description2425);
            	        attribute224=attribute(ctx);

            	        FOLLOWPOP();
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) ADAPTOR->addChild(ADAPTOR, root_0, attribute224.tree);

            	        if ( BACKTRACKING==0 )
            	        {
            	            if (attribute224.ret
            	            )belle_sdp_media_description_add_attribute((SCOPE_TOP(media_description))->current,
            	            attribute224.ret
            	            );
            	        }


            	        CR225 = (pANTLR3_COMMON_TOKEN) MATCHT(CR, &FOLLOW_CR_in_media_description2429);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        CR225_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, CR225));
            	        ADAPTOR->addChild(ADAPTOR, root_0, CR225_tree);
            	        }

            	        LF226 = (pANTLR3_COMMON_TOKEN) MATCHT(LF, &FOLLOW_LF_in_media_description2431);
            	        if  (HASEXCEPTION())
            	        {
            	            goto rulemedia_descriptionEx;
            	        }
            	        if (HASFAILED())
            	        {
            	            pbelle_sdpParser_media_descriptionPop(ctx);

            	            return retval;
            	        }

            	        if ( BACKTRACKING==0 ) {
            	        LF226_tree = (pANTLR3_BASE_TREE)(ADAPTOR->create(ADAPTOR, LF226));
            	        ADAPTOR->addChild(ADAPTOR, root_0, LF226_tree);
            	        }

            	    }
            	    break;

            	default:
            	    goto loop47;	/* break out of the loop */
            	    break;
                }
            }
            loop47: ; /* Jump out to here if this rule does not match */


        }

    }

    // This is where rules clean up and exit
    //
    goto rulemedia_descriptionEx; /* Prevent compiler warnings */
    rulemedia_descriptionEx: ;
    retval.stop = LT(-1);


    if ( BACKTRACKING==0 )
    {

    	retval.stop = LT(-1);

    	retval.tree = (pANTLR3_BASE_TREE)(ADAPTOR->rulePostProcessing(ADAPTOR, root_0));
    	ADAPTOR->setTokenBoundaries(ADAPTOR, retval.tree, retval.start, retval.stop);
    }


    if	(HASEXCEPTION())
    {
	/* catch(decl,action)
	 */
	{

	    	ANTLR3_LOG_EXCEPTION();
	      belle_sip_object_unref(retval.ret
	    );
	      retval.ret=NULL;


	}


    }
    else
    {
    }
    pbelle_sdpParser_media_descriptionPop(ctx);

    return retval;
}
