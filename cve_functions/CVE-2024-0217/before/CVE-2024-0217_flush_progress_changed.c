flush_progress_changed (PkTransaction *transaction)
{
	PkTransactionPrivate *priv = transaction->priv;

	if (!priv->progress_changed)
		return;

	/* Emit a D-Bus signal to notify of the progress changes. */
	pk_transaction_emit_properties_changed (transaction,
						"Percentage", g_variant_new_uint32 (priv->percentage),
						"ElapsedTime", g_variant_new_uint32 (priv->elapsed_time),
						"RemainingTime", g_variant_new_uint32 (priv->remaining_time),
						"Speed", g_variant_new_uint32 (priv->speed),
						"DownloadSizeRemaining", g_variant_new_uint64 (priv->download_size_remaining),
						NULL);

	priv->progress_changed = FALSE;
}
