fu_string_append_func(void)
{
	g_autoptr(GString) str = g_string_new(NULL);
	fu_string_append(str, 0, "hdr", NULL);
	fu_string_append(str, 0, "key", "value");
	fu_string_append(str, 0, "key1", "value1");
	fu_string_append(str, 1, "key2", "value2");
	fu_string_append(str, 1, "", "value2");
	fu_string_append(str, 2, "key3", "value3");
	g_assert_cmpstr(str->str,
			==,
			"hdr:\n"
			"key:                    value\n"
			"key1:                   value1\n"
			"  key2:                 value2\n"
			"                        value2\n"
			"    key3:               value3\n");
}
