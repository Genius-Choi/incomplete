static void parse_session_attr(sdp_parser_t *p, char *r, sdp_attribute_t **result)
{
  /*
   attribute-fields =    *("a=" attribute CRLF)

   attribute =           (att-field ":" att-value) / att-field

   att-field =           token

   att-value =           byte-string
   */

  char *name = NULL, *value = NULL;

  if (!(name = token(&r, ":", TOKEN, SPACE TAB))) {
    parsing_error(p,"invalid attribute name");
    return;
  }

  if (*r)
    value = r;
  else
    PARSE_CHECK_REST(p, r, "a");

  if (su_casematch(name, "charset")) {
    p->pr_session->sdp_charset = value;
    return;
  }

  if (p->pr_mode_manual)
    ;
  else if (su_casematch(name, "inactive"))
    p->pr_session_mode = sdp_inactive;
  else if (su_casematch(name, "sendonly"))
    p->pr_session_mode = sdp_sendonly;
  else if (su_casematch(name, "recvonly"))
    p->pr_session_mode = sdp_recvonly;
  else if (su_casematch(name, "sendrecv"))
    p->pr_session_mode = sdp_sendrecv;

  {
    PARSE_ALLOC(p, sdp_attribute_t, a);
    *result = a;

    a->a_name  = name;
    a->a_value = value;
  }
}
