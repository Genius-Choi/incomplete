static unsigned _compare_attrs(clif_attr_t *p1, clif_attr_t *p2)
{
    unsigned result = 1;
    int res;

    if (p1->key_len != p2->key_len) {
        goto out;
    }

    if (strncmp(p1->key, p2->key, p1->key_len)) {
        goto out;
    }

    if (!p1->value && !p2->value) {
        goto success_out;
    }

    if (!p1->value || !p2->value || (p1->value_len != p2->value_len)) {
        goto out;
    }

    res = strncmp(p1->value, p2->value, p1->value_len);
    if (res != 0) {
        goto out;
    }
success_out:
    result = 0;
out:
    return result;
}
