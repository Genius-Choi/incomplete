int mg_socks_if_tcp_recv(struct mg_connection *c, void *buf, size_t len) {
  struct socksdata *d = (struct socksdata *) c->iface->data;
  if (d->s == NULL) return -1;
  if (len > d->s->recv_mbuf.len) len = d->s->recv_mbuf.len;
  if (len > 0) {
    memcpy(buf, d->s->recv_mbuf.buf, len);
    mbuf_remove(&d->s->recv_mbuf, len);
  }
  DBG(("%p <- %d <- %p", c, (int) len, d->s));
  return len;
}
