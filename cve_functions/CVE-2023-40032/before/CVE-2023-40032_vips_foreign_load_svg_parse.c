vips_foreign_load_svg_parse( VipsForeignLoadSvg *svg, VipsImage *out )
{
	int width;
	int height;
	double res;

	if( vips_foreign_load_svg_get_scaled_size( svg, &width, &height ) )
		return( -1 );

	/* We need pixels/mm for vips.
	 */
	res = svg->dpi / 25.4;

	vips_image_init_fields( out, 
		width, height,
		4, VIPS_FORMAT_UCHAR,
		VIPS_CODING_NONE, VIPS_INTERPRETATION_sRGB, res, res );

	/* We use a tilecache, so it's smalltile.
	 */
        if( vips_image_pipelinev( out, VIPS_DEMAND_STYLE_SMALLTILE, NULL ) )
		return( -1 );

	return( 0 );
}
