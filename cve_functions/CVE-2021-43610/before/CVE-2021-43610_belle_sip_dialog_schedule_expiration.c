static int belle_sip_dialog_schedule_expiration(belle_sip_dialog_t *dialog, belle_sip_message_t *request){
	belle_sip_header_expires_t *expires = belle_sip_message_get_header_by_type(request, belle_sip_header_expires_t);
	int expires_value;

	if (!expires) return BELLE_SIP_CONTINUE;
	expires_value = belle_sip_header_expires_get_expires(expires);
	if (dialog->expiration_timer){
		belle_sip_main_loop_remove_source(dialog->provider->stack->ml, dialog->expiration_timer);
		belle_sip_object_unref(dialog->expiration_timer);
		dialog->expiration_timer = NULL;
	}
	belle_sip_message("belle_sip_dialog_schedule_expiration() dialog=%p expires_value=%i", dialog, expires_value);
	if (expires_value == 0) return BELLE_SIP_STOP;

	dialog->expiration_timer = belle_sip_main_loop_create_timeout(dialog->provider->stack->ml,
					(belle_sip_source_func_t) belle_sip_dialog_on_expired,
					dialog,
					expires_value * 1000,
					"Dialog expiration");

	return BELLE_SIP_CONTINUE;
}
