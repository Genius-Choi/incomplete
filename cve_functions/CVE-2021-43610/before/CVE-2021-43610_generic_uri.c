generic_uri(pbelle_sip_messageParser ctx)
{
    belle_generic_uri_t* ret;


    belle_sip_messageParser_scheme_return scheme24;
    #undef	RETURN_TYPE_scheme24
    #define	RETURN_TYPE_scheme24 belle_sip_messageParser_scheme_return

    belle_sip_messageParser_opaque_part_return opaque_part25;
    #undef	RETURN_TYPE_opaque_part25
    #define	RETURN_TYPE_opaque_part25 belle_sip_messageParser_opaque_part_return

    /* Initialize rule variables
     */
    ret = NULL;

    ctx->pbelle_sip_messageParser_generic_uriTop = pbelle_sip_messageParser_generic_uriPush(ctx);
     (SCOPE_TOP(generic_uri))->current= 
    ret
     = belle_generic_uri_new(); 
    {
        {
            //  ../grammars/belle_sip_message.g:333:4: ( hier_part[$generic_uri::current] | ( scheme COLON ( opaque_part | hier_part[$generic_uri::current] ) ) )

            ANTLR3_UINT32 alt16;

            alt16=2;

            switch ( LA(1) )
            {
            case SLASH:
            	{
            		alt16=1;
            	}
                break;
            case COMMON_CHAR:
            case HEX_CHAR:
            	{
            		alt16=2;
            	}
                break;

            default:
                if (BACKTRACKING>0)
                {
                    FAILEDFLAG = ANTLR3_TRUE;
                    pbelle_sip_messageParser_generic_uriPop(ctx);

                    return ret;
                }

                CONSTRUCTEX();
                EXCEPTION->type         = ANTLR3_NO_VIABLE_ALT_EXCEPTION;
                EXCEPTION->message      = (void *)"";
                EXCEPTION->decisionNum  = 16;
                EXCEPTION->state        = 0;


                goto rulegeneric_uriEx;

            }

            switch (alt16)
            {
        	case 1:
        	    // ../grammars/belle_sip_message.g:333:7: hier_part[$generic_uri::current]
        	    {
        	        FOLLOWPUSH(FOLLOW_hier_part_in_generic_uri1064);
        	        hier_part(ctx, (SCOPE_TOP(generic_uri))->current);

        	        FOLLOWPOP();
        	        if  (HASEXCEPTION())
        	        {
        	            goto rulegeneric_uriEx;
        	        }
        	        if (HASFAILED())
        	        {
        	            pbelle_sip_messageParser_generic_uriPop(ctx);

        	            return ret;
        	        }


        	    }
        	    break;
        	case 2:
        	    // ../grammars/belle_sip_message.g:334:9: ( scheme COLON ( opaque_part | hier_part[$generic_uri::current] ) )
        	    {
        	        // ../grammars/belle_sip_message.g:334:9: ( scheme COLON ( opaque_part | hier_part[$generic_uri::current] ) )
        	        // ../grammars/belle_sip_message.g:334:10: scheme COLON ( opaque_part | hier_part[$generic_uri::current] )
        	        {
        	            FOLLOWPUSH(FOLLOW_scheme_in_generic_uri1076);
        	            scheme24=scheme(ctx);

        	            FOLLOWPOP();
        	            if  (HASEXCEPTION())
        	            {
        	                goto rulegeneric_uriEx;
        	            }
        	            if (HASFAILED())
        	            {
        	                pbelle_sip_messageParser_generic_uriPop(ctx);

        	                return ret;
        	            }


        	            if ( BACKTRACKING==0 )
        	            {
        	                belle_generic_uri_set_scheme((SCOPE_TOP(generic_uri))->current,(const char*)
        	                (STRSTREAM->toStringTT(STRSTREAM, scheme24.start, scheme24.stop))
        	                ->chars);
        	            }


        	             MATCHT(COLON, &FOLLOW_COLON_in_generic_uri1087);
        	            if  (HASEXCEPTION())
        	            {
        	                goto rulegeneric_uriEx;
        	            }
        	            if (HASFAILED())
        	            {
        	                pbelle_sip_messageParser_generic_uriPop(ctx);

        	                return ret;
        	            }


        	            // ../grammars/belle_sip_message.g:335:15: ( opaque_part | hier_part[$generic_uri::current] )
        	            {
        	                int alt15=2;
        	                switch ( LA(1) )
        	                {
        	                case AND:
        	                case AT:
        	                case COLON:
        	                case COMMA:
        	                case COMMON_CHAR:
        	                case DASH:
        	                case DIGIT:
        	                case DOLLARD:
        	                case DOT:
        	                case EMARK:
        	                case EQUAL:
        	                case HEX_CHAR:
        	                case LPAREN:
        	                case PERCENT:
        	                case PLUS:
        	                case QMARK:
        	                case RPAREN:
        	                case SEMI:
        	                case SQUOTE:
        	                case STAR:
        	                case TILDE:
        	                case USCORE:
        	                	{
        	                		alt15=1;
        	                	}
        	                    break;
        	                case SLASH:
        	                	{
        	                		alt15=2;
        	                	}
        	                    break;

        	                default:
        	                    if (BACKTRACKING>0)
        	                    {
        	                        FAILEDFLAG = ANTLR3_TRUE;
        	                        pbelle_sip_messageParser_generic_uriPop(ctx);

        	                        return ret;
        	                    }

        	                    CONSTRUCTEX();
        	                    EXCEPTION->type         = ANTLR3_NO_VIABLE_ALT_EXCEPTION;
        	                    EXCEPTION->message      = (void *)"";
        	                    EXCEPTION->decisionNum  = 15;
        	                    EXCEPTION->state        = 0;


        	                    goto rulegeneric_uriEx;

        	                }

        	                switch (alt15)
        	                {
        	            	case 1:
        	            	    // ../grammars/belle_sip_message.g:335:16: opaque_part
        	            	    {
        	            	        FOLLOWPUSH(FOLLOW_opaque_part_in_generic_uri1091);
        	            	        opaque_part25=opaque_part(ctx);

        	            	        FOLLOWPOP();
        	            	        if  (HASEXCEPTION())
        	            	        {
        	            	            goto rulegeneric_uriEx;
        	            	        }
        	            	        if (HASFAILED())
        	            	        {
        	            	            pbelle_sip_messageParser_generic_uriPop(ctx);

        	            	            return ret;
        	            	        }


        	            	        if ( BACKTRACKING==0 )
        	            	        {
        	            	            belle_generic_uri_set_opaque_part((SCOPE_TOP(generic_uri))->current,(const char*)
        	            	            (STRSTREAM->toStringTT(STRSTREAM, opaque_part25.start, opaque_part25.stop))
        	            	            ->chars) ;
        	            	        }


        	            	    }
        	            	    break;
        	            	case 2:
        	            	    // ../grammars/belle_sip_message.g:336:11: hier_part[$generic_uri::current]
        	            	    {
        	            	        FOLLOWPUSH(FOLLOW_hier_part_in_generic_uri1105);
        	            	        hier_part(ctx, (SCOPE_TOP(generic_uri))->current);

        	            	        FOLLOWPOP();
        	            	        if  (HASEXCEPTION())
        	            	        {
        	            	            goto rulegeneric_uriEx;
        	            	        }
        	            	        if (HASFAILED())
        	            	        {
        	            	            pbelle_sip_messageParser_generic_uriPop(ctx);

        	            	            return ret;
        	            	        }


        	            	    }
        	            	    break;

        	                }
        	            }

        	        }


        	    }
        	    break;

            }
        }
    }

    // This is where rules clean up and exit
    //
    goto rulegeneric_uriEx; /* Prevent compiler warnings */
    rulegeneric_uriEx: ;

    if	(HASEXCEPTION())
    {
	/* catch(decl,action)
	 */
	{

	       belle_sip_message("[%s]  reason [%s]",(const char*)EXCEPTION->name,(const char*)EXCEPTION->message);
	       belle_sip_object_unref((SCOPE_TOP(generic_uri))->current);
	       
	    ret=NULL;


	}


    }
    else
    {
    }
    pbelle_sip_messageParser_generic_uriPop(ctx);

    return ret;
}
