Bool gf_svg_parse_transformlist(GF_Matrix2D *mat, char *attribute_content)
{
	GF_Matrix2D tmp;
	GF_Err e;
	char *str;
	u32 read_chars;
	u32 i;

	gf_mx2d_init(*mat);

	str = attribute_content;
	i = 0;
	while (str[i] != 0) {
		while (str[i] == ' ') i++;
		if (str[i] == ',') i++;
		while (str[i] == ' ') i++;
		if (strstr(str+i, "scale")==str+i) {
			i += 5;
			while(str[i] == ' ') i++;
			if (str[i] == '(') {
				Fixed sx, sy;
				i++;
				read_chars = svg_parse_number(&(str[i]), &sx, 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading sx component in scale: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;

				if (str[i] == ')') {
					sy = sx;
				} else {
					read_chars = svg_parse_number(&(str[i]), &sy, 0, &e);
					if (!read_chars) {
						GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading sy component in scale: %s\n", attribute_content));
						return 0;
					}
					i += read_chars;
				}
				gf_mx2d_init(tmp);
				gf_mx2d_add_scale(&tmp, sx, sy);
				gf_mx2d_add_matrix(&tmp, mat);
				gf_mx2d_copy(*mat, tmp);

				while(str[i] == ' ') i++;
				if (str[i] == ')') i++;
				else {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing closing parenthesis in transform attribute: %s\n", attribute_content));
					return 0;
				}
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing opening parenthesis in transform attribute: %s\n", attribute_content));
				return 0;
			}
		} else if (strstr(str+i, "translate")==str+i) {
			i += 9;
			while(str[i] == ' ') i++;
			if (str[i] == '(') {
				Fixed tx, ty;
				i++;
				read_chars = svg_parse_number(&(str[i]), &tx, 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading tx component in translate: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				if (str[i] == ')') {
					ty = 0;
				} else {
					read_chars = svg_parse_number(&(str[i]), &ty, 0, &e);
					if (!read_chars) {
						GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading ty component in translate: %s\n", attribute_content));
						return 0;
					}
					i += read_chars;
				}
				gf_mx2d_init(tmp);
				gf_mx2d_add_translation(&tmp, tx, ty);
				gf_mx2d_add_matrix(&tmp, mat);
				gf_mx2d_copy(*mat, tmp);
				while(str[i] == ' ') i++;
				if (str[i] == ')') i++;
				else {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing closing parenthesis in transform attribute: %s\n", attribute_content));
					return 0;
				}
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing opening parenthesis in transform attribute: %s\n", attribute_content));
				return 0;
			}
		} else if (strstr(str+i, "rotate")==str+i) {
			i += 6;
			while(str[i] == ' ') i++;
			if (str[i] == '(') {
				Fixed angle, cx, cy;
				i++;
				read_chars = svg_parse_number(&(str[i]), &angle, 1, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading angle component in rotate: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				if (str[i] == ')') {
					cx = cy = 0;
				} else {
					read_chars = svg_parse_number(&(str[i]), &cx, 0, &e);
					if (!read_chars) {
						GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading cx component in rotate: %s\n", attribute_content));
						return 0;
					}
					i += read_chars;
					read_chars = svg_parse_number(&(str[i]), &cy, 0, &e);
					if (!read_chars) {
						GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading cy component in rotate: %s\n", attribute_content));
						return 0;
					}
					i += read_chars;
				}
				gf_mx2d_init(tmp);
				gf_mx2d_add_rotation(&tmp, cx, cy, angle);
				gf_mx2d_add_matrix(&tmp, mat);
				gf_mx2d_copy(*mat, tmp);
				while(str[i] == ' ') i++;
				if (str[i] == ')') i++;
				else {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing closing parenthesis in transform attribute: %s\n", attribute_content));
					return 0;
				}
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing opening parenthesis in transform attribute: %s\n", attribute_content));
				return 0;
			}
		} else if (strstr(str+i, "skewX")==str+i) {
			i += 5;
			while(str[i] == ' ') i++;
			if (str[i] == '(') {
				Fixed angle;
				i++;
				read_chars = svg_parse_number(&(str[i]), &angle, 1, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading angle in skewX: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				gf_mx2d_init(tmp);
				gf_mx2d_add_skew_x(&tmp, angle);
				gf_mx2d_add_matrix(&tmp, mat);
				gf_mx2d_copy(*mat, tmp);
				while(str[i] == ' ') i++;
				if (str[i] == ')') i++;
				else {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing closing parenthesis in transform attribute: %s\n", attribute_content));
					return 0;
				}
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing opening parenthesis in transform attribute: %s\n", attribute_content));
				return 0;
			}
		} else if (strstr(str+i, "skewY")==str+i) {
			i += 5;
			while(str[i] == ' ') i++;
			if (str[i] == '(') {
				Fixed angle;
				i++;
				read_chars = svg_parse_number(&(str[i]), &angle, 1, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading angle component in skewY: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				gf_mx2d_init(tmp);
				gf_mx2d_add_skew_y(&tmp, angle);
				gf_mx2d_add_matrix(&tmp, mat);
				gf_mx2d_copy(*mat, tmp);
				while(str[i] == ' ') i++;
				if (str[i] == ')') i++;
				else {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing closing parenthesis in transform attribute: %s\n", attribute_content));
					return 0;
				}
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing opening parenthesis in transform attribute: %s\n", attribute_content));
				return 0;
			}
		} else if (strstr(str+i, "matrix")==str+i) {
			i+=6;
			while(str[i] == ' ') i++;
			if (str[i] == '(') {
				i++;
				read_chars = svg_parse_number(&(str[i]), &(tmp.m[0]), 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading coefficient a in matrix: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				read_chars = svg_parse_number(&(str[i]), &(tmp.m[3]), 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading coefficient b in matrix: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				read_chars = svg_parse_number(&(str[i]), &(tmp.m[1]), 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading coefficient c in matrix: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				read_chars = svg_parse_number(&(str[i]), &(tmp.m[4]), 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading coefficient d in matrix: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				read_chars = svg_parse_number(&(str[i]), &(tmp.m[2]), 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading coefficient e in matrix: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				read_chars = svg_parse_number(&(str[i]), &(tmp.m[5]), 0, &e);
				if (!read_chars) {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Error reading coefficient f in matrix: %s\n", attribute_content));
					return 0;
				}
				i += read_chars;
				gf_mx2d_add_matrix(&tmp, mat);
				gf_mx2d_copy(*mat, tmp);
				while(str[i] == ' ') i++;
				if (str[i] == ')') i++;
				else {
					GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing closing parenthesis in transform attribute: %s\n", attribute_content));
					return 0;
				}
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Missing opening parenthesis in transform attribute: %s\n", attribute_content));
				return 0;
			}
		} else {
			GF_LOG(GF_LOG_ERROR, GF_LOG_PARSER, ("[SVG Parsing] Unrecognized transofrm type in attribute %s\n", attribute_content));
			return 0;
		}
		/*for svgView parsing*/
		if (str[i] == ')') i++;
	}
	return 1;
}
