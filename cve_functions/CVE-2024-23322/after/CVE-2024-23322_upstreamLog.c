void UpstreamRequest::upstreamLog(AccessLog::AccessLogType access_log_type) {
  const Formatter::HttpFormatterContext log_context{parent_.downstreamHeaders(),
                                                    upstream_headers_.get(),
                                                    upstream_trailers_.get(),
                                                    {},
                                                    access_log_type};

  for (const auto& upstream_log : parent_.config().upstream_logs_) {
    upstream_log->log(log_context, stream_info_);
  }
}
