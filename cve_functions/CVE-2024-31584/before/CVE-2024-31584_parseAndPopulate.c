void FlatbufferLoader::parseAndPopulate(
    uint32_t i,
    const mobile::serialization::IValue* ivalue) {
  if (const auto* func = ivalue->val_as_Function()) {
    auto func_ptr = parseFunction(func);
    all_functions_[i] = func_ptr.get();
    mcu_->register_function(std::move(func_ptr));
  } else {
    all_ivalues_[i] = parseIValue(ivalue);
  }
}
