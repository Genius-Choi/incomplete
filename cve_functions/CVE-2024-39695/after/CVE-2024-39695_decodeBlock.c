void AsfVideo::decodeBlock() {
  Internal::enforce(GUID + QWORD <= io_->size() - io_->tell(), Exiv2::ErrorCode::kerCorruptedMetadata);
  HeaderReader objectHeader(io_);
#ifdef EXIV2_DEBUG_MESSAGES
  EXV_INFO << "decodeBlock = " << GUIDTag(objectHeader.getId().data()).to_string()
           << "\tsize= " << objectHeader.getSize() << "\t " << io_->tell() << "/" << io_->size() << std::endl;
#endif
  Internal::enforce(objectHeader.getSize() <= io_->size() - io_->tell(), Exiv2::ErrorCode::kerCorruptedMetadata);
  auto tag = GUIDReferenceTags.find(GUIDTag(objectHeader.getId().data()));

  if (tag != GUIDReferenceTags.end()) {
    if (tag->second == "Header")
      decodeHeader();
    else if (tag->second == "File_Properties")
      fileProperties();
    else if (tag->second == "Stream_Properties")
      streamProperties();
    else if (tag->second == "Header_Extension")
      headerExtension();
    else if (tag->second == "Codec_List")
      codecList();
    else if (tag->second == "Extended_Content_Description")
      extendedContentDescription();
    else if (tag->second == "Content_Description")
      contentDescription();
    else if (tag->second == "Extended_Stream_Properties")
      extendedStreamProperties();
    else if (tag->second == "Degradable_JPEG_Media")
      DegradableJPEGMedia();
    else  // tag found but not processed
    {
      // Make sure that the remaining size is non-zero, so that we won't
      // keep revisiting the same location in the file.
      const uint64_t remaining_size = objectHeader.getRemainingSize();
      Internal::enforce(remaining_size > 0, Exiv2::ErrorCode::kerCorruptedMetadata);
      io_->seekOrThrow(io_->tell() + remaining_size, BasicIo::beg, ErrorCode::kerFailedToReadImageData);
    }
  } else  // tag not found
  {
    // Make sure that the remaining size is non-zero, so that we won't keep
    // revisiting the same location in the file.
    const uint64_t remaining_size = objectHeader.getRemainingSize();
    Internal::enforce(remaining_size > 0, Exiv2::ErrorCode::kerCorruptedMetadata);
    io_->seekOrThrow(io_->tell() + remaining_size, BasicIo::beg, ErrorCode::kerFailedToReadImageData);
  }

}  // AsfVideo::decodeBlock
