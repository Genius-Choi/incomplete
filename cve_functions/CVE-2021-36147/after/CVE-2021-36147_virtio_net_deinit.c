virtio_net_deinit(struct vmctx *ctx, struct pci_vdev *dev, char *opts)
{
	struct virtio_net *net;

	if (dev->arg) {
		net = (struct virtio_net *) dev->arg;

		virtio_net_tx_stop(net);

		if (net->vhost_net) {
			vhost_net_stop(net->vhost_net);
			vhost_net_deinit(net->vhost_net);
			free(net->vhost_net);
			net->vhost_net = NULL;
		}

		if (net->mevp != NULL)
			mevent_delete(net->mevp);
		else
			virtio_net_teardown(net);

		DPRINTF(("%s: done\n", __func__));
	} else
		pr_err("%s: NULL!\n", __func__);
}
