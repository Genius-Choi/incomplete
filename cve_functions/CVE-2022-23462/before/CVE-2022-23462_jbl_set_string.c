iwrc jbl_set_string(JBL jbl, const char *key, const char *v) {
  jbl_type_t t = jbl_type(jbl);
  if (((t != JBV_OBJECT) && (t != JBV_ARRAY)) || !jbl->bn.writable) {
    return JBL_ERROR_CREATION;
  }
  binn *bv = &jbl->bn;
  if (key) {
    if (t == JBV_OBJECT) {
      if (!binn_object_set_str(bv, key, v)) {
        return JBL_ERROR_CREATION;
      }
    } else {
      return JBL_ERROR_CREATION;
    }
    return 0;
  } else if (t == JBV_ARRAY) {
    if (!binn_list_add_const_str(bv, v)) {
      return JBL_ERROR_CREATION;
    }
    return 0;
  }
  return JBL_ERROR_INVALID;
}
