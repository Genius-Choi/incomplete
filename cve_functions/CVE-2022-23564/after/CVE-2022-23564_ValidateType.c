Status ResourceHandle::ValidateType(const TypeIndex& type_index) const {
  if (type_index.hash_code() != hash_code()) {
    return errors::InvalidArgument(
        "Trying to access a handle's resource using the wrong type. ",
        "The handle points to a resource (name '", name(), "') of type '",
        maybe_type_name(), "' (hash code ", hash_code(),
        ") but you are trying to access the resource as type '",
        type_index.name(), "' (hash code ", type_index.hash_code(), ")");
  }
  return Status::OK();
}
