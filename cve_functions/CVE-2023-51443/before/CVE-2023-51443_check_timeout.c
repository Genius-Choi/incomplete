static void check_timeout(switch_rtp_t *rtp_session)
{

	switch_time_t now = switch_micro_time_now();
	uint32_t elapsed = 0;

	if (now >= rtp_session->last_media) {
		elapsed = (now - rtp_session->last_media) / 1000;
	}

	switch_log_printf(SWITCH_CHANNEL_SESSION_LOG(rtp_session->session), SWITCH_LOG_DEBUG10,
					  "%s MEDIA TIMEOUT %s %d/%d\n", switch_core_session_get_name(rtp_session->session), rtp_type(rtp_session),
					  elapsed, rtp_session->media_timeout);

	if (elapsed > rtp_session->media_timeout) {
			switch_channel_t *channel = switch_core_session_get_channel(rtp_session->session);

			switch_channel_execute_on(channel, "execute_on_media_timeout");
			switch_channel_hangup(channel, SWITCH_CAUSE_MEDIA_TIMEOUT);
	}
}
