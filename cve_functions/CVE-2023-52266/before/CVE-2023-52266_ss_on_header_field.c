int ss_on_header_field(http_parser *p, const char *buf, size_t len) {
    Request *req = (Request *) p->data;
    if (req->_parse_part == PARSE_REQ_LINE) {
        req->_line.set_method(http_method_str((enum http_method)p->method));
        int ret = req->_line.parse_request_url_params();
        if (ret != 0) {
            return ret; 
        }
        if (p->http_major == 1 && p->http_minor == 0) {
            req->_line.set_http_version("HTTP/1.0");
        }
        if (p->http_major == 1 && p->http_minor == 1) {
            req->_line.set_http_version("HTTP/1.1");
        }
        req->_parse_part = PARSE_REQ_HEAD;
    }

    std::string field;
    field.assign(buf, len);
    if (req->_last_was_value) { 
        req->_header_fields.push_back(field);
        req->_last_was_value = false;
    } else {
        // when parse field partial, append the new field part
        req->_header_fields[req->_header_fields.size() - 1] += field;
    }
    LOG_DEBUG("GET field:%s", field.c_str());
    return 0;
}
