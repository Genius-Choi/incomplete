static void imxrt1020_eth_write_phy(uint8_t addr, uint8_t reg, uint32_t val) {
  ENET->EIR |= BIT(23); // MII interrupt clear
  uint8_t mask_phy_adr_reg = 0x1f; // 0b00011111: Ensure we write 5 bits (Phy address & register)
  uint32_t mask_phy_data = 0x0000ffff; // Ensure we write 16 bits (data)
  addr &= mask_phy_adr_reg;
  reg &= mask_phy_adr_reg;
  val &= mask_phy_data;
  uint32_t phy_transaction = 0x00;
  phy_transaction = (uint32_t)(0x1 << 30) \
                  | (uint32_t)(0x1 << 28) \
                  | (uint32_t)(addr << 23) \
                  | (uint32_t)(reg  << 18) \
                  | (uint32_t)(0x2 << 16) \
                  | (uint32_t)(val);
  ENET->MMFR = phy_transaction;
  wait_phy_complete();
}
