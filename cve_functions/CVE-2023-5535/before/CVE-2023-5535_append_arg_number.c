append_arg_number(
    win_T	*wp,
    char_u	*buf,
    int		buflen,
    int		add_file)	// Add "file" before the arg number
{
    if (ARGCOUNT <= 1)		// nothing to do
	return FALSE;

    char *msg;
    switch ((wp->w_arg_idx_invalid ? 1 : 0) + (add_file ? 2 : 0))
    {
	case 0: msg = _(" (%d of %d)"); break;
	case 1: msg = _(" ((%d) of %d)"); break;
	case 2: msg = _(" (file %d of %d)"); break;
	case 3: msg = _(" (file (%d) of %d)"); break;
    }

    char_u *p = buf + STRLEN(buf);	// go to the end of the buffer
    vim_snprintf((char *)p, (size_t)(buflen - (p - buf)), msg,
						  wp->w_arg_idx + 1, ARGCOUNT);
    return TRUE;
}
