FIO_FUNC void fio_riskyhash_test(void) {
  fprintf(stderr, "===================================\n");
#if NODEBUG
  fio_riskyhash_speed_test();
#else
  fprintf(stderr, "fio_risky_hash speed test skipped (debug mode is slow)\n");
  fio_str_info_s str1 =
      (fio_str_info_s){.data = "nothing_is_really_here1", .len = 23};
  fio_str_info_s str2 =
      (fio_str_info_s){.data = "nothing_is_really_here2", .len = 23};
  fio_str_s copy = FIO_STR_INIT;
  FIO_ASSERT(fio_risky_hash(str1.data, str1.len, 1) !=
                 fio_risky_hash(str2.data, str2.len, 1),
             "Different strings should have a different risky hash");
  fio_str_write(&copy, str1.data, str1.len);
  FIO_ASSERT(fio_risky_hash(str1.data, str1.len, 1) ==
                 fio_risky_hash(fio_str_data(&copy), fio_str_len(&copy), 1),
             "Same string values should have the same risky hash");
  fio_str_free(&copy);
  (void)fio_riskyhash_speed_test;
#endif
}
