static uint32_t shiftResultSizeImpl(
    ShiftOpIs shiftOp,
    ImmutableBigIntRef lhs,
    uint32_t shiftAmnt) {
  uint32_t extraDigits = 0;
  if (shiftOp == ShiftOpIs::Left) {
    // left shifts will preppend zero digits to the bigint, thus the result
    // should have extra bits (when compared to lhs)
    extraDigits = numDigitsForSizeInBits(shiftAmnt);
  }

  const uint32_t result = lhs.numDigits + extraDigits;
  assert(extraDigits <= result && "too many digits in result");
  return result;
}
