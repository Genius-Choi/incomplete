static int ctx_alloc(struct wcall_ctx **ctxp, struct calling_instance *inst, void *context)
{
	struct wcall_ctx *ctx;

	if (!ctxp)
		return EINVAL;
	
	ctx = mem_zalloc(sizeof(*ctx), ctx_destructor);
	if (!ctx)
		return ENOMEM;

	ctx->context = context;
	ctx->inst = inst;
	lock_write_get(inst->lock);
	list_append(&inst->ctxl, &ctx->le, ctx);
	lock_rel(inst->lock);

	*ctxp = ctx;
	
	return 0;
}
