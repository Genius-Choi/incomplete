virtio_input_get_evbits(struct virtio_input *vi, int type,
			struct virtio_input_config *cfg)
{
	unsigned int cmd;
	int count, size;

	if (!cfg)
		return false;

	switch (type) {
	case EV_KEY:
		count = KEY_CNT;
		break;
	case EV_REL:
		count = REL_CNT;
		break;
	case EV_ABS:
		count = ABS_CNT;
		break;
	case EV_MSC:
		count = MSC_CNT;
		break;
	case EV_SW:
		count = SW_CNT;
		break;
	case EV_LED:
		count = LED_CNT;
		break;
	default:
		return false;
	}

	cmd = EVIOCGBIT(type, count / 8);
	size = virtio_input_get_bitmap(vi, cmd, count, cfg);
	if (size > 0) {
		cfg->select = VIRTIO_INPUT_CFG_EV_BITS;
		cfg->subsel = type;
		cfg->size = size;
		return true;
	}

	return false;
}
