wsemul_sun_output_haveesc(struct wsemul_sun_emuldata *edp,
    struct wsemul_inputstate *instate)
{
	switch (instate->inchar) {
	case '[':		/* continuation of multi-char sequence */
		edp->nargs = 0;
		bzero(edp->args, sizeof (edp->args));
		edp->state = SUN_EMUL_STATE_CONTROL;
		break;
#ifdef HAVE_UTF8_SUPPORT
	case '%':
		edp->state = SUN_EMUL_STATE_PERCENT;
		break;
#endif
	default:
#ifdef DEBUG
		printf("ESC %x unknown\n", instate->inchar);
#endif
		edp->state = SUN_EMUL_STATE_NORMAL;	/* XXX is this wise? */
		break;
	}
	return 0;
}
