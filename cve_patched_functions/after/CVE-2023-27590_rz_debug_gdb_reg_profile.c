static const char *rz_debug_gdb_reg_profile(RzDebug *dbg) {
	RzDebugGdbCtx *ctx = dbg->plugin_data;
	check_connection(dbg);
	int arch = rz_sys_arch_id(dbg->arch);
	int bits = dbg->analysis->bits;
	// XXX This happens when rizin set dbg.backend before opening io_gdb
	if (!ctx->desc) {
		return gdbr_get_reg_profile(arch, bits);
	}
	if (!ctx->desc->target.valid) {
		gdbr_set_architecture(ctx->desc, arch, bits);
	}
	if (ctx->desc->target.regprofile) {
		return strdup(ctx->desc->target.regprofile);
	}
	return NULL;
}
