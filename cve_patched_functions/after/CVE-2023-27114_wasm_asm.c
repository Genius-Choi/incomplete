R_IPI int wasm_asm(const char *str, ut8 *buf, int buf_len) {
	int i = 0, len = 0;
	char tmp[256];
	WasmOpDef *opdef = NULL;
	while (i < (sizeof (tmp) - 1) && str[i] && str[i] != ' ') {
		tmp[i] = str[i];
		i++;
	}
	tmp[i] = 0;
	// Find opcode
	for (i = 0; i < 0xff; i++) {
		opdef = &opcodes[i];
		if (opdef->txt) {
			if (!strcmp (opdef->txt, tmp)) {
				buf[len++] = i;
				if (opdef->min > 1) {
					for (i = 1; i < opdef->min; i++) {
						const char *arg = str + strlen (tmp);
						buf[len++] = r_num_get (NULL, arg);
					}
				}
				break;
			}
		}
	}
	// Check extensions
	if (len == 0) {
		for (i = 0; i < 0xff; i++) {
			opdef = &opcodes_threads[i];
			if (opdef->txt) {
				if (!strcmp (opdef->txt, tmp)) {
					buf[len++] = 0xfe;
					buf[len++] = i;
					break;
				}
			}
		}
	}
	// TODO: parse immediates
	return len > 0? len: -1;
}
