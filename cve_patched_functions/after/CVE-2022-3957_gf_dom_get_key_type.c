GF_KeyCode gf_dom_get_key_type(char *key_name)
{
	if (strlen(key_name) == 1) {
		char c[2];
		c[0] = key_name[0];
		c[1] = 0;
		strupr(c);
		if (c[0] >= 'A' && c[0] <= 'Z')
			return (GF_KEY_A + (c[0] - 'A') );

		if (c[0] >= '0' && c[0] <= '9')
			return ( GF_KEY_0 + (c[0] - '0') );

		switch ((u8) c[0]) {
		case '@':
			return GF_KEY_AT;
		case '*':
			return GF_KEY_STAR;
		case '#':
			return GF_KEY_NUMBER;
		case ' ':
			return GF_KEY_SPACE;
		case '!':
			return GF_KEY_EXCLAMATION;
		case '"':
			return GF_KEY_QUOTATION;
		case '$':
			return GF_KEY_DOLLAR;
		case '&':
			return GF_KEY_AMPERSAND;
		case '\'':
			return GF_KEY_APOSTROPHE;
		case '(':
			return GF_KEY_LEFTPARENTHESIS;
		case ')':
			return GF_KEY_RIGHTPARENTHESIS;
		case '+':
			return GF_KEY_PLUS;
		case ',':
			return GF_KEY_COMMA;
		case '-':
			return GF_KEY_HYPHEN;
		case '.':
			return GF_KEY_FULLSTOP;
		case '/':
			return GF_KEY_SLASH;
		case ':':
			return GF_KEY_COLON;
		case ';':
			return GF_KEY_SEMICOLON;
		case '<':
			return GF_KEY_LESSTHAN;
		case '=':
			return GF_KEY_EQUALS;
		case '>':
			return GF_KEY_GREATERTHAN;
		case '?':
			return GF_KEY_QUESTION;
		case '[':
			return GF_KEY_LEFTSQUAREBRACKET;
		case '\\':
			return GF_KEY_BACKSLASH;
		case ']':
			return GF_KEY_RIGHTSQUAREBRACKET;
		case '^':
			return GF_KEY_CIRCUM;
		case '_':
			return GF_KEY_UNDERSCORE;
		case '`':
			return GF_KEY_GRAVEACCENT;
		case '{':
			return GF_KEY_LEFTCURLYBRACKET;
		case '|':
			return GF_KEY_PIPE;
		case '}':
			return GF_KEY_RIGHTCURLYBRACKET;
		case 0xA1:
			return GF_KEY_INVERTEXCLAMATION;
		default:
			return GF_KEY_UNIDENTIFIED;
		}
	} else {
		u32 i, count;
		count = sizeof(predefined_key_identifiers) / sizeof(struct predef_keyid);
		for (i=0; i<count; i++) {
			if (!stricmp(key_name, predefined_key_identifiers[i].name)) {
				return predefined_key_identifiers[i].key_code;
			}
		}
		return GF_KEY_UNIDENTIFIED;
	}
}
