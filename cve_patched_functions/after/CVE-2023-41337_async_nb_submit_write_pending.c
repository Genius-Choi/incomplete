static void async_nb_submit_write_pending(void)
{
    struct async_nb_transaction_t *transaction;

    if (!h2o_socket_is_writing(async_nb.sock) && (transaction = async_nb_get(&async_nb.write_queue)) != NULL) {
        /* write the first buf in the write queue */
        h2o_iovec_t bufs[2];
        transaction->write_size = neverbleed_iobuf_size(transaction->buf);
        bufs[0] = h2o_iovec_init(&transaction->write_size, sizeof(transaction->write_size));
        bufs[1] = h2o_iovec_init(transaction->buf->start, transaction->write_size);
        h2o_socket_write(async_nb.sock, bufs, 2, async_nb_on_write_complete);
    }
}
