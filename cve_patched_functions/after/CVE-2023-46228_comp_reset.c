bool comp_reset(zckCtx *zck) {
    ALLOCD_BOOL(zck, zck);

    zck->comp.started = 0;
    if(zck->comp.dc_data) {
        free(zck->comp.dc_data);
        zck->comp.dc_data = NULL;
        zck->comp.dc_data_loc = 0;
        zck->comp.dc_data_size = 0;
    }
    if(zck->comp.close == NULL)
        return true;
    return zck->comp.close(zck, &(zck->comp));
}
