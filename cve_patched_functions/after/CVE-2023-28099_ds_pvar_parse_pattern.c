void ds_pvar_parse_pattern(str pattern)
{
	char *p, *end;

	ds_pattern_prefix = pattern;
	end = pattern.s + pattern.len - DS_PV_ALGO_MARKER_LEN + 1;

	/* first try to see if we have any marker(s) */
	for (p = pattern.s; p < end; p++) {
		if (!memcmp(p, DS_PV_ALGO_ID_MARKER, DS_PV_ALGO_MARKER_LEN)) {
			if (ds_pattern_one>DS_PATTERN_NONE) {
				ds_pattern_two = DS_PATTERN_ID;
				/* skip marker */
				ds_pattern_infix.s = pattern.s + ds_pattern_prefix.len + DS_PV_ALGO_MARKER_LEN;
				ds_pattern_infix.len = p - pattern.s - ds_pattern_prefix.len - DS_PV_ALGO_MARKER_LEN;
			} else {
				ds_pattern_one = DS_PATTERN_ID;
				ds_pattern_prefix.len = p - pattern.s;
			}
		} else if (!memcmp(p, DS_PV_ALGO_URI_MARKER, DS_PV_ALGO_MARKER_LEN)) {
			if (ds_pattern_one>DS_PATTERN_NONE) {
				ds_pattern_two = DS_PATTERN_URI;
				/* skip marker */
				ds_pattern_infix.s = pattern.s + ds_pattern_prefix.len + DS_PV_ALGO_MARKER_LEN;
				ds_pattern_infix.len = p - pattern.s - ds_pattern_prefix.len - DS_PV_ALGO_MARKER_LEN;
			} else {
				ds_pattern_one = DS_PATTERN_URI;
				ds_pattern_prefix.len = p - pattern.s;
			}
		}
	}

	/* if reached end - pattern not present => pure pvar */
	if (ds_pattern_one==DS_PATTERN_NONE) {
		LM_DBG("Pattern not found\n");
		return;
	}

	/* skip marker */
	ds_pattern_suffix.s = pattern.s + ds_pattern_prefix.len + ds_pattern_infix.len 
							+ ( ds_pattern_two==DS_PATTERN_NONE ? DS_PV_ALGO_MARKER_LEN : 2*DS_PV_ALGO_MARKER_LEN);
	ds_pattern_suffix.len = pattern.s + pattern.len - ds_pattern_suffix.s;
}
