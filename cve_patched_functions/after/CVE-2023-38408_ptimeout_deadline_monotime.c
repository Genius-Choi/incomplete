ptimeout_deadline_monotime(struct timespec *pt, time_t when)
{
	struct timespec now, t;

	t.tv_sec = when;
	t.tv_nsec = 0;
	monotime_ts(&now);

	if (timespeccmp(&now, &t, >=))
		ptimeout_deadline_sec(pt, 0);
	else {
		timespecsub(&t, &now, &t);
		ptimeout_deadline_tsp(pt, &t);
	}
}
