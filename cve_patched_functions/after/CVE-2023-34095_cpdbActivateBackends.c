static void cpdbActivateBackends(cpdb_frontend_obj_t *f)
{
    DIR *d;
    int len;
    const char *info_dir_name;
    struct dirent *dir;
    PrintBackend *proxy;
    char *backend_suffix;

    logdebug("Activating backends\n");
    if ((info_dir_name = getenv("CPDB_BACKEND_INFO_DIR")) == NULL)
      info_dir_name = CPDB_BACKEND_INFO_DIR;
    if ((d = opendir(info_dir_name)) == NULL)
    {
        logerror("Couldn't open backend info directory : %s\n",
		 info_dir_name);
        return;
    }
    len = strlen(CPDB_BACKEND_PREFIX);

    while ((dir = readdir (d)) != NULL)
    {
        if (strncmp(CPDB_BACKEND_PREFIX, dir->d_name, len) == 0)
        {
            backend_suffix = cpdbGetStringCopy((dir->d_name) + len);
            loginfo("Found backend %s\n", backend_suffix);
            proxy = cpdbCreateBackendFromFile(f->connection, dir->d_name);
            g_hash_table_insert(f->backend, backend_suffix, proxy);
            f->num_backends++;
            fetchPrinterListFromBackend(f, backend_suffix);
        }
    }
    closedir(d);
}
