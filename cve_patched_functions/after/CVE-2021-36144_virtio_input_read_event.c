virtio_input_read_event(int fd __attribute__((unused)),
			enum ev_type t __attribute__((unused)),
			void *arg)
{
	struct virtio_input *vi = arg;
	struct virtio_input_event event;
	struct input_event host_event;
	int len;

	while (1) {
		len = read(vi->fd, &host_event, sizeof(host_event));
		if (len != sizeof(host_event)) {
			if (len == -1 && errno != EAGAIN)
				WPRINTF(("vtinput: host read failed! "
					"len = %d, errno = %d\n",
					len, errno));
			break;
		}

		event.type = host_event.type;
		event.code = host_event.code;
		event.value = host_event.value;
		virtio_input_send_event(vi, &event);
	}
}
