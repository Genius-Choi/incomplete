static int eval_msg_corrupted_publish(struct mqtt_test *mqtt_test)
{
	struct buf_ctx *buf = (struct buf_ctx *)mqtt_test->ctx;
	int rc;
	u8_t type_and_flags;
	u32_t length;
	struct mqtt_publish_param dec_param;

	rc = fixed_header_decode(buf, &type_and_flags, &length);
	zassert_equal(rc, 0, "fixed_header_decode failed");

	rc = publish_decode(type_and_flags, length, buf, &dec_param);
	zassert_equal(rc, -EINVAL, "publish_decode should fail");

	return TC_PASS;
}
