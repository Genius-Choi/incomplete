tlstran_pipe_close(void *arg)
{
	tlstran_pipe *p = arg;
	// nni_pipe *    npipe = p->npipe;

	nni_mtx_lock(&p->mtx);
	p->closed = true;
	log_trace(" ###### tlstran_pipe_close ###### ");
	// p->closed = true;

	nni_lmq_flush(&p->rslmq);
	nni_mtx_unlock(&p->mtx);

	nni_aio_close(p->rxaio);
	nni_aio_close(p->rpaio);
	nni_aio_close(p->txaio);
	nni_aio_close(p->qsaio);
	nni_aio_close(p->negoaio);

	nng_stream_close(p->conn);
}
