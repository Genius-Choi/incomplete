inline void kill_broken_server()
{
  /* hack to get around signals ignored in syscalls for problem OS's */
  if (unix_sock == INVALID_SOCKET ||
      (!opt_disable_networking && base_ip_sock == INVALID_SOCKET))
  {
    select_thread_in_use = 0;
    /* The following call will never return */
    DBUG_PRINT("general", ("killing server because socket is closed"));
    kill_server((void*) MYSQL_KILL_SIGNAL);
  }
}
