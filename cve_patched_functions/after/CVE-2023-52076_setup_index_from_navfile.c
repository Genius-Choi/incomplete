setup_index_from_navfile(gchar *tocpath)
{
    GList *index = NULL;
    open_xml_document(tocpath);
    set_xml_root_node(NULL);
    xmlNodePtr nav = xml_get_pointer_to_node((xmlChar*)"nav",(xmlChar*)"type",(xmlChar*)"toc");

    if (nav == NULL) {
        xml_free_doc();
        return NULL;
    }

    xmlretval=NULL;
    xml_parse_children_of_node(nav,(xmlChar*)"ol", NULL,NULL);
    gchar *navdirend = g_strrstr(tocpath,"/");
    gchar *navdir = g_malloc0(strlen(tocpath));
    gchar *reader = tocpath;
    gchar *writer = navdir;

    while (reader != navdirend) {
        (*writer) = (*reader) ;
        writer++;reader++;
    }
    index = get_child_list(xmlretval,navdir);
    g_free(navdir);
    xml_free_doc();
    return index;
}
