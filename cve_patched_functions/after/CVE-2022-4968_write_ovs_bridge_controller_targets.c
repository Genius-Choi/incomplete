write_ovs_bridge_controller_targets(const NetplanOVSSettings* settings, const NetplanOVSController* controller, const gchar* bridge, GString* cmds, GError** error)
{
    gchar* target = g_array_index(controller->addresses, char*, 0);
    GString* s = g_string_sized_new(0);
    gboolean ret = TRUE;
    gboolean needs_ssl = FALSE;

    for (unsigned i = 0; i < controller->addresses->len; ++i) {
        target = g_array_index(controller->addresses, char*, i);
        if (!needs_ssl)
            if (!check_ovs_ssl(settings, target, &needs_ssl, error)) {
                ret = FALSE;
                goto cleanup;
            }
        g_string_append_printf(s, "%s ", target);
    }
    g_string_erase(s, s->len-1, 1);

    append_systemd_cmd(cmds, OPENVSWITCH_OVS_VSCTL " set-controller %s %s", bridge, s->str);
    write_ovs_tag_setting(bridge, "Bridge", "global", "set-controller", s->str, cmds);

cleanup:
    g_string_free(s, TRUE);
    return ret;
}
