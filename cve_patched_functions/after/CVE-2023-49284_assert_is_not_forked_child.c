void assert_is_not_forked_child(const char *who) {
    if (unlikely(is_forked_child())) {
        FLOGF(error, L"%s called in a forked child.", who);
        FLOG(error, L"Break on debug_thread_error to debug.");
        debug_thread_error();
    }
}
