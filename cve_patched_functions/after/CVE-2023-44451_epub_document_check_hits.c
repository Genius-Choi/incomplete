epub_document_check_hits(EvDocumentFind *document_find,
                         EvPage         *page,
                         const gchar    *text,
                         gboolean        case_sensitive)
{
	gchar *filepath = g_filename_from_uri((gchar*)page->backend_page,NULL,NULL);
	htmlDocPtr htmldoc =  xmlParseFile(filepath);
	
	if (htmldoc == NULL) {
		g_free (filepath);
		return 0;
	}
		
	htmlNodePtr htmltag = xmlDocGetRootElement(htmldoc);
	if(htmltag == NULL) {
		xmlFreeDoc(htmldoc);
		g_free (filepath);
		return 0;
	}
	
	int count=0;
	htmlNodePtr bodytag = htmltag->xmlChildrenNode;

	while ( xmlStrcmp(bodytag->name,(xmlChar*)"body") ) {
		bodytag = bodytag->next;
	}

	xmlBufferPtr bodybuffer = xmlBufferCreate();
	xmlNodeDump(bodybuffer,htmldoc,bodytag,0,1);

	count = get_substr_count((char*)bodybuffer->content,text,case_sensitive);

	xmlBufferFree(bodybuffer);
	xmlFreeDoc(htmldoc);
	g_free (filepath);

	return count;
}
