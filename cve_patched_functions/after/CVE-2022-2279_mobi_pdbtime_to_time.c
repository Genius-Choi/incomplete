struct tm * mobi_pdbtime_to_time(const long pdb_time) {
    time_t time = pdb_time;
    const int unix1996 = 820454400;
    if (time < unix1996 && time > 0) {
        /* sometimes dates are stored as little endian */
        time = mobi_swap32((uint32_t) time);
    }
    const uint32_t mactime_flag = (uint32_t) (1U << 31);
    if (time & mactime_flag) {
        debug_print("%s\n", "mac time");
        time -= EPOCH_MAC_DIFF;
    }
    return localtime(&time);
}
