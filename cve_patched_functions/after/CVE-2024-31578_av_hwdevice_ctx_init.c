int av_hwdevice_ctx_init(AVBufferRef *ref)
{
    AVHWDeviceContext *ctx = (AVHWDeviceContext*)ref->data;
    int ret = 0;

    if (ctx->internal->hw_type->device_init)
        ret = ctx->internal->hw_type->device_init(ctx);

    return ret;
}
