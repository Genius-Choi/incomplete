static switch_status_t enable_remote_rtcp_socket(switch_rtp_t *rtp_session, const char **err) {

	switch_status_t status = SWITCH_STATUS_SUCCESS;

	if (rtp_session->flags[SWITCH_RTP_FLAG_ENABLE_RTCP]) {

		if (switch_sockaddr_info_get(&rtp_session->rtcp_remote_addr, rtp_session->eff_remote_host_str, SWITCH_UNSPEC,
									 rtp_session->remote_rtcp_port, 0, rtp_session->pool) != SWITCH_STATUS_SUCCESS || !rtp_session->rtcp_remote_addr) {
			*err = "RTCP Remote Address Error!";
			return SWITCH_STATUS_FALSE;
		} else {
			const char *host;
			char bufa[50];

			host = switch_get_addr(bufa, sizeof(bufa), rtp_session->rtcp_remote_addr);

			switch_log_printf(SWITCH_CHANNEL_SESSION_LOG(rtp_session->session), SWITCH_LOG_DEBUG,
							  "Setting RTCP remote addr to %s:%d %d\n", host, rtp_session->remote_rtcp_port, rtp_session->rtcp_remote_addr->family);
		}

		if (rtp_session->rtcp_sock_input && switch_sockaddr_get_family(rtp_session->rtcp_remote_addr) ==
			switch_sockaddr_get_family(rtp_session->rtcp_local_addr)) {
			rtp_session->rtcp_sock_output = rtp_session->rtcp_sock_input;
		} else {

			if (rtp_session->rtcp_sock_output && rtp_session->rtcp_sock_output != rtp_session->rtcp_sock_input) {
				switch_socket_close(rtp_session->rtcp_sock_output);
			}

			if ((status = switch_socket_create(&rtp_session->rtcp_sock_output,
											   switch_sockaddr_get_family(rtp_session->rtcp_remote_addr),
											   SOCK_DGRAM, 0, rtp_session->pool)) != SWITCH_STATUS_SUCCESS) {
				*err = "RTCP Socket Error!";
			}
		}

	} else {
		*err = "RTCP NOT ACTIVE!";
	}

	return status;

}
