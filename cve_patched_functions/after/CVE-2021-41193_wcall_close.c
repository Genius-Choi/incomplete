void wcall_close(void)
{
	struct le *le;

	debug("wcall: close: initialized=%d\n", calling.initialized);
	
	if (!calling.initialized)
		return;	

	lock_write_get(calling.lock);
	LIST_FOREACH(&calling.logl, le) {
		struct log_entry *loge = le->data;
		
		log_unregister_handler(&loge->logger);
	}
	list_flush(&calling.logl);
	list_flush(&calling.instances);

	lock_rel(calling.lock);	
#ifndef __EMSCRIPTEN__
	dns_close();
#endif

	calling.lock = mem_deref(calling.lock);
	calling.initialized = false;
}
