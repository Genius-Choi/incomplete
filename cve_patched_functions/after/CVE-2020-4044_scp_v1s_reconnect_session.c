scp_v1s_reconnect_session(struct SCP_CONNECTION *c, SCP_DISPLAY d)
{
    tui32 version = 1;
    tui32 size = 14;
    tui16 cmd = 46;

    /* ok, we send session data and display */
    init_stream(c->out_s, c->out_s->size);

    /* header */
    out_uint32_be(c->out_s, version);
    out_uint32_be(c->out_s, size);
    out_uint16_be(c->out_s, SCP_COMMAND_SET_DEFAULT);
    out_uint16_be(c->out_s, cmd);

    /* session data */
    out_uint16_be(c->out_s, d); /* session display */
    /*out_uint8(c->out_s, ds->type);
    out_uint16_be(c->out_s, ds->height);
    out_uint16_be(c->out_s, ds->width);
    out_uint8(c->out_s, ds->bpp);
    out_uint8(c->out_s, ds->idle_days);
    out_uint8(c->out_s, ds->idle_hours);
    out_uint8(c->out_s, ds->idle_minutes);*/
    /* these last three are not really needed... */

    if (0 != scp_tcp_force_send(c->in_sck, c->out_s->data, size))
    {
        log_message(LOG_LEVEL_WARNING, "[v1s:%d] connection aborted: network error", __LINE__);
        return SCP_SERVER_STATE_NETWORK_ERR;
    }

    return SCP_SERVER_STATE_OK;
}
