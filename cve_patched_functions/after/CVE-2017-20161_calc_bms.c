static void calc_bms(unsigned wlanidx) {
	long long now = getutime64();
	struct wlaninfo *w = &wlans[wlanidx];
	lock();
	long long age_ms = (now - w->last_seen)/1000;
	unlock();
	age_ms=MIN(5000, age_ms)/100; /* seems we end up with a range 0-50 */
	int scale = max - min;
	float scalepercent = (float)scale/100.f;
	float curr_percent = ((float)w->last_rssi - (float)min) / scalepercent;
	if(age_ms < 15) set_bms(curr_percent);
	else bms = 0;
}
