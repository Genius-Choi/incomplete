virtio_ipu_k_init(struct virtio_ipu *ipu)
{

	if (ipu->vbs_k.ipu_fd != -1) {
		IPRINTF(LWRN, "Ooops! Re-entered!!\n");
		return -VIRTIO_ERROR_REENTER;
	}

	ipu->vbs_k.ipu_fd = open(IPU_VBS_DEV_PATH, O_RDWR);
	if (ipu->vbs_k.ipu_fd < 0) {
		IPRINTF(LWRN, "Failed to open %s!\n",
			 IPU_VBS_DEV_PATH);
		return -VIRTIO_ERROR_FD_OPEN_FAILED;
	}
	IPRINTF(LDBG, "Open %s success fd:%d!\n",
		 IPU_VBS_DEV_PATH, ipu->vbs_k.ipu_fd);

	memset(&ipu->vbs_k.ipu_kdev, 0, sizeof(struct vbs_dev_info));
	memset(&ipu->vbs_k.ipu_kvqs, 0, sizeof(struct vbs_dev_info));

	return VIRTIO_SUCCESS;
}
