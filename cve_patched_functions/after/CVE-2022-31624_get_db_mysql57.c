int get_db_mysql57(MYSQL_THD thd, char **name, int *len)
{
#ifdef __linux__
  int db_off;
  int db_len_off;
  if (debug_server_started)
  {
#ifdef __x86_64__
    db_off= 608;
    db_len_off= 616;
#else
    db_off= 0;
    db_len_off= 0;
#endif /*x86_64*/
  }
  else
  {
#ifdef __x86_64__
    db_off= 536;
    db_len_off= 544;
#else
    db_off= 0;
    db_len_off= 0;
#endif /*x86_64*/
  }

  *name= *(char **) (((char *) thd) + db_off);
  *len= *((int *) (((char*) thd) + db_len_off));
  if (*name && (*name)[*len] != 0)
    return 1;
  return 0;
#else
  return 1;
#endif
}
