schedule_progress_changed (PkTransaction *transaction)
{
	transaction->priv->progress_changed = TRUE;

	if (transaction->priv->progress_timeout_source == NULL) {
		g_autoptr(GSource) source = NULL;

		source = g_timeout_source_new (100  /* ms */);
		g_source_set_callback (source, G_SOURCE_FUNC (progress_timeout_cb), transaction, NULL);

#if GLIB_CHECK_VERSION(2, 70, 0)
		g_source_set_static_name (source, "PkTransaction progress timeout");
#endif

		g_source_attach (source, g_main_context_get_thread_default ());
		transaction->priv->progress_timeout_source = g_steal_pointer (&source);
	}
}
