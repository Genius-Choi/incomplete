static int lookup_address(SOCKET_IO_INSTANCE* socket_io_instance)
{
    int result = 0;
    
    if (socket_io_instance->address_type == ADDRESS_TYPE_IP)
    {
        if (!dns_resolver_is_lookup_complete(socket_io_instance->dns_resolver))
        {
            socket_io_instance->io_state = IO_STATE_OPENING;
        }
        else if (dns_resolver_get_ipv4(socket_io_instance->dns_resolver) == 0)
        {
            LogError("DNS resolution failure %d.", WSAGetLastError());
            result = MU_FAILURE;
        }
        else
        {
            //The hostname IP has been returned. 
            //So, the socket is ready to open because currently socket_io_instance->socket is INVALID_SOCKET.
            socket_io_instance->io_state = IO_STATE_OPEN;
        }
    }
    else //ADDRESS_TYPE_DOMAIN_SOCKET
    {
        socket_io_instance->io_state = IO_STATE_OPEN;
    }

    return result;
}
