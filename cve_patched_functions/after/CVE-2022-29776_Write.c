size_t CxMemFile::Write(const void *buffer, size_t size, size_t count)
{
	m_bEOF = false;
	if (m_pBuffer==NULL) return 0;
	if (buffer==NULL) return 0;

	int32_t nCount = (int32_t)(count*size);
	if (nCount == 0) return 0;

	if (m_Position + nCount > m_Edge){
		if (!Alloc(m_Position + nCount)){
			return false;
		}
	}

	memcpy(m_pBuffer + m_Position, buffer, nCount);

	m_Position += nCount;

	if (m_Position > (int32_t)m_Size) m_Size = m_Position;
	
	return count;
}
