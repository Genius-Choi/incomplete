    non_empty_cond_var_.wait(lock, [this]() { return !buf_.empty(); });
