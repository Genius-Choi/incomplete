yyjson_doc *yyjson_read_file(const char *path,
                             yyjson_read_flag flg,
                             const yyjson_alc *alc_ptr,
                             yyjson_read_err *err) {
#define return_err(_code, _msg) do { \
    err->pos = 0; \
    err->msg = _msg; \
    err->code = YYJSON_READ_ERROR_##_code; \
    return NULL; \
} while (false)
    

    yyjson_doc *doc;
    FILE *file;
    

    if (unlikely(!path)) return_err(INVALID_PARAMETER, "input path is NULL");
    
    file = fopen_readonly(path);
    if (unlikely(!file)) return_err(FILE_OPEN, "file opening failed");
    
    doc = yyjson_read_fp(file, flg, alc_ptr, err);
    fclose(file);
    return doc;
    
#undef return_err
}
