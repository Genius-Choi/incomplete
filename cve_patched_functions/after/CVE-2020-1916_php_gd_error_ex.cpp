void php_gd_error_ex(int type, const char *format, ...)
{
  va_list args;

  va_start(args, format);
  std::string msg;
  HPHP::string_vsnprintf(msg, format, args);
  va_end(args);

  if (type == E_ERROR) {
    HPHP::raise_error(msg);
  } else if (type == E_WARNING) {
    HPHP::raise_warning(msg);
  } else if (type == E_NOTICE) {
    HPHP::raise_notice(msg);
  }
}
