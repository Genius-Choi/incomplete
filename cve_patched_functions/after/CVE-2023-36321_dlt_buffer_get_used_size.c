int dlt_buffer_get_used_size(DltBuffer *buf)
{
    int write, read, count;

    /* catch null pointer */
    if (buf == NULL)
        return DLT_RETURN_WRONG_PARAMETER;

    /* check if buffer available */
    if (buf->shm == NULL)
        return DLT_RETURN_OK;

    write = ((int *)(buf->shm))[0];
    read = ((int *)(buf->shm))[1];
    count = ((int *)(buf->shm))[2];

    if (count == 0)
        return DLT_RETURN_OK;

    if (write > read)
        return write - read;

    return (int)buf->size - read + write;
}
