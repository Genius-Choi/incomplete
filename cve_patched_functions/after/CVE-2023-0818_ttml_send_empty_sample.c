static GF_Err ttml_send_empty_sample(GF_TXTIn *ctx, u64 sample_start, u64 sample_end)
{
	//we are not splitting, don't inject empty sample
	if (! ctx->ttml_split) return GF_OK;
	if (ctx->no_empty) return GF_OK;

	GF_List *bck = ctx->root_working_copy->content;
	ctx->root_working_copy->content = gf_list_new();
	char *samp_text = gf_xml_dom_serialize_root((GF_XMLNode*)ctx->root_working_copy, GF_FALSE, GF_FALSE);
	gf_list_del(ctx->root_working_copy->content);
	ctx->root_working_copy->content = bck;
	if (!samp_text) return GF_OUT_OF_MEM;

	char *txt_str = ttxt_parse_string(samp_text, GF_TRUE);
	if (!txt_str) txt_str = "";
	u32 txt_len = (u32) strlen(txt_str);
	u8 *pck_data;
	GF_FilterPacket *pck = gf_filter_pck_new_alloc(ctx->opid, txt_len, &pck_data);
	if (!pck) {
		gf_free(samp_text);
		return GF_OUT_OF_MEM;
	}
	memcpy(pck_data, txt_str, txt_len);
	gf_free(samp_text);

	gf_filter_pck_set_sap(pck, GF_FILTER_SAP_1);

	u64 cts = gf_timestamp_rescale(sample_start, 1000, ctx->timescale);
	if (ctx->ttml_cts.num>=0) {
		cts += gf_timestamp_rescale(ctx->ttml_cts.num, ctx->ttml_cts.den, ctx->timescale);
		cts -= ctx->cts_first_interval;
	}
	gf_filter_pck_set_cts(pck, cts);

	if (sample_end >= sample_start) {
		u64 dur = gf_timestamp_rescale(sample_end - sample_start, 1000, ctx->timescale);
		gf_filter_pck_set_duration(pck, (u32) dur);
	}

	return gf_filter_pck_send(pck);
}
