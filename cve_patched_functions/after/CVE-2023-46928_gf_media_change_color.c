GF_Err gf_media_change_color(GF_ISOFile *file, u32 track, s32 fullrange, s32 vidformat, s32 colorprim, s32 transfer, s32 colmatrix)
{
#ifndef GPAC_DISABLE_AV_PARSERS
	GF_Err e;
	u32 stype = gf_isom_get_media_subtype(file, track, 1);
	if ((stype==GF_ISOM_SUBTYPE_AVC_H264)
			|| (stype==GF_ISOM_SUBTYPE_AVC2_H264)
			|| (stype==GF_ISOM_SUBTYPE_AVC3_H264)
			|| (stype==GF_ISOM_SUBTYPE_AVC4_H264)
	) {
		GF_AVCConfig *avcc = gf_isom_avc_config_get(file, track, 1);
		gf_avc_change_color(avcc, fullrange, vidformat, colorprim, transfer, colmatrix);
		e = gf_isom_avc_config_update(file, track, 1, avcc);
		gf_odf_avc_cfg_del(avcc);
		if (e) return e;
		//remove any colr box
		return gf_isom_set_visual_color_info(file, track, 1, 0, 0, 0, 0, 0, NULL, 0);
	}
	if ((stype==GF_ISOM_SUBTYPE_HEV1)
			|| (stype==GF_ISOM_SUBTYPE_HEV2)
			|| (stype==GF_ISOM_SUBTYPE_HVC1)
			|| (stype==GF_ISOM_SUBTYPE_HVC2)
			|| (stype==GF_ISOM_SUBTYPE_LHV1)
			|| (stype==GF_ISOM_SUBTYPE_LHE1)
	) {
		GF_HEVCConfig *hvcc = gf_isom_hevc_config_get(file, track, 1);
		gf_hevc_change_color(hvcc, fullrange, vidformat, colorprim, transfer, colmatrix);
		e = gf_isom_hevc_config_update(file, track, 1, hvcc);
		gf_odf_hevc_cfg_del(hvcc);
		if (e) return e;
		//remove any colr box
		return gf_isom_set_visual_color_info(file, track, 1, 0, 0, 0, 0, 0, NULL, 0);
	}
	if ((stype==GF_ISOM_SUBTYPE_VVC1) || (stype==GF_ISOM_SUBTYPE_VVI1) ) {
		GF_VVCConfig *vvcc = gf_isom_vvc_config_get(file, track, 1);
		gf_vvc_change_color(vvcc, fullrange, vidformat, colorprim, transfer, colmatrix);
		e = gf_isom_vvc_config_update(file, track, 1, vvcc);
		gf_odf_vvc_cfg_del(vvcc);
		if (e) return e;
		//remove any colr box
		return gf_isom_set_visual_color_info(file, track, 1, 0, 0, 0, 0, 0, NULL, 0);
	}
#endif
	return GF_NOT_SUPPORTED;
}
