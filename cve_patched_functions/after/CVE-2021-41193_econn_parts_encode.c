static int econn_parts_encode(struct json_object *jobj,
			      const struct list *partl)
{
	struct le *le;
	struct json_object *jparts;
	int err = 0;

	jparts = jzon_alloc_array();
	if (!jparts)
		return ENOMEM;
	
	LIST_FOREACH(partl, le) {
		struct econn_group_part *part = le->data;
		struct json_object *jpart;
		char ssrc[32];

		jpart = jzon_alloc_object();
		if (!jpart) {
			err = ENOMEM;
			goto out;
		}
		jzon_add_str(jpart, "userid", "%s", part->userid);
		jzon_add_str(jpart, "clientid", "%s", part->clientid);
		jzon_add_bool(jpart, "authorized", part->authorized);
		re_snprintf(ssrc, sizeof(ssrc), "%u", part->ssrca);
		jzon_add_str(jpart, "ssrc_audio", "%s", ssrc);
		re_snprintf(ssrc, sizeof(ssrc), "%u", part->ssrcv);
		jzon_add_str(jpart, "ssrc_video", "%s", ssrc);

		json_object_array_add(jparts, jpart);
	}

	json_object_object_add(jobj, "participants", jparts);

 out:
	return err;
}
