Handle<JSObject> createTypedArrayConstructor(Runtime &runtime) {
  using TA = JSTypedArray<T, C>;
  auto proto = TA::getPrototype(runtime);

  auto cons = defineSystemConstructor(
      runtime,
      TA::getName(runtime),
      Ctor,
      proto,
      Handle<JSObject>::vmcast(&runtime.typedArrayBaseConstructor),
      3,
      NativeConstructor::creatorFunction<TA>,
      C);

  DefinePropertyFlags dpf = DefinePropertyFlags::getDefaultNewPropertyFlags();
  dpf.enumerable = 0;
  dpf.configurable = 0;
  dpf.writable = 0;

  auto bytesPerElement =
      runtime.makeHandle(HermesValue::encodeNumberValue(sizeof(T)));
  // %TypedArray%.prototype.xxx.
  defineProperty(
      runtime,
      proto,
      Predefined::getSymbolID(Predefined::BYTES_PER_ELEMENT),
      bytesPerElement,
      dpf);

  // %TypedArray%.xxx.
  defineProperty(
      runtime,
      cons,
      Predefined::getSymbolID(Predefined::BYTES_PER_ELEMENT),
      bytesPerElement,
      dpf);
  return cons;
}
