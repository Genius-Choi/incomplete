  bool EmitHeader(const HPackTable::Memento& md) {
    // Pass up to the transport
    if (GPR_UNLIKELY(metadata_buffer_ == nullptr)) return true;
    *frame_length_ += md.transport_size();
    if (GPR_UNLIKELY(*frame_length_ > metadata_size_limit_)) {
      return HandleMetadataSizeLimitExceeded(md);
    }

    metadata_buffer_->Set(md);
    return true;
  }
