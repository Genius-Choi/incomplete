void bus_set_state(sd_bus *bus, enum bus_state state) {

        static const char * const table[_BUS_STATE_MAX] = {
                [BUS_UNSET] = "UNSET",
                [BUS_WATCH_BIND] = "WATCH_BIND",
                [BUS_OPENING] = "OPENING",
                [BUS_AUTHENTICATING] = "AUTHENTICATING",
                [BUS_HELLO] = "HELLO",
                [BUS_RUNNING] = "RUNNING",
                [BUS_CLOSING] = "CLOSING",
                [BUS_CLOSED] = "CLOSED",
        };

        assert(bus);
        assert(state < _BUS_STATE_MAX);

        if (state == bus->state)
                return;

        log_debug("Bus %s: changing state %s â†’ %s", strna(bus->description), table[bus->state], table[state]);
        bus->state = state;
}
