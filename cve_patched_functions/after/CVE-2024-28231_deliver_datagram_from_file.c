void deliver_datagram_from_file(
        const std::set<eprosima::fastdds::rtps::TransportReceiverInterface*>& receivers,
        const char* filename)
{
    std::basic_ifstream<char> file(filename, std::ios::binary | std::ios::in);

    file.seekg(0, file.end);
    size_t file_size = static_cast<size_t>(file.tellg());
    file.seekg(0, file.beg);

    std::vector<uint8_t> buf(file_size);
    file.read(reinterpret_cast<char*>(buf.data()), file_size);

    eprosima::fastdds::rtps::Locator loc;
    for (const auto& rec : receivers)
    {
        rec->OnDataReceived(buf.data(), static_cast<uint32_t>(file_size), loc, loc);
    }
}
