gerb_fgetdouble(gerb_file_t *fd)
{
    double result;
    char *end;

    errno = 0;    
    result = strtod(fd->data + fd->ptr, &end);
    if (errno) {
	GERB_COMPILE_ERROR(_("Failed to read double"));
	return 0.0;
    }

    fd->ptr = end - fd->data;

    return result;
} /* gerb_fgetdouble */
