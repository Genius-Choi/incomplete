f_sign_define(typval_T *argvars, typval_T *rettv)
{
    char_u	*name;
    dict_T	*dict;
    char_u	*icon = NULL;
    char_u	*linehl = NULL;
    char_u	*text = NULL;
    char_u	*texthl = NULL;

    rettv->vval.v_number = -1;

    name = tv_get_string_chk(&argvars[0]);
    if (name == NULL)
	return;

    if (argvars[1].v_type != VAR_UNKNOWN)
    {
	if (argvars[1].v_type != VAR_DICT)
	{
	    emsg(_(e_dictreq));
	    return;
	}

	// sign attributes
	dict = argvars[1].vval.v_dict;
	if (dict_find(dict, (char_u *)"icon", -1) != NULL)
	    icon = dict_get_string(dict, (char_u *)"icon", TRUE);
	if (dict_find(dict, (char_u *)"linehl", -1) != NULL)
	    linehl = dict_get_string(dict, (char_u *)"linehl", TRUE);
	if (dict_find(dict, (char_u *)"text", -1) != NULL)
	    text = dict_get_string(dict, (char_u *)"text", TRUE);
	if (dict_find(dict, (char_u *)"texthl", -1) != NULL)
	    texthl = dict_get_string(dict, (char_u *)"texthl", TRUE);
    }

    if (sign_define_by_name(name, icon, linehl, text, texthl) == OK)
	rettv->vval.v_number = 0;

    vim_free(icon);
    vim_free(linehl);
    vim_free(text);
    vim_free(texthl);
}
