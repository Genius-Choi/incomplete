prefix_blockspoiler(uint8_t *data, size_t size)
{
    size_t i = 0;
    if (i < size && data[i] == ' ') i++;
    if (i < size && data[i] == ' ') i++;
    if (i < size && data[i] == ' ') i++;

    if (i + 1 < size && data[i] == '>' && data[i + 1] == '!') {
		size_t spoilerspan = find_emph_char(data + i + 1, size - i - 1, '<');
		if (i + spoilerspan < size && spoilerspan > 0 && data[i + spoilerspan] == '!')
			return 0;

		if (i + 2 < size && data[i + 2] == ' ')
			return i + 3;

		return i + 2;
    }

    return 0;
}
