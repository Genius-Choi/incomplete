GF_Err gf_odf_opus_cfg_write_bs(GF_OpusConfig *cfg, GF_BitStream *bs)
{
	if (!cfg || !bs) return GF_BAD_PARAM;
	gf_bs_write_u8(bs, cfg->version);
	gf_bs_write_u8(bs, cfg->OutputChannelCount);
	gf_bs_write_u16_le(bs, cfg->PreSkip);
	gf_bs_write_u32_le(bs, cfg->InputSampleRate);
	gf_bs_write_u16_le(bs, cfg->OutputGain);
	gf_bs_write_u8(bs, cfg->ChannelMappingFamily);
	if (cfg->ChannelMappingFamily) {
		gf_bs_write_u8(bs, cfg->StreamCount);
		gf_bs_write_u8(bs, cfg->CoupledCount);
		gf_bs_write_data(bs, (char *) cfg->ChannelMapping, cfg->OutputChannelCount);
	}
	return GF_OK;
}
