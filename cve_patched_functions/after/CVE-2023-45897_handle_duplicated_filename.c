static int handle_duplicated_filename(struct exfat_de_iter *iter,
		struct exfat_inode *inode)
{
	int ret;
	struct exfat_lookup_filter filter;
	char filename[PATH_MAX + 1] = {0};

	ret = exfat_lookup_file_by_utf16name(iter->exfat, iter->parent,
			inode->name, &filter);
	if (ret)
		return ret;

	free(filter.out.dentry_set);

	/* Hash is same, but filename is not same */
	if (exfat_de_iter_device_offset(iter) == filter.out.dev_offset)
		return 0;

	ret = exfat_utf16_dec(inode->name, NAME_BUFFER_SIZE, filename,
			PATH_MAX);
	if (ret < 0) {
		exfat_err("failed to decode filename\n");
		return ret;
	}

	return exfat_repair_rename_ask(&exfat_fsck, iter, filename,
			ER_DE_DUPLICATED_NAME, "filename is duplicated");
}
