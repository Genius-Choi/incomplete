vips_foreign_load_svg_get_scaled_size( VipsForeignLoadSvg *svg, 
	int *out_width, int *out_height )
{
	double width;
	double height;

	/* Get dimensions with the default dpi.
	 */
	rsvg_handle_set_dpi( svg->page, 72.0 );
	if( vips_foreign_load_svg_get_natural_size( svg, &width, &height ) )
		return( -1 );

	/* We scale up with cairo --- scaling with rsvg_handle_set_dpi() will
	 * fail for SVGs with absolute sizes.
	 */
	svg->cairo_scale = svg->scale * svg->dpi / 72.0;
	width *= svg->cairo_scale;
	height *= svg->cairo_scale;

	*out_width = VIPS_ROUND_UINT( width );
	*out_height = VIPS_ROUND_UINT( height );

	return ( 0 );
}
