static void wcall_end_internal(struct wcall *wcall)
{
	info("wcall(%p): end\n", wcall);
	if (!wcall)
		return;

	if (!wcall->icall) {
		warning("wcall(%p): end: no call object found\n", wcall);
		return;
	}

	if (wcall->state != WCALL_STATE_TERM_REMOTE)
		set_state(wcall, WCALL_STATE_TERM_LOCAL);
	ICALL_CALL(wcall->icall, end);

	wcall->disable_audio = true;
	if (!wcall_has_calls()) {
		if (wcall->inst->mm) {
			mediamgr_set_call_state(wcall->inst->mm,
						MEDIAMGR_STATE_NORMAL);
		}
	}
}
