  load_state() {
    if (!fs::exists(config::nvhttp.file_state)) {
      BOOST_LOG(info) << "File "sv << config::nvhttp.file_state << " doesn't exist"sv;
      http::unique_id = uuid_util::uuid_t::generate().string();
      return;
    }

    pt::ptree root;
    try {
      pt::read_json(config::nvhttp.file_state, root);
    }
    catch (std::exception &e) {
      BOOST_LOG(error) << "Couldn't read "sv << config::nvhttp.file_state << ": "sv << e.what();

      return;
    }

    auto unique_id_p = root.get_optional<std::string>("root.uniqueid");
    if (!unique_id_p) {
      // This file doesn't contain moonlight credentials
      http::unique_id = uuid_util::uuid_t::generate().string();
      return;
    }
    http::unique_id = std::move(*unique_id_p);

    auto device_nodes = root.get_child("root.devices");

    for (auto &[_, device_node] : device_nodes) {
      auto uniqID = device_node.get<std::string>("uniqueid");
      auto &client = map_id_client.emplace(uniqID, client_t {}).first->second;

      client.uniqueID = uniqID;

      for (auto &[_, el] : device_node.get_child("certs")) {
        client.certs.emplace_back(el.get_value<std::string>());
      }
    }
  }
