static void socks_if_relay(struct mg_connection *s) {
  struct socksdata *d = (struct socksdata *) s->user_data;
  if (d == NULL || d->c == NULL || !(s->flags & MG_SOCKS_CONNECT_DONE) ||
      d->s == NULL) {
    return;
  }
  if (s->recv_mbuf.len > 0) mg_if_can_recv_cb(d->c);
  if (d->c->send_mbuf.len > 0 && s->send_mbuf.len == 0) mg_if_can_send_cb(d->c);
}
