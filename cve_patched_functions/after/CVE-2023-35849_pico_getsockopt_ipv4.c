int pico_getsockopt_ipv4(struct pico_socket *s, int option, void *value)
{
    int *val = (int *)value;
    void ** pval = (void *)value;
    struct pico_socket_ipv4 *s4 = (struct pico_socket_ipv4 *)s;
    switch(option) {
        case PICO_SOCKET_OPT_IP_HDRINCL:
            *val = (int)s4->hdr_included;
            return 0;
        case PICO_SOCKET_OPT_IP_DONTROUTE:
            *val = (int)s4->dontroute;
            return 0;
        case PICO_SOCKET_OPT_IP_BINDTODEVICE:
            *pval = s->dev;
            return 0;
    }
    /* switch's default */
    pico_err = PICO_ERR_EINVAL;
    return -1;
}
