flow_set_dl_vlan(struct flow *flow, ovs_be16 vid, int id)
{
    if (vid == htons(OFP10_VLAN_NONE)) {
        flow->vlans[id].tci = htons(0);
    } else {
        vid &= htons(VLAN_VID_MASK);
        flow->vlans[id].tci &= ~htons(VLAN_VID_MASK);
        flow->vlans[id].tci |= htons(VLAN_CFI) | vid;
    }
}
