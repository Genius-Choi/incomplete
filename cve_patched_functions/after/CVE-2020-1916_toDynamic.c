folly::dynamic RepoOptions::toDynamic() const {
  folly::dynamic json = folly::dynamic::object();
#define OUT(key, var)                                \
  {                                                  \
    auto const ini_name = Config::IniName(key);      \
    auto const ini_value = toIniValue(var);          \
    folly::dynamic entry = folly::dynamic::object(); \
    entry["global_value"] = ini_value;               \
    entry["local_value"] = ini_value;                \
    entry["access"] = 4;                             \
    json[ini_name] = entry;                          \
  }

#define N(_, n, ...) OUT(#n, n)
#define P(_, n, ...) OUT("PHP7." #n, n)
#define H(_, n, ...) OUT("Hack.Lang." #n, n)
#define E(_, n, ...) OUT("Eval." #n, n)
PARSERFLAGS()
AUTOLOADFLAGS();
#undef N
#undef P
#undef H
#undef E

#undef OUT

  return json;
}
