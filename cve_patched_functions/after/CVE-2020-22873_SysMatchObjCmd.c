static Jsi_RC SysMatchObjCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,
    Jsi_Value **ret, Jsi_Func *funcPtr)
{
    char *sp, *cp, *cs, *ss, *ce, *cc;
    bool ok = 1, partial=0, noerror;
    Jsi_Value *arg1 = Jsi_ValueArrayIndex(interp, args, 0);
    if (!arg1 || !Jsi_ValueIsObjType(interp, arg1, JSI_OT_OBJECT))
        return Jsi_LogError("arg 1: exected object");
    Jsi_Value *arg2 = Jsi_ValueArrayIndex(interp, args, 1),
        *arg3 = Jsi_ValueArrayIndex(interp, args, 2),
        *arg4 = Jsi_ValueArrayIndex(interp, args, 3);
    
    Jsi_DString dStr;
    Jsi_DSInit(&dStr);
    Jsi_RC rc = JSI_OK;
    if (!arg2) {
        jsi_sysTypeGet(interp, arg1, &dStr);
        Jsi_ValueMakeStringDup(interp, ret, Jsi_DSValue(&dStr));
        Jsi_ValueFromDS(interp, &dStr, ret);
        return JSI_OK;
    }
    sp = Jsi_ValueString(interp, arg2, NULL);
    if (!sp) {
        rc = Jsi_LogError("arg 2: exected string");
        goto done;
    }
    if (arg3 && Jsi_GetBoolFromValue(interp, arg3, &partial) != JSI_OK) {
        rc = Jsi_LogError("expected bool 'partial'");
        goto done;
    }
    if (arg3 && Jsi_GetBoolFromValue(interp, arg4, &noerror) != JSI_OK) {
        rc = Jsi_LogError("expected bool 'noerror'");
        goto done;
    }
    jsi_sysTypeGet(interp, arg1, &dStr);
    cp = Jsi_DSValue(&dStr);
    if (sp) {
        if (Jsi_Strcmp(cp, sp)) {
            if (partial && *cp && *sp) {
                /*Jsi_DString eStr = {}, fStr = {};
                char *ss = Jsi_AppendLen(&eStr, sp+1, Jsi_Strlen(sp)-2);
                int vargc; char **vargv;
                Jsi_SplitStr(Jsi_DSValue(&eStr), &vargc, &vargv, ",", &fStr);*/
                cs=cp+1; ss=sp;
                while (*cs) {
                    Jsi_DString eStr = {};
                    ce=Jsi_Strchr(cs,','); 
                    if (!ce) ce = cs+Jsi_Strlen(cs);
                    Jsi_DSAppend(&eStr, ",", NULL);
                    int elen = ce-cs;
                    cc = Jsi_DSAppendLen(&eStr, cs, elen); // obj key.
                    int dlen = Jsi_Strlen(cc);
                    if (dlen>1 && cc[dlen-1]=='}')
                        cc[--dlen] = 0;
                    if (*ss=='{' && !Jsi_Strncmp(ss+1, cc+1, dlen-1))
                        ss = ss+dlen;
                    else
                        ss = Jsi_Strstr(ss, cc);
                    Jsi_DSFree(&eStr);
                    if (!ss) goto mismatch;
                    cs=(*ce?ce+1:ce);
                }
                goto done;
            }
mismatch:
            ok = 0;
            if (interp->asserts && !noerror)
                rc = Jsi_LogError("matchobj failed: expected '%s' not '%s'", cp, sp); 
            else
                Jsi_LogWarn("matchobj failed: expected '%s' not '%s'", cp, sp);
        }
        //goto done;
    }
done:
    Jsi_DSFree(&dStr);
    if (rc == JSI_OK)
        Jsi_ValueMakeBool(interp, ret, ok);
    return rc;
    
/*badstr:
    Jsi_DSFree(&dStr);
    return Jsi_LogError("array elements must be a string");*/

}
