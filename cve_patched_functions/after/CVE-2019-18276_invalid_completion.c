invalid_completion (text, ind)
     const char *text;
     int ind;
{
  int pind;

  /* If we don't catch these here, the next clause will */
  if (ind > 0 && rl_line_buffer[ind] == '(' &&	/*)*/
		 member (rl_line_buffer[ind-1], "$<>"))
    return 0;

  pind = ind - 1;
  while (pind > 0 && whitespace (rl_line_buffer[pind]))
    pind--;
  /* If we have only whitespace preceding a paren, it's valid */
  if (ind >= 0 && pind <= 0 && rl_line_buffer[ind] == '(')	/*)*/
    return 0;
  /* Flag the invalid completions, which are mostly syntax errors */
  if (ind > 0 && rl_line_buffer[ind] == '(' &&	/*)*/
		 member (rl_line_buffer[pind], COMMAND_SEPARATORS) == 0)
    return 1;

  return 0;
}
