static int pico_ipv4_cleanup_routes(struct pico_stack *S, struct pico_ipv4_link *link)
{
    struct pico_tree_node *index = NULL, *tmp = NULL;
    struct pico_ipv4_route *route = NULL;

    pico_tree_foreach_safe(index, &S->Routes, tmp) {
        route = index->keyValue;
        if (link == route->link)
            pico_ipv4_route_del(S, route->dest, route->netmask, (int)route->metric);
    }
    return 0;
}
