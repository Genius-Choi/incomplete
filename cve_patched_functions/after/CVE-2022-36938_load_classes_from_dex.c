DexClasses load_classes_from_dex(const dex_header* dh,
                                 const DexLocation* location,
                                 bool balloon,
                                 bool throw_on_balloon_error) {
  DexLoader dl(location);
  auto classes = dl.load_dex(dh, nullptr);
  if (balloon) {
    balloon_all(classes, throw_on_balloon_error);
  }
  return classes;
}
