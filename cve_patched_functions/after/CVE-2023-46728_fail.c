FwdState::fail(ErrorState * errorState)
{
    debugs(17, 3, err_type_str[errorState->type] << " \"" << Http::StatusCodeString(errorState->httpStatus) << "\"\n\t" << entry->url());

    delete err;
    err = errorState;

    if (!errorState->request)
        errorState->request = request;

    if (err->type == ERR_ZERO_SIZE_OBJECT)
        reactToZeroSizeObject();

    destinationReceipt = nullptr; // may already be nil
}
