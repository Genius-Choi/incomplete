size_t readSome(Socket& s, MutableBuffer<uint8_t> buf, Yield yield)
{
  suppressC4100(yield);
#ifdef BUILD_TEST
  if constexpr (is_same_v<Socket, pichi::test::Stream>)
    return s.read_some(asio::buffer(buf));
  else
#endif // BUILD_TEST
    return s.async_read_some(asio::buffer(buf), yield);
}
