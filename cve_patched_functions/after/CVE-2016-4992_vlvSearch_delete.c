vlvSearch_delete(struct vlvSearch** ppvs)
{
    if(ppvs!=NULL && *ppvs!=NULL)
    {
        struct vlvIndex *pi, *ni;
        slapi_sdn_free(&((*ppvs)->vlv_dn));
        slapi_ch_free((void**)&((*ppvs)->vlv_name));
        slapi_sdn_free(&((*ppvs)->vlv_base));
        slapi_ch_free((void**)&((*ppvs)->vlv_filter));
        slapi_filter_free((*ppvs)->vlv_slapifilter,1);
        for(pi= (*ppvs)->vlv_index;pi!=NULL;)
        {
            ni= pi->vlv_next;
            if(pi->vlv_be != NULL) {
                vlvIndex_go_offline(pi,pi->vlv_be);
            }
            vlvIndex_delete(&pi);
            pi= ni;
        }
        slapi_ch_free((void**)ppvs);
        *ppvs= NULL;
    }
}
