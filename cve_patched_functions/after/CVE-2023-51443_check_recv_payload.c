static int check_recv_payload(switch_rtp_t *rtp_session)
{
	int ok = 1;

	if (!(rtp_session->rtp_bugs & RTP_BUG_ACCEPT_ANY_PAYLOAD) && rtp_session->pmaps && *rtp_session->pmaps) {
		payload_map_t *pmap;
		ok = 0;

		switch_mutex_lock(rtp_session->flag_mutex);

		for (pmap = *rtp_session->pmaps; pmap && pmap->allocated; pmap = pmap->next) {
			if (!pmap->negotiated) {
				continue;
			}

			if (rtp_session->last_rtp_hdr.pt == pmap->pt) {
				ok = 1;
			}
		}
		switch_mutex_unlock(rtp_session->flag_mutex);
	}

	return ok;
}
