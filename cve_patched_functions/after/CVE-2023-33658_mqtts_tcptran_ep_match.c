mqtts_tcptran_ep_match(mqtts_tcptran_ep *ep)
{
	nni_aio *           aio;
	mqtts_tcptran_pipe *p;

	if (((aio = ep->useraio) == NULL) ||
	    ((p = nni_list_first(&ep->waitpipes)) == NULL)) {
		return;
	}
	nni_list_remove(&ep->waitpipes, p);
	nni_list_append(&ep->busypipes, p);
	ep->useraio = NULL;
#ifdef NNG_HAVE_MQTT_BROKER
	if (p->cparam == NULL) {
		p->cparam = nni_get_conn_param_from_msg(ep->connmsg);
	}
#endif
	nni_aio_set_output(aio, 0, p);
	nni_aio_finish(aio, 0, 0);
}
