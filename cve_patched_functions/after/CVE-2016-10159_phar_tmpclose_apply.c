static int phar_tmpclose_apply(void *pDest TSRMLS_DC) /* {{{ */
{
	phar_entry_info *entry = (phar_entry_info *) pDest;

	if (entry->fp_type != PHAR_TMP) {
		return ZEND_HASH_APPLY_KEEP;
	}

	if (entry->fp && !entry->fp_refcount) {
		php_stream_close(entry->fp);
		entry->fp = NULL;
	}

	return ZEND_HASH_APPLY_KEEP;
}
