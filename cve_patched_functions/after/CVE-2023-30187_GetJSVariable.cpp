std::wstring CV8RealTimeWorker::GetJSVariable(std::wstring sParam)
{
	std::string sParamA = U_TO_UTF8(sParam);
	NSStringUtils::string_replaceA(sParamA, "\\\"", "\"");
	std::string commandA = "(function(){ return (" + sParamA + "); })()";

	JSSmart<CJSContextScope> context_scope = m_context->CreateContextScope();
	JSSmart<CJSTryCatch> try_catch = m_context->GetExceptions();

	JSSmart<CJSValue> _value = m_context->runScript(commandA, try_catch);
	if(try_catch->Check())
		return L"jsValue(" + sParam + L")";
	if(_value->isString())
		return _value->toStringW();
	return L"jsValue(" + sParam + L")";
}
