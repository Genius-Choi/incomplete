static bool strbuf_rev_prepend_char(RStrBuf *sb, const char *s, int c) {
	r_return_val_if_fail (sb && s, false);
	size_t l = strlen (s);
	// fast path if no chars to append
	if (l == 0) {
		return true;
	}
	size_t newlen = l + sb->len;
	char *ns = malloc (newlen + 1);
	bool ret = false;
	char *sb_str = sb->ptr ? sb->ptr : sb->buf;
	char *pivot = strrchr (sb_str, c);
	if (!pivot) {
		free (ns);
		return false;
	}
	size_t idx = pivot - sb_str;
	if (ns) {
		memcpy (ns, sb_str, idx);
		memcpy (ns + idx, s, l);
		memcpy (ns + idx + l, sb_str + idx, sb->len - idx);
		ns[newlen] = 0;
		ret = r_strbuf_set (sb, ns) != NULL;
		free (ns);
	}
	return ret;
}
