QScriptValue createVec3d(QScriptContext* context, QScriptEngine *engine)
{
	qWarning() << "The Vec3d script object is deprecated and will not work in future versions of Stellarium. Use core.vec3d() or a V3d object.";
	Vec3d c;
	switch( context->argumentCount() )
	{
		case 0:
			c.set( 0, 0, 0 );
			break;
		case 2:
			// longitude/azimuth, latitude/altitude - maybe string dms, maybe numeric degrees
			double lng;
			if( context->argument(0).isString() )
				lng = StelUtils::getDecAngle( context->argument(0).toString() );
			else
				lng = static_cast<double>(context->argument(0).toNumber())*M_PI_180;

			double lat;
			if ( context->argument(1).isString())
				lat = StelUtils::getDecAngle( context->argument(1).toString() );
			else
				lat = static_cast<double>(context->argument(1).toNumber())*M_PI_180;

			StelUtils::spheToRect( lng, lat, c );
			break;
		case 3:
			c[0] = static_cast<double>(context->argument(0).toNumber());
			c[1] = static_cast<double>(context->argument(1).toNumber());
			c[2] = static_cast<double>(context->argument(2).toNumber());
			break;
		default:
			context->throwError( QString("Vec3d: invalid number of arguments") );
	}
	return vec3dToScriptValue(engine, c);
}
