static inline char* print_to(char* w, dlg_t* dialog, struct cell* t, int bracket)
{
	t->to.s = w;
	t->to.len = TO_LEN + dialog->rem_uri.len + CRLF_LEN
		+ (((dialog->rem_uri.s[dialog->rem_uri.len - 1]!='>'))?2:0);

	memapp(w, TO, TO_LEN);
	if(bracket) memapp(w, "<", 1);
	memapp(w, dialog->rem_uri.s, dialog->rem_uri.len);
	if(bracket) memapp(w, ">", 1);

	if (dialog->id.rem_tag.len) {
		t->to.len += TOTAG_LEN + dialog->id.rem_tag.len ;
		memapp(w, TOTAG, TOTAG_LEN);
		memapp(w, dialog->id.rem_tag.s, dialog->id.rem_tag.len);
	}

	memapp(w, CRLF, CRLF_LEN);
	return w;
}
