static int targets_json(struct wcall *wcall, struct list *targets, char **mjson)
{
	struct le *le;
	struct json_object *tclients = NULL;
	struct json_object *jclients = NULL;	
	int err = 0;

	tclients = jzon_alloc_object();
	jclients = json_object_new_array();
	if (!mjson) {
		err = ENOSYS;
		goto out;
	}

	LIST_FOREACH(targets, le) {
		struct icall_client *client = le->data;
		struct json_object *jclient;

		jclient = jzon_alloc_object();
		if (!jclient)
			continue;

		jzon_add_str(jclient, "userid", "%s", client->userid);
		jzon_add_str(jclient, "clientid", "%s", client->clientid);

		json_object_array_add(jclients, jclient);
	}
	
	json_object_object_add(tclients, "clients", jclients);
	
	jzon_encode(mjson, tclients);

 out:
	mem_deref(tclients);

	return err;
}
