static int mustache_on_arg(mustache_section_s *section, const char *name,
                           uint32_t name_len, unsigned char escape) {
  VALUE o = fiobj_mustache_find_obj(section, name, name_len);
  switch (o) {
  case Qnil:
  case Qfalse:
    return 0;
  case Qtrue:
    fio_str_write(section->udata1, "true", 4);
    break;
  }
  if (!RB_TYPE_P(o, T_STRING)) {
    if (rb_respond_to(o, call_func_id))
      o = IodineCaller.call(o, call_func_id);
    if (!RB_TYPE_P(o, T_STRING))
      o = IodineCaller.call(o, to_s_func_id);
  }
  if (!RB_TYPE_P(o, T_STRING) || !RSTRING_LEN(o))
    return 0;
  return mustache_write_text(section, RSTRING_PTR(o), RSTRING_LEN(o), escape);
}
