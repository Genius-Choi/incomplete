static void isoffin_set_channel_ctso(ISOMReader *read, ISOMChannel *ch)
{
	s32 min_neg_cts_offset = gf_isom_get_min_negative_cts_offset(ch->owner->mov, ch->track, (read->ctso==-2) ? GF_ISOM_MIN_NEGCTTS_SAMPLES : GF_ISOM_MIN_NEGCTTS_ANY);
	if (min_neg_cts_offset>=0) return;
	if (ch->has_edit_list) {
		GF_LOG(GF_LOG_ERROR, GF_LOG_CONTAINER, ("[IsoMedia] Track has complex edit list, cannot use ctso option (try adding `edits=no` option to demuxer)\n"));
		read->ctso = 0;
		return;
	}

	if (read->ctso<0) {
		ch->cts_offset = MAX(ch->cts_offset, (u32) -min_neg_cts_offset);
		ch->has_edit_list = GF_FALSE;
	} else {
		if (-min_neg_cts_offset > read->ctso) {
			GF_LOG(GF_LOG_WARNING, GF_LOG_CONTAINER, ("[IsoMedia] requested CTS offset %d less than %d in track, adjusting\n"));
			ch->cts_offset = (u32) -min_neg_cts_offset;
		} else {
			ch->cts_offset = (u32) read->ctso;
		}
	}
	//send PID delay
	ch->ts_offset = - (s32) ch->cts_offset;
	gf_filter_pid_set_property(ch->pid, GF_PROP_PID_DELAY, &PROP_LONGSINT( ch->ts_offset) );
}
