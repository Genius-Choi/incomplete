new_ipv6(const ws_in6_addr *addr)
{
    hashipv6_t *tp = wmem_new(addr_resolv_scope, hashipv6_t);
    memcpy(tp->addr, addr->bytes, sizeof tp->addr);
    tp->flags = 0;
    tp->name[0] = '\0';
    ip6_to_str_buf(addr, tp->ip6, sizeof(tp->ip6));
    return tp;
}
