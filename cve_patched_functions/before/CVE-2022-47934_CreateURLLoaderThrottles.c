BraveContentBrowserClient::CreateURLLoaderThrottles(
    const network::ResourceRequest& request,
    content::BrowserContext* browser_context,
    const content::WebContents::Getter& wc_getter,
    content::NavigationUIData* navigation_ui_data,
    int frame_tree_node_id) {
  auto result = ChromeContentBrowserClient::CreateURLLoaderThrottles(
      request, browser_context, wc_getter, navigation_ui_data,
      frame_tree_node_id);
  content::WebContents* contents = wc_getter.Run();

  if (contents) {
    const bool isMainFrame =
        request.resource_type ==
        static_cast<int>(blink::mojom::ResourceType::kMainFrame);
    // Speedreader
#if BUILDFLAG(ENABLE_SPEEDREADER)
    auto* settings_map = HostContentSettingsMapFactory::GetForProfile(
        Profile::FromBrowserContext(browser_context));

    auto* tab_helper =
        speedreader::SpeedreaderTabHelper::FromWebContents(contents);
    if (tab_helper) {
      const auto state = tab_helper->PageDistillState();
      if (speedreader::PageWantsDistill(state) && isMainFrame) {
        // Only check for disabled sites if we are in Speedreader mode
        const bool check_disabled_sites =
            state == speedreader::DistillState::kSpeedreaderModePending;
        std::unique_ptr<speedreader::SpeedReaderThrottle> throttle =
            speedreader::SpeedReaderThrottle::MaybeCreateThrottleFor(
                g_brave_browser_process->speedreader_rewriter_service(),
                settings_map, tab_helper->GetWeakPtr(), request.url,
                check_disabled_sites, base::ThreadTaskRunnerHandle::Get());
        if (throttle)
          result.push_back(std::move(throttle));
      }
    }
#endif  // ENABLE_SPEEDREADER

    // De-AMP
    if (isMainFrame) {
      if (auto de_amp_throttle = de_amp::DeAmpThrottle::MaybeCreateThrottleFor(
              base::ThreadTaskRunnerHandle::Get(), request, wc_getter)) {
        result.push_back(std::move(de_amp_throttle));
      }
    }
  }

  return result;
}
