int ecall_create_econn(struct ecall *ecall)
{
	int err;

	if (!ecall)
		return EINVAL;

	assert(ecall->econn == NULL);

	err = econn_alloc(&ecall->econn, &ecall->conf.econf,
			  ecall->userid_self,
			  ecall->clientid_self,
			  ecall->sessid,
			  &ecall->transp,
			  econn_conn_handler,
			  econn_answer_handler,
			  econn_update_req_handler,
			  econn_update_resp_handler,
			  econn_alert_handler,
			  econn_confpart_handler,
			  econn_ping_handler,
			  econn_close_handler,
			  ecall);
	if (err) {
		warning("ecall_setup: econn_alloc failed: %m\n", err);
		return err;
	}

	info("ecall(%p): created econn: %p\n", ecall, ecall->econn);
	
	return err;
}
