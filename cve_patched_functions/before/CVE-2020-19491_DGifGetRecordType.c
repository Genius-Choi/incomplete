int CGIFFF DGifGetRecordType(CGIFFF GifFileType *GifFile, CGIFFF GifRecordType *Type)
{
    GifByteType Buf;
    GifFilePrivateType *Private = (GifFilePrivateType *) GifFile->Private;

    if (!IS_READABLE(Private)) {
	/* This file was NOT open for reading: */
	_GifError = D_GIF_ERR_NOT_READABLE;
	return GIF_ERROR;
    }

    if (fread(&Buf, 1, 1, Private->File) != 1) {
	_GifError = D_GIF_ERR_READ_FAILED;
	return GIF_ERROR;
    }

    // fprintf(stderr, "record %d at offset %ld\n", Buf&255, ftell(Private->File));
    switch (Buf) {
	case ',': *Type = IMAGE_DESC_RECORD_TYPE; break;
	case '!': *Type = EXTENSION_RECORD_TYPE;  break;
	case ';': *Type = TERMINATE_RECORD_TYPE;  break;
	default:  *Type = UNDEFINED_RECORD_TYPE;
	    // fprintf(stderr, "wrong record %d at offset %ld\n", Buf&255, ftell(Private->File));
	    _GifError = D_GIF_ERR_WRONG_RECORD;
	    return GIF_ERROR;
    }

    return GIF_OK;
}
