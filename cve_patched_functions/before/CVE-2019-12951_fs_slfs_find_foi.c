static struct sl_file_open_info *fs_slfs_find_foi(const char *name,
                                                  bool create) {
  int i = 0;
  for (i = 0; i < MAX_OPEN_SLFS_FILES; i++) {
    if (s_sl_file_open_infos[i].name != NULL &&
        strcmp(drop_dir(s_sl_file_open_infos[i].name, NULL), name) == 0) {
      break;
    }
  }
  if (i != MAX_OPEN_SLFS_FILES) return &s_sl_file_open_infos[i];
  if (!create) return NULL;
  for (i = 0; i < MAX_OPEN_SLFS_FILES; i++) {
    if (s_sl_file_open_infos[i].name == NULL) break;
  }
  if (i == MAX_OPEN_SLFS_FILES) {
    i = 0; /* Evict a random slot. */
  }
  if (s_sl_file_open_infos[i].name != NULL) {
    free(s_sl_file_open_infos[i].name);
  }
  s_sl_file_open_infos[i].name = strdup(name);
  return &s_sl_file_open_infos[i];
}
