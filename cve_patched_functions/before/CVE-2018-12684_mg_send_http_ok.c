mg_send_http_ok(struct mg_connection *conn,
                const char *mime_type,
                long long content_length)
{
	char date[64];
	time_t curtime = time(NULL);

	if ((mime_type == NULL) || (*mime_type == 0)) {
		/* Parameter error */
		return -2;
	}

	gmt_time_string(date, sizeof(date), &curtime);

	mg_printf(conn,
	          "HTTP/1.1 200 OK\r\n"
	          "Content-Type: %s\r\n"
	          "Date: %s\r\n"
	          "Connection: %s\r\n",
	          mime_type,
	          date,
	          suggest_connection_header(conn));

	send_no_cache_header(conn);
	send_additional_header(conn);
	if (content_length < 0) {
		mg_printf(conn, "Transfer-Encoding: chunked\r\n\r\n");
	} else {
		mg_printf(conn,
		          "Content-Length: %" UINT64_FMT "\r\n\r\n",
		          (uint64_t)content_length);
	}

	return 0;
}
