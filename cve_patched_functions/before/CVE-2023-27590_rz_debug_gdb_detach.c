static int rz_debug_gdb_detach(RzDebug *dbg, int pid) {
	RzDebugGdbCtx *ctx = dbg->plugin_data;
	int ret = 0;

	if (pid <= 0 || !ctx->desc->stub_features.multiprocess) {
		gdbr_detach(ctx->desc);
	}
	ret = gdbr_detach_pid(ctx->desc, pid);

	if (dbg->pid == pid) {
		ctx->desc = NULL;
	}
	return ret;
}
