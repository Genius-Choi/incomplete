void HTTPServer::handleGet(Client* cl, HTTPRequest* req, ResourceHost* resHost) {
	// Check if the requested resource exists
	std::string uri = req->getRequestUri();
	Resource* r = resHost->getResource(uri);

	if (r != NULL) { // Exists
		std::cout << "[" << cl->getClientIP() << "] " << "Sending file: " << uri << std::endl;

		HTTPResponse* resp = new HTTPResponse();
		resp->setStatus(Status(OK));
		resp->addHeader("Content-Type", r->getMimeType());
		resp->addHeader("Content-Length", r->getSize());

		// Only send a message body if it's a GET request. Never send a body for HEAD
		if (req->getMethod() == Method(GET))
			resp->setData(r->getData(), r->getSize());

		bool dc = false;

		// HTTP/1.0 should close the connection by default
		if (req->getVersion().compare(HTTP_VERSION_10) == 0)
			dc = true;

		// If Connection: close is specified, the connection should be terminated after the request is serviced
		std::string connection_val = req->getHeaderValue("Connection");
		if (connection_val.compare("close") == 0)
			dc = true;

		sendResponse(cl, resp, dc);
		delete resp;
		delete r;
	} else { // Not found
		std::cout << "[" << cl->getClientIP() << "] " << "File not found: " << uri << std::endl;
		sendStatusResponse(cl, Status(NOT_FOUND));
	}
}
