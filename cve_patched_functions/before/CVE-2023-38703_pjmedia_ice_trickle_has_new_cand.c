PJ_DEF(pj_bool_t) pjmedia_ice_trickle_has_new_cand(pjmedia_transport *tp)
{
    struct transport_ice *tp_ice = (struct transport_ice*)tp;
    unsigned i, comp_cnt;

    /* Make sure ICE transport has session already */
    if (!tp_ice->ice_st || !pj_ice_strans_has_sess(tp_ice->ice_st))
        return PJ_FALSE;

    /* Count all local candidates */
    comp_cnt = pj_ice_strans_get_running_comp_cnt(tp_ice->ice_st);
    for (i = 0; i < comp_cnt; ++i) {
        if (tp_ice->last_send_cand_cnt[i] <
            pj_ice_strans_get_cands_count(tp_ice->ice_st, i+1))
        {
            return PJ_TRUE;
        }
    }
    return PJ_FALSE;
}
