vlvSearch_getnames(const struct vlvSearch* plist)
{
    /* Work out how long the string will be */
    char *text;
    int length= 5; /* enough to hold 'none' */ 
    const struct vlvSearch* t= plist;
    for(; t!=NULL ; t= t->vlv_next)
    {
        struct vlvIndex *pi= t->vlv_index;
        for(;pi!=NULL;pi= pi->vlv_next)
        {
            length+= strlen(pi->vlv_name) + 4;
        }
    }
    /* Build a comma delimited list of Index names */
    text= slapi_ch_malloc(length);
    if(length==5)
    {
        strcpy(text,"none");
    }
    else
    {
        text[0]= '\0';
        t= plist;
        for(; t!=NULL ; t= t->vlv_next)
        {
            struct vlvIndex *pi= t->vlv_index;
            for(;pi!=NULL;pi= pi->vlv_next)
            {
                sprintf(text + strlen(text),"'%s', ",pi->vlv_name);
            }
        }
    }
    return text;
}
