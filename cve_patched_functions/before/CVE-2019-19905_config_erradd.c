config_erradd(buf)
const char *buf;
{
    char lineno[QBUFSZ];

    if (!buf || !*buf)
        buf = "Unknown error";

    if (!config_error_data) {
        /* either very early, where pline() will use raw_print(), or
           player gave bad value when prompted by interactive 'O' command */
        pline("%s%s.", !iflags.window_inited ? "config_error_add: " : "", buf);
        wait_synch();
        return;
    }

    config_error_data->num_errors++;
    if (!config_error_data->origline_shown && !config_error_data->secure) {
        pline("\n%s", config_error_data->origline);
        config_error_data->origline_shown = TRUE;
    }
    if (config_error_data->line_num > 0 && !config_error_data->secure) {
        Sprintf(lineno, "Line %d: ", config_error_data->line_num);
    } else
        lineno[0] = '\0';

    pline("%s %s%s.", config_error_data->secure ? "Error:" : " *",
          lineno, buf);
}
