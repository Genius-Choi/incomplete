int  wcall_debug(struct re_printf *pf, WUSER_HANDLE wuser)
{
	struct calling_instance *inst;
	struct le *le;	
	char convid_anon[ANON_ID_LEN];
	int err = 0;

	inst = wuser2inst(wuser);
	if (!inst) {
		warning("wcall: debug: invalid wuser=0x%08X\n",
			wuser);
		re_hprintf(pf, "\n");
		return 0;
	}

	err = re_hprintf(pf, "# calls=%d\n", list_count(&inst->wcalls));
	LIST_FOREACH(&inst->wcalls, le) {
		struct wcall *wcall = le->data;

		err |= re_hprintf(pf, "WCALL %p in state: %s\n", wcall,
			wcall_state_name(wcall->state));
		err |= re_hprintf(pf, "convid: %s\n", anon_id(convid_anon, wcall->convid));
		if (wcall->icall && wcall->icall->debug) {
			err |= re_hprintf(pf, "\t%H\n", wcall->icall->debug,
					  wcall->icall);
		}
	}
	
	return err;
}
