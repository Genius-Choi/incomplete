static int getiwmode(const char *dev) {
	int fd, ret = -1;
	if((fd = socket(AF_INET, SOCK_DGRAM, 0)) < 0) return -1;
	struct iwreq iwr = {0};
	strcpy(iwr.ifr_name, dev);
	if(ioctl(fd, SIOCGIWMODE, &iwr) >=0) ret = iwr.u.mode;
	close(fd);
	return ret;
}
