    static INT_PTR CALLBACK Proc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
    {
      size_t *data = (size_t*) GetWindowLongPtr(hWnd, DWLP_USER);
      if (Msg == WM_CLOSE)
      {
        if (lParam) SendMessage((HWND) wParam, WM_COPYDATA, (SIZE_T) hWnd, lParam);
        return DestroyWindow(hWnd) | PostMessage(NULL, WM_QUIT, 0, 0);
      }
      return data && ((CEXEBuild::HOSTAPIREQUESTDATAPROC)data[0])((void*) data[1], hWnd, Msg, wParam, lParam); // We don't set DWLP_MSGRESULT nor care about the return value
    }
