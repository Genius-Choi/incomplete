template <typename Socket, typename Yield> void close(Socket& s, Yield yield)
{
  // This function is supposed to be 'noexcept' because it's always invoked in the desturctors.
  // TODO log it
  auto ec = sys::error_code{};
  if constexpr (IsSslStreamV<Socket>) {
    s.async_shutdown(yield[ec]);
    close(s.next_layer(), yield);
  }
  else {
    suppressC4100(yield);
    s.close(ec);
  }
}
