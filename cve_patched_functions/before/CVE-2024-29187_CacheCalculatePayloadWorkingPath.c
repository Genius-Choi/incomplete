extern "C" HRESULT CacheCalculatePayloadWorkingPath(
    __in BURN_CACHE* pCache,
    __in BURN_PAYLOAD* pPayload,
    __deref_out_z LPWSTR* psczWorkingPath
    )
{
    Assert(pCache->fInitializedCache);

    HRESULT hr = S_OK;

    hr = PathConcatRelativeToFullyQualifiedBase(pCache->sczAcquisitionFolder, pPayload->sczKey, psczWorkingPath);
    ExitOnFailure(hr, "Failed to append Id as payload unverified path.");

LExit:
    return hr;
}
