static void mp4_mux_flush_seg_events(GF_MP4MuxCtx *ctx)
{
	if (ctx->flush_ll_hls) {
		mp4_mux_flush_frag_hls(ctx);
	}

	if (!ctx->dash_mode || ctx->flush_seg) {
		mp4_mux_flush_seg(ctx, GF_FALSE, ctx->flush_idx_start_range, ctx->flush_idx_end_range, GF_FALSE);
	}

	ctx->fragment_started = GF_FALSE;

	if (ctx->flush_seg) {
		ctx->segment_started = GF_FALSE;
		ctx->flush_seg = GF_FALSE;
		ctx->dash_seg_num_plus_one = 0;
		ctx->nb_segs++;
		ctx->nb_frags_in_seg=0;
	}
	ctx->seg_flush_state = 0;
	ctx->flush_idx_start_range = 0;
	ctx->flush_idx_end_range = 0;
	ctx->flush_ll_hls = GF_FALSE;
}
