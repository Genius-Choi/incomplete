      .WillOnce(Invoke([&](Buffer::Instance& data, bool) {
        std::vector<Grpc::Frame> decoded_frames;
        Grpc::Decoder decoder;
        ASSERT_TRUE(decoder.decode(data, decoded_frames));
        ASSERT_EQ(1U, decoded_frames.size());
        auto& frame = decoded_frames[0];
        Buffer::ZeroCopyInputStreamImpl stream(std::move(frame.data_));
        grpc::health::v1::HealthCheckRequest request;
        ASSERT_TRUE(request.ParseFromZeroCopyStream(&stream));
        EXPECT_EQ("service", request.service());
      }));
