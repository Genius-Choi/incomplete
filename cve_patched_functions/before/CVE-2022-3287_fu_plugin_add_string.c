fu_plugin_add_string(FuPlugin *self, guint idt, GString *str)
{
	FuPluginPrivate *priv = GET_PRIVATE(self);
	FuPluginVfuncs *vfuncs = fu_plugin_get_vfuncs(self);
	const gchar *name = fwupd_plugin_get_name(FWUPD_PLUGIN(self));
	g_autofree gchar *flags = NULL;

	g_return_if_fail(FU_IS_PLUGIN(self));
	g_return_if_fail(str != NULL);

	/* attributes */
	fu_string_append(str, idt, G_OBJECT_TYPE_NAME(self), "");
	if (name != NULL)
		fu_string_append(str, idt + 1, "Name", name);
	flags = fu_plugin_flags_to_string(fwupd_plugin_get_flags(FWUPD_PLUGIN(self)));
	if (flags != NULL)
		fu_string_append(str, idt + 1, "Flags", flags);
	if (priv->order != 0)
		fu_string_append_ku(str, idt + 1, "Order", priv->order);
	if (priv->priority != 0)
		fu_string_append_ku(str, idt + 1, "Priority", priv->priority);

	/* optional */
	if (vfuncs->to_string != NULL)
		vfuncs->to_string(self, idt + 1, str);
}
