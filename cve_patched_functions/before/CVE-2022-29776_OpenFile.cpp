    bool CFileBinary::OpenFile(const std::wstring& sFileName, bool bRewrite)
    {
        m_pFile = fopen(fileSystemRepresentation(sFileName), bRewrite ? "rb+" : "rb");
        
        if (NULL == m_pFile) {
#if DEBUG
            //    printf ("NSFile::OpenFile - error open file : %s\n",strerror(errno));
#endif
            return false;
        }
        
        fseek(m_pFile, 0, SEEK_END);
        m_lFileSize = ftell(m_pFile);
        fseek(m_pFile, 0, SEEK_SET);
        
        m_lFilePosition = 0;
        
        if (0 < sFileName.length())
        {
            if (((wchar_t)'/') == sFileName.c_str()[sFileName.length() - 1])
                m_lFileSize = 0x7FFFFFFF;
        }
        
        unsigned int err = 0x7FFFFFFF;
        unsigned int cur = (unsigned int)m_lFileSize;
        if (err == cur)
        {
            CloseFile();
            return false;
        }
        
        return true;
    }
