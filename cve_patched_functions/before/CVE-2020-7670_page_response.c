page_response(agooCon c, agooPage p, char *hend) {
    agooRes 	res;
    char	*b;

    if (NULL == (res = agoo_res_create(c))) {
	return true;
    }
    agoo_con_res_append(c, res);

    b = strstr(c->buf, "\r\n");
    res->close = should_close(b, (int)(hend - b));
    if (res->close) {
	c->closing = true;
    }
    agoo_res_message_push(res, p->resp);

    return false;
}
