static int fs_getFreeSpace(lua_State *L) {
    lastCFunction = __func__;
    std::string mountPath;
    std::string str = checkstring(L, 1);
    const path_t path = fixpath(get_comp(L), str, false, true, &mountPath);
    if (path.empty()) err(L, 1, "No such path");
    if (fixpath_ro(get_comp(L), str)) lua_pushinteger(L, 0);
    else if (!config.standardsMode || mountPath != "hdd") lua_pushinteger(L, getSpace(path).free);
    else lua_pushinteger(L, config.computerSpaceLimit - calculateDirectorySize(fixpath(get_comp(L), "", true)));
    return 1;
}
