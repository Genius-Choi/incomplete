static void predecode_amr(and_media_private_t *codec_data,
			  const pjmedia_frame *input,
			  pjmedia_frame *out)
{
    pjmedia_codec_amr_bit_info *info;
    pj_uint8_t *bitstream = (pj_uint8_t *)out->buf;
    pjmedia_codec_amr_pack_setting *setting;

    out->buf = &bitstream[1];
    setting = &((amr_settings_t*)codec_data->codec_setting)->dec_setting;
    pjmedia_codec_amr_predecode(input, setting, out);
    info = (pjmedia_codec_amr_bit_info*)&out->bit_info;
    bitstream[0] = (info->frame_type << 3) | (info->good_quality << 2);
    out->buf = &bitstream[0];
    ++out->size;
}
