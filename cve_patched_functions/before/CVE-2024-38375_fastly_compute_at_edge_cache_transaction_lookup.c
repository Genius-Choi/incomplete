bool fastly_compute_at_edge_cache_transaction_lookup(
    fastly_world_string_t *cache_key, fastly_compute_at_edge_cache_lookup_options_t *options,
    fastly_compute_at_edge_cache_handle_t *ret, fastly_compute_at_edge_types_error_t *err) {
  uint32_t options_mask = 0;
  if (options->request_headers.is_some) {
    options_mask |= FASTLY_CACHE_LOOKUP_OPTIONS_MASK_REQUEST_HEADERS;
  }
  return convert_result(fastly::cache_transaction_lookup(reinterpret_cast<char *>(cache_key->ptr),
                                                         cache_key->len, options_mask, options,
                                                         ret),
                        err);
}
