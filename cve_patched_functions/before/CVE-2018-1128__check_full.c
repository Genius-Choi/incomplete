bool OSDService::_check_full(s_names type, ostream &ss) const
{
  Mutex::Locker l(full_status_lock);

  if (injectfull && injectfull_state >= type) {
    // injectfull is either a count of the number of times to return failsafe full
    // or if -1 then always return full
    if (injectfull > 0)
      --injectfull;
    ss << "Injected " << get_full_state_name(type) << " OSD ("
       << (injectfull < 0 ? "set" : std::to_string(injectfull)) << ")";
    return true;
  }

  ss << "current usage is " << cur_ratio;
  return cur_state >= type;
}
