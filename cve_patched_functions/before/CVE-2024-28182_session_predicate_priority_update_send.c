static int session_predicate_priority_update_send(nghttp2_session *session,
                                                  int32_t stream_id) {
  nghttp2_stream *stream;

  if (session_is_closing(session)) {
    return NGHTTP2_ERR_SESSION_CLOSING;
  }

  stream = nghttp2_session_get_stream(session, stream_id);
  if (stream == NULL) {
    return 0;
  }
  if (stream->state == NGHTTP2_STREAM_CLOSING) {
    return NGHTTP2_ERR_STREAM_CLOSING;
  }
  if (stream->shut_flags & NGHTTP2_SHUT_RD) {
    return NGHTTP2_ERR_INVALID_STREAM_STATE;
  }

  return 0;
}
