void CEAnsi::DoneAnsiLog(bool bFinal)
{
	if (!ghAnsiLogFile)
		return;

	if (gbAnsiLogNewLine || (gnEnterPressed > 0))
	{
		CEAnsi::WriteAnsiLogUtf8("\n", 1);
	}

	if (!bFinal)
	{
		FlushFileBuffers(ghAnsiLogFile);
	}
	else
	{
		// ReSharper disable once CppLocalVariableMayBeConst
		HANDLE h = ghAnsiLogFile;
		ghAnsiLogFile = nullptr;
		CloseHandle(h);
		SafeDelete(gcsAnsiLogFile);
	}
}
