MG_INTERNAL struct mg_http_proto_data *mg_http_create_proto_data(
    struct mg_connection *c) {
  /* If we have proto data from previous connection, flush it. */
  if (c->proto_data != NULL) {
    void *pd = c->proto_data;
    c->proto_data = NULL;
    mg_http_proto_data_destructor(pd);
  }
  c->proto_data = MG_CALLOC(1, sizeof(struct mg_http_proto_data));
  c->proto_data_destructor = mg_http_proto_data_destructor;
  return (struct mg_http_proto_data *) c->proto_data;
}
