Strnew_charp_n(const char *p, int n)
{
    Str x;

    if (p == NULL)
	return Strnew_size(n);
    x = GC_MALLOC(sizeof(struct _Str));
    x->ptr = GC_MALLOC_ATOMIC(n + 1);
    x->area_size = n + 1;
    x->length = n;
    bcopy((void *)p, (void *)x->ptr, n);
    x->ptr[n] = '\0';
    return x;
}
