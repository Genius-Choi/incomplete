static Jsi_RC InterpConfCmd(Jsi_Interp *interp, Jsi_Value *args, Jsi_Value *_this,
    Jsi_Value **ret, Jsi_Func *funcPtr)
{
    InterpObj *udf = (typeof(udf))Jsi_UserObjGetData(interp, _this, funcPtr);
    Jsi_RC rc;
    Jsi_Value *opts = Jsi_ValueArrayIndex(interp, args, 0);
    Jsi_Interp *sinterp = interp;
    if (!udf || udf->subinterp == interp) {
        if (interp->noConfig && opts && !Jsi_ValueIsString(interp, opts))
            return Jsi_LogError("Interp conf() is disabled for set");
        rc = Jsi_OptionsConf(interp, InterpOptions, interp, opts, ret, 0);
    } else {
        sinterp = udf->subinterp;
        Jsi_Value *popts = opts;
        if (opts && opts->vt != JSI_VT_NULL && !Jsi_ValueString(interp, opts, NULL) && opts->vt == JSI_VT_OBJECT) {
            popts = Jsi_ValueNew1(sinterp);
            Jsi_CleanValue(interp, sinterp, opts, &popts);
        }
        rc = Jsi_OptionsConf(sinterp, InterpOptions, sinterp, popts, ret, 0);
        if (popts && popts != opts)
            Jsi_DecrRefCount(sinterp, popts);
        Jsi_CleanValue(sinterp, interp, *ret, ret);
    }
    return rc;
}
