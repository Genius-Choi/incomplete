void ServerConnectionImpl::checkOutboundQueueLimits() {
  if (outbound_frames_ > max_outbound_frames_ && dispatching_downstream_data_) {
    stats_.outbound_flood_.inc();
    throw FrameFloodException("Too many frames in the outbound queue.");
  }
  if (outbound_control_frames_ > max_outbound_control_frames_ && dispatching_downstream_data_) {
    stats_.outbound_control_flood_.inc();
    throw FrameFloodException("Too many control frames in the outbound queue.");
  }
}
