struct calling_instance *wuser2inst(WUSER_HANDLE wuser)
{
	bool found = false;
	struct calling_instance *inst = NULL;
	struct le *le;

	if ((wuser & WU_MAGIC) != WU_MAGIC)
		return NULL;
	
	lock_write_get(calling.lock);
	for (le = calling.instances.head; le && !found; le = le->next) {
		inst = le->data;
		
		found = inst->wuser == wuser;
	}
	lock_rel(calling.lock);

	return found ? inst : NULL;

}
