u32 gf_isom_is_track_referenced(GF_ISOFile *movie, u32 trackNumber, u32 referenceType)
{
	u32 i, j, count;
	GF_TrackBox *trak;
	GF_TrackReferenceTypeBox *dpnd;
	trak = gf_isom_get_track_from_file(movie, trackNumber);
	if (!trak) return 0;
	count = gf_list_count(movie->moov->trackList);
	for (i=0; i<count; i++) {
		GF_TrackBox *a_trak = gf_list_get(movie->moov->trackList, i);
		if (!a_trak->References) return 0;

		dpnd = NULL;
		if ( (movie->LastError = Track_FindRef(a_trak, referenceType, &dpnd)) ) return 0;
		if (!dpnd) return 0;
		for (j=0; j<dpnd->trackIDCount; j++) {
			if (dpnd->trackIDs[j] == trak->Header->trackID) return i+1;
		}
	}
	return 0;
}
