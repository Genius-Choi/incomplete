static void svg_parse_color(SVG_Color *col, char *attribute_content, GF_Err *out_e)
{
	char *str = attribute_content;
	while (str[strlen(attribute_content)-1] == ' ') str[strlen(attribute_content)-1] = 0;
	while (*str != 0 && (*str == ' ' || *str == ',' || *str == ';')) str++;

	if (!strcmp(str, "currentColor")) {
		col->type = SVG_COLOR_CURRENTCOLOR;
		return;
	} else if (!strcmp(str, "inherit")) {
		col->type = SVG_COLOR_INHERIT;
		return;
	} else if (str[0]=='#') {
		u32 val;
		sscanf(str+1, "%x", &val);
		if (strlen(str) == 7) {
			col->red = INT2FIX((val>>16) & 0xFF) / 255;
			col->green = INT2FIX((val>>8) & 0xFF) / 255;
			col->blue = INT2FIX(val & 0xFF) / 255;
		} else {
			col->red = INT2FIX((val>>8) & 0xF) / 15;
			col->green = INT2FIX((val>>4) & 0xF) / 15;
			col->blue = INT2FIX(val & 0xF) / 15;
		}
		col->type = SVG_COLOR_RGBCOLOR;
	} else if (strstr(str, "rgb(") || strstr(str, "RGB(")) {
		Float _val;
		u8 is_percentage= 0;
		if (strstr(str, "%")) is_percentage = 1;
		str = strstr(str, "(");
		str++;
		sscanf(str, "%f", &_val);
		col->red = FLT2FIX(_val);
		str = strstr(str, ",");
		if (!str) {
			/* space separated colors/percentages are not allowed neither in SVG 1.1 nor in SVG T1.2 */
			col->red = col->green = col->blue = 0;
			return;
		}
		str++;
		sscanf(str, "%f", &_val);
		col->green = FLT2FIX(_val);
		str = strstr(str, ",");
		if (!str) {
			/* space separated colors/percentages are not allowed neither in SVG 1.1 nor in SVG T1.2 */
			col->red = col->green = col->blue = 0;
			return;
		}
		str++;
		sscanf(str, "%f", &_val);
		col->blue = FLT2FIX(_val);
		if (is_percentage) {
			col->red /= 100;
			col->green /= 100;
			col->blue /= 100;
		} else {
			col->red /= 255;
			col->green /= 255;
			col->blue /= 255;
		}
		col->type = SVG_COLOR_RGBCOLOR;
	} else if ((str[0] >= 'a' && str[0] <= 'z')
	           || (str[0] >= 'A' && str[0] <= 'Z')) {
		svg_parse_named_color(col, str);
	} else {
		Float _r, _g, _b;
		if (sscanf(str, "%f %f %f", &_r, &_g, &_b)==3) {
			col->red = FLT2FIX(_r);
			col->green = FLT2FIX(_g);
			col->blue = FLT2FIX(_b);
			col->type = SVG_COLOR_RGBCOLOR;
		} else {
			*out_e = GF_NON_COMPLIANT_BITSTREAM;
		}
	}
}
