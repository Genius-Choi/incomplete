void CScreenshotPortal::onPickColor(sdbus::MethodCall& call) {
    sdbus::ObjectPath requestHandle;
    call >> requestHandle;

    std::string appID;
    call >> appID;

    std::string parentWindow;
    call >> parentWindow;

    Debug::log(LOG, "[screenshot] New PickColor request:");
    Debug::log(LOG, "[screenshot]  | {}", requestHandle.c_str());
    Debug::log(LOG, "[screenshot]  | appid: {}", appID);

    bool hyprPickerInstalled = inShellPath("hyprpicker");
    bool slurpInstalled      = inShellPath("slurp");

    if (!slurpInstalled && !hyprPickerInstalled) {
        Debug::log(ERR, "Neither slurp nor hyprpicker found. We can't pick colors.");
        sendEmptyDbusMethodReply(call, 1);
        return;
    }

    // use hyprpicker if installed, slurp as fallback
    if (hyprPickerInstalled)
        pickHyprPicker(call);
    else
        pickSlurp(call);
}
