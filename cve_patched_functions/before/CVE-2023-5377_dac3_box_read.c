GF_Err dac3_box_read(GF_Box *s, GF_BitStream *bs)
{
	GF_Err e;
	u64 pos;
	GF_AC3ConfigBox *ptr = (GF_AC3ConfigBox *)s;
	if (ptr == NULL) return GF_BAD_PARAM;
	pos = gf_bs_get_position(bs);
	e = gf_odf_ac3_config_parse_bs(bs, ptr->cfg.is_ec3, &ptr->cfg);
	if (e) return e;
	pos = gf_bs_get_position(bs) - pos;
	ISOM_DECREASE_SIZE(ptr, pos);

	if (ptr->size>=2) {
		ptr->size-=2;
		gf_bs_read_int(bs, 7);
		ptr->cfg.atmos_ec3_ext = gf_bs_read_int(bs, 1);
		ptr->cfg.complexity_index_type = gf_bs_read_u8(bs);
	}
	//the rest is reserved
	gf_bs_skip_bytes(bs, ptr->size);
	ptr->size = 0;
	return GF_OK;
}
