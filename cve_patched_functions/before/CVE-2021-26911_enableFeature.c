bool IMAPSession::enableFeature(String * feature)
{
    struct mailimap_capability_data * caps;
    clist * cap_list;
    struct mailimap_capability * cap;
    int r;
    
    cap_list = clist_new();
    cap = mailimap_capability_new(MAILIMAP_CAPABILITY_NAME, NULL, strdup(MCUTF8(feature)));
    clist_append(cap_list, cap);
    caps = mailimap_capability_data_new(cap_list);
    
    struct mailimap_capability_data * result;
    r = mailimap_enable(mImap, caps, &result);
    mailimap_capability_data_free(caps);
    if (r != MAILIMAP_NO_ERROR)
        return false;
    
    mailimap_capability_data_free(result);
    
    return true;
}
