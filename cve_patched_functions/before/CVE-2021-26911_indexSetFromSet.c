static IndexSet * indexSetFromSet(struct mailimap_set * imap_set)
{
    IndexSet * indexSet = IndexSet::indexSet();
    for(clistiter * cur = clist_begin(imap_set->set_list) ; cur != NULL ; cur = clist_next(cur)) {
        struct mailimap_set_item * item = (struct mailimap_set_item *) clist_content(cur);
        if (item->set_last == 0) {
            indexSet->addRange(RangeMake(item->set_first, UINT64_MAX));
        }
        else {
            indexSet->addRange(RangeMake(item->set_first, item->set_last - item->set_first));
        }
    }
    return indexSet;
}
