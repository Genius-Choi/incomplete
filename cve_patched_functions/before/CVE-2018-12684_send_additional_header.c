send_additional_header(struct mg_connection *conn)
{
	int i = 0;
	const char *header = conn->dom_ctx->config[ADDITIONAL_HEADER];

#if !defined(NO_SSL)
	if (conn->dom_ctx->config[STRICT_HTTPS_MAX_AGE]) {
		int max_age = atoi(conn->dom_ctx->config[STRICT_HTTPS_MAX_AGE]);
		if (max_age >= 0) {
			i += mg_printf(conn,
			               "Strict-Transport-Security: max-age=%u\r\n",
			               (unsigned)max_age);
		}
	}
#endif

	if (header && header[0]) {
		i += mg_printf(conn, "%s\r\n", header);
	}

	return i;
}
