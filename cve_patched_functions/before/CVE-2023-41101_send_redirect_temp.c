int send_redirect_temp(struct MHD_Connection *connection, t_client *client, const char *url)
{
	// Warning - *client will be undefined if not authenticated
	struct MHD_Response *response;
	int ret;
	char *redirect;

	redirect = safe_calloc(SMALL_BUF);

	safe_asprintf(&redirect, "<html><head></head><body><a href='%s'>Click here to continue to<br>%s</a></body></html", url, url);

	debug(LOG_DEBUG, "send_redirect_temp: MHD_create_response_from_buffer. url [%s]", url);
	debug(LOG_DEBUG, "send_redirect_temp: Redirect to [%s]", redirect);

	response = MHD_create_response_from_buffer(SMALL_BUF, redirect, MHD_RESPMEM_MUST_FREE);

	if (!response) {
		debug(LOG_DEBUG, "send_redirect_temp: Failed to create response....");
		return send_error(connection, 503);
	} else {
		debug(LOG_DEBUG, "send_redirect_temp: Response created");
	}

	ret = MHD_add_response_header(response, "Location", url);

	if (ret == MHD_NO) {
		debug(LOG_ERR, "send_redirect_temp: Error adding Location header to redirection page");
	} else {
		debug(LOG_DEBUG, "send_redirect_temp: Location header added to redirection page");
	}

	ret = MHD_add_response_header(response, "Connection", "close");

	if (ret == MHD_NO) {
		debug(LOG_ERR, "send_redirect_temp: Error adding Connection header to redirection page");
	} else {
		debug(LOG_DEBUG, "send_redirect_temp: Connection header added to redirection page");
	}

	debug(LOG_DEBUG, "send_redirect_temp: Queueing response");

	ret = MHD_queue_response(connection, MHD_HTTP_TEMPORARY_REDIRECT, response);

	if (ret == MHD_NO) {
		debug(LOG_ERR, "send_redirect_temp: Error queueing response");
	} else {
		debug(LOG_DEBUG, "send_redirect_temp: Response is Queued");
	}

	MHD_destroy_response(response);

	return ret;
}
