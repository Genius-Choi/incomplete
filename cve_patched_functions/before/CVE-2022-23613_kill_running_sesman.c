kill_running_sesman(const char *pid_file)
{
    int error;
    int fd;
    int pid;
    char pid_s[32] = {0};

    /* check if sesman is running */
    if (!g_file_exist(pid_file))
    {
        g_printf("sesman is not running (pid file not found - %s)\n", pid_file);
        g_deinit();
        return 1;
    }

    fd = g_file_open(pid_file);

    if (-1 == fd)
    {
        g_printf("error opening pid file[%s]: %s\n", pid_file, g_get_strerror());
        return 1;
    }

    error = g_file_read(fd, pid_s, sizeof(pid_s) - 1);

    if (-1 == error)
    {
        g_printf("error reading pid file: %s\n", g_get_strerror());
        g_file_close(fd);
        g_deinit();
        return 1;
    }

    g_file_close(fd);
    pid = g_atoi(pid_s);

    error = g_sigterm(pid);

    if (0 != error)
    {
        g_printf("error killing sesman: %s\n", g_get_strerror());
    }
    else
    {
        g_file_delete(pid_file);
    }

    g_deinit();
    return error;
}
