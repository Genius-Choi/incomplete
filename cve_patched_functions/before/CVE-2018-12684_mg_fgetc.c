mg_fgetc(struct mg_file *filep, int offset)
{
	(void)offset; /* unused in case MG_USE_OPEN_FILE is set */

	if (filep == NULL) {
		return EOF;
	}
#if defined(MG_USE_OPEN_FILE)
	if ((filep->access.membuf != NULL) && (offset >= 0)
	    && (((unsigned int)(offset)) < filep->stat.size)) {
		return ((const unsigned char *)filep->access.membuf)[offset];
	} else /* else block below */
#endif
	    if (filep->access.fp != NULL) {
		return fgetc(filep->access.fp);
	} else {
		return EOF;
	}
}
