virtio_i2c_dsdt(struct pci_vdev *dev)
{
	int i, j, node_num;
	struct acpi_node *anode;
	int i2c_bus;
	int found;
	struct virtio_i2c *vi2c = (struct virtio_i2c *) dev->arg;

	/* i2c bus number in acpi start from 0 */
	i2c_bus = acpi_i2c_adapter_num;
	/* add i2c adapter */
	acpi_add_i2c_adapter(dev, i2c_bus);
	DPRINTF("add dsdt for i2c adapter %d\n", i2c_bus);

	/* add client devices */
	node_num = sizeof(acpi_node_table) / sizeof(struct acpi_node);
	for (i = 0; i < MAX_I2C_VDEV; i++) {
		if (!native_adapter_find(vi2c, i))
			continue;

		found = 0;
		for (j = 0; j < node_num; j++) {
			anode = &acpi_node_table[j];
			if (!strncmp(anode->node_name, vi2c->acpi_nodes[i], sizeof(anode->node_name))) {
				found = 1;
				if (anode->add_node_fn) {
					anode->add_node_fn(dev, i2c_bus);
					DPRINTF("add dsdt for %s \n", anode->node_name);
				}
			}
		}
		if (!found)
			WPRINTF("cannot find acpi node info for %s \n", vi2c->acpi_nodes[i]);
	}
	acpi_i2c_adapter_num++;
}
