void db__expire_all_messages(struct mosquitto *context)
{
	struct mosquitto_client_msg *msg, *tmp;

	DL_FOREACH_SAFE(context->msgs_out.inflight, msg, tmp){
		if(msg->store->message_expiry_time && db.now_real_s > msg->store->message_expiry_time){
			if(msg->qos > 0){
				util__increment_send_quota(context);
			}
			db__message_remove_from_inflight(&context->msgs_out, msg);
		}
	}
	DL_FOREACH_SAFE(context->msgs_out.queued, msg, tmp){
		if(msg->store->message_expiry_time && db.now_real_s > msg->store->message_expiry_time){
			db__message_remove_from_queued(&context->msgs_out, msg);
		}
	}
	DL_FOREACH_SAFE(context->msgs_in.inflight, msg, tmp){
		if(msg->store->message_expiry_time && db.now_real_s > msg->store->message_expiry_time){
			if(msg->qos > 0){
				util__increment_receive_quota(context);
			}
			db__message_remove_from_inflight(&context->msgs_in, msg);
		}
	}
	DL_FOREACH_SAFE(context->msgs_in.queued, msg, tmp){
		if(msg->store->message_expiry_time && db.now_real_s > msg->store->message_expiry_time){
			db__message_remove_from_queued(&context->msgs_in, msg);
		}
	}
}
