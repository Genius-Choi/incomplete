unsigned DCR_CLASS dcr_ph1_bits (DCRAW* p,int nbits)
{
	static UINT64 bitbuf=0;
	static int vbits=0;

	if (nbits == -1)
		return (unsigned int)(bitbuf = vbits = 0);
	if (nbits == 0) return 0;
	if ((vbits -= nbits) < 0) {
		bitbuf = bitbuf << 32 | dcr_get4(p);
		vbits += 32;
	}
	return (unsigned int)(bitbuf << (64-nbits-vbits) >> (64-nbits));
}
