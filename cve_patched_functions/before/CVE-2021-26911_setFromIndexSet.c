static struct mailimap_set * setFromIndexSet(IndexSet * indexSet)
{
    struct mailimap_set * imap_set;
    
    imap_set = mailimap_set_new_empty();
    for(unsigned int i = 0 ; i < indexSet->rangesCount() ; i ++) {
        uint64_t left = RangeLeftBound(indexSet->allRanges()[i]);
        uint64_t right = RangeRightBound(indexSet->allRanges()[i]);
        if (right == UINT64_MAX) {
            right = 0;
        }
        mailimap_set_add_interval(imap_set, (uint32_t) left, (uint32_t) right);
    }
    
    return imap_set;
}
