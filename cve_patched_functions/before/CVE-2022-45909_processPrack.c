    int SipDialogController::processPrack( nta_reliable_t *rel, nta_incoming_t *prack, sip_t const *sip) {
        DR_LOG(log_debug) << "SipDialogController::processPrack: "  ;
        std::shared_ptr<IIP> iip  ;
        if (IIP_FindByReliable(m_invitesInProgress, rel, iip)) {
            std::string transactionId ;
            generateUuid( transactionId ) ;
            std::shared_ptr<SipDialog> dlg = iip->dlg() ;
            assert( dlg ) ;

            m_pClientController->addDialogForTransaction( dlg->getTransactionId(), dlg->getDialogId() ) ;  

            string encodedMessage ;
            msg_t* msg = nta_incoming_getrequest( prack ) ; // adds a reference
            EncodeStackMessage( sip, encodedMessage ) ;
            SipMsgData_t meta( msg, prack ) ;
            msg_destroy(msg);                               // releases the reference

            m_pClientController->route_request_inside_dialog( encodedMessage, meta, sip, transactionId, dlg->getDialogId() ) ;

            iip->destroyReliable() ;

            addIncomingRequestTransaction( prack, transactionId) ;
        }
        else {
            assert(0) ;
        }
        return 0 ;
    }
