std::optional<bool> PatternMatchLoopCondVarOverride(
    HloInstruction* loop_body_root, int64_t tuple_index) {
  if (!Match(loop_body_root, match::Tuple()) ||
      loop_body_root->operand_count() <= tuple_index) {
    return std::nullopt;
  }
  HloInstruction* cond_var_override =
      loop_body_root->mutable_operand(tuple_index);
  return GetInstructionStaticValueAsBool(cond_var_override);
}
