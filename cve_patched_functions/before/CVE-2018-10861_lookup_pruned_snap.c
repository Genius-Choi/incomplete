int OSDMonitor::lookup_pruned_snap(int64_t pool, snapid_t snap,
				   snapid_t *begin, snapid_t *end)
{
  string k = make_snap_key(pool, snap);
  auto it = mon->store->get_iterator(OSD_SNAP_PREFIX);
  it->lower_bound(k);
  if (!it->valid()) {
    return -ENOENT;
  }
  if (it->key().find(OSD_SNAP_PREFIX) != 0) {
    return -ENOENT;
  }
  bufferlist v = it->value();
  auto p = v.cbegin();
  decode(*begin, p);
  decode(*end, p);
  if (snap < *begin || snap >= *end) {
    return -ENOENT;
  }
  return 0;
}
