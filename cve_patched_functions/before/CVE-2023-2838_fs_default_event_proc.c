static Bool fs_default_event_proc(void *ptr, GF_Event *evt)
{
	GF_FilterSession *fs = (GF_FilterSession *)ptr;
	if (evt->type==GF_EVENT_QUIT) {
		gf_fs_abort(fs, (evt->message.error) ? GF_FS_FLUSH_NONE : GF_FS_FLUSH_FAST);
	}
	if (evt->type==GF_EVENT_MESSAGE) {
		if (evt->message.error) {
			if (evt->message.service) {
				GF_LOG(GF_LOG_ERROR, GF_LOG_MEDIA, ("Service %s %s: %s\n", evt->message.service, evt->message.message, gf_error_to_string(evt->message.error) ))
			} else {
				GF_LOG(GF_LOG_ERROR, GF_LOG_MEDIA, ("%s: %s\n", evt->message.message, gf_error_to_string(evt->message.error) ))
			}
		}
	}

#ifdef GPAC_HAS_QJS
	if (fs->on_evt_task && jsfs_on_event(fs, evt))
		return GF_TRUE;
#endif

	if (evt->type==GF_EVENT_AUTHORIZATION) {
#ifdef GPAC_HAS_QJS
		if (fs->on_auth_task && jsfs_on_auth(fs, evt))
			return GF_TRUE;
#endif

		if (gf_sys_is_test_mode()) {
			return GF_FALSE;
		}
		assert( evt->type == GF_EVENT_AUTHORIZATION);
		assert( evt->auth.user);
		assert( evt->auth.password);
		assert( evt->auth.site_url);

		fprintf(stderr, "**** Authorization required for site %s %s ****\n", evt->auth.site_url, evt->auth.secure ? "(secure)" : "- NOT SECURE");
		fprintf(stderr, "login   : ");
		if (!gf_read_line_input(evt->auth.user, 50, 1))
			return GF_FALSE;
		fprintf(stderr, "\npassword: ");
		if (!gf_read_line_input(evt->auth.password, 50, 0))
			return GF_FALSE;
		fprintf(stderr, "*********\n");

		if (evt->auth.on_usr_pass) {
			evt->auth.on_usr_pass(evt->auth.async_usr_data, evt->auth.user, evt->auth.password, GF_FALSE);
			evt->auth.password[0] = 0;
		}
		return GF_TRUE;
	}

	return GF_FALSE;
}
