MOBI_RET mobi_get_fullname(const MOBIData *m, char *fullname, const size_t len) {
    if (fullname == NULL || len == 0) {
        return MOBI_PARAM_ERR;
    }
    fullname[0] = '\0';
    if (m == NULL) {
        debug_print("%s", "Mobi structure not initialized\n");
        return MOBI_INIT_FAILED;
    }
    if (m->mh == NULL || m->mh->full_name == NULL) {
        return MOBI_INIT_FAILED;
    }
    if (mobi_is_cp1252(m)) {
        size_t out_len = len + 1;
        mobi_cp1252_to_utf8(fullname, m->mh->full_name, &out_len, strlen(m->mh->full_name));
    } else {
        strncpy(fullname, m->mh->full_name, len);
        fullname[len] = '\0';
    }
    return MOBI_SUCCESS;
}
