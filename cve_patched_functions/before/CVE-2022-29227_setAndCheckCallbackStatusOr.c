int ConnectionImpl::setAndCheckCallbackStatusOr(Envoy::StatusOr<ParserStatus>&& statusor) {
  ASSERT(codec_status_.ok());
  if (statusor.ok()) {
    return parser_->statusToInt(statusor.value());
  } else {
    codec_status_ = std::move(statusor.status());
    return parser_->statusToInt(ParserStatus::Error);
  }
}
