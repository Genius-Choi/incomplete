static void tcp_linger(struct pico_socket_tcp *t)
{
    pico_timer_cancel(t->sock.stack, t->fin_tmr);
    t->fin_tmr = pico_timer_add(t->sock.stack, t->linger_timeout, tcp_deltcb, t);
    if (!t->fin_tmr) {
        tcp_dbg("TCP: failed to start delete callback timer, deleting socket now\n");
        tcp_deltcb((pico_time)0, t);
    }
}
