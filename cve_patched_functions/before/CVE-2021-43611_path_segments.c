path_segments(pbelle_sip_messageParser ctx, belle_generic_uri_t* uri)
{
    belle_sip_messageParser_path_segments_return retval;


    /* Initialize rule variables
     */

    retval.start = LT(1); retval.stop = retval.start;


    {
        // ../grammars/belle_sip_message.g:361:3: ( SLASH ( segment ( SLASH segment )* ) )
        // ../grammars/belle_sip_message.g:361:5: SLASH ( segment ( SLASH segment )* )
        {
             MATCHT(SLASH, &FOLLOW_SLASH_in_path_segments1238);
            if  (HASEXCEPTION())
            {
                goto rulepath_segmentsEx;
            }
            if (HASFAILED())
            {
                return retval;
            }


            // ../grammars/belle_sip_message.g:361:11: ( segment ( SLASH segment )* )
            // ../grammars/belle_sip_message.g:361:12: segment ( SLASH segment )*
            {
                FOLLOWPUSH(FOLLOW_segment_in_path_segments1241);
                segment(ctx);

                FOLLOWPOP();
                if  (HASEXCEPTION())
                {
                    goto rulepath_segmentsEx;
                }
                if (HASFAILED())
                {
                    return retval;
                }


                // ../grammars/belle_sip_message.g:361:20: ( SLASH segment )*

                for (;;)
                {
                    int alt20=2;
                    switch ( LA(1) )
                    {
                    case SLASH:
                    	{
                    		alt20=1;
                    	}
                        break;

                    }

                    switch (alt20)
                    {
                	case 1:
                	    // ../grammars/belle_sip_message.g:361:22: SLASH segment
                	    {
                	         MATCHT(SLASH, &FOLLOW_SLASH_in_path_segments1245);
                	        if  (HASEXCEPTION())
                	        {
                	            goto rulepath_segmentsEx;
                	        }
                	        if (HASFAILED())
                	        {
                	            return retval;
                	        }


                	        FOLLOWPUSH(FOLLOW_segment_in_path_segments1247);
                	        segment(ctx);

                	        FOLLOWPOP();
                	        if  (HASEXCEPTION())
                	        {
                	            goto rulepath_segmentsEx;
                	        }
                	        if (HASFAILED())
                	        {
                	            return retval;
                	        }


                	    }
                	    break;

                	default:
                	    goto loop20;	/* break out of the loop */
                	    break;
                    }
                }
                loop20: ; /* Jump out to here if this rule does not match */


            }


            if ( BACKTRACKING==0 )
            {

                  char* unescaped_path;
                  unescaped_path=belle_sip_to_unescaped_string((const char *)STRSTREAM->toStringTT(STRSTREAM, retval.start, LT(-1))
                ->chars);
                  belle_generic_uri_set_path(uri,(const char*)unescaped_path);
                  belle_sip_free(unescaped_path);
                  
            }


        }

    }

    // This is where rules clean up and exit
    //
    goto rulepath_segmentsEx; /* Prevent compiler warnings */
    rulepath_segmentsEx: ;
    retval.stop = LT(-1);



                if (HASEXCEPTION())
                {

                // This is ugly.  We set the exception type to ANTLR3_RECOGNITION_EXCEPTION so we can always
                // catch them.
                //PREPORTERROR();
                EXCEPTION->type = ANTLR3_RECOGNITION_EXCEPTION;
                }

    return retval;
}
