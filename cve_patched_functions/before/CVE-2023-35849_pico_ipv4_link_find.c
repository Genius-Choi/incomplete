struct pico_device *MOCKABLE pico_ipv4_link_find(struct pico_stack *S, struct pico_ip4 *address)
{
    struct pico_ipv4_link test, *found;
    if (!address) {
        pico_err = PICO_ERR_EINVAL;
        return NULL;
    }

    test.dev = NULL;
    test.address.addr = address->addr;
    found = pico_tree_findKey(&S->Tree_dev_link, &test);
    if (!found) {
        pico_err = PICO_ERR_ENXIO;
        return NULL;
    }

    return found->dev;
}
