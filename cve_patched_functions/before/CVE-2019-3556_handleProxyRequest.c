void AdminRequestHandler::handleProxyRequest(const std::string& /*cmd*/,
                                             Transport* transport) {
  try {
    auto const percentStr = transport->getParam("percentage");
    auto const percent    = percentStr.empty() ? 0 : folly::to<int>(percentStr);
    if (percent < 0 || percent > 100) {
      throw std::range_error("must be in [0, 100]");
    }

    setProxyOriginPercentage(transport->getParam("origin"), percent);
    transport->sendString("Origin and percentage updated");
  } catch (const std::range_error& re) {
    transport->sendString(folly::sformat("Invalid percentage: {}", re.what()));
  }
}
