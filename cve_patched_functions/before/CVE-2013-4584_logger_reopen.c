void logger_reopen(FILE *fh)
{
	vanessa_logger_t *vl;

	if (fh != NULL)
		vl = vanessa_logger_openlog_filehandle(fh, progname,
			opt.debug?LOG_DEBUG:(opt.quiet?LOG_ERR:LOG_INFO),
			VANESSA_LOGGER_F_CONS|VANESSA_LOGGER_F_TIMESTAMP);
	else if (opt.log_facility != NULL && *(opt.log_facility) == '/')
		vl = vanessa_logger_openlog_filename(opt.log_facility,
			progname,
			opt.debug?LOG_DEBUG:(opt.quiet?LOG_ERR:LOG_INFO),
			VANESSA_LOGGER_F_CONS|VANESSA_LOGGER_F_TIMESTAMP);
	else
		vl = vanessa_logger_openlog_syslog_byname(opt.log_facility,
			progname,
			opt.debug?LOG_DEBUG:(opt.quiet?LOG_ERR:LOG_INFO),
			LOG_CONS);

	if (vl == NULL) {
    		VANESSA_LOGGER_DEBUG("vanessa_logger_openlog");
		VANESSA_LOGGER_ERR("Fatal error opening logger. Exiting.");
		perdition_exit_cleanly(-1);
	}

	vanessa_logger_closelog(vanessa_logger_get());
	vanessa_logger_set(vl);
}
