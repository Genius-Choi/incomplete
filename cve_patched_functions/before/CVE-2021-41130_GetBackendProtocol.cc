::google::api_manager::protocol::Protocol NgxEspRequest::GetBackendProtocol() {
  ngx_esp_request_ctx_t *ctx = ngx_http_esp_get_module_ctx(r_);
  if (ctx->grpc_backend) {
    return ::google::api_manager::protocol::GRPC;
  } else {
    // TODO: determine HTTP or HTTPS for backend.
    return ::google::api_manager::protocol::UNKNOWN;
  }
}
