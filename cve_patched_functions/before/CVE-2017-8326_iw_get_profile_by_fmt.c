IW_IMPL(unsigned int) iw_get_profile_by_fmt(int fmt)
{
	unsigned int p;

	switch(fmt) {

	case IW_FORMAT_PNG:
		p = IW_PROFILE_TRANSPARENCY | IW_PROFILE_GRAYSCALE | IW_PROFILE_PALETTETRNS |
		    IW_PROFILE_GRAY1 | IW_PROFILE_GRAY2 | IW_PROFILE_GRAY4 | IW_PROFILE_16BPS |
		    IW_PROFILE_BINARYTRNS | IW_PROFILE_PAL1 | IW_PROFILE_PAL2 | IW_PROFILE_PAL4 |
		    IW_PROFILE_PAL8 | IW_PROFILE_REDUCEDBITDEPTHS | IW_PROFILE_PNG_BKGD;
		break;

	case IW_FORMAT_BMP:
		p = IW_PROFILE_PAL1 | IW_PROFILE_PAL4 | IW_PROFILE_PAL8 |
			IW_PROFILE_REDUCEDBITDEPTHS;
		break;

	case IW_FORMAT_JPEG:
		p = IW_PROFILE_GRAYSCALE;
		break;

	case IW_FORMAT_TIFF:
		p = IW_PROFILE_TRANSPARENCY | IW_PROFILE_GRAYSCALE | IW_PROFILE_GRAY1 |
		    IW_PROFILE_GRAY4 | IW_PROFILE_16BPS | IW_PROFILE_PAL4 | IW_PROFILE_PAL8;
		break;

	case IW_FORMAT_MIFF:
		p = IW_PROFILE_TRANSPARENCY | IW_PROFILE_GRAYSCALE | IW_PROFILE_ALWAYSLINEAR |
		    IW_PROFILE_HDRI | IW_PROFILE_RGB16_BKGD;
		break;

	case IW_FORMAT_WEBP:
		p = 0;
#if IW_WEBP_SUPPORT_TRANSPARENCY
		p |= IW_PROFILE_TRANSPARENCY;
#endif
		break;

	case IW_FORMAT_PAM:
		p = IW_PROFILE_16BPS | IW_PROFILE_REDUCEDBITDEPTHS | IW_PROFILE_GRAYSCALE |
			IW_PROFILE_GRAY1 | IW_PROFILE_TRANSPARENCY;
		break;

	case IW_FORMAT_PNM:
		p = IW_PROFILE_16BPS | IW_PROFILE_REDUCEDBITDEPTHS | IW_PROFILE_GRAYSCALE |
			IW_PROFILE_GRAY1;
		break;

	case IW_FORMAT_PPM:
		p = IW_PROFILE_16BPS | IW_PROFILE_REDUCEDBITDEPTHS;
		break;

	case IW_FORMAT_PGM:
		// No reason to set GRAY[124], because we can't optimize for them. Each pixel
		// uses a minimum of one byte.
		p = IW_PROFILE_16BPS | IW_PROFILE_REDUCEDBITDEPTHS | IW_PROFILE_GRAYSCALE;
		break;

	case IW_FORMAT_PBM:
		p = IW_PROFILE_GRAY1;
		break;

	default:
		p = 0;
	}

	return p;
}
