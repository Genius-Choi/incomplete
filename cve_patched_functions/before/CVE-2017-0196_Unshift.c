    void JavascriptArray::Unshift(RecyclableObject* obj, const T& toIndex, uint32 start, P end, ScriptContext* scriptContext)
    {
        typedef IndexTrace<T> index_trace;

        ThrowTypeErrorOnFailureHelper h(scriptContext, _u("Array.prototype.unshift"));
        if (start < end)
        {
            T newEnd = (end - start - 1);// newEnd - 1
            T dst = toIndex + newEnd;
            uint32 i = 0;
            if (end > UINT32_MAX)
            {
                uint64 i64 = end;
                for (; i64 > UINT32_MAX; i64--)
                {
                    if (JavascriptOperators::HasItem(obj, i64 - 1))
                    {
                        Var element = JavascriptOperators::GetItem(obj, i64 - 1, scriptContext);
                        h.ThrowTypeErrorOnFailure(index_trace::SetItem(obj, dst, element, PropertyOperation_ThrowIfNotExtensible));
                    }
                    else
                    {
                        h.ThrowTypeErrorOnFailure(index_trace::DeleteItem(obj, dst, PropertyOperation_ThrowOnDeleteIfNotConfig));
                    }

                    --dst;
                }
                i = UINT32_MAX;
            }
            else
            {
                i = (uint32) end;
            }
            for (; i > start; i--)
            {
                if (JavascriptOperators::HasItem(obj, i-1))
                {
                    Var element = JavascriptOperators::GetItem(obj, i - 1, scriptContext);
                    h.ThrowTypeErrorOnFailure(index_trace::SetItem(obj, dst, element, PropertyOperation_ThrowIfNotExtensible));
                }
                else
                {
                    h.ThrowTypeErrorOnFailure(index_trace::DeleteItem(obj, dst, PropertyOperation_ThrowOnDeleteIfNotConfig));
                }

                --dst;
            }
        }
    }
