int spider_db_mbase_util::append_tables_top_down_check(
  TABLE_LIST *table_list,
  TABLE_LIST **used_table_list,
  uint *current_pos
) {
  int error_num;
  TABLE_LIST *cur_table_list;
  DBUG_ENTER("spider_db_mbase_util::append_tables_top_down_check");
  DBUG_PRINT("info",("spider this=%p", this));
  List_iterator_fast<TABLE_LIST> it1(table_list->nested_join->join_list);
  while ((cur_table_list = it1++))
  {
    if (!cur_table_list->table)
    {
      if ((error_num = append_tables_top_down_check(
        cur_table_list, used_table_list, current_pos)))
        DBUG_RETURN(error_num);
    } else {
      used_table_list[(*current_pos)++] = cur_table_list;
    }
  }
  DBUG_RETURN(0);
}
