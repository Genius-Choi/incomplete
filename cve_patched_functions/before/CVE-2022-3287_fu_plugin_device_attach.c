fu_plugin_device_attach(FuPlugin *self, FuDevice *device, FuProgress *progress, GError **error)
{
	FuDevice *proxy = fu_device_get_proxy_with_fallback(device);
	FuDeviceClass *proxy_klass = FU_DEVICE_GET_CLASS(proxy);
	g_autoptr(FuDeviceLocker) locker = NULL;
	if (proxy_klass->attach == NULL)
		return TRUE;
	locker = fu_device_locker_new(proxy, error);
	if (locker == NULL)
		return FALSE;
	return fu_device_attach_full(device, progress, error);
}
