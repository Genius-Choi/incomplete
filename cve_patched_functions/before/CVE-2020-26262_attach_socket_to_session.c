static int attach_socket_to_session(turn_turnserver* server, ioa_socket_handle s, ts_ur_super_session* ss) {

	int ret = -1;
	FUNCSTART;

	if(s && server && ss && !ioa_socket_tobeclosed(s)) {

		if(ss->client_socket != s) {

			IOA_CLOSE_SOCKET(ss->client_socket);

			ss->client_socket = s;

			if(register_callback_on_ioa_socket(server->e, s, IOA_EV_READ,
					client_input_handler, ss, 0)<0) {
				return -1;
			}

			set_ioa_socket_session(s, ss);
		}

		ret = 0;
	}

	FUNCEND;
	return ret;
}
