fu_smbios_class_func(void)
{
	g_autofree gchar *path = g_test_build_filename(G_TEST_DIST, "tests", "dmi", "class", NULL);
	g_autoptr(FuSmbios) smbios = fu_smbios_new();
	g_autoptr(GError) error = NULL;
	gboolean ret;
	const gchar *str;
	guint8 byte;

	ret = fu_smbios_setup_from_kernel(smbios, path, &error);
	g_assert_no_error(error);
	g_assert_true(ret);
	if (g_getenv("FWUPD_VERBOSE") != NULL) {
		g_autofree gchar *dump = fu_firmware_to_string(FU_FIRMWARE(smbios));
		g_debug("%s", dump);
	}

	str = fu_smbios_get_string(smbios, FU_SMBIOS_STRUCTURE_TYPE_SYSTEM, 4, &error);
	g_assert_no_error(error);
	g_assert_cmpstr(str, ==, "FwupdTest");

	byte = fu_smbios_get_integer(smbios, FU_SMBIOS_STRUCTURE_TYPE_CHASSIS, 5, &error);
	g_assert_no_error(error);
	g_assert_cmpuint(byte, ==, 16);
}
