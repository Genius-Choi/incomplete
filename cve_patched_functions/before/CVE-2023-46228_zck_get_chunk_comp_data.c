ssize_t ZCK_PUBLIC_API zck_get_chunk_comp_data(zckChunk *idx, char *dst,
                                       size_t dst_size) {
    zckCtx *zck = NULL;
    if(idx && idx->zck) {
        VALIDATE_INT(idx->zck);
        zck = idx->zck;
    }
    ALLOCD_INT(zck, idx);
    ALLOCD_INT(zck, dst);

    /* Make sure chunk size is valid */
    if(zck_get_chunk_size(idx) < 0)
        return -1;

    /* If the chunk is empty, we're done */
    if(zck_get_chunk_size(idx) == 0)
        return 0;

    /* Make sure requested chunk has a beginning */
    if(zck_get_chunk_start(idx) < 0)
        return -1;

    /* Seek to beginning of requested chunk */
    if(!seek_data(zck, zck_get_chunk_start(idx), SEEK_SET))
        return -1;

    /* Return read chunk */
    return read_data(zck, dst, dst_size);
}
