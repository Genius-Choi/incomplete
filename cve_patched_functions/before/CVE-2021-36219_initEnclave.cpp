void initEnclave(uint32_t _logLevel) {

    eid = 0;
    updated = 0;


#ifndef SGX_HW_SIM
    unsigned long support;
    support = get_sgx_support();
    if (!SGX_OK(support)) {
        sgx_support_perror(support);
        exit(1);
    }
#endif

        spdlog::debug("SGX_DEBUG_FLAG = {}", SGX_DEBUG_FLAG);


    status = sgx_create_enclave_search(ENCLAVE_NAME, SGX_DEBUG_FLAG, &token,
                                       &updated, &eid, 0);

    if (status != SGX_SUCCESS) {
        if (status == SGX_ERROR_ENCLAVE_FILE_ACCESS) {
            spdlog::error("sgx_create_enclave: {}: file not found", ENCLAVE_NAME);
            spdlog::error("Did you forget to set LD_LIBRARY_PATH?");
        } else {
            spdlog::error("sgx_create_enclave_search failed {} {}", ENCLAVE_NAME, status);
        }
        exit(1);
    }

    spdlog::info("Enclave created and started successfully");

    status = trustedEnclaveInit(eid, _logLevel);
    if (status != SGX_SUCCESS) {
        spdlog::error("trustedEnclaveInit failed: {}", status);
        exit(1);
    }

    spdlog::info("Enclave libtgmp library and logging initialized successfully");

}
