bool WidgetUtils::distributeWidgetsOfSplitter(QSplitter *p_splitter)
{
    if (!p_splitter) {
        return false;
    }

    if (p_splitter->count() == 0) {
        return false;
    } else if (p_splitter->count() == 1) {
        return true;
    }

    auto sizes = p_splitter->sizes();
    int totalWidth = 0;
    for (auto sz : sizes) {
        totalWidth += sz;
    }

    int newWidth = totalWidth / sizes.size();
    if (newWidth == 0) {
        return false;
    }

    bool changed = false;
    for (int i = 0; i < sizes.size(); ++i) {
        if (sizes[i] != newWidth) {
            sizes[i] = newWidth;
            changed = true;
        }
    }

    if (changed) {
        p_splitter->setSizes(sizes);
        return true;
    }

    return false;
}
