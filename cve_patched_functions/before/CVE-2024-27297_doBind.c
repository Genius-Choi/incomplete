static void doBind(const Path & source, const Path & target, bool optional = false) {
    debug("bind mounting '%1%' to '%2%'", source, target);
    struct stat st;
    if (stat(source.c_str(), &st) == -1) {
        if (optional && errno == ENOENT)
            return;
        else
            throw SysError("getting attributes of path '%1%'", source);
    }
    if (S_ISDIR(st.st_mode))
        createDirs(target);
    else {
        createDirs(dirOf(target));
        writeFile(target, "");
    }
    if (mount(source.c_str(), target.c_str(), "", MS_BIND | MS_REC, 0) == -1)
        throw SysError("bind mount from '%1%' to '%2%' failed", source, target);
};
