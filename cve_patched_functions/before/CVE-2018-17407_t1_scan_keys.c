static void t1_scan_keys(void)
{
    int i, k;
    char *p, *q, *r;
    const key_entry *key;
    if (fm_extend(fd_cur->fm) != 0 || fm_slant(fd_cur->fm) != 0) {
        if (t1_prefix("/FontMatrix")) {
            t1_modify_fm();
            return;
        }
        if (t1_prefix("/ItalicAngle")) {
            t1_modify_italic();
            return;
        }
    }
    if (t1_prefix("/FontType")) {
        p = t1_line_array + strlen("FontType") + 1;
        if ((i = t1_scan_num(p, 0)) != 1)
            pdftex_fail("Type%d fonts unsupported by pdfTeX", i);
        return;
    }
    for (key = font_key; key - font_key < FONT_KEYS_NUM; key++) {
        if (key->t1name[0] != '\0' &&
            str_prefix(t1_line_array + 1, key->t1name))
            break;
    }
    if (key - font_key == FONT_KEYS_NUM)
        return;
    p = t1_line_array + strlen(key->t1name) + 1;
    skip(p, ' ');
    if ((k = key - font_key) == FONTNAME_CODE) {
        if (*p != '/') {
            remove_eol(p, t1_line_array);
            pdftex_fail("a name expected: `%s'", t1_line_array);
        }
        r = ++p;                /* skip the slash */
        for (q = t1_buf_array; *p != ' ' && *p != 10; *q++ = *p++);
        *q = 0;
        if (fm_slant(fd_cur->fm) != 0) {
            sprintf(q, "-Slant_%i", (int) fm_slant(fd_cur->fm));
            q = strend(q);
        }
        if (fm_extend(fd_cur->fm) != 0) {
            sprintf(q, "-Extend_%i", (int) fm_extend(fd_cur->fm));
        }
        xfree(fd_cur->fontname);
        fd_cur->fontname = xstrdup(t1_buf_array);
        /* at this moment we cannot call make_subset_tag() yet, as the encoding
         * is not read; thus we mark the offset of the subset tag and write it
         * later */
        if (is_subsetted(fd_cur->fm)) {
            assert(is_included(fd_cur->fm));
            t1_fontname_offset = t1_offset() + (r - t1_line_array);
            strcpy(t1_buf_array, p);
            sprintf(r, "ABCDEF+%s%s", fd_cur->fontname, t1_buf_array);
            t1_line_ptr = eol(r);
        }
        return;
    }
    if ((k == STEMV_CODE || k == FONTBBOX1_CODE)
        && (*p == '[' || *p == '{'))
        p++;
    if (k == FONTBBOX1_CODE) {
        for (i = 0; i < 4; i++, k++) {
            fd_cur->font_dim[k].val = t1_scan_num(p, &r);
            fd_cur->font_dim[k].set = true;
            p = r;
        }
        return;
    }
    fd_cur->font_dim[k].val = t1_scan_num(p, 0);
    fd_cur->font_dim[k].set = true;
}
