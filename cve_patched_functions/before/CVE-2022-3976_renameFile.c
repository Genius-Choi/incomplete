renameFile(const char* basepath, char* oldFilename, char* newFilename) {

#if (CONFIG_SET_FILESTORE_BASEPATH_AT_RUNTIME == 1)
    char extendedOldFileName[512];
    char extendedNewFileName[512];
    mmsMsg_createExtendedFilename(basepath, 512, extendedOldFileName, oldFilename);
    mmsMsg_createExtendedFilename(basepath, 512, extendedNewFileName, newFilename);
#else
    char extendedOldFileName[sizeof(CONFIG_VIRTUAL_FILESTORE_BASEPATH) + 256];
    char extendedNewFileName[sizeof(CONFIG_VIRTUAL_FILESTORE_BASEPATH) + 256];
    mmsMsg_createExtendedFilename(basepath, sizeof(CONFIG_VIRTUAL_FILESTORE_BASEPATH) + 256, extendedOldFileName, oldFilename);
    mmsMsg_createExtendedFilename(basepath, sizeof(CONFIG_VIRTUAL_FILESTORE_BASEPATH) + 256, extendedNewFileName, newFilename);
#endif

    return FileSystem_renameFile(extendedOldFileName, extendedNewFileName);
}
