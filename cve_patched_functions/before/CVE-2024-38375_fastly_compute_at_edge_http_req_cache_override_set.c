bool fastly_compute_at_edge_http_req_cache_override_set(
    fastly_compute_at_edge_http_types_request_handle_t h,
    fastly_compute_at_edge_http_req_cache_override_tag_t tag, uint32_t *maybe_ttl,
    uint32_t *maybe_stale_while_revalidate, fastly_world_string_t *maybe_sk,
    fastly_compute_at_edge_types_error_t *err) {
  fastly_world_string_t sk_str;
  if (maybe_sk) {
    sk_str = *maybe_sk;
  } else {
    sk_str.len = 0;
    sk_str.ptr = NULL;
  }
  return convert_result(
      fastly::req_cache_override_v2_set(
          h, convert_tag(tag), maybe_ttl == NULL ? 0 : *maybe_ttl,
          maybe_stale_while_revalidate == NULL ? 0 : *maybe_stale_while_revalidate,
          reinterpret_cast<char *>(sk_str.ptr), sk_str.len),
      err);
}
