uint32_t addr_hash_no_port(const ioa_addr *addr)
{
	if(!addr)
		return 0;

	uint32_t ret = 0;
	if (addr->ss.sa_family == AF_INET) {
		ret = hash_int32(addr->s4.sin_addr.s_addr);
	} else {
		uint64_t a[2];
		bcopy(&(addr->s6.sin6_addr), &a, sizeof(a));
		ret = (uint32_t)((hash_int64(a[0])<<3) + (hash_int64(a[1])));
	}
	return ret;
}
