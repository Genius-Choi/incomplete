static void GetFileChooserPrefs(void) {
    unichar_t **foo;

    gfc_showhidden = GFileChooserGetShowHidden();
    gfc_dirplace = GFileChooserGetDirectoryPlacement();
    foo = GFileChooserGetBookmarks();
    free(gfc_bookmarks);
    if ( foo==NULL || foo[0]==NULL )
	gfc_bookmarks = NULL;
    else {
	int i,len=0;
	for ( i=0; foo[i]!=NULL; ++i )
	    len += 4*u_strlen(foo[i])+1;
	gfc_bookmarks = malloc(len+10);
	len = 0;
	for ( i=0; foo[i]!=NULL; ++i ) {
	    u2utf8_strcpy(gfc_bookmarks+len,foo[i]);
	    len += strlen(gfc_bookmarks+len);
	    gfc_bookmarks[len++] = ';';
	}
	if ( len>0 )
	    gfc_bookmarks[len-1] = '\0';
	else {
	    free(gfc_bookmarks);
	    gfc_bookmarks = NULL;
	}
    }
}
