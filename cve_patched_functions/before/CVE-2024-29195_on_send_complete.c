static void on_send_complete(void* context, IO_SEND_RESULT send_result)
{
    TLS_IO_INSTANCE* tls_io_instance = (TLS_IO_INSTANCE *)context;
    if (tls_io_instance != NULL)
    {
        // update fragment status
        if (tls_io_instance->send_complete_info.is_fragmented_req)
        {
            tls_io_instance->send_complete_info.last_fragmented_req_status = send_result;
        }

        if (tls_io_instance->send_complete_info.on_send_complete != NULL &&
            tls_io_instance->tlsio_state != TLSIO_STATE_CLOSING)
        {
        	// trigger callback always on failure, otherwise call it on last fragment completion
        	// In case of http communication (ie blob upload), the callback is called with each fragment
        	if((tls_io_instance->invoke_on_send_complete_callback_for_fragments && tls_io_instance->send_complete_info.is_fragmented_req)||
        			(send_result != IO_SEND_OK || !tls_io_instance->send_complete_info.is_fragmented_req))
        	{
                void *ctx = tls_io_instance->send_complete_info.on_send_complete_callback_context;
                tls_io_instance->send_complete_info.on_send_complete(ctx, send_result);
        	}
        }
    }
    else
    {
        LogError("Invalid context NULL value passed");
    }
}
