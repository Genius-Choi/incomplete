string handleRequest(const string& request){
  map<string, string>* reqHeaders = parseRequest(request);
  if ((*reqHeaders)["method"].compare("GET") == 0) {
    string response = handleGet(reqHeaders);
    delete reqHeaders;
    return response;
  } else if ((*reqHeaders)["method"].compare("POST") == 0) {
    string response = handlePost(reqHeaders);
    delete reqHeaders;
    return response;
  } else {
    // should make 404
    string message = "404 Page Not Found";
    cout << "returning error, method is '" << (*reqHeaders)["method"] << "'" << endl;
    string result = getResponseHeader("HTTP/1.1 404 Not Found", reqHeaders, message.size()) + "\r\n" + message;
    delete reqHeaders;
    return result;
  }
}
