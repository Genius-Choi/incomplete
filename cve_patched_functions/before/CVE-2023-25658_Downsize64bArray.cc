tsl::StatusOr<std::array<int32_t, 3>> Downsize64bArray(
    std::array<long long, 3> source, int32_t rank) {  // NOLINT
  std::array<int32_t, 3> downsized = {0};
  for (int32_t i = 0; i < rank; ++i) {
    if (source[i] > std::numeric_limits<int32_t>::max()) {
      return tsl::errors::InvalidArgument(
          source[i], " exceeds max 32b signed integer. Conversion failed.");
    }
    downsized[i] = static_cast<int32_t>(source[i]);
  }
  return downsized;
}
