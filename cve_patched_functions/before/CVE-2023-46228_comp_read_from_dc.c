static size_t comp_read_from_dc(zckCtx *zck, zckComp *comp, char *dst,
                                size_t dst_size) {
    VALIDATE_INT(zck);
    ALLOCD_INT(zck, comp);
    ALLOCD_INT(zck, dst);

    size_t dl_size = dst_size;
    if(dl_size > comp->dc_data_size - comp->dc_data_loc)
        dl_size = comp->dc_data_size - comp->dc_data_loc;
    memcpy(dst, comp->dc_data+comp->dc_data_loc, dl_size);
    comp->dc_data_loc += dl_size;
    if(dl_size > 0)
        zck_log(ZCK_LOG_DEBUG, "Reading %llu bytes from decompressed buffer",
                (long long unsigned) dl_size);
    return dl_size;
}
