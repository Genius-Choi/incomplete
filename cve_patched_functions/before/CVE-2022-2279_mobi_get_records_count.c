uint16_t mobi_get_records_count(const MOBIData *m) {
    size_t count = 0;
    if (m->rec) {
        MOBIPdbRecord *curr = m->rec;
        while (curr) {
            count++;
            curr = curr->next;
        }
    }
    if (count > UINT16_MAX) {
        return 0;
    }
    return (uint16_t) count;
}
