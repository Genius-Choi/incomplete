HttpStateData::drop1xx(const char *reason)
{
    if (flags.serverSwitchedProtocols) {
        debugs(11, 2, "bad 101 because " << reason);
        const auto err = new ErrorState(ERR_INVALID_RESP, Http::scBadGateway, request.getRaw(), fwd->al);
        fwd->fail(err);
        closeServer();
        mustStop("prohibited HTTP/101 response");
        return;
    }

    debugs(11, 2, "ignoring 1xx because " << reason);
    proceedAfter1xx();
}
