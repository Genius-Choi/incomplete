static void _call_at_exit_functions(void)
{
    static bool _at_exit_functions_done = false;
    static oe_spinlock_t _lock = OE_SPINLOCK_INITIALIZER;

    oe_spin_lock(&_lock);
    if (!_at_exit_functions_done)
    {
        /* Call functions installed by oe_cxa_atexit() and oe_atexit()
         */
        oe_call_atexit_functions();

        /* Call all finalization functions */
        oe_call_fini_functions();

        _at_exit_functions_done = true;
    }
    oe_spin_unlock(&_lock);
}
