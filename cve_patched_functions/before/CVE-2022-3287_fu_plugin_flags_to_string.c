fu_plugin_flags_to_string(FwupdPluginFlags flags)
{
	g_autoptr(GString) str = g_string_new(NULL);
	for (guint i = 0; i < 64; i++) {
		FwupdPluginFlags flag = (guint64)1 << i;
		if ((flags & flag) == 0)
			continue;
		if (str->len > 0)
			g_string_append_c(str, ',');
		g_string_append(str, fwupd_plugin_flag_to_string(flag));
	}
	if (str->len == 0)
		return NULL;
	return g_string_free(g_steal_pointer(&str), FALSE);
}
