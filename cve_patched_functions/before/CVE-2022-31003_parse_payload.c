static void parse_payload(sdp_parser_t *p, char *r, sdp_rtpmap_t **result)
{
  while (*r) {
    unsigned long value;

    if (parse_ul(p, &r, &value, 128) == 0) {
      PARSE_ALLOC(p, sdp_rtpmap_t, rm);

      assert(0 <= value && value < 128);

      *result = rm; result = &rm->rm_next;

      if (sdp_rtpmap_well_known[value]) {
	*rm = *sdp_rtpmap_well_known[value];
      }
      else {
	rm->rm_predef = 1;
	rm->rm_pt = value;
	rm->rm_encoding = "";
	rm->rm_rate = 0;
      }
    }
    else if (p->pr_config && r[0] == '*' && (r[1] == ' ' || r[1] == '\0')) {
      PARSE_ALLOC(p, sdp_rtpmap_t, rm);

      *result = rm;

      rm->rm_predef = 1;
      rm->rm_any = 1;
      rm->rm_encoding = "*";
      rm->rm_rate = 0;

      return;
    }
    else {
      parsing_error(p, "m= invalid format for RTP/AVT");

      return;
    }
  }
}
