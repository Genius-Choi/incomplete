      .WillRepeatedly(Invoke([&](os_fd_t fd, void* buf, size_t n, int flags) {
        const Api::SysCallSizeResult x = os_sys_calls_actual_.recv(fd, buf, n, flags);
        if (partial_writed) {
          return Api::SysCallSizeResult{-1, 0};
        }
        return x;
      }));
