static BOOL setupWorkers(RFX_CONTEXT* context, size_t nbTiles)
{
	WINPR_ASSERT(context);

	RFX_CONTEXT_PRIV* priv = context->priv;
	WINPR_ASSERT(priv);

	void* pmem;

	if (!context->priv->UseThreads)
		return TRUE;

	if (!(pmem = winpr_aligned_recalloc(priv->workObjects, nbTiles, sizeof(PTP_WORK), 32)))
		return FALSE;

	priv->workObjects = (PTP_WORK*)pmem;

	if (!(pmem = winpr_aligned_recalloc(priv->tileWorkParams, nbTiles,
	                                    sizeof(RFX_TILE_COMPOSE_WORK_PARAM), 32)))
		return FALSE;

	priv->tileWorkParams = (RFX_TILE_COMPOSE_WORK_PARAM*)pmem;
	return TRUE;
}
