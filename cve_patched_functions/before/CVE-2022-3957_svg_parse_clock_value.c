static GF_Err svg_parse_clock_value(char *d, Double *clock_value)
{
	char *tmp;
	s32 sign = 1;

	if (!d) return GF_BAD_PARAM;

	if (!d[0]) return GF_BAD_PARAM;

	if (d[0] == '+') d++;
	else if (d[0] == '-') {
		sign = -1;
		d++;
	}

	if (!d[0]) return GF_BAD_PARAM;

	/* According to SVG, the following are invalid syntaxes (see animate-elem-225-t.svg)
		'+-2s'
		'1++s' even though sscanf returns the right values
	*/
	if (strchr(d, '+') || strchr(d, '-')) return GF_BAD_PARAM;

	/* No embedded white space is allowed in clock values,
	   although leading and trailing white space characters will be ignored.*/
	while (*d == ' ') d++;

	if ((tmp = strchr(d, ':'))) {
		/* Full or Partial Clock value */
		tmp++;
		if ((tmp = strchr(tmp, ':'))) {
			/* Full Clock value : hh:mm:ss(.frac) */
			u32 hours;
			u32 minutes;
			Float seconds;
			if (sscanf(d, "%u:%u:%f", &hours, &minutes, &seconds) < 3) return GF_BAD_PARAM;
			*clock_value = hours*3600 + minutes*60 + seconds;
		} else {
			/* Partial Clock value : mm:ss(.frac) */
			s32 minutes;
			Float seconds;
			if (sscanf(d, "%d:%f", &minutes, &seconds) < 2) return GF_BAD_PARAM;
			*clock_value = minutes*60 + seconds;
		}
	} else if ((tmp = strstr(d, "h"))) {
		Float f;
		if (sscanf(d, "%fh", &f) == 0) return GF_BAD_PARAM;
		*clock_value = 3600*f;
	} else if (strstr(d, "min")) {
		Float f;
		if (sscanf(d, "%fmin", &f) == 0) return GF_BAD_PARAM;
		*clock_value = 60*f;
	} else if ((tmp = strstr(d, "ms"))) {
		Float f;
		if (sscanf(d, "%fms", &f) == 0) return GF_BAD_PARAM;
		*clock_value = f/1000;
	} else if (strchr(d, 's')) {
		Float f;
		if (sscanf(d, "%fs", &f) == 0) return GF_BAD_PARAM;
		*clock_value = f;
	} else {
		Float f;
		if (sscanf(d, "%f", &f) == 0) return GF_BAD_PARAM;
		*clock_value = f;
	}
	*clock_value *= sign;
	return GF_OK;
}
