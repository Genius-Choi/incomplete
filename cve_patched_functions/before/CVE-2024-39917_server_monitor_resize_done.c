server_monitor_resize_done(struct xrdp_mod *mod)
{
    struct xrdp_wm *wm;
    struct xrdp_mm *mm;

    LOG(LOG_LEVEL_TRACE, "server_monitor_resize_done:");

    wm = (struct xrdp_wm *)(mod->wm);
    if (wm == 0)
    {
        return 1;
    }
    mm = wm->mm;
    if (mm == 0)
    {
        return 1;
    }

    if (wm->client_info == 0)
    {
        return 1;
    }

    if (mm->resize_data != NULL
            && mm->resize_data->state
            == WMRZ_SERVER_MONITOR_MESSAGE_PROCESSING)
    {
        LOG(LOG_LEVEL_INFO,
            "server_monitor_resize_done: Advancing server monitor resized.");
        advance_resize_state_machine(
            mm, WMRZ_SERVER_MONITOR_MESSAGE_PROCESSED);
    }
    return 0;
}
