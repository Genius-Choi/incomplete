void Isolate::FreeSampleBlock(SampleBlock* block) {
  if (block == nullptr) {
    return;
  }
  SampleBlock* head;
  // We're pushing the freed sample block to the front of the free_block_list_,
  // which means the last element of the list will be the oldest freed sample.
  do {
    head = free_block_list_.load(std::memory_order_acquire);
    block->next_free_ = head;
  } while (!free_block_list_.compare_exchange_weak(head, block,
                                                   std::memory_order_release));
}
