f_sign_unplace(typval_T *argvars, typval_T *rettv)
{
    dict_T	*dict;
    dictitem_T	*di;
    int		sign_id = 0;
    buf_T	*buf = NULL;
    char_u	*group = NULL;

    rettv->vval.v_number = -1;

    if (argvars[0].v_type != VAR_STRING)
    {
	emsg(_(e_invarg));
	return;
    }

    group = tv_get_string(&argvars[0]);
    if (group[0] == '\0')
	group = NULL;			// global sign group
    else
    {
	group = vim_strsave(group);
	if (group == NULL)
	    return;
    }

    if (argvars[1].v_type != VAR_UNKNOWN)
    {
	if (argvars[1].v_type != VAR_DICT)
	{
	    emsg(_(e_dictreq));
	    goto cleanup;
	}
	dict = argvars[1].vval.v_dict;

	if ((di = dict_find(dict, (char_u *)"buffer", -1)) != NULL)
	{
	    buf = get_buf_arg(&di->di_tv);
	    if (buf == NULL)
		goto cleanup;
	}
	if (dict_find(dict, (char_u *)"id", -1) != NULL)
	    sign_id = dict_get_number(dict, (char_u *)"id");
    }

    if (buf == NULL)
    {
	// Delete the sign in all the buffers
	FOR_ALL_BUFFERS(buf)
	    if (sign_unplace(sign_id, group, buf, 0) == OK)
		rettv->vval.v_number = 0;
    }
    else
    {
	if (sign_unplace(sign_id, group, buf, 0) == OK)
	    rettv->vval.v_number = 0;
    }

cleanup:
    vim_free(group);
}
