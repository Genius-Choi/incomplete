HttpStateData::proceedAfter1xx()
{
    Must(flags.handling1xx);

    if (flags.serverSwitchedProtocols) {
        // pass server connection ownership to request->clientConnectionManager
        ConnStateData::ServerConnectionContext scc(serverConnection, inBuf);
        typedef UnaryMemFunT<ConnStateData, ConnStateData::ServerConnectionContext> MyDialer;
        AsyncCall::Pointer call = asyncCall(11, 3, "ConnStateData::noteTakeServerConnectionControl",
                                            MyDialer(request->clientConnectionManager,
                                                    &ConnStateData::noteTakeServerConnectionControl, scc));
        ScheduleCallHere(call);
        fwd->unregister(serverConnection);
        comm_remove_close_handler(serverConnection->fd, closeHandler);
        closeHandler = nullptr;
        serverConnection = nullptr;
        doneWithFwd = "switched protocols";
        mustStop(doneWithFwd);
        return;
    }

    debugs(11, 2, "continuing with " << payloadSeen << " bytes in buffer after 1xx");
    CallJobHere(11, 3, this, HttpStateData, HttpStateData::processReply);
}
