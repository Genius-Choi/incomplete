int IniSection::setValue (const YCPPath&p,const YCPValue&in,int what, int depth)
{
    string k = ip->changeCase (p->component_str (depth));
    // Find the matching sections.
    // If we need to recurse, choose one, creating if necessary
    // Otherwise set all the matching values
    //  creating and deleting if the number of them does not match

    if (depth + 1 < p->length())
    {
	// recurse
	pair <IniSectionIdxIterator, IniSectionIdxIterator> r =
	    isections.equal_range (k);
	IniSectionIdxIterator xi = r.first, xe = r.second;

	IniIterator si;
	if (xi == xe)
	{
	    // not found, need to add it;
	    y2debug ("Write: adding recursively %s to %s", k.c_str (), p->toString().c_str());

	    IniSection s (ip, k);
	    container.push_back (IniContainerElement (s));
	    isections.insert (IniSectionIndex::value_type (k, --container.end ()));

	    si = --container.end ();
	}
	else
	{
	    // there's something, choose last
	    si = (--xe)->second;
	}
	return si->s ().setValue (p, in, what, depth+1);
    }
    else
    {
	// bottom level
	return setMyValue (p, in, what, depth);
    }
}
