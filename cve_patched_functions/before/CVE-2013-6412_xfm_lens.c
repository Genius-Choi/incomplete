static struct lens *xfm_lens(struct augeas *aug,
                             struct tree *xfm, const char **lens_name) {
    struct tree *l = NULL;

    for (l = xfm->children;
         l != NULL && !streqv("lens", l->label);
         l = l->next);

    if (l == NULL || l->value == NULL)
        return NULL;
    *lens_name = l->value;

    return lens_from_name(aug, l->value);
}
