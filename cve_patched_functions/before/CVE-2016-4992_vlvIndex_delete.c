vlvIndex_delete(struct vlvIndex** ppvs)
{
    if(ppvs!=NULL && *ppvs!=NULL)
    {
        slapi_ch_free((void**)&((*ppvs)->vlv_sortspec));
        {
            int n;
            for(n=0;(*ppvs)->vlv_sortkey[n]!=NULL;n++)
            {
                if((*ppvs)->vlv_mrpb[n] != NULL) { 
                    destroy_matchrule_indexer((*ppvs)->vlv_mrpb[n]);
                    slapi_pblock_destroy((*ppvs)->vlv_mrpb[n]);
                }
            }
        }
        internal_ldap_free_sort_keylist((*ppvs)->vlv_sortkey);
        dblayer_erase_index_file_nolock((*ppvs)->vlv_be, (*ppvs)->vlv_attrinfo, 1 /* chkpt if not busy */);
        attrinfo_delete(&((*ppvs)->vlv_attrinfo));
        slapi_ch_free((void**)&((*ppvs)->vlv_name));
        slapi_ch_free((void**)&((*ppvs)->vlv_filename));
        slapi_ch_free((void**)&((*ppvs)->vlv_mrpb));
        PR_DestroyLock((*ppvs)->vlv_indexlength_lock);
        slapi_ch_free((void**)ppvs);
        *ppvs= NULL;
    }
}
