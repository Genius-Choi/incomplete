static void RelativeName(char * OutFileName, const char * NamePattern, const char * OrigName)
{
    // If the filename contains substring "&i", then substitute the
    // filename for that.  This gives flexibility in terms of processing
    // multiple files at a time.
    char * Subst;
    Subst = strstr(NamePattern, "&i");
    if (Subst > NamePattern+PATH_MAX-10){
        ErrFatal("Bad file name pattern");
    }

    if (Subst){
        strncpy(OutFileName, NamePattern, Subst-NamePattern);
        OutFileName[Subst-NamePattern] = 0;
        strncat(OutFileName, OrigName, PATH_MAX-1-strlen(OutFileName));
        strncat(OutFileName, Subst+2, PATH_MAX-1-strlen(OutFileName));
    }else{
        strncpy(OutFileName, NamePattern, PATH_MAX);
    }
}
