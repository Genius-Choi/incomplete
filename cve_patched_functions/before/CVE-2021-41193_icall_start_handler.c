static void icall_start_handler(struct icall *icall,
				uint32_t msg_time,
				const char *userid_sender,
				const char *clientid_sender,
				bool video,
				bool should_ring,
				enum icall_conv_type conv_type,
				void *arg)
{
	struct wcall *wcall = arg;
	struct calling_instance *inst = wcall ? wcall->inst : NULL;
	int ct = WCALL_CONV_TYPE_ONEONONE;

	(void)clientid_sender;

	if (!WCALL_VALID(wcall)) {
		warning("wcall(%p): egcall_start_handler: invalid wcall "
			"inst=%p\n", wcall, inst);
		return;
	}

	set_state(wcall, WCALL_STATE_INCOMING);

	switch (conv_type) {
	case ICALL_CONV_TYPE_GROUP:
		ct = WCALL_CONV_TYPE_GROUP;
		break;
	case ICALL_CONV_TYPE_CONFERENCE:
		ct = WCALL_CONV_TYPE_CONFERENCE;
		break;
	case ICALL_CONV_TYPE_ONEONONE:
		ct = WCALL_CONV_TYPE_ONEONONE;
		break;
	default:
		warning("wcall(%p): incomingh unknown conv type %d\n", wcall, conv_type);

	}

	info(APITAG "wcall(%p): incomingh(%p) video:%s ring:%s conv:%s\n",
	     wcall, inst->incomingh,
	     video ? "yes" : "no",
	     should_ring ? "yes" : "no",
	     wcall_conv_type_name(ct));

	wcall->video.video_call = video;

	wcall->disable_audio = !should_ring;
	if (inst->mm && should_ring) {
		enum mediamgr_state state;

		state = video ?	MEDIAMGR_STATE_INCOMING_VIDEO_CALL
			      : MEDIAMGR_STATE_INCOMING_AUDIO_CALL;

		mediamgr_set_call_state(inst->mm, state);
	}
	
	if (inst->incomingh) {
		if (inst->mm) {
			
			mediamgr_invoke_incomingh(inst->mm,
						  wcall_invoke_incoming_handler,
						  wcall->convid, msg_time,
						  userid_sender,
						  clientid_sender,
						  video ? 1 : 0,
						  should_ring ? 1 : 0,
						  ct,
						  inst);
		}
		else {
			wcall_i_invoke_incoming_handler(wcall->convid, msg_time,
						userid_sender,
						clientid_sender,
						video ? 1 : 0,
						should_ring ? 1 : 0,
						ct,
						inst);
		}
	}
}
