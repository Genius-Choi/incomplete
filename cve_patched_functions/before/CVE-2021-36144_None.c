virtio_hyper_dmabuf_deinit(struct vmctx *ctx, struct pci_vdev *dev, char *opts)
{
	if (kstatus == VIRTIO_DEV_STARTED) {
		DPRINTF("virtio_hyper_dmabuf: deinitializing\n");
		virtio_hyper_dmabuf_k_stop();
		virtio_hyper_dmabuf_k_reset();
		kstatus = VIRTIO_DEV_INITIAL;
		if (vbs_k_hyper_dmabuf_fd >= 0) {
			close(vbs_k_hyper_dmabuf_fd);
		}
		vbs_k_hyper_dmabuf_fd = -1;
	}

	if (dev->arg)
		free((struct virtio_hyper_dmabuf *)dev->arg);
}
