Adaptation::Ecap::MessageRep::clone() const
{
    Http::Message *hdr = theMessage.header->clone();
    hdr->body_pipe = nullptr; // if any; TODO: remove pipe cloning from ::clone?
    libecap::shared_ptr<libecap::Message> res(new MessageRep(hdr));

    // restore indication of a body if needed, but not the pipe
    if (theMessage.header->body_pipe != nullptr)
        res->addBody();

    return res;
}
