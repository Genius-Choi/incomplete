rec_parser_perror (rec_parser_t parser,
                   const char *fmt,
                   ...)
{
  va_list ap;
  char *number_str;

  va_start (ap, fmt);
  vfprintf (stderr, fmt, ap);
  fputs (": ", stderr);
  number_str = NULL;  /* asprintf does the allocation */
  if (asprintf (&number_str, "%zu", parser->line) != -1)
    {
      fputs (number_str, stderr);
      free (number_str);
    }
  fputs (": error: ", stderr);
  fputs (gettext (rec_parser_error_strings[parser->error]), stderr);
  fputc ('\n', stderr);

  va_end (ap);
}
