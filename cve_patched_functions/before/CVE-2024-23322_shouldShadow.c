bool FilterUtility::shouldShadow(const ShadowPolicy& policy, Runtime::Loader& runtime,
                                 uint64_t stable_random) {

  // The policy's default value is set correctly regardless of whether there is a runtime key
  // or not, thus this call is sufficient for all cases (100% if no runtime set, otherwise
  // using the default value within the runtime fractional percent setting).
  return runtime.snapshot().featureEnabled(policy.runtimeKey(), policy.defaultValue(),
                                           stable_random);
}
