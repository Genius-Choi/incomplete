browse_save_fname(buf_T *buf)
{
    if (buf->b_fname != NULL)
	return;

    char_u *fname;

    fname = do_browse(BROWSE_SAVE, (char_u *)_("Save As"),
	    NULL, NULL, NULL, NULL, buf);
    if (fname == NULL)
	return;

    if (setfname(buf, fname, NULL, TRUE) == OK)
	buf->b_flags |= BF_NOTEDITED;
    vim_free(fname);
}
