extern "C" HRESULT CacheCalculateBundleLayoutWorkingPath(
    __in BURN_CACHE* pCache,
    __in_z LPCWSTR wzBundleId,
    __deref_out_z LPWSTR* psczWorkingPath
    )
{
    Assert(pCache->fInitializedCache);

    HRESULT hr = S_OK;

    hr = PathConcatRelativeToFullyQualifiedBase(pCache->sczAcquisitionFolder, wzBundleId, psczWorkingPath);
    ExitOnFailure(hr, "Failed to append bundle id for bundle layout working path.");

LExit:
    return hr;
}
