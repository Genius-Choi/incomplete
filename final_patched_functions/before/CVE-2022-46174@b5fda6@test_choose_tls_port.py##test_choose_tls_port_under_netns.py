def test_choose_tls_port_under_netns(mocker, capsys):
    mocker.patch("builtins.open")
    setns_mock = mocker.patch("mount_efs.setns", return_value=(None, None))
    mocker.patch("socket.socket", return_value=MagicMock())
    options = {"netns": "/proc/1000/ns/net"}

    mount_efs.choose_tls_port_and_get_bind_sock(_get_config(), options)
    utils.assert_called(setns_mock)
