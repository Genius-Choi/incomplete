def test_vault_client_base_get_secret_template_root(vault):
    vault.base_path = "base"
    vault.db = {"/base/a": {"value": '!template!{{ vault("a").value }} yay'}}

    # In case of erroneous caching, e.g. a different cache entry
    # for /base/a and base/a, we would find '<recursive value "a"> yay yay'
    assert vault.get_secret("/base/a") == {"value": '<recursive value "a"> yay'}
