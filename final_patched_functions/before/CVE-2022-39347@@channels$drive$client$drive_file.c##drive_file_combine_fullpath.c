static WCHAR* drive_file_combine_fullpath(const WCHAR* base_path, const WCHAR* path,
                                          size_t PathLength)
{
	WCHAR* fullpath;
	size_t base_path_length;

	if (!base_path || (!path && (PathLength > 0)))
		return NULL;

	base_path_length = _wcslen(base_path) * 2;
	fullpath = (WCHAR*)calloc(1, base_path_length + PathLength + sizeof(WCHAR));

	if (!fullpath)
	{
		WLog_ERR(TAG, "malloc failed!");
		return NULL;
	}

	CopyMemory(fullpath, base_path, base_path_length);
	if (path)
		CopyMemory((char*)fullpath + base_path_length, path, PathLength);
	drive_file_fix_path(fullpath);
	return fullpath;
}
