def test_decode_surrogate_characters(test_input, expected):
    # FIXME Wrong output (combined char) on platforms with 16-bit wchar_t
    if test_input == '"\uD83D\uDCA9"' and ctypes.sizeof(ctypes.c_wchar) == 2:
        pytest.skip("Raw surrogate pairs are not supported with 16-bit wchar_t")

    assert ujson.loads(test_input) == expected
    assert ujson.loads(test_input.encode("utf-8", "surrogatepass")) == expected

    # Ensure that this matches stdlib's behaviour
    assert json.loads(test_input) == expected
