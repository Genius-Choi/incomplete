        def get_config(request: fastapi.Request):
            root_path = (
                request.scope.get("root_path")
                or request.headers.get("X-Direct-Url")
                or ""
            )
            config = app.get_blocks().config
            config["root"] = route_utils.strip_url(root_path)
            return config
