def element_to_string(element, encoding=None, xml_declaration=False):
    """
    Returns a string from a XML object

    Parameters
    ----------
    - element: etree Element
    - encoding (optional): encoding in string form. 'utf-8', 'ISO-8859-1', etc.
    - xml_declaration (optional): whether to include xml declaration

    """

    output = None

    if encoding is None:
        encoding = "ISO-8859-1"

    if etree.__name__ == 'lxml.etree':
        if xml_declaration:
            if encoding in ['unicode', 'utf-8']:
                output = '<?xml version="1.0" encoding="utf-8" standalone="no"?>\n{}'.format(
                    etree.tostring(element, encoding='unicode'))
            else:
                output = etree.tostring(element, encoding=encoding, xml_declaration=True)
        else:
            output = etree.tostring(element)
    else:
        if xml_declaration:
            output = '<?xml version="1.0" encoding="{}" standalone="no"?>\n{}'.format(
                encoding, etree.tostring(element, encoding=encoding))
        else:
            output = etree.tostring(element)

    return output
