def _sanitize_text_helper(text):
    """Restricts the characters that are allowed in a string"""

    out = []
    for c in text:
        if c in valid_chars:
            out.append(c)
        elif c in mapped_chars:
            out.append(mapped_chars[c])
        else:
            out.append('X')  # makes debugging easier
    return ''.join(out)
