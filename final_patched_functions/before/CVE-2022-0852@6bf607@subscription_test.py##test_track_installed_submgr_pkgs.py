def test_track_installed_submgr_pkgs(installed_pkgs, not_tracked_pkgs, skip_pkg_msg, expected, monkeypatch, caplog):
    track_installed_pkgs_mock = mock.Mock()
    monkeypatch.setattr(utils.changed_pkgs_control, "track_installed_pkgs", track_installed_pkgs_mock)

    subscription.track_installed_submgr_pkgs(installed_pkgs, not_tracked_pkgs)

    if skip_pkg_msg:
        assert skip_pkg_msg in caplog.records[-2].message
    assert expected in caplog.records[-1].message
    assert track_installed_pkgs_mock.called == 1
