def register_system():
    """Register OS using subscription-manager."""

    # Loop the registration process until successful registration
    attempt = 0
    while True and attempt < MAX_NUM_OF_ATTEMPTS_TO_SUBSCRIBE:
        registration_cmd = get_registration_cmd()

        attempt_msg = ""
        if attempt > 0:
            attempt_msg = "Attempt %d of %d: " % (attempt + 1, MAX_NUM_OF_ATTEMPTS_TO_SUBSCRIBE)
        loggerinst.info("%sRegistering the system using subscription-manager ...", attempt_msg)

        output, ret_code = call_registration_cmd(registration_cmd)
        if ret_code == 0:
            # Handling a signal interrupt that was previously handled by
            # subscription-manager.
            if "user interrupted process" in output.lower():
                raise KeyboardInterrupt
            return
        loggerinst.info("System registration failed with return code = %s" % str(ret_code))
        if tool_opts.credentials_thru_cli:
            loggerinst.warning(
                "Error: Unable to register your system with subscription-manager using the provided credentials."
            )
        else:
            loggerinst.info("Trying again - provide username and password.")
            tool_opts.username = None
            tool_opts.password = None
        sleep(REGISTRATION_ATTEMPT_DELAYS[attempt])
        attempt += 1
    loggerinst.critical("Unable to register the system through subscription-manager.")
