        def test_should_throw_error_returned_by_document
          doc = Doc.new
          class << doc
            def error msg
              raise "parse error"
            end
          end

          @parser = XML::SAX::PushParser.new(doc)
          begin
            @parser << "</foo>"
          rescue => e
            actual = e
          end
          fail 'PushParser should throw error when fed ill-formed data' if actual.nil?

          assert_equal actual.message, "parse error"
        end
