  def get_folders_order
    Log.add_info(request, params.inspect)

    @folder_id = params[:id]
    @group_id = params[:group_id]

    if @folder_id != '0'
      @folder = Folder.find(@folder_id)
    end

    @folders = Folder.get_childs_for(@login_user, @folder_id, false, nil, true)

    if @folder_id == '0'
      delete_ary = FoldersHelper.get_except_top_for_admin(@folders, @group_id)
      @folders -= delete_ary
    end

    session[:folder_id] = @folder_id

    render(:partial => 'ajax_folders_order', :layout => false)

  rescue => evar
    Log.add_error(request, evar)
    render(:partial => 'ajax_folders_order', :layout => false)
  end
