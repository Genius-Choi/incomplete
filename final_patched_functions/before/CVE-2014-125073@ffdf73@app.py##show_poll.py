def show_poll():
	title = "error"
	if "p_id" not in request.args:
		return render_template("show.html", title=title)
	p_id = request.args['p_id']
	rows = []
	try:
		cursor = conn.cursor()
		sql_s = "select FTitle,FOptionDesc,FOptionVoteNum,FState,FEndTime from t_vote_info where FVoteId=%s;"%p_id
		res = cursor.execute(sql_s)
		r = cursor.fetchone()
		cursor.close()
		title = r[0]
		opts_desc = r[1].split('|')
		opts_num = r[2].split('|')
		opts_col = COLOR_CHART[:len(opts_desc)]
		for i in range(len(opts_desc)):
			rows.append([opts_desc[i], opts_num[i], opts_col[i]])
	except Exception,e:
		return render_template("show.html", title=title)
	#poll_id = request.args['p_id']
	return render_template("show.html", title=title, opts=rows)
