  def validate_message(has_uploads:)
    WatchedWordsValidator.new(attributes: [:message]).validate(self)
    Chat::DuplicateMessageValidator.new(self).validate

    if !has_uploads && message_too_short?
      self.errors.add(
        :base,
        I18n.t(
          "chat.errors.minimum_length_not_met",
          minimum: SiteSetting.chat_minimum_message_length,
        ),
      )
    end
  end
