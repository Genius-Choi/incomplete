  def virtualenv=(install)
    # Yes Symbols instead of Booleans because we get Symbols from Puppet when
    # we use the virtualenv property. This is madness!
    if install == :true and virtualenv == :false
      command = ["#{PYENV_ROOT}/versions/#{resource[:name]}/bin/pip",
                 'install', '-q', 'virtualenv', '>/dev/null 2>&1']
      `#{command.join(' ')}`
      if $?.success?
        @property_hash[:virtualenv] = :true
      else
        fail('failed to install virtualenv')
      end
      pyenv('rehash')
    elsif install == :false and virtualenv == :true
      command = ["#{PYENV_ROOT}/versions/#{resource[:name]}/bin/pip",
                 'uninstall', '-q', '-y', 'virtualenv', '>/dev/null 2>&1']
      `#{command.join(' ')}`
      if $?.success?
        @property_hash[:virtualenv] = :false
      else
        fail('failed to uninstall virtualenv')
      end
      pyenv('rehash')
    else
      # We can never hit this block as the newvalues on the virtualenv property
      # should prevent us from getting here in the first place. However, this
      # is Puppet so you never know.
      fail('go home puppet, you\'re drunk')
    end
  end
