def client_multiple_authentications(api_key_auth):
    opa_host = "http://localhost:8181"
    oidc_auth = AuthenticationDummy(accept_all=False)

    opa_config = OPAConfig(
        authentication=[oidc_auth, api_key_auth["auth"]], opa_host=opa_host
    )

    app = FastAPI()
    app.add_middleware(OPAMiddleware, config=opa_config)

    @app.get("/")
    async def root() -> Dict:
        return {"msg": "success"}

    yield TestClient(app)
