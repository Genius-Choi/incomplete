    def index
      event = Event.find(params[:post_id])

      event_invitees = event.invitees

      if params[:filter]
        event_invitees =
          event_invitees.joins(:user).where(
            "LOWER(users.username) LIKE :filter",
            filter: "%#{params[:filter].downcase}%",
          )
      end

      event_invitees = event_invitees.with_status(params[:type].to_sym) if params[:type]

      render json:
               ActiveModel::ArraySerializer.new(
                 event_invitees.order(%i[status user_id]).limit(200),
                 each_serializer: InviteeSerializer,
               ).as_json
    end
