        def test_xml_decl
          [
            ['<?xml version="1.0" ?>', ["1.0"]],
            ['<?xml version="1.0" encoding="UTF-8" ?>', ["1.0", "UTF-8"]],
            ['<?xml version="1.0" standalone="yes"?>', ["1.0", "yes"]],
            ['<?xml version="1.0" standalone="no"?>', ["1.0", "no"]],
            ['<?xml version="1.0" encoding="UTF-8" standalone="no"?>', ["1.0", "UTF-8", "no"]],
            ['<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>', ["1.0", "ISO-8859-1", "yes"]],
          ].each do |decl, value|
            parser = XML::SAX::Parser.new(Doc.new)

            xml = "#{decl}\n<root />"
            parser.parse(xml)
            assert(parser.document.start_document_called, xml)
            assert_equal(value, parser.document.xmldecls, xml)
          end
        end
