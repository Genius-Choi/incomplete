static bool comp_add_to_data(zckCtx *zck, zckComp *comp, const char *src,
                             size_t src_size) {
    VALIDATE_BOOL(zck);
    ALLOCD_BOOL(zck, comp);
    ALLOCD_BOOL(zck, src);

    comp->data = zrealloc(comp->data, comp->data_size + src_size);
    if (!comp->data) {
        zck_log(ZCK_LOG_ERROR, "OOM in %s", __func__);
        return false;
    }
    zck_log(ZCK_LOG_DEBUG, "Adding %llu bytes to compressed buffer",
        (long long unsigned) src_size);
    memcpy(comp->data + comp->data_size, src, src_size);
    comp->data_size += src_size;
    comp->data_loc += src_size;
    return true;
}
