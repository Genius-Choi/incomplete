  def test_api_can_create_syslinux_tftp_reservation
    mac = "aa:bb:cc:00:11:22"
    mac_filename = "aa-bb-cc-dd-ee-ff-00-11-22"
    FileUtils.stubs(:mkdir_p).returns(true)
    File.stubs(:open).with("/some/root/pxelinux.cfg/#{mac_filename}", 'w').returns(true)
    Proxy::TFTP::Syslinux.any_instance.expects(:set).with(mac, args[:pxeconfig])
    post "/#{mac}", args
    assert last_response.ok?
  end
