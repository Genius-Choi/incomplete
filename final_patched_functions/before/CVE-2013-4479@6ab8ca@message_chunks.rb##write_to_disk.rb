    def write_to_disk
      begin
        file = Tempfile.new(["sup", Shellwords.escape(@filename.gsub("/", "_")) || "sup-attachment"])
        file.print @raw_content
        yield file if block_given?
        return file.path
      ensure
        file.close
      end
    end
