  def gemset_list
    command = gemsetcommand + ['list']

    # use proxy if proxy_url is set
    if resource[:proxy_url] and !resource[:proxy_url].empty?
      command << "--http-proxy" << resource[:proxy_url]
    end

    list = []
    begin
      list = execute(command).split("\n").collect do |line|
        line.strip if line =~ /^\s+\S+/
      end.compact
    rescue Puppet::ExecutionFailure => detail
    end

    list
  end
