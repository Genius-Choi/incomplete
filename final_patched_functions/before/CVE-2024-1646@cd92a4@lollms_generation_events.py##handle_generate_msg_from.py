    def handle_generate_msg_from(sid, data):
        client_id = sid
        lollmsElfServer.cancel_gen = False
        lollmsElfServer.connections[client_id]["continuing"]=False
        lollmsElfServer.connections[client_id]["first_chunk"]=True
        
        if lollmsElfServer.connections[client_id]["current_discussion"] is None:
            ASCIIColors.warning("Please select a discussion")
            lollmsElfServer.error("Please select a discussion first", client_id=client_id)
            return
        id_ = data['id']
        generation_type = data.get('msg_type',None)
        if id_==-1:
            message = lollmsElfServer.connections[client_id]["current_discussion"].current_message
        else:
            message = lollmsElfServer.connections[client_id]["current_discussion"].load_message(id_)
        if message is None:
            return            
        lollmsElfServer.connections[client_id]['generation_thread'] = threading.Thread(target=lollmsElfServer.start_message_generation, args=(message, message.id, client_id, False, generation_type))
        lollmsElfServer.connections[client_id]['generation_thread'].start()
