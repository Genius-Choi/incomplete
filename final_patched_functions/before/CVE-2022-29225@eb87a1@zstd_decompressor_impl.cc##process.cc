bool ZstdDecompressorImpl::process(Buffer::Instance& output_buffer) {
  while (input_.pos < input_.size) {
    const size_t result = ZSTD_decompressStream(dctx_.get(), &output_, &input_);
    if (isError(result)) {
      return false;
    }

    getOutput(output_buffer);
  }

  return true;
}
