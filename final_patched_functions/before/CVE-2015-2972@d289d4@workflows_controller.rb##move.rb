  def move
    Log.add_info(request, params.inspect)

    unless params[:thetisBoxSelKeeper].nil?
      folder_id = params[:thetisBoxSelKeeper].split(':').last

      workflow = Workflow.find(params[:id])

      workflow.item.update_attribute(:folder_id, folder_id)

      flash[:notice] = t('msg.move_success')
    end

    my_wf_folder = WorkflowsHelper.get_my_wf_folder(@login_user.id)

    sql = WorkflowsHelper.get_list_sql(@login_user.id, my_wf_folder.id)
    @workflows = Workflow.find_by_sql(sql)

    render(:partial => 'ajax_workflow', :layout => false)

  rescue => evar
    Log.add_error(request, evar)

    flash[:notice] = 'ERROR:' + evar.to_s[0, 64]
    render(:partial => 'ajax_workflow', :layout => false)
  end
