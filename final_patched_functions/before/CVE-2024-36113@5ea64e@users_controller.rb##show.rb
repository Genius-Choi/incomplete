  def show
    @user = User.find_by(id: params[:id])
    raise Discourse::NotFound unless @user

    similar_users = User.real.where.not(id: @user.id).where(ip_address: @user.ip_address)

    render_serialized(
      @user,
      AdminDetailedUserSerializer,
      root: false,
      similar_users: similar_users.limit(MAX_SIMILAR_USERS),
      similar_users_count: similar_users.count,
    )
  end
