def test_vault_client_base_get_secret_with_dict(vault):
    vault.db = {
        "credentials": {"value": {"username": "foo", "password": "bar"}},
        "dsn": {
            "value": "!template!proto://{{ vault('credentials')['value']['username'] }}:{{ vault('credentials').value.password }}@host"
        },
    }

    assert vault.get_secret("dsn") == {"value": "proto://foo:bar@host"}
