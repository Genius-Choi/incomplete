static av_cold void uninit(AVFilterContext *ctx)
{
    AudioFWTDNContext *s = ctx->priv;

    av_frame_free(&s->filter);
    av_frame_free(&s->new_stddev);
    av_frame_free(&s->stddev);
    av_frame_free(&s->new_absmean);
    av_frame_free(&s->absmean);

    for (int ch = 0; s->cp && ch < s->channels; ch++) {
        ChannelParams *cp = &s->cp[ch];

        av_freep(&cp->tempa);
        av_freep(&cp->tempd);
        av_freep(&cp->temp_in);
        av_freep(&cp->buffer);
        av_freep(&cp->buffer2);
        av_freep(&cp->prev);
        av_freep(&cp->overlap);

        av_freep(&cp->output_length);
        av_freep(&cp->filter_length);

        if (cp->output_coefs) {
            for (int level = 0; level <= s->levels; level++)
                av_freep(&cp->output_coefs[level]);
        }

        if (cp->subbands_to_free) {
            for (int level = 0; level <= s->levels; level++)
                av_freep(&cp->subbands_to_free[level]);
        }

        av_freep(&cp->subbands_to_free);
        av_freep(&cp->output_coefs);
        av_freep(&cp->filter_coefs);
    }

    av_freep(&s->cp);
}
