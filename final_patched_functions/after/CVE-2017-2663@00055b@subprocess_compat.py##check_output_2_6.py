def check_output_2_6(*args, **kwargs):
    cmd_args = kwargs.get('args', None) or args[0]

    log.debug("Running '%s'" % cmd_args)

    process = subprocess.Popen(*args, stdout=subprocess.PIPE, stderr=subprocess.PIPE, **kwargs)
    (std_output, std_error) = process.communicate()

    output = std_output.strip()

    returncode = process.poll()
    if returncode:
        raise subprocess.CalledProcessError(returncode, cmd_args)

    return output
