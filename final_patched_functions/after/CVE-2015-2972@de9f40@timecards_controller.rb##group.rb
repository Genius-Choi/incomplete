  def group
    Log.add_info(request, params.inspect)

    date_s = params[:date]

    if date_s.blank?
      @date = Date.today
      date_s = @date.strftime(Schedule::SYS_DATE_FORM)
    else
      @date = Date.parse(date_s)
    end

    if params[:display] == 'mine'
      redirect_to(:action => 'month')
    else
      display_type = params[:display].split('_').first
      display_id = params[:display].split('_').last
      SqlHelper.validate_token([display_id])

      @selected_users = Group.get_users(display_id)
      @group_id = display_id

      if !@login_user.get_groups_a.include?(@group_id.to_s) and !@login_user.admin?(User::AUTH_TIMECARD)
        Log.add_check(request, '[User.get_groups_a.include?]'+request.to_s)
        redirect_to(:controller => 'frames', :action => 'http_error', :id => '401')
        return
      end
    end
  end
