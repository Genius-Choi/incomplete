        async def queue_join(
            body: PredictBody,
            request: fastapi.Request,
            username: str = Depends(get_current_user),
        ):
            if blocks._queue.server_app is None:
                blocks._queue.set_server_app(app)

            event_id = await blocks._queue.push(body, request, username)
            return {"event_id": event_id}
