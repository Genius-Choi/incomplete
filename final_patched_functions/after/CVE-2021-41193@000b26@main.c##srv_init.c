static int srv_init(uint16_t lport)
{
	struct sa laddr;
	struct tcp_sock *tsock;
	int err;

	info("srv_init: lport=%d\n", (int)lport);

	err = sa_set_str(&laddr, "0.0.0.0", lport);
	if (err)
		return err;

	err = http_listen(&verifyd.sock, &laddr, http_req_handler, NULL);
	if (err) {
		re_fprintf(stderr, "http_listen: failed: %m\n", err);
		return err;
	}

	tsock = http_sock_tcp(verifyd.sock);
	if (tsock) {
		tcp_sock_local_get(tsock, &laddr);
	}

	re_fprintf(stderr, "verifyd: listening on %J\n", &laddr);

	return 0;
}
