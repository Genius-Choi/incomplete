    def _wrapped(
        self: "MediaFilePaths", *args: Any, **kwargs: Any
    ) -> Union[str, List[str]]:
        path_or_paths = func(self, *args, **kwargs)

        if isinstance(path_or_paths, list):
            paths_to_check = path_or_paths
        else:
            paths_to_check = [path_or_paths]

        for path in paths_to_check:
            # path may be an absolute or relative path, depending on the method being
            # wrapped. When "appending" an absolute path, `os.path.join` discards the
            # previous path, which is desired here.
            normalized_path = os.path.normpath(os.path.join(self.real_base_path, path))
            if (
                os.path.commonpath([normalized_path, self.real_base_path])
                != self.real_base_path
            ):
                raise ValueError(f"Invalid media store path: {path!r}")

        return path_or_paths
