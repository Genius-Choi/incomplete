        def test_empty_value
          xml = <<XML
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE member [
  <!ENTITY a "&b;&b;&b;&b;&b;&b;&b;&b;&b;&b;">
  <!ENTITY b "&c;&c;&c;&c;&c;&c;&c;&c;&c;&c;">
  <!ENTITY c "&d;&d;&d;&d;&d;&d;&d;&d;&d;&d;">
  <!ENTITY d "&e;&e;&e;&e;&e;&e;&e;&e;&e;&e;">
  <!ENTITY e "&f;&f;&f;&f;&f;&f;&f;&f;&f;&f;">
  <!ENTITY f "&g;&g;&g;&g;&g;&g;&g;&g;&g;&g;">
  <!ENTITY g "">
]>
<member>
&a;
</member>
XML

          doc = REXML::Document.new(xml)
          assert_raise(RuntimeError.new("number of entity expansions exceeded, processing aborted.")) do
            doc.root.children.first.value
          end

          REXML::Security.entity_expansion_limit = 100
          assert_equal(100, REXML::Security.entity_expansion_limit)
          doc = REXML::Document.new(xml)
          assert_raise(RuntimeError.new("number of entity expansions exceeded, processing aborted.")) do
            doc.root.children.first.value
          end
          assert_equal(101, doc.entity_expansion_count)
        end
