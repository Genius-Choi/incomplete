    def code(filename):
        download = request.args.get("download", False)
        _file = werkzeug.security.safe_join(STATIC_LOCATION, "code", filename)
        if _file is None:
            abort(404)
        content = get_content(_file)
        if not download:
            return render_template("/content.html", act="code", content=content)
        else:
            if not os.path.isfile(_file):
                abort(404)
            with open(_file) as f:
                text = f.read()
            return Response("".join([s.replace("\t", "", 1) for s in text.split("```python")[-1]
                                    .splitlines(keepends=True)][1:-2]),
                            mimetype="text/plain",
                            headers={"Content-disposition": f"attachment; filename={filename.split('-')[0]}.py"})
