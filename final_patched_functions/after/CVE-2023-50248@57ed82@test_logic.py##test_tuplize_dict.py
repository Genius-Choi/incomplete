def test_tuplize_dict():

    data_dict = {
        "author": "Test Author",
        "extras__0__key": "extra1",
        "extras__0__value": "value1",
        "extras__1__key": "extra2",
        "extras__1__value": "value2",
        "extras__2__key": "extra3",
        "extras__2__value": "value3",
        "extras__3__key": "",
        "extras__3__value": "",
        "groups__0__id": "5a65eae8-ef2b-4a85-8022-d9e5a71ad074",
        "name": "test-title",
        "notes": "Test desc",
        "owner_org": "5a65eae8-ef2b-4a85-8022-d9e5a71ad074",
        "private": "True",
        "tag_string": "economy,climate",
        "title": "Test title",
    }

    expected = {
        ("author",): "Test Author",
        ("extras", 0, "key"): "extra1",
        ("extras", 0, "value"): "value1",
        ("extras", 1, "key"): "extra2",
        ("extras", 1, "value"): "value2",
        ("extras", 2, "key"): "extra3",
        ("extras", 2, "value"): "value3",
        ("extras", 3, "key"): "",
        ("extras", 3, "value"): "",
        ("groups", 0, "id"): "5a65eae8-ef2b-4a85-8022-d9e5a71ad074",
        ("name",): "test-title",
        ("notes",): "Test desc",
        ("owner_org",): "5a65eae8-ef2b-4a85-8022-d9e5a71ad074",
        ("private",): "True",
        ("tag_string",): "economy,climate",
        ("title",): "Test title",
    }

    assert logic.tuplize_dict(data_dict) == expected
