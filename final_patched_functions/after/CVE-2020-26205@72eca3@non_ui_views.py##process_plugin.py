def process_plugin(plugin_name, group_type="all", group_id=None):
    plugin = PluginManager.get_plugin_by_name(plugin_name)

    # Ensure that a plugin was instantiated before proceeding.
    if not plugin:
        raise Http404

    # Ensure the request is not for a disabled plugin.
    if isinstance(plugin, Widget):
        model = Plugin
    elif isinstance(plugin, ReportPlugin):
        model = Report
    else:
        model = MachineDetailPlugin
    get_object_or_404(model, name=plugin_name)

    return plugin
