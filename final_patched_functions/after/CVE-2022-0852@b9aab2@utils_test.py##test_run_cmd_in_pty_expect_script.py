def test_run_cmd_in_pty_expect_script():
    if sys.version_info < (3,):
        prompt_cmd = "raw_input"
    else:
        prompt_cmd = "input"
    output, code = utils.run_cmd_in_pty(
        [sys.executable, "-c", 'print(%s("Ask for password: "))' % prompt_cmd],
        expect_script=(("password: *", "Foo bar\n"),),
    )

    assert output.strip().splitlines()[-1] == "Foo bar"
    assert code == 0
