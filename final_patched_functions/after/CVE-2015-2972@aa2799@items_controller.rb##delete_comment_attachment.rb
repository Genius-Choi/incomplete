  def delete_comment_attachment
    Log.add_info(request, params.inspect)

    return unless request.post?

    begin
      attachment = Attachment.find(params[:attachment_id])
      @comment = Comment.find(params[:comment_id])

      if attachment.comment_id == @comment.id
        attachment.destroy
        @comment.update_attribute(:updated_at, Time.now)
      end
    rescue => evar
      Log.add_error(request, evar)
    end

    render(:partial => 'ajax_comment', :layout => false)
  end
