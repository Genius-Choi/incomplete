def test_run_cmd_in_pty_quiet_options(print_cmd, print_output, global_tool_opts, caplog):
    global_tool_opts.debug = True
    caplog.set_level(logging.DEBUG)

    output, code = utils.run_cmd_in_pty(["echo", "foo bar"], print_cmd=print_cmd, print_output=print_output)

    expected_count = 1  # There will always be one debug log stating the pty columns
    if print_cmd:
        assert caplog.records[0].levelname == "DEBUG"
        assert caplog.records[0].message.strip() == "Calling command 'echo foo bar'"
        expected_count += 1

    if print_output:
        assert caplog.records[-1].levelname == "INFO"
        assert caplog.records[-1].message.strip() == "foo bar"
        expected_count += 1

    assert len(caplog.records) == expected_count
