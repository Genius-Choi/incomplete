def test_range_fail(bad_code, error_type, message, source_code):
    with pytest.raises(error_type) as exc_info:
        compiler.compile_code(bad_code)
    assert message == exc_info.value.message
    assert source_code == exc_info.value.args[1].node_source_code
