  def destroy
    Log.add_info(request, params.inspect)

    return unless request.post?

    @folder = Folder.find(params[:id])

    unless Folder.check_user_auth(@folder.id, @login_user, 'w', true)
      flash[:notice] = 'ERROR:' + t('folder.need_auth_to_modify')
      render(:partial => 'common/flash_notice', :layout => false)
      return
    end

    if @folder.count_items(true) > 0
      flash[:notice] = 'ERROR:' + t('folder.cannot_delete_with_items')
      render(:partial => 'common/flash_notice', :layout => false)
      return
    end

    @folder.force_destroy
    @folder = nil
    render(:text => '')
  end
