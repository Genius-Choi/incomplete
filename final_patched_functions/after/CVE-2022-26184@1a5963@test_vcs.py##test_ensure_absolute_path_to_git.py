def test_ensure_absolute_path_to_git(mocker):
    _reset_executable()

    def checkout_output(cmd, *args, **kwargs):
        if Path(cmd[0]).name == "where.exe":
            return "\n".join(
                [str(Path.cwd().joinpath("git.exe")), "C:\\Git\\cmd\\git.exe"]
            )

        return b""

    mock = mocker.patch.object(subprocess, "check_output", side_effect=checkout_output)

    Git().run("config")

    assert mock.call_args_list[-1][0][0] == [
        "C:\\Git\\cmd\\git.exe",
        "config",
    ]
