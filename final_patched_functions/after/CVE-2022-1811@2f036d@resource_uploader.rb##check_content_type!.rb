  def check_content_type!(new_file)
    detected_type = if image? new_file
                      file_content_content_type(new_file)
                    else
                      file_content_type(new_file)
                    end
    if detected_type != new_file.content_type
      raise CarrierWave::IntegrityError, "has MIME type mismatch"
    end
  end
