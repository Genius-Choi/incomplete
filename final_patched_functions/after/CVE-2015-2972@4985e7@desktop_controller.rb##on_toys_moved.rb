  def on_toys_moved
    Log.add_info(request, params.inspect)

    return unless request.post?

    unless @login_user.nil?
      begin
        toy = Toy.find(params[:id])
      rescue
        toy = nil
      end

      unless toy.nil?
        attrs = ActionController::Parameters.new({x: params[:x], y: params[:y]})
        toy.update_attributes(attrs.permit(Toy::PERMIT_BASE))
      end
    end

    render(:text => '')
  end
