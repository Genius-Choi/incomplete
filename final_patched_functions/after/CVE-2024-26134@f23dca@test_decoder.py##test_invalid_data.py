def test_invalid_data(
    impl, payload: bytes, exception: type[Exception] | str, pattern: str
) -> None:
    if isinstance(exception, str):
        exception = getattr(impl, exception)

    with pytest.raises(exception, match=pattern):
        impl.loads(payload)
