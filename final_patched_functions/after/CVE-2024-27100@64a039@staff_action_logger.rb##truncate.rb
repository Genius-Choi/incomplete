  def truncate(s)
    if s.size > UserHistory::MAX_CONTEXT_LENGTH
      "#{s.slice(..UserHistory::MAX_CONTEXT_LENGTH)}..."
    else
      s
    end
  end
