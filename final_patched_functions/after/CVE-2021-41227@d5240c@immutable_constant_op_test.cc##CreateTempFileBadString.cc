Status CreateTempFileBadString(Env* env, char value, uint64 size,
                               const string suffix, string* filename) {
  const string dir = testing::TmpDir();
  *filename = io::JoinPath(dir, strings::StrCat("file_", suffix));
  std::unique_ptr<WritableFile> file;
  TF_RETURN_IF_ERROR(env->NewWritableFile(*filename, &file));
  TF_RETURN_IF_ERROR(file->Append(std::string(size, value)));
  TF_RETURN_IF_ERROR(file->Close());
  return Status::OK();
}
