static bool aws_php_should_sign_header(const char *header_name, size_t header_length, void *user_data) {
    zval php_header_name;
    aws_php_zval_stringl(&php_header_name, header_name, header_length);

    should_sign_header_data task_data = {
        .should_sign_header = user_data,
        .header_name = &php_header_name,
        .result = false,
    };

    aws_php_task task = {
        .callback = should_sign_header_task,
        .data = &task_data,
    };

    aws_php_thread_queue_push(&s_aws_php_main_thread_queue, task);
    aws_php_thread_queue_yield(&s_aws_php_main_thread_queue);

    zval_dtor(&php_header_name);

    return task_data.result;
}
