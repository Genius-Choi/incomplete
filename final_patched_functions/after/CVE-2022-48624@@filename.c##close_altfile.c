close_altfile(altfilename, filename)
	char *altfilename;
	char *filename;
{
#if HAVE_POPEN
	char *lessclose;
	char *qfilename;
	char *qaltfilename;
	FILE *fd;
	char *cmd;
	int len;
	
	if (secure)
		return;
	ch_ungetchar(-1);
	if ((lessclose = lgetenv("LESSCLOSE")) == NULL)
		return;
	if (num_pct_s(lessclose) > 2) 
	{
		error("LESSCLOSE ignored; must contain no more than 2 %%s", NULL_PARG);
		return;
	}
	qfilename = shell_quote(filename);
	qaltfilename = shell_quote(altfilename);
	len = (int) (strlen(lessclose) + strlen(qfilename) + strlen(qaltfilename) + 2);
	cmd = (char *) ecalloc(len, sizeof(char));
	SNPRINTF2(cmd, len, lessclose, qfilename, qaltfilename);
	free(qaltfilename);
	free(qfilename);
	fd = shellcmd(cmd);
	free(cmd);
	if (fd != NULL)
		pclose(fd);
#endif
}
