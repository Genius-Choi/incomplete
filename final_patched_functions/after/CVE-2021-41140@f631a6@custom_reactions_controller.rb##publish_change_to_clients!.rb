    def publish_change_to_clients!(post)
      reactions = [params[:reaction]]
      reaction_id = DiscourseReactions::ReactionUser
        .where(user_id: current_user.id, post_id: post.id)
        .pluck_first(:reaction_id)

      if reaction_id
        reaction_value = DiscourseReactions::Reaction
          .where(id: reaction_id)
          .pluck_first(:reaction_value)

        reactions.push(reaction_value) if reaction_value
      end

      message = {
        post_id: post.id,
        reactions: reactions
      }

      MessageBus.publish("/topic/#{post.topic.id}/reactions", message)
    end
