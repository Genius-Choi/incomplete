def security_group_count_by_project(context, project_id):
    authorize_project_context(context, project_id)
    session = get_session()
    return session.query(models.SecurityGroup).\
                         filter_by(deleted=False).\
                         filter_by(project_id=project_id).\
                         count()
