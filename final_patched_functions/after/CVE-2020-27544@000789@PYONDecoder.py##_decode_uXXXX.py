def _decode_uXXXX(s, pos):
  esc = s[pos + 1:pos + 5]

  if len(esc) == 4 and esc[1] not in 'xX':
    try:
      return int(esc, 16)
    except ValueError: pass

  msg = "Invalid \\uXXXX escape"
  raise ValueError(errmsg(msg, s, pos))
