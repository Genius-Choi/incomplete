        def crop_args(opts)
          raise ArgumentError, "you can't give a crop offset and gravity at the same time" if opts["x"] && opts["gravity"]

          width = opts["width"]
          height = opts["height"]
          gravity = GRAVITIES[opts["gravity"]]
          x = "#{opts["x"] || 0}"
          x = "+" + x unless x[/\A[+-]/]
          y = "#{opts["y"] || 0}"
          y = "+" + y unless y[/\A[+-]/]

          "#{"-gravity #{gravity} " if gravity}-crop #{width}x#{height}#{x}#{y} +repage"
        end
