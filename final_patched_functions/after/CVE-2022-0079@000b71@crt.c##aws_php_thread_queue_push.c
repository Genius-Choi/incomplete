void aws_php_thread_queue_push(aws_php_thread_queue *queue, aws_php_task task) {
    aws_mutex_lock(&queue->mutex);
    assert(queue->write_slot < AWS_PHP_THREAD_QUEUE_MAX_DEPTH && "thread queue is full");
    queue->queue[queue->write_slot++] = task;
    aws_mutex_unlock(&queue->mutex);
}
