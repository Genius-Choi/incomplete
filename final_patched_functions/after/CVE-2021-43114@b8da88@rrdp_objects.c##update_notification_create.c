update_notification_create(char const *uri)
{
	struct update_notification *result;

	result = malloc(sizeof(struct update_notification));
	if (result == NULL)
		return NULL;

	global_data_init(&result->global_data);
	doc_data_init(&result->snapshot);
	deltas_head_init(&result->deltas_list);
	result->uri = strdup(uri);
	if (result->uri == NULL) {
		free(result);
		return NULL;
	}

	return result;
}
