fp_read_object(CBORDecoderObject *self, const Py_ssize_t size)
{
    PyObject *ret = NULL;
    PyObject *obj, *size_obj;
    size_obj = PyLong_FromSsize_t(size);
    if (size_obj) {
        obj = PyObject_CallFunctionObjArgs(self->read, size_obj, NULL);
        Py_DECREF(size_obj);
        if (obj) {
            assert(PyBytes_CheckExact(obj));
            if (PyBytes_GET_SIZE(obj) == (Py_ssize_t) size) {
                ret = obj;
            } else {
                Py_DECREF(obj);
                PyErr_Format(
                    _CBOR2_CBORDecodeEOF,
                    "premature end of stream (expected to read %zd bytes, "
                    "got %zd instead)", size, PyBytes_GET_SIZE(obj));
            }
        }
    }
    return ret;
}
