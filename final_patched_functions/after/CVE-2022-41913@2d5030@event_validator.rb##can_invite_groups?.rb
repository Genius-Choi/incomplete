    def can_invite_groups?(event)
      guardian = Guardian.new(@post.acting_user)
      return true unless event[:"allowed-groups"]

      event[:"allowed-groups"].split(',').each do |group_name|
        group = Group.find_by(name: group_name)

        if !group || !guardian.can_see_group?(group)
          @post.errors.add(:base, I18n.t("discourse_post_event.errors.models.event.invalid_allowed_groups"))
          return false
        end

        if !guardian.can_see_group_members?(group)
          @post.errors.add(:base, I18n.t("discourse_post_event.errors.models.event.acting_user_not_allowed_to_invite_these_groups"))
          return false
        end
      end

      true
    end
