def extract_error_messages(exc: BaseException) -> Iterable[str]:
    while True:
        exc_str = str(exc).strip()
        yield f"{type(exc).__name__}: {exc_str}"
        opt_exc = exc.__cause__ or exc.__context__
        if not opt_exc:
            break
        exc = opt_exc
