    def taxable_ids(loc = which_location, org = which_organization, inner_method = which_ancestry_method)
      # Return everything (represented by nil), including objects without
      # taxonomies. This value should only be returned for admin users.
      return nil if any_context?(loc) && any_context?(org) &&
        User.current.try(:admin?)

      ids = unscoped.pluck(:id)
      ids &= inner_ids(loc, Location, inner_method) if SETTINGS[:locations_enabled]
      ids &= inner_ids(org, Organization, inner_method) if SETTINGS[:organizations_enabled]

      if self == User
        # In the case of users we want the taxonomy scope to get both the users
        # of the taxonomy, admins, and the current user.
        ids.concat(admin_ids)
        ids << User.current.id if User.current.present?
      end

      ids
    end
