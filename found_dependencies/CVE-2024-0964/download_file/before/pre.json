[
    {
        "line": 8,
        "fullcodeline": "headers = {\"Authorization\": \"Bearer \" + hf_token} if hf_token else {}"
    },
    {
        "line": 10,
        "fullcodeline": "sha1 = hashlib.sha1()"
    },
    {
        "line": 11,
        "fullcodeline": "temp_dir = Path(tempfile.gettempdir()) / secrets.token_hex(20)"
    },
    {
        "line": 12,
        "fullcodeline": "temp_dir.mkdir(exist_ok=True, parents=True)"
    },
    {
        "line": 21,
        "fullcodeline": "directory = Path(dir) / sha1.hexdigest()"
    },
    {
        "line": 22,
        "fullcodeline": "directory.mkdir(exist_ok=True, parents=True)"
    },
    {
        "line": 23,
        "fullcodeline": "dest = directory / Path(url_path).name"
    },
    {
        "line": 24,
        "fullcodeline": "shutil.move(temp_dir / Path(url_path).name, dest)"
    },
    {
        "line": 6,
        "fullcodeline": "if dir is not None:"
    },
    {
        "line": 14,
        "fullcodeline": "with httpx.stream(\"GET\", url_path, headers=headers) as response:"
    },
    {
        "line": 25,
        "fullcodeline": "return str(dest.resolve())"
    },
    {
        "line": 7,
        "fullcodeline": "os.makedirs(dir, exist_ok=True)"
    },
    {
        "line": 15,
        "fullcodeline": "response.raise_for_status()"
    },
    {
        "line": 16,
        "fullcodeline": "with open(temp_dir / Path(url_path).name, \"wb\") as f:"
    },
    {
        "line": 17,
        "fullcodeline": "for chunk in response.iter_bytes(chunk_size=128 * sha1.block_size):"
    },
    {
        "line": 18,
        "fullcodeline": "sha1.update(chunk)"
    },
    {
        "line": 19,
        "fullcodeline": "f.write(chunk)"
    }
]