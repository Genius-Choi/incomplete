[
    {
        "line": 4,
        "fullcodeline": "int saveerrno = errno;"
    },
    {
        "line": 6,
        "fullcodeline": "mode_t mode = rpmfiFMode(fi);"
    },
    {
        "line": 8,
        "fullcodeline": "rc = fsmStat(path, 1, &dsb);"
    },
    {
        "line": 50,
        "fullcodeline": "rc = fsmUnlink(path);"
    },
    {
        "line": 12,
        "fullcodeline": "if (S_ISREG(mode)) {"
    },
    {
        "line": 51,
        "fullcodeline": "if (rc == 0)\trc = RPMERR_ENOENT;"
    },
    {
        "line": 52,
        "fullcodeline": "return (rc ? rc : RPMERR_ENOENT);\t/* XXX HACK */"
    },
    {
        "line": 14,
        "fullcodeline": "char *rmpath = rstrscat(NULL, path, \"-RPMDELETE\", NULL);"
    },
    {
        "line": 15,
        "fullcodeline": "rc = fsmRename(path, rmpath);"
    },
    {
        "line": 17,
        "fullcodeline": "if (!rc)"
    },
    {
        "line": 22,
        "fullcodeline": "return (rc ? rc : RPMERR_ENOENT);\t/* XXX HACK */"
    },
    {
        "line": 23,
        "fullcodeline": "} else if (S_ISDIR(mode)) {"
    },
    {
        "line": 18,
        "fullcodeline": "(void) fsmUnlink(rmpath);"
    },
    {
        "line": 20,
        "fullcodeline": "rc = RPMERR_UNLINK_FAILED;"
    },
    {
        "line": 24,
        "fullcodeline": "if (S_ISDIR(dsb.st_mode)) return 0;"
    },
    {
        "line": 25,
        "fullcodeline": "if (S_ISLNK(dsb.st_mode)) {"
    },
    {
        "line": 26,
        "fullcodeline": "rc = fsmStat(path, 0, &dsb);"
    },
    {
        "line": 32,
        "fullcodeline": "} else if (S_ISLNK(mode)) {"
    },
    {
        "line": 27,
        "fullcodeline": "if (rc == RPMERR_ENOENT) rc = 0;"
    },
    {
        "line": 34,
        "fullcodeline": "char buf[8 * BUFSIZ];"
    },
    {
        "line": 36,
        "fullcodeline": "rc = fsmReadLink(path, buf, 8 * BUFSIZ, &len);"
    },
    {
        "line": 41,
        "fullcodeline": "} else if (S_ISFIFO(mode)) {"
    },
    {
        "line": 39,
        "fullcodeline": "if (rstreq(rpmfiFLink(fi), buf)) return 0;"
    },
    {
        "line": 43,
        "fullcodeline": "} else if (S_ISCHR(mode) || S_ISBLK(mode)) {"
    },
    {
        "line": 44,
        "fullcodeline": "if ((S_ISCHR(dsb.st_mode) || S_ISBLK(dsb.st_mode)) &&"
    },
    {
        "line": 45,
        "fullcodeline": "(dsb.st_rdev == rpmfiFRdev(fi))) return 0;"
    }
]