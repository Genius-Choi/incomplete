[
    {
        "line": 3,
        "fullcodeline": "int opendir_fd = dup(dir_fd);"
    },
    {
        "line": 10,
        "fullcodeline": "DIR *d = fdopendir(opendir_fd);"
    },
    {
        "line": 4,
        "fullcodeline": "if (opendir_fd < 0)"
    },
    {
        "line": 11,
        "fullcodeline": "if (!d)"
    },
    {
        "line": 27,
        "fullcodeline": "while ((dent = readdir(d)) != NULL)"
    },
    {
        "line": 6,
        "fullcodeline": "perror_msg(\"delete_file_dir: dup(dir_fd)\");"
    },
    {
        "line": 7,
        "fullcodeline": "return -1;"
    },
    {
        "line": 22,
        "fullcodeline": "return -1;"
    },
    {
        "line": 29,
        "fullcodeline": "if (dot_or_dotdot(dent->d_name))"
    },
    {
        "line": 17,
        "fullcodeline": "if (errno == ENOENT || errno == ENOTDIR)"
    },
    {
        "line": 31,
        "fullcodeline": "if (skip_lock_file && strcmp(dent->d_name, \".lock\") == 0)"
    },
    {
        "line": 33,
        "fullcodeline": "unlink_lock_file = true;"
    },
    {
        "line": 36,
        "fullcodeline": "if (unlinkat(dir_fd, dent->d_name, /*only files*/0) == -1 && errno != ENOENT)"
    },
    {
        "line": 38,
        "fullcodeline": "int err = 0;"
    },
    {
        "line": 39,
        "fullcodeline": "if (errno == EISDIR)"
    },
    {
        "line": 57,
        "fullcodeline": "if (errno || err)"
    },
    {
        "line": 41,
        "fullcodeline": "errno = 0;"
    },
    {
        "line": 42,
        "fullcodeline": "int subdir_fd = openat(dir_fd, dent->d_name, O_DIRECTORY);"
    },
    {
        "line": 43,
        "fullcodeline": "if (subdir_fd < 0)"
    },
    {
        "line": 61,
        "fullcodeline": "return -1;"
    },
    {
        "line": 47,
        "fullcodeline": "return -1;"
    },
    {
        "line": 51,
        "fullcodeline": "err = delete_file_dir(subdir_fd, /*skip_lock_file:*/ false);"
    },
    {
        "line": 53,
        "fullcodeline": "if (err == 0)"
    },
    {
        "line": 54,
        "fullcodeline": "unlinkat(dir_fd, dent->d_name, AT_REMOVEDIR);"
    }
]