[
    {
        "line": 2,
        "fullcodeline": "required_parameters :repository, :arch"
    },
    {
        "line": 4,
        "fullcodeline": "@repository = params[:repository]"
    },
    {
        "line": 5,
        "fullcodeline": "@arch = params[:arch]"
    },
    {
        "line": 6,
        "fullcodeline": "@hosts = begin Integer(params[:hosts] || '40') rescue 40 end"
    },
    {
        "line": 7,
        "fullcodeline": "@scheduler = params[:scheduler] || 'needed'"
    },
    {
        "line": 8,
        "fullcodeline": "bdep = find_cached(BuilddepInfo, :project => @project.name, :repository => @repository, :arch => @arch)"
    },
    {
        "line": 9,
        "fullcodeline": "jobs = find_cached(Jobhislist , :project => @project.name, :repository => @repository, :arch => @arch,"
    },
    {
        "line": 16,
        "fullcodeline": "indir = Dir.mktmpdir"
    },
    {
        "line": 17,
        "fullcodeline": "f = File.open(indir + \"/_builddepinfo.xml\", 'w')"
    },
    {
        "line": 20,
        "fullcodeline": "f = File.open(indir + \"/_jobhistory.xml\", 'w')"
    },
    {
        "line": 23,
        "fullcodeline": "outdir = Dir.mktmpdir"
    },
    {
        "line": 24,
        "fullcodeline": "cmd=\"perl ./mkdiststats '--srcdir=#{indir}' '--destdir=#{outdir}' --outfmt=xml #{@project.name}/#{@repository}/#{@arch} --width=910 --buildhosts=#{@hosts} --scheduler=#{@scheduler}\""
    },
    {
        "line": 26,
        "fullcodeline": "system(\"cd #{RAILS_ROOT}/vendor/diststats && #{cmd}\")"
    },
    {
        "line": 27,
        "fullcodeline": "f=File.open(outdir + \"/rebuild.png\")"
    },
    {
        "line": 28,
        "fullcodeline": "png=f.read"
    },
    {
        "line": 30,
        "fullcodeline": "@pngkey = Digest::MD5.hexdigest( params.to_s )"
    },
    {
        "line": 32,
        "fullcodeline": "f=File.open(outdir + \"/longest.xml\")"
    },
    {
        "line": 33,
        "fullcodeline": "longest = ActiveXML::LibXMLNode.new(f.read)"
    },
    {
        "line": 34,
        "fullcodeline": "@timings = Hash.new"
    },
    {
        "line": 51,
        "fullcodeline": "FileUtils.rm_rf indir"
    },
    {
        "line": 11,
        "fullcodeline": "unless bdep and jobs"
    },
    {
        "line": 25,
        "fullcodeline": "logger.debug \"cd #{RAILS_ROOT}/vendor/diststats && #{cmd}\""
    },
    {
        "line": 31,
        "fullcodeline": "Rails.cache.write(\"rebuild-%s.png\" % @pngkey, png)"
    },
    {
        "line": 38,
        "fullcodeline": "@rebuildtime = Integer(longest.value :rebuildtime)"
    },
    {
        "line": 52,
        "fullcodeline": "FileUtils.rm_rf outdir"
    },
    {
        "line": 10,
        "fullcodeline": ":limit => @packages.each.size * 3, :code => ['succeeded', 'unchanged'])"
    },
    {
        "line": 12,
        "fullcodeline": "flash[:error] = \"Could not collect infos about repository #{@repository}/#{@arch}\""
    },
    {
        "line": 13,
        "fullcodeline": "redirect_to :action => :show, :project => @project"
    },
    {
        "line": 35,
        "fullcodeline": "longest.timings.each_package do |p|"
    },
    {
        "line": 40,
        "fullcodeline": "@longestpaths = Array.new"
    },
    {
        "line": 41,
        "fullcodeline": "longest.longestpath.each_path do |path|"
    }
]