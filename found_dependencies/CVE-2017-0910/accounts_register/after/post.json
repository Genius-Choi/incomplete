[
    {
        "line": 4,
        "fullcodeline": "confirmation = Confirmation.objects.get(confirmation_key=key)"
    },
    {
        "line": 5,
        "fullcodeline": "prereg_user = confirmation.content_object"
    },
    {
        "line": 6,
        "fullcodeline": "email = prereg_user.email"
    },
    {
        "line": 7,
        "fullcodeline": "realm_creation = prereg_user.realm_creation"
    },
    {
        "line": 8,
        "fullcodeline": "password_required = prereg_user.password_required"
    },
    {
        "line": 10,
        "fullcodeline": "validators.validate_email(email)"
    },
    {
        "line": 36,
        "fullcodeline": "name_validated = False"
    },
    {
        "line": 37,
        "fullcodeline": "full_name = None"
    },
    {
        "line": 21,
        "fullcodeline": "if realm and not email_allowed_for_realm(email, realm):"
    },
    {
        "line": 25,
        "fullcodeline": "if realm and realm.deactivated:"
    },
    {
        "line": 98,
        "fullcodeline": "if form.is_valid():"
    },
    {
        "line": 196,
        "fullcodeline": "return render("
    },
    {
        "line": 13,
        "fullcodeline": "realm = None"
    },
    {
        "line": 15,
        "fullcodeline": "realm = get_realm(get_subdomain(request))"
    },
    {
        "line": 31,
        "fullcodeline": "validate_email_for_realm(realm, email)"
    },
    {
        "line": 39,
        "fullcodeline": "if request.POST.get('from_confirmation'):"
    },
    {
        "line": 84,
        "fullcodeline": "postdata = request.POST.copy()"
    },
    {
        "line": 94,
        "fullcodeline": "form = RegistrationForm(postdata, realm_creation=realm_creation)"
    },
    {
        "line": 110,
        "fullcodeline": "assert(realm is not None)"
    },
    {
        "line": 113,
        "fullcodeline": "short_name = email_to_username(email)"
    },
    {
        "line": 115,
        "fullcodeline": "timezone = u\"\""
    },
    {
        "line": 124,
        "fullcodeline": "return_data = {}  # type: Dict[str, bool]"
    },
    {
        "line": 170,
        "fullcodeline": "send_initial_pms(user_profile)"
    },
    {
        "line": 184,
        "fullcodeline": "auth_result = authenticate(username=user_profile.email,"
    },
    {
        "line": 16,
        "fullcodeline": "if prereg_user.realm is None:"
    },
    {
        "line": 18,
        "fullcodeline": "if prereg_user.realm != realm:"
    },
    {
        "line": 22,
        "fullcodeline": "return render(request, \"zerver/closed_realm.html\","
    },
    {
        "line": 28,
        "fullcodeline": "return redirect_to_deactivation_notice()"
    },
    {
        "line": 44,
        "fullcodeline": "if realm is not None and realm.is_zephyr_mirror_realm:"
    },
    {
        "line": 85,
        "fullcodeline": "if name_changes_disabled(realm):"
    },
    {
        "line": 95,
        "fullcodeline": "if not (password_auth_enabled(realm) and password_required):"
    },
    {
        "line": 99,
        "fullcodeline": "if password_auth_enabled(realm):"
    },
    {
        "line": 116,
        "fullcodeline": "if 'timezone' in request.POST and request.POST['timezone'] in get_all_timezones():"
    },
    {
        "line": 125,
        "fullcodeline": "if ldap_auth_enabled(realm):"
    },
    {
        "line": 188,
        "fullcodeline": "if return_data.get('invalid_subdomain'):"
    },
    {
        "line": 194,
        "fullcodeline": "return login_and_go_to_home(request, auth_result)"
    },
    {
        "line": 199,
        "fullcodeline": "context={'form': form,"
    },
    {
        "line": 49,
        "fullcodeline": "hesiod_name = compute_mit_user_fullname(email)"
    },
    {
        "line": 50,
        "fullcodeline": "form = RegistrationForm("
    },
    {
        "line": 53,
        "fullcodeline": "name_validated = True"
    },
    {
        "line": 96,
        "fullcodeline": "form['password'].field.required = False"
    },
    {
        "line": 103,
        "fullcodeline": "password = None"
    },
    {
        "line": 108,
        "fullcodeline": "realm = do_create_realm(string_id, realm_name)"
    },
    {
        "line": 109,
        "fullcodeline": "setup_initial_streams(realm)"
    },
    {
        "line": 117,
        "fullcodeline": "timezone = request.POST['timezone']"
    },
    {
        "line": 120,
        "fullcodeline": "existing_user_profile = get_user_profile_by_email(email)"
    },
    {
        "line": 138,
        "fullcodeline": "auth_result = authenticate(request,"
    },
    {
        "line": 173,
        "fullcodeline": "setup_initial_private_stream(user_profile)"
    },
    {
        "line": 174,
        "fullcodeline": "send_initial_realm_messages(realm)"
    },
    {
        "line": 190,
        "fullcodeline": "logging.error(\"Subdomain mismatch in registration %s: %s\" % ("
    },
    {
        "line": 203,
        "fullcodeline": "'lock_name': name_validated and name_changes_disabled(realm),"
    },
    {
        "line": 208,
        "fullcodeline": "'password_required': password_auth_enabled(realm) and password_required,"
    },
    {
        "line": 209,
        "fullcodeline": "'password_auth_enabled': password_auth_enabled(realm),"
    },
    {
        "line": 213,
        "fullcodeline": "'MAX_PASSWORD_LENGTH': str(form.MAX_PASSWORD_LENGTH),"
    },
    {
        "line": 17,
        "fullcodeline": "return render(request, 'confirmation/link_expired.html')"
    },
    {
        "line": 19,
        "fullcodeline": "return render(request, 'confirmation/link_does_not_exist.html')"
    },
    {
        "line": 23,
        "fullcodeline": "context={\"closed_domain_name\": realm.name})"
    },
    {
        "line": 33,
        "fullcodeline": "return HttpResponseRedirect(reverse('django.contrib.auth.views.login') + '?email=' +"
    },
    {
        "line": 143,
        "fullcodeline": "if auth_result is None:"
    },
    {
        "line": 152,
        "fullcodeline": "return login_and_go_to_home(request, auth_result)"
    },
    {
        "line": 153,
        "fullcodeline": "elif existing_user_profile is not None and existing_user_profile.is_mirror_dummy:"
    },
    {
        "line": 180,
        "fullcodeline": "return redirect_and_log_into_subdomain(realm, full_name, email)"
    },
    {
        "line": 192,
        "fullcodeline": "return redirect('/')"
    },
    {
        "line": 202,
        "fullcodeline": "'full_name': request.session.get('authenticated_full_name', None),"
    },
    {
        "line": 43,
        "fullcodeline": "pass"
    },
    {
        "line": 90,
        "fullcodeline": "postdata.update({'full_name': request.session['authenticated_full_name']})"
    },
    {
        "line": 91,
        "fullcodeline": "name_validated = True"
    },
    {
        "line": 122,
        "fullcodeline": "existing_user_profile = None"
    },
    {
        "line": 154,
        "fullcodeline": "user_profile = existing_user_profile"
    },
    {
        "line": 155,
        "fullcodeline": "do_activate_user(user_profile)"
    },
    {
        "line": 156,
        "fullcodeline": "do_change_password(user_profile, password)"
    },
    {
        "line": 157,
        "fullcodeline": "do_change_full_name(user_profile, full_name, user_profile)"
    },
    {
        "line": 158,
        "fullcodeline": "do_set_user_display_setting(user_profile, 'timezone', timezone)"
    },
    {
        "line": 160,
        "fullcodeline": "user_profile = do_create_user(email, password, realm, full_name, short_name,"
    },
    {
        "line": 51,
        "fullcodeline": "initial={'full_name': hesiod_name if \"@\" not in hesiod_name else \"\"},"
    },
    {
        "line": 55,
        "fullcodeline": "for backend in get_backends():"
    },
    {
        "line": 76,
        "fullcodeline": "elif 'full_name' in request.POST:"
    },
    {
        "line": 148,
        "fullcodeline": "return HttpResponseRedirect(reverse('django.contrib.auth.views.login') + '?email=' +"
    },
    {
        "line": 34,
        "fullcodeline": "urllib.parse.quote_plus(email))"
    },
    {
        "line": 77,
        "fullcodeline": "form = RegistrationForm("
    },
    {
        "line": 82,
        "fullcodeline": "form = RegistrationForm(realm_creation=realm_creation)"
    },
    {
        "line": 93,
        "fullcodeline": "pass"
    },
    {
        "line": 164,
        "fullcodeline": "newsletter_data={\"IP\": request.META['REMOTE_ADDR']})"
    },
    {
        "line": 56,
        "fullcodeline": "if isinstance(backend, LDAPBackend):"
    },
    {
        "line": 149,
        "fullcodeline": "urllib.parse.quote_plus(email))"
    },
    {
        "line": 78,
        "fullcodeline": "initial={'full_name': request.POST.get('full_name')},"
    },
    {
        "line": 57,
        "fullcodeline": "ldap_attrs = _LDAPUser(backend, backend.django_to_ldap_username(email)).attrs"
    },
    {
        "line": 60,
        "fullcodeline": "request.session['authenticated_full_name'] = ldap_full_name"
    },
    {
        "line": 61,
        "fullcodeline": "name_validated = True"
    },
    {
        "line": 67,
        "fullcodeline": "form = RegistrationForm({'full_name': ldap_full_name},"
    }
]