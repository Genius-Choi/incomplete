[
    {
        "line": 2,
        "fullcodeline": "response['Content-Disposition'] = disposition.to_s.dup"
    },
    {
        "line": 5,
        "fullcodeline": "params = format('; filename=\"%s\"', File.basename(filename))"
    },
    {
        "line": 7,
        "fullcodeline": "ext = File.extname(filename)"
    },
    {
        "line": 1,
        "fullcodeline": "def attachment(filename = nil, disposition = :attachment)"
    },
    {
        "line": 3,
        "fullcodeline": "return unless filename"
    },
    {
        "line": 6,
        "fullcodeline": "response['Content-Disposition'] << params"
    },
    {
        "line": 8,
        "fullcodeline": "content_type(ext) unless response['Content-Type'] || ext.empty?"
    }
]