[
    {
        "line": 2,
        "fullcodeline": "sanitize_path(data.name)"
    },
    {
        "line": 3,
        "fullcodeline": "print(f'Selecting database {data.name}')"
    },
    {
        "line": 5,
        "fullcodeline": "lollmsElfServer.db = DiscussionsDB(lollmsElfServer.lollms_paths, data.name)"
    },
    {
        "line": 6,
        "fullcodeline": "ASCIIColors.info(\"Checking discussions database... \",end=\"\")"
    },
    {
        "line": 9,
        "fullcodeline": "lollmsElfServer.config.discussion_db_name = data.name"
    },
    {
        "line": 10,
        "fullcodeline": "ASCIIColors.success(\"ok\")"
    },
    {
        "line": 7,
        "fullcodeline": "lollmsElfServer.db.create_tables()"
    },
    {
        "line": 8,
        "fullcodeline": "lollmsElfServer.db.add_missing_columns()"
    },
    {
        "line": 15,
        "fullcodeline": "if lollmsElfServer.config.data_vectorization_activate and lollmsElfServer.config.activate_ltm:"
    },
    {
        "line": 48,
        "fullcodeline": "return {\"status\":True}"
    },
    {
        "line": 13,
        "fullcodeline": "lollmsElfServer.config.save_config()"
    },
    {
        "line": 17,
        "fullcodeline": "ASCIIColors.yellow(\"0- Detected discussion vectorization request\")"
    },
    {
        "line": 18,
        "fullcodeline": "folder = lollmsElfServer.lollms_paths.personal_discussions_path/\"vectorized_dbs\""
    },
    {
        "line": 19,
        "fullcodeline": "folder.mkdir(parents=True, exist_ok=True)"
    },
    {
        "line": 20,
        "fullcodeline": "lollmsElfServer.long_term_memory = TextVectorizer("
    },
    {
        "line": 26,
        "fullcodeline": "ASCIIColors.yellow(\"1- Exporting discussions\")"
    },
    {
        "line": 27,
        "fullcodeline": "lollmsElfServer.info(\"Exporting discussions\")"
    },
    {
        "line": 28,
        "fullcodeline": "discussions = lollmsElfServer.db.export_all_as_markdown_list_for_vectorization()"
    },
    {
        "line": 29,
        "fullcodeline": "ASCIIColors.yellow(\"2- Adding discussions to vectorizer\")"
    },
    {
        "line": 30,
        "fullcodeline": "lollmsElfServer.info(\"Adding discussions to vectorizer\")"
    },
    {
        "line": 31,
        "fullcodeline": "index = 0"
    },
    {
        "line": 32,
        "fullcodeline": "nb_discussions = len(discussions)"
    },
    {
        "line": 40,
        "fullcodeline": "ASCIIColors.yellow(\"3- Indexing database\")"
    },
    {
        "line": 41,
        "fullcodeline": "lollmsElfServer.info(\"Indexing database\",True, None)"
    },
    {
        "line": 43,
        "fullcodeline": "ASCIIColors.yellow(\"Ready\")"
    },
    {
        "line": 34,
        "fullcodeline": "for (title,discussion) in tqdm(discussions):"
    },
    {
        "line": 42,
        "fullcodeline": "lollmsElfServer.long_term_memory.index()"
    },
    {
        "line": 22,
        "fullcodeline": "database_path=folder/lollmsElfServer.config.discussion_db_name,"
    },
    {
        "line": 45,
        "fullcodeline": "lollmsElfServer.error(f\"Couldn't vectorize the database:{ex}\")"
    },
    {
        "line": 36,
        "fullcodeline": "index += 1"
    },
    {
        "line": 35,
        "fullcodeline": "lollmsElfServer.sio.emit('update_progress',{'value':int(100*(index/nb_discussions))})"
    },
    {
        "line": 37,
        "fullcodeline": "if discussion!='':"
    },
    {
        "line": 46,
        "fullcodeline": "return {\"status\":False}"
    },
    {
        "line": 38,
        "fullcodeline": "skill = lollmsElfServer.learn_from_discussion(title, discussion)"
    },
    {
        "line": 39,
        "fullcodeline": "lollmsElfServer.long_term_memory.add_document(title, skill, chunk_size=lollmsElfServer.config.data_vectorization_chunk_size, overlap_size=lollmsElfServer.config.data_vectorization_overlap_size, force_vectorize=False, add_as_a_bloc=False)"
    }
]