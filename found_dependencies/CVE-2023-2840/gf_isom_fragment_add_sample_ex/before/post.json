[
    {
        "line": 7,
        "fullcodeline": "GF_ISOSample *od_sample = NULL;"
    },
    {
        "line": 15,
        "fullcodeline": "traf = gf_isom_get_traf(movie, TrackID);"
    },
    {
        "line": 22,
        "fullcodeline": "pos = gf_bs_get_position(movie->editFileMap->bs);"
    },
    {
        "line": 64,
        "fullcodeline": "pos = movie->moof->trun_ref_size ? (8+movie->moof->trun_ref_size) : gf_bs_get_position(movie->editFileMap->bs);"
    },
    {
        "line": 67,
        "fullcodeline": "count = (traf->use_sample_interleave && traf->force_new_trun) ? 0 : gf_list_count(traf->TrackRuns);"
    },
    {
        "line": 94,
        "fullcodeline": "traf->force_new_trun = 0;"
    },
    {
        "line": 117,
        "fullcodeline": "memset(&ent, 0, sizeof(GF_TrunEntry));"
    },
    {
        "line": 118,
        "fullcodeline": "ent.CTS_Offset = sample->CTS_Offset;"
    },
    {
        "line": 119,
        "fullcodeline": "ent.Duration = Duration;"
    },
    {
        "line": 120,
        "fullcodeline": "ent.dts = sample->DTS;"
    },
    {
        "line": 121,
        "fullcodeline": "ent.nb_pack = sample->nb_pack;"
    },
    {
        "line": 122,
        "fullcodeline": "ent.flags = GF_ISOM_FORMAT_FRAG_FLAGS(PaddingBits, sample->IsRAP, DegradationPriority);"
    },
    {
        "line": 152,
        "fullcodeline": "ent.size = sample->dataLength;"
    },
    {
        "line": 153,
        "fullcodeline": "trun->samples[trun->nb_samples] = ent;"
    },
    {
        "line": 154,
        "fullcodeline": "trun->nb_samples ++;"
    },
    {
        "line": 155,
        "fullcodeline": "trun->run_size += ent.size;"
    },
    {
        "line": 160,
        "fullcodeline": "trun->sample_count += sample->nb_pack ? sample->nb_pack : 1;"
    },
    {
        "line": 12,
        "fullcodeline": "if (!movie->moof || !(movie->FragmentsFlags & GF_ISOM_FRAG_WRITE_READY) || !sample)"
    },
    {
        "line": 16,
        "fullcodeline": "if (!traf)"
    },
    {
        "line": 26,
        "fullcodeline": "if ( DescIndex && (traf->tfhd->sample_desc_index != DescIndex)) {"
    },
    {
        "line": 97,
        "fullcodeline": "if (!count) {"
    },
    {
        "line": 133,
        "fullcodeline": "if (prev_ent && (prev_ent->dts || !prev_ent->Duration) && sample->DTS) {"
    },
    {
        "line": 138,
        "fullcodeline": "if (trun->nb_samples >= trun->sample_alloc) {"
    },
    {
        "line": 146,
        "fullcodeline": "if (traf->trex->track->Media->handler->handlerType == GF_ISOM_MEDIA_OD) {"
    },
    {
        "line": 157,
        "fullcodeline": "if (sample->CTS_Offset<0) {"
    },
    {
        "line": 20,
        "fullcodeline": "traf->tfhd->sample_desc_index = DescIndex ? DescIndex : traf->trex->def_sample_desc_index;"
    },
    {
        "line": 40,
        "fullcodeline": "traf_2 = (GF_TrackFragmentBox *) gf_isom_box_new_parent(&movie->moof->child_boxes, GF_ISOM_BOX_TYPE_TRAF);"
    },
    {
        "line": 42,
        "fullcodeline": "traf_2->trex = traf->trex;"
    },
    {
        "line": 43,
        "fullcodeline": "traf_2->tfhd = (GF_TrackFragmentHeaderBox *) gf_isom_box_new_parent(&traf_2->child_boxes, GF_ISOM_BOX_TYPE_TFHD);"
    },
    {
        "line": 47,
        "fullcodeline": "traf_2->tfhd->base_data_offset = movie->moof->fragment_offset + 8;"
    },
    {
        "line": 48,
        "fullcodeline": "gf_list_add(movie->moof->TrackList, traf_2);"
    },
    {
        "line": 51,
        "fullcodeline": "traf_2->IFrameSwitching = traf->IFrameSwitching;"
    },
    {
        "line": 52,
        "fullcodeline": "traf_2->use_sample_interleave = traf->use_sample_interleave;"
    },
    {
        "line": 53,
        "fullcodeline": "traf_2->interleave_id = traf->interleave_id;"
    },
    {
        "line": 54,
        "fullcodeline": "traf_2->truns_first = traf->truns_first;"
    },
    {
        "line": 55,
        "fullcodeline": "traf_2->truns_v1 = traf->truns_v1;"
    },
    {
        "line": 56,
        "fullcodeline": "traf_2->large_tfdt = traf->large_tfdt;"
    },
    {
        "line": 57,
        "fullcodeline": "traf_2->DataCache  = traf->DataCache;"
    },
    {
        "line": 58,
        "fullcodeline": "traf_2->tfhd->sample_desc_index  = DescIndex;"
    },
    {
        "line": 61,
        "fullcodeline": "traf = traf_2;"
    },
    {
        "line": 69,
        "fullcodeline": "trun = (GF_TrackFragmentRunBox *)gf_list_get(traf->TrackRuns, count-1);"
    },
    {
        "line": 98,
        "fullcodeline": "trun = (GF_TrackFragmentRunBox *) gf_isom_box_new_parent(&traf->child_boxes, GF_ISOM_BOX_TYPE_TRUN);"
    },
    {
        "line": 101,
        "fullcodeline": "trun->data_offset = (u32) (pos - movie->moof->fragment_offset - 8);"
    },
    {
        "line": 102,
        "fullcodeline": "gf_list_add(traf->TrackRuns, trun);"
    },
    {
        "line": 108,
        "fullcodeline": "trun->interleave_id = traf->interleave_id;"
    },
    {
        "line": 124,
        "fullcodeline": "ent.flags |= GF_ISOM_GET_FRAG_DEPEND_FLAGS(0, 2, 0, (redundant_coding ? 1 : 0) );"
    },
    {
        "line": 125,
        "fullcodeline": "ent.SAP_type = sample->IsRAP;"
    },
    {
        "line": 134,
        "fullcodeline": "u32 nsamp = prev_ent->nb_pack ? prev_ent->nb_pack : 1;"
    },
    {
        "line": 139,
        "fullcodeline": "trun->sample_alloc += 50;"
    },
    {
        "line": 141,
        "fullcodeline": "trun->samples = gf_realloc(trun->samples, sizeof(GF_TrunEntry)*trun->sample_alloc);"
    },
    {
        "line": 148,
        "fullcodeline": "Media_ParseODFrame(traf->trex->track->Media, sample, &od_sample);"
    },
    {
        "line": 149,
        "fullcodeline": "sample = od_sample;"
    },
    {
        "line": 158,
        "fullcodeline": "trun->version = 1;"
    },
    {
        "line": 164,
        "fullcodeline": "u32 res = 0;"
    },
    {
        "line": 204,
        "fullcodeline": "if (od_sample) gf_isom_sample_del(&od_sample);"
    },
    {
        "line": 28,
        "fullcodeline": "if (traf->DataCache && !traf->use_sample_interleave) {"
    },
    {
        "line": 41,
        "fullcodeline": "if (!traf_2) return GF_OUT_OF_MEM;"
    },
    {
        "line": 44,
        "fullcodeline": "if (!traf_2->tfhd) return GF_OUT_OF_MEM;"
    },
    {
        "line": 71,
        "fullcodeline": "if (!traf->DataCache && (movie->moof->fragment_offset + 8 + trun->data_offset + trun->run_size != pos) )"
    },
    {
        "line": 75,
        "fullcodeline": "if (traf->IFrameSwitching && sample->IsRAP)"
    },
    {
        "line": 78,
        "fullcodeline": "if (traf->DataCache && (traf->DataCache==trun->sample_count) && !traf->use_sample_interleave)"
    },
    {
        "line": 85,
        "fullcodeline": "if (!count && traf->DataCache && !traf->use_sample_interleave) {"
    },
    {
        "line": 99,
        "fullcodeline": "if (!trun) return GF_OUT_OF_MEM;"
    },
    {
        "line": 130,
        "fullcodeline": "prev_ent = NULL;"
    },
    {
        "line": 135,
        "fullcodeline": "if (nsamp*prev_ent->Duration != sample->DTS - prev_ent->dts)"
    },
    {
        "line": 140,
        "fullcodeline": "if (trun->nb_samples >= trun->sample_alloc) trun->sample_alloc = trun->nb_samples+1;"
    },
    {
        "line": 142,
        "fullcodeline": "if (!trun->samples) return GF_OUT_OF_MEM;"
    },
    {
        "line": 165,
        "fullcodeline": "if (!traf->DataCache) {"
    },
    {
        "line": 198,
        "fullcodeline": "if (res!=sample->dataLength) {"
    },
    {
        "line": 210,
        "fullcodeline": "if (!raf->trun_number && sample->IsRAP) {"
    },
    {
        "line": 29,
        "fullcodeline": "count = gf_list_count(traf->TrackRuns);"
    },
    {
        "line": 72,
        "fullcodeline": "count = 0;"
    },
    {
        "line": 76,
        "fullcodeline": "count = 0;"
    },
    {
        "line": 79,
        "fullcodeline": "count = 0;"
    },
    {
        "line": 82,
        "fullcodeline": "count = 0;"
    },
    {
        "line": 86,
        "fullcodeline": "trun->data_offset = (u32) (pos - movie->moof->fragment_offset - 8);"
    },
    {
        "line": 87,
        "fullcodeline": "gf_bs_get_content(trun->cache, &buffer, &buffer_size);"
    },
    {
        "line": 88,
        "fullcodeline": "gf_bs_write_data(movie->editFileMap->bs, buffer, buffer_size);"
    },
    {
        "line": 89,
        "fullcodeline": "gf_bs_del(trun->cache);"
    },
    {
        "line": 90,
        "fullcodeline": "trun->cache = NULL;"
    },
    {
        "line": 91,
        "fullcodeline": "gf_free(buffer);"
    },
    {
        "line": 110,
        "fullcodeline": "trun->version = 1;"
    },
    {
        "line": 114,
        "fullcodeline": "trun->cache = gf_bs_new(NULL, 0, GF_BITSTREAM_WRITE);"
    },
    {
        "line": 136,
        "fullcodeline": "prev_ent->Duration = (u32) (sample->DTS - prev_ent->dts) / nsamp;"
    },
    {
        "line": 199,
        "fullcodeline": "GF_LOG(GF_LOG_WARNING, GF_LOG_CONTAINER, (\"[iso fragment] Could not add a sample with a size of %u bytes\\n\", sample->dataLength));"
    },
    {
        "line": 211,
        "fullcodeline": "raf->time = sample->DTS + sample->CTS_Offset;"
    },
    {
        "line": 212,
        "fullcodeline": "raf->trun_number = gf_list_count(traf->TrackRuns);"
    },
    {
        "line": 213,
        "fullcodeline": "raf->sample_number = trun->sample_count;"
    },
    {
        "line": 128,
        "fullcodeline": "prev_ent = &trun->samples[trun->nb_samples-1];"
    },
    {
        "line": 166,
        "fullcodeline": "if (movie->moof_first && movie->on_block_out && (ref || trun->sample_refs)) {"
    },
    {
        "line": 208,
        "fullcodeline": "raf = &traf->trex->tfra->entries[traf->trex->tfra->nb_entries-1];"
    },
    {
        "line": 31,
        "fullcodeline": "trun = (GF_TrackFragmentRunBox *)gf_list_get(traf->TrackRuns, count-1);"
    },
    {
        "line": 32,
        "fullcodeline": "trun->data_offset = (u32) (pos - movie->moof->fragment_offset - 8);"
    },
    {
        "line": 33,
        "fullcodeline": "gf_bs_get_content(trun->cache, &buffer, &buffer_size);"
    },
    {
        "line": 34,
        "fullcodeline": "gf_bs_write_data(movie->editFileMap->bs, buffer, buffer_size);"
    },
    {
        "line": 35,
        "fullcodeline": "gf_bs_del(trun->cache);"
    },
    {
        "line": 36,
        "fullcodeline": "trun->cache = NULL;"
    },
    {
        "line": 37,
        "fullcodeline": "gf_free(buffer);"
    },
    {
        "line": 169,
        "fullcodeline": "GF_SAFEALLOC(sref, GF_TrafSampleRef);"
    },
    {
        "line": 186,
        "fullcodeline": "res = sref->len;"
    },
    {
        "line": 187,
        "fullcodeline": "traf->trun_ref_size += res;"
    },
    {
        "line": 188,
        "fullcodeline": "movie->moof->trun_ref_size += res;"
    },
    {
        "line": 189,
        "fullcodeline": "gf_list_add(trun->sample_refs, sref);"
    },
    {
        "line": 168,
        "fullcodeline": "if (!trun->sample_refs) trun->sample_refs = gf_list_new();"
    },
    {
        "line": 170,
        "fullcodeline": "if (!sref) return GF_OUT_OF_MEM;"
    },
    {
        "line": 171,
        "fullcodeline": "if (ref && *ref && !od_sample) {"
    },
    {
        "line": 191,
        "fullcodeline": "res = gf_bs_write_data(movie->editFileMap->bs, sample->data, sample->dataLength);"
    },
    {
        "line": 194,
        "fullcodeline": "res = gf_bs_write_data(trun->cache, sample->data, sample->dataLength);"
    },
    {
        "line": 172,
        "fullcodeline": "sref->data = sample->data;"
    },
    {
        "line": 173,
        "fullcodeline": "sref->len = sample->dataLength;"
    },
    {
        "line": 174,
        "fullcodeline": "sref->ref = *ref;"
    },
    {
        "line": 175,
        "fullcodeline": "sref->ref_offset = ref_offset;"
    },
    {
        "line": 176,
        "fullcodeline": "*ref = NULL;"
    },
    {
        "line": 178,
        "fullcodeline": "sref->data = gf_malloc(sample->dataLength);"
    },
    {
        "line": 183,
        "fullcodeline": "memcpy(sref->data, sample->data, sample->dataLength);"
    },
    {
        "line": 184,
        "fullcodeline": "sref->len = sample->dataLength;"
    },
    {
        "line": 179,
        "fullcodeline": "if (!sref->data) {"
    },
    {
        "line": 180,
        "fullcodeline": "gf_free(sref);"
    }
]