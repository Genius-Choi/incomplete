[
    {
        "line": 3,
        "fullcodeline": "long tmp = *old;"
    },
    {
        "line": 4,
        "fullcodeline": "*old = atomic_long_cmpxchg(&sem->count, *old, new);"
    },
    {
        "line": 5,
        "fullcodeline": "return *old == tmp;"
    }
]