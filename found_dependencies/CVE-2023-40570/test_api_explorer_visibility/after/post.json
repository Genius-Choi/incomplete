[
    {
        "line": 5,
        "fullcodeline": "prev_metadata = perms_ds._metadata_local"
    },
    {
        "line": 6,
        "fullcodeline": "perms_ds._metadata_local = metadata or {}"
    },
    {
        "line": 7,
        "fullcodeline": "cookies = {}"
    },
    {
        "line": 10,
        "fullcodeline": "response = await perms_ds.client.get(\"/-/api\", cookies=cookies)"
    },
    {
        "line": 22,
        "fullcodeline": "perms_ds._metadata_local = prev_metadata"
    },
    {
        "line": 9,
        "fullcodeline": "cookies = {\"ds_actor\": perms_ds.client.actor_cookie({\"id\": \"user\"})}"
    },
    {
        "line": 12,
        "fullcodeline": "assert response.status_code == 200"
    },
    {
        "line": 15,
        "fullcodeline": "visible_tables = ["
    },
    {
        "line": 18,
        "fullcodeline": "assert visible_tables == expected_visible_tables"
    },
    {
        "line": 20,
        "fullcodeline": "assert response.status_code == 403"
    },
    {
        "line": 16,
        "fullcodeline": "match[0] for match in _visible_tables_re.findall(response.text)"
    }
]