[
    {
        "line": 3,
        "fullcodeline": "struct shmem_sb_info *sbinfo = SHMEM_SB(sb);"
    },
    {
        "line": 4,
        "fullcodeline": "struct shmem_sb_info config = *sbinfo;"
    },
    {
        "line": 6,
        "fullcodeline": "int error = -EINVAL;"
    },
    {
        "line": 11,
        "fullcodeline": "spin_lock(&sbinfo->stat_lock);"
    },
    {
        "line": 12,
        "fullcodeline": "inodes = sbinfo->max_inodes - sbinfo->free_inodes;"
    },
    {
        "line": 27,
        "fullcodeline": "error = 0;"
    },
    {
        "line": 8,
        "fullcodeline": "if (shmem_parse_options(data, &config, true))"
    },
    {
        "line": 15,
        "fullcodeline": "if (config.max_inodes < inodes)"
    },
    {
        "line": 22,
        "fullcodeline": "if (config.max_blocks && !sbinfo->max_blocks)"
    },
    {
        "line": 24,
        "fullcodeline": "if (config.max_inodes && !sbinfo->max_inodes)"
    },
    {
        "line": 30,
        "fullcodeline": "sbinfo->free_inodes = config.max_inodes - inodes;"
    },
    {
        "line": 13,
        "fullcodeline": "if (percpu_counter_compare(&sbinfo->used_blocks, config.max_blocks) > 0)"
    }
]