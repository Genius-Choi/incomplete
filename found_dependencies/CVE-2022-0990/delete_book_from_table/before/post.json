[
    {
        "line": 2,
        "fullcodeline": "warning = {}"
    },
    {
        "line": 49,
        "fullcodeline": "message = _(\"You are missing permissions to delete books\")"
    },
    {
        "line": 3,
        "fullcodeline": "if current_user.role_delete_books():"
    },
    {
        "line": 4,
        "fullcodeline": "book = calibre_db.get_book(book_id)"
    },
    {
        "line": 56,
        "fullcodeline": "flash(message, category=\"error\")"
    },
    {
        "line": 48,
        "fullcodeline": "return render_delete_book_result(book_format, jsonResponse, warning, book_id)"
    },
    {
        "line": 51,
        "fullcodeline": "return json.dumps({\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 57,
        "fullcodeline": "return redirect(url_for('editbook.edit_book', book_id=book_id))"
    },
    {
        "line": 47,
        "fullcodeline": "log.error('Book with id \"%s\" could not be deleted: not found', book_id)"
    },
    {
        "line": 7,
        "fullcodeline": "result, error = helper.delete_book(book, config.config_calibre_dir, book_format=book_format.upper())"
    },
    {
        "line": 8,
        "fullcodeline": "if not result:"
    },
    {
        "line": 25,
        "fullcodeline": "if not book_format:"
    },
    {
        "line": 32,
        "fullcodeline": "calibre_db.session.commit()"
    },
    {
        "line": 26,
        "fullcodeline": "delete_whole_book(book_id, book)"
    },
    {
        "line": 34,
        "fullcodeline": "log.error_or_exception(ex)"
    },
    {
        "line": 28,
        "fullcodeline": "calibre_db.session.query(db.Data).filter(db.Data.book == book.id).\\"
    },
    {
        "line": 30,
        "fullcodeline": "if book_format.upper() in ['KEPUB', 'EPUB', 'EPUB3']:"
    },
    {
        "line": 35,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 15,
        "fullcodeline": "flash(error, category=\"error\")"
    },
    {
        "line": 19,
        "fullcodeline": "warning = {\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 24,
        "fullcodeline": "flash(error, category=\"warning\")"
    },
    {
        "line": 31,
        "fullcodeline": "kobo_sync_status.remove_synced_book(book.id, True)"
    },
    {
        "line": 42,
        "fullcodeline": "flash(str(ex), category=\"error\")"
    },
    {
        "line": 10,
        "fullcodeline": "return json.dumps([{\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 16,
        "fullcodeline": "return redirect(url_for('editbook.edit_book', book_id=book_id))"
    },
    {
        "line": 37,
        "fullcodeline": "return json.dumps([{\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 43,
        "fullcodeline": "return redirect(url_for('editbook.edit_book', book_id=book_id))"
    },
    {
        "line": 29,
        "fullcodeline": "filter(db.Data.format == book_format).delete()"
    }
]