[
    {
        "line": 2,
        "fullcodeline": "changed = False"
    },
    {
        "line": 3,
        "fullcodeline": "if to_save[\"rating\"].strip():"
    },
    {
        "line": 4,
        "fullcodeline": "old_rating = False"
    },
    {
        "line": 7,
        "fullcodeline": "ratingx2 = int(float(to_save[\"rating\"]) * 2)"
    },
    {
        "line": 5,
        "fullcodeline": "if len(book.ratings) > 0:"
    },
    {
        "line": 8,
        "fullcodeline": "if ratingx2 != old_rating:"
    },
    {
        "line": 19,
        "fullcodeline": "if len(book.ratings) > 0:"
    },
    {
        "line": 9,
        "fullcodeline": "changed = True"
    },
    {
        "line": 10,
        "fullcodeline": "is_rating = calibre_db.session.query(db.Ratings).filter(db.Ratings.rating == ratingx2).first()"
    },
    {
        "line": 21,
        "fullcodeline": "changed = True"
    },
    {
        "line": 20,
        "fullcodeline": "book.ratings.remove(book.ratings[0])"
    },
    {
        "line": 14,
        "fullcodeline": "new_rating = db.Ratings(rating=ratingx2)"
    },
    {
        "line": 12,
        "fullcodeline": "book.ratings.append(is_rating)"
    },
    {
        "line": 15,
        "fullcodeline": "book.ratings.append(new_rating)"
    },
    {
        "line": 17,
        "fullcodeline": "book.ratings.remove(book.ratings[0])"
    }
]