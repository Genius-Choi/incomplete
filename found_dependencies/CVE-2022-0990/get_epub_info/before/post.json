[
    {
        "line": 2,
        "fullcodeline": "ns = {"
    },
    {
        "line": 8,
        "fullcodeline": "epub_zip = zipfile.ZipFile(tmp_file_path)"
    },
    {
        "line": 10,
        "fullcodeline": "txt = epub_zip.read('META-INF/container.xml')"
    },
    {
        "line": 11,
        "fullcodeline": "tree = etree.fromstring(txt)"
    },
    {
        "line": 13,
        "fullcodeline": "cf = epub_zip.read(cfname)"
    },
    {
        "line": 14,
        "fullcodeline": "tree = etree.fromstring(cf)"
    },
    {
        "line": 16,
        "fullcodeline": "coverpath = os.path.dirname(cfname)"
    },
    {
        "line": 20,
        "fullcodeline": "epub_metadata = {}"
    },
    {
        "line": 44,
        "fullcodeline": "lang = epub_metadata['language'].split('-', 1)[0].lower()"
    },
    {
        "line": 45,
        "fullcodeline": "epub_metadata['language'] = isoLanguages.get_lang3(lang)"
    },
    {
        "line": 47,
        "fullcodeline": "epub_metadata = parse_epub_series(ns, tree, epub_metadata)"
    },
    {
        "line": 49,
        "fullcodeline": "cover_file = parse_epub_cover(ns, tree, epub_zip, coverpath, tmp_file_path)"
    },
    {
        "line": 22,
        "fullcodeline": "for s in ['title', 'description', 'creator', 'language', 'subject']:"
    },
    {
        "line": 34,
        "fullcodeline": "if epub_metadata['subject'] == 'Unknown':"
    },
    {
        "line": 37,
        "fullcodeline": "if epub_metadata['description'] == u'Unknown':"
    },
    {
        "line": 51,
        "fullcodeline": "if not epub_metadata['title']:"
    },
    {
        "line": 56,
        "fullcodeline": "return BookMeta("
    },
    {
        "line": 12,
        "fullcodeline": "cfname = tree.xpath('n:rootfiles/n:rootfile/@full-path', namespaces=ns)[0]"
    },
    {
        "line": 18,
        "fullcodeline": "p = tree.xpath('/pkg:package/pkg:metadata', namespaces=ns)[0]"
    },
    {
        "line": 35,
        "fullcodeline": "epub_metadata['subject'] = ''"
    },
    {
        "line": 38,
        "fullcodeline": "description = tree.xpath(\"//*[local-name() = 'description']/text()\")"
    },
    {
        "line": 52,
        "fullcodeline": "title = original_file_name"
    },
    {
        "line": 54,
        "fullcodeline": "title = epub_metadata['title']"
    },
    {
        "line": 23,
        "fullcodeline": "tmp = p.xpath('dc:%s/text()' % s, namespaces=ns)"
    },
    {
        "line": 39,
        "fullcodeline": "if len(description) > 0:"
    },
    {
        "line": 59,
        "fullcodeline": "title=title.encode('utf-8').decode('utf-8'),"
    },
    {
        "line": 60,
        "fullcodeline": "author=epub_metadata['creator'].encode('utf-8').decode('utf-8'),"
    },
    {
        "line": 63,
        "fullcodeline": "tags=epub_metadata['subject'].encode('utf-8').decode('utf-8'),"
    },
    {
        "line": 64,
        "fullcodeline": "series=epub_metadata['series'].encode('utf-8').decode('utf-8'),"
    },
    {
        "line": 65,
        "fullcodeline": "series_id=epub_metadata['series_id'].encode('utf-8').decode('utf-8'),"
    },
    {
        "line": 24,
        "fullcodeline": "if len(tmp) > 0:"
    },
    {
        "line": 40,
        "fullcodeline": "epub_metadata['description'] = description"
    },
    {
        "line": 42,
        "fullcodeline": "epub_metadata['description'] = \"\""
    },
    {
        "line": 32,
        "fullcodeline": "epub_metadata[s] = 'Unknown'"
    },
    {
        "line": 25,
        "fullcodeline": "if s == 'creator':"
    },
    {
        "line": 26,
        "fullcodeline": "epub_metadata[s] = ' & '.join(split_authors(tmp))"
    },
    {
        "line": 27,
        "fullcodeline": "elif s == 'subject':"
    },
    {
        "line": 28,
        "fullcodeline": "epub_metadata[s] = ', '.join(tmp)"
    },
    {
        "line": 30,
        "fullcodeline": "epub_metadata[s] = tmp[0]"
    }
]