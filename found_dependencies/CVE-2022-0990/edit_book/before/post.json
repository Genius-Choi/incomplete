[
    {
        "line": 2,
        "fullcodeline": "modif_date = False"
    },
    {
        "line": 15,
        "fullcodeline": "book = calibre_db.get_filtered_book(book_id, allow_show_archived=True)"
    },
    {
        "line": 22,
        "fullcodeline": "meta = upload_single_file(request, book, book_id)"
    },
    {
        "line": 12,
        "fullcodeline": "if request.method != 'POST':"
    },
    {
        "line": 18,
        "fullcodeline": "if not book:"
    },
    {
        "line": 23,
        "fullcodeline": "if upload_cover(request, book) is True:"
    },
    {
        "line": 6,
        "fullcodeline": "calibre_db.update_title_sort(config)"
    },
    {
        "line": 19,
        "fullcodeline": "flash(_(u\"Oops! Selected book title is unavailable. File does not exist or is not accessible\"), category=\"error\")"
    },
    {
        "line": 24,
        "fullcodeline": "book.has_cover = 1"
    },
    {
        "line": 25,
        "fullcodeline": "modif_date = True"
    },
    {
        "line": 27,
        "fullcodeline": "to_save = request.form.to_dict()"
    },
    {
        "line": 28,
        "fullcodeline": "merge_metadata(to_save, meta)"
    },
    {
        "line": 30,
        "fullcodeline": "edited_books_id = None"
    },
    {
        "line": 33,
        "fullcodeline": "title_change = handle_title_on_edit(book, to_save[\"book_title\"])"
    },
    {
        "line": 43,
        "fullcodeline": "error = False"
    },
    {
        "line": 13,
        "fullcodeline": "return render_edit_book(book_id)"
    },
    {
        "line": 20,
        "fullcodeline": "return redirect(url_for(\"web.index\"))"
    },
    {
        "line": 35,
        "fullcodeline": "input_authors, authorchange, renamed = handle_author_on_edit(book, to_save[\"author_name\"])"
    },
    {
        "line": 36,
        "fullcodeline": "if authorchange or title_change:"
    },
    {
        "line": 48,
        "fullcodeline": "if not error:"
    },
    {
        "line": 8,
        "fullcodeline": "log.error_or_exception(e)"
    },
    {
        "line": 37,
        "fullcodeline": "edited_books_id = book.id"
    },
    {
        "line": 38,
        "fullcodeline": "modif_date = True"
    },
    {
        "line": 41,
        "fullcodeline": "gdriveutils.updateGdriveCalibreFromLocal()"
    },
    {
        "line": 45,
        "fullcodeline": "error = helper.update_dir_structure(edited_books_id, config.config_calibre_dir, input_authors[0],"
    },
    {
        "line": 65,
        "fullcodeline": "modif_date |= edit_book_series_index(to_save[\"series_index\"], book)"
    },
    {
        "line": 67,
        "fullcodeline": "modif_date |= edit_book_comments(Markup(to_save['description']).unescape(), book)"
    },
    {
        "line": 69,
        "fullcodeline": "input_identifiers = identifier_list(to_save, book)"
    },
    {
        "line": 73,
        "fullcodeline": "modif_date |= modification"
    },
    {
        "line": 75,
        "fullcodeline": "modif_date |= edit_book_tags(to_save['tags'], book)"
    },
    {
        "line": 77,
        "fullcodeline": "modif_date |= edit_book_series(to_save[\"series\"], book)"
    },
    {
        "line": 79,
        "fullcodeline": "modif_date |= edit_book_publisher(to_save['publisher'], book)"
    },
    {
        "line": 81,
        "fullcodeline": "modif_date |= edit_book_languages(to_save['languages'], book)"
    },
    {
        "line": 83,
        "fullcodeline": "modif_date |= edit_book_ratings(to_save, book)"
    },
    {
        "line": 85,
        "fullcodeline": "modif_date |= edit_all_cc_data(book_id, book, to_save)"
    },
    {
        "line": 110,
        "fullcodeline": "flash(error, category=\"error\")"
    },
    {
        "line": 114,
        "fullcodeline": "flash(str(e), category=\"error\")"
    },
    {
        "line": 117,
        "fullcodeline": "log.error_or_exception(\"Database error: {}\".format(e))"
    },
    {
        "line": 119,
        "fullcodeline": "flash(_(u\"Database error: %(error)s.\", error=e.orig), category=\"error\")"
    },
    {
        "line": 122,
        "fullcodeline": "log.error_or_exception(ex)"
    },
    {
        "line": 124,
        "fullcodeline": "flash(_(\"Error editing book, please check logfile for details\"), category=\"error\")"
    },
    {
        "line": 9,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 49,
        "fullcodeline": "if \"cover_url\" in to_save:"
    },
    {
        "line": 70,
        "fullcodeline": "modification, warning = modify_identifiers(input_identifiers, book.identifiers, calibre_db.session)"
    },
    {
        "line": 99,
        "fullcodeline": "calibre_db.session.merge(book)"
    },
    {
        "line": 100,
        "fullcodeline": "calibre_db.session.commit()"
    },
    {
        "line": 103,
        "fullcodeline": "if \"detail_view\" in to_save:"
    },
    {
        "line": 109,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 111,
        "fullcodeline": "return render_edit_book(book_id)"
    },
    {
        "line": 113,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 115,
        "fullcodeline": "return redirect(url_for('web.show_book', book_id=book.id))"
    },
    {
        "line": 118,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 120,
        "fullcodeline": "return redirect(url_for('web.show_book', book_id=book.id))"
    },
    {
        "line": 123,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 125,
        "fullcodeline": "return redirect(url_for('web.show_book', book_id=book.id))"
    },
    {
        "line": 72,
        "fullcodeline": "flash(_(\"Identifiers are not Case Sensitive, Overwriting Old Identifier\"), category=\"warning\")"
    },
    {
        "line": 96,
        "fullcodeline": "book.last_modified = datetime.utcnow()"
    },
    {
        "line": 97,
        "fullcodeline": "kobo_sync_status.remove_synced_book(edited_books_id, all=True)"
    },
    {
        "line": 102,
        "fullcodeline": "gdriveutils.updateGdriveCalibreFromLocal()"
    },
    {
        "line": 106,
        "fullcodeline": "flash(_(\"Metadata successfully updated\"), category=\"success\")"
    },
    {
        "line": 104,
        "fullcodeline": "return redirect(url_for('web.show_book', book_id=book.id))"
    },
    {
        "line": 107,
        "fullcodeline": "return render_edit_book(book_id)"
    },
    {
        "line": 89,
        "fullcodeline": "book.pubdate = datetime.strptime(to_save[\"pubdate\"], \"%Y-%m-%d\")"
    },
    {
        "line": 51,
        "fullcodeline": "if not current_user.role_upload():"
    },
    {
        "line": 54,
        "fullcodeline": "if to_save[\"cover_url\"].endswith('/static/generic_cover.jpg'):"
    },
    {
        "line": 55,
        "fullcodeline": "book.has_cover = 0"
    },
    {
        "line": 52,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 53,
        "fullcodeline": "return \"\", 403"
    },
    {
        "line": 57,
        "fullcodeline": "result, error = helper.save_cover_from_url(to_save[\"cover_url\"], book.path)"
    },
    {
        "line": 58,
        "fullcodeline": "if result is True:"
    },
    {
        "line": 59,
        "fullcodeline": "book.has_cover = 1"
    },
    {
        "line": 60,
        "fullcodeline": "modif_date = True"
    },
    {
        "line": 62,
        "fullcodeline": "flash(error, category=\"error\")"
    }
]