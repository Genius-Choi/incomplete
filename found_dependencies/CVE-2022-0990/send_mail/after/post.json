[
    {
        "line": 3,
        "fullcodeline": "book = calibre_db.get_book(book_id)"
    },
    {
        "line": 5,
        "fullcodeline": "if convert == 1:"
    },
    {
        "line": 8,
        "fullcodeline": "if convert == 2:"
    },
    {
        "line": 12,
        "fullcodeline": "for entry in iter(book.data):"
    },
    {
        "line": 21,
        "fullcodeline": "return _(u\"The requested file could not be read. Maybe wrong permissions?\")"
    },
    {
        "line": 7,
        "fullcodeline": "return convert_book_format(book_id, calibrepath, u'epub', book_format.lower(), user_id, kindle_mail)"
    },
    {
        "line": 10,
        "fullcodeline": "return convert_book_format(book_id, calibrepath, u'azw3', book_format.lower(), user_id, kindle_mail)"
    },
    {
        "line": 13,
        "fullcodeline": "if entry.format.upper() == book_format.upper():"
    },
    {
        "line": 14,
        "fullcodeline": "converted_file_name = entry.name + '.' + book_format.lower()"
    },
    {
        "line": 15,
        "fullcodeline": "link = '<a href=\"{}\">{}</a>'.format(url_for('web.show_book', book_id=book_id), escape(book.title))"
    },
    {
        "line": 16,
        "fullcodeline": "email_text = _(u\"%(book)s send to Kindle\", book=link)"
    },
    {
        "line": 17,
        "fullcodeline": "WorkerThread.add(user_id, TaskEmail(_(u\"Send to Kindle\"), book.path, converted_file_name,"
    },
    {
        "line": 18,
        "fullcodeline": "config.get_mail_settings(), kindle_mail,"
    },
    {
        "line": 19,
        "fullcodeline": "email_text, _(u'This e-mail has been sent via Calibre-Web.')))"
    }
]