[
    {
        "line": 2,
        "fullcodeline": "cover_section = tree.xpath(\"/pkg:package/pkg:manifest/pkg:item[@id='cover-image']/@href\", namespaces=ns)"
    },
    {
        "line": 3,
        "fullcodeline": "cover_file = None"
    },
    {
        "line": 5,
        "fullcodeline": "for cs in cover_section:"
    },
    {
        "line": 9,
        "fullcodeline": "if not cover_file:"
    },
    {
        "line": 10,
        "fullcodeline": "meta_cover = tree.xpath(\"/pkg:package/pkg:metadata/pkg:meta[@name='cover']/@content\", namespaces=ns)"
    },
    {
        "line": 6,
        "fullcodeline": "cover_file = _extract_cover(epub_zip, cs, cover_path, tmp_file_path)"
    },
    {
        "line": 11,
        "fullcodeline": "if len(meta_cover) > 0:"
    },
    {
        "line": 19,
        "fullcodeline": "for cs in cover_section:"
    },
    {
        "line": 12,
        "fullcodeline": "cover_section = tree.xpath("
    },
    {
        "line": 18,
        "fullcodeline": "cover_section = tree.xpath(\"/pkg:package/pkg:guide/pkg:reference/@href\", namespaces=ns)"
    },
    {
        "line": 14,
        "fullcodeline": "if not cover_section:"
    },
    {
        "line": 20,
        "fullcodeline": "filetype = cs.rsplit('.', 1)[-1]"
    },
    {
        "line": 13,
        "fullcodeline": "\"/pkg:package/pkg:manifest/pkg:item[@id='\"+meta_cover[0]+\"']/@href\", namespaces=ns)"
    },
    {
        "line": 15,
        "fullcodeline": "cover_section = tree.xpath("
    },
    {
        "line": 21,
        "fullcodeline": "if filetype == \"xhtml\" or filetype == \"html\":  # if cover is (x)html format"
    },
    {
        "line": 22,
        "fullcodeline": "markup = epub_zip.read(os.path.join(cover_path, cs))"
    },
    {
        "line": 23,
        "fullcodeline": "markup_tree = etree.fromstring(markup)"
    },
    {
        "line": 25,
        "fullcodeline": "img_src = markup_tree.xpath(\"//*[local-name() = 'img']/@src\")"
    },
    {
        "line": 35,
        "fullcodeline": "cover_file = _extract_cover(epub_zip, cs, cover_path, tmp_file_path)"
    },
    {
        "line": 16,
        "fullcodeline": "\"/pkg:package/pkg:manifest/pkg:item[@properties='\" + meta_cover[0] + \"']/@href\", namespaces=ns)"
    },
    {
        "line": 27,
        "fullcodeline": "if not len(img_src):"
    },
    {
        "line": 29,
        "fullcodeline": "if len(img_src):"
    },
    {
        "line": 28,
        "fullcodeline": "img_src = markup_tree.xpath(\"//attribute::*[contains(local-name(), 'href')]\")"
    },
    {
        "line": 31,
        "fullcodeline": "filename = os.path.relpath(os.path.join(os.path.dirname(os.path.join(cover_path, cover_section[0])),"
    },
    {
        "line": 33,
        "fullcodeline": "cover_file = _extract_cover(epub_zip, filename, \"\", tmp_file_path)"
    }
]