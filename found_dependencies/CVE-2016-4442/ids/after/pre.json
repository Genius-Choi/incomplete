[
    {
        "line": 2,
        "fullcodeline": "all = ([current.page_struct[:id]] + (@storage.get_unviewed_ids(user(env)) || [])).uniq"
    },
    {
        "line": 3,
        "fullcodeline": "if all.size > @config.max_traces_to_show"
    },
    {
        "line": 4,
        "fullcodeline": "all = all[0...@config.max_traces_to_show]"
    },
    {
        "line": 5,
        "fullcodeline": "@storage.set_all_unviewed(user(env), all)"
    }
]