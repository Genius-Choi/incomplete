[
    {
        "line": 2,
        "fullcodeline": "cluster_nodes = get_cluster_nodes(cluster_name)"
    },
    {
        "line": 3,
        "fullcodeline": "status = cluster_status_from_nodes(auth_user, cluster_nodes, cluster_name)"
    },
    {
        "line": 8,
        "fullcodeline": "new_cluster_nodes = []"
    },
    {
        "line": 1,
        "fullcodeline": "def cluster_status_gui(auth_user, cluster_name, dont_update_config=false)"
    },
    {
        "line": 4,
        "fullcodeline": "unless status"
    },
    {
        "line": 15,
        "fullcodeline": "if new_cluster_nodes.length > 0"
    },
    {
        "line": 30,
        "fullcodeline": "return JSON.generate(status)"
    },
    {
        "line": 9,
        "fullcodeline": "new_cluster_nodes += status[:corosync_offline] if status[:corosync_offline]"
    },
    {
        "line": 10,
        "fullcodeline": "new_cluster_nodes += status[:corosync_online] if status[:corosync_online]"
    },
    {
        "line": 11,
        "fullcodeline": "new_cluster_nodes += status[:pacemaker_offline] if status[:pacemaker_offline]"
    },
    {
        "line": 12,
        "fullcodeline": "new_cluster_nodes += status[:pacemaker_online] if status[:pacemaker_online]"
    },
    {
        "line": 16,
        "fullcodeline": "config = PCSConfig.new(Cfgsync::PcsdSettings.from_file('{}').text())"
    },
    {
        "line": 17,
        "fullcodeline": "if !(dont_update_config or config.cluster_nodes_equal?(cluster_name, new_cluster_nodes))"
    },
    {
        "line": 18,
        "fullcodeline": "old_cluster_nodes = config.get_nodes(cluster_name)"
    },
    {
        "line": 19,
        "fullcodeline": "$logger.info(\"Updating node list for: #{cluster_name} #{old_cluster_nodes}->#{new_cluster_nodes}\")"
    },
    {
        "line": 20,
        "fullcodeline": "config.update_cluster(cluster_name, new_cluster_nodes)"
    },
    {
        "line": 21,
        "fullcodeline": "sync_config = Cfgsync::PcsdSettings.from_text(config.text())"
    },
    {
        "line": 24,
        "fullcodeline": "Cfgsync::save_sync_new_version("
    },
    {
        "line": 25,
        "fullcodeline": "sync_config, get_corosync_nodes(), $cluster_name, true"
    },
    {
        "line": 27,
        "fullcodeline": "return cluster_status_gui(auth_user, cluster_name, true)"
    }
]