[
    {
        "line": 5,
        "fullcodeline": "DIR *d = opendir(dir);"
    },
    {
        "line": 8,
        "fullcodeline": "int count = 0;"
    },
    {
        "line": 9,
        "fullcodeline": "int pos = 0;"
    },
    {
        "line": 10,
        "fullcodeline": "int result = -1;"
    },
    {
        "line": 18,
        "fullcodeline": "names = malloc(sizeof (struct dirent *) * count);"
    },
    {
        "line": 21,
        "fullcodeline": "d = opendir(dir);"
    },
    {
        "line": 12,
        "fullcodeline": "if (NULL == d)"
    },
    {
        "line": 15,
        "fullcodeline": "while (NULL != readdir(d))"
    },
    {
        "line": 16,
        "fullcodeline": "count++;"
    },
    {
        "line": 22,
        "fullcodeline": "if (NULL == d)"
    },
    {
        "line": 25,
        "fullcodeline": "while (NULL != (current = readdir(d))) {"
    },
    {
        "line": 35,
        "fullcodeline": "result = closedir(d);"
    },
    {
        "line": 37,
        "fullcodeline": "if (pos != count)"
    },
    {
        "line": 38,
        "fullcodeline": "names = realloc(names, sizeof (struct dirent *) * pos);"
    },
    {
        "line": 13,
        "fullcodeline": "return -1;"
    },
    {
        "line": 23,
        "fullcodeline": "return -1;"
    },
    {
        "line": 26,
        "fullcodeline": "if (NULL == select || select(current)) {"
    },
    {
        "line": 27,
        "fullcodeline": "struct dirent *copyentry = malloc(current->d_reclen);"
    },
    {
        "line": 29,
        "fullcodeline": "memcpy(copyentry, current, current->d_reclen);"
    },
    {
        "line": 31,
        "fullcodeline": "names[pos] = copyentry;"
    },
    {
        "line": 32,
        "fullcodeline": "pos++;"
    }
]