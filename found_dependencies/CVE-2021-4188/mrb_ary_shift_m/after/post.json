[
    {
        "line": 9,
        "fullcodeline": "struct RArray *a = mrb_ary_ptr(self);"
    },
    {
        "line": 10,
        "fullcodeline": "mrb_int len = ARY_LEN(a);"
    },
    {
        "line": 13,
        "fullcodeline": "ary_modify_check(mrb, a);"
    },
    {
        "line": 17,
        "fullcodeline": "val = mrb_ary_new_from_values(mrb, n, ARY_PTR(a));"
    },
    {
        "line": 5,
        "fullcodeline": "if (mrb_get_args(mrb, \"|i\", &n) == 0) {"
    },
    {
        "line": 14,
        "fullcodeline": "if (len == 0 || n == 0) return mrb_ary_new(mrb);"
    },
    {
        "line": 15,
        "fullcodeline": "if (n < 0) mrb_raise(mrb, E_ARGUMENT_ERROR, \"negative array shift\");"
    },
    {
        "line": 16,
        "fullcodeline": "if (n > len) n = len;"
    },
    {
        "line": 18,
        "fullcodeline": "if (ARY_SHARED_P(a)) {"
    },
    {
        "line": 24,
        "fullcodeline": "if (len > ARY_SHIFT_SHARED_MIN) {"
    },
    {
        "line": 20,
        "fullcodeline": "a->as.heap.ptr+=n;"
    },
    {
        "line": 21,
        "fullcodeline": "a->as.heap.len-=n;"
    },
    {
        "line": 25,
        "fullcodeline": "ary_make_shared(mrb, a);"
    },
    {
        "line": 6,
        "fullcodeline": "return mrb_ary_shift(mrb, self);"
    },
    {
        "line": 28,
        "fullcodeline": "else if (len == n) {"
    },
    {
        "line": 29,
        "fullcodeline": "ARY_SET_LEN(a, 0);"
    },
    {
        "line": 32,
        "fullcodeline": "mrb_value *ptr = ARY_PTR(a);"
    },
    {
        "line": 33,
        "fullcodeline": "mrb_int size = len-n;"
    },
    {
        "line": 39,
        "fullcodeline": "ARY_SET_LEN(a, len-n);"
    },
    {
        "line": 35,
        "fullcodeline": "while (size--) {"
    },
    {
        "line": 37,
        "fullcodeline": "++ptr;"
    },
    {
        "line": 36,
        "fullcodeline": "*ptr = *(ptr+n);"
    }
]