[
    {
        "line": 2,
        "fullcodeline": "@logger.debug(\"Trove create_proposal: entering\")"
    },
    {
        "line": 3,
        "fullcodeline": "base = super"
    },
    {
        "line": 5,
        "fullcodeline": "base[\"attributes\"][@bc_name][\"keystone_instance\"] = find_dep_proposal(\"keystone\")"
    },
    {
        "line": 6,
        "fullcodeline": "base[\"attributes\"][@bc_name][\"nova_instance\"] = find_dep_proposal(\"nova\")"
    },
    {
        "line": 7,
        "fullcodeline": "base[\"attributes\"][@bc_name][\"cinder_instance\"] = find_dep_proposal(\"cinder\")"
    },
    {
        "line": 8,
        "fullcodeline": "base[\"attributes\"][@bc_name][\"swift_instance\"] = find_dep_proposal(\"swift\", true)"
    },
    {
        "line": 9,
        "fullcodeline": "base[\"attributes\"][@bc_name][\"rabbitmq_instance\"] = find_dep_proposal(\"rabbitmq\")"
    },
    {
        "line": 10,
        "fullcodeline": "base[\"attributes\"][@bc_name][\"db\"][\"password\"] = random_password"
    },
    {
        "line": 13,
        "fullcodeline": "nodes = NodeObject.all"
    },
    {
        "line": 14,
        "fullcodeline": "nodes.delete_if { |n| n.nil? or n.admin? }"
    },
    {
        "line": 22,
        "fullcodeline": "@logger.debug(\"Trove create_proposal: exiting\")"
    },
    {
        "line": 15,
        "fullcodeline": "if nodes.size >= 1"
    },
    {
        "line": 16,
        "fullcodeline": "controller = nodes.find { |n| n.intended_role == \"controller\" } || nodes.first"
    },
    {
        "line": 17,
        "fullcodeline": "base[\"deployment\"][\"trove\"][\"elements\"] = {"
    },
    {
        "line": 18,
        "fullcodeline": "\"trove-server\" => [ controller[:fqdn] ]"
    }
]