[
    {
        "line": 2,
        "fullcodeline": "if to_save.get(\"delete\"):"
    },
    {
        "line": 18,
        "fullcodeline": "content.role = constants.selected_roles(to_save)"
    },
    {
        "line": 24,
        "fullcodeline": "val = [int(k[5:]) for k in to_save if k.startswith('show_')]"
    },
    {
        "line": 25,
        "fullcodeline": "sidebar = get_sidebar_config()"
    },
    {
        "line": 38,
        "fullcodeline": "old_state = content.kobo_only_shelves_sync"
    },
    {
        "line": 39,
        "fullcodeline": "content.kobo_only_shelves_sync = int(to_save.get(\"kobo_only_shelves_sync\") == \"on\") or 0"
    },
    {
        "line": 74,
        "fullcodeline": "ub.session_commit()"
    },
    {
        "line": 8,
        "fullcodeline": "return redirect(url_for('admin.admin'))"
    },
    {
        "line": 15,
        "fullcodeline": "if to_save.get(\"password\"):"
    },
    {
        "line": 26,
        "fullcodeline": "for element in sidebar:"
    },
    {
        "line": 33,
        "fullcodeline": "if to_save.get(\"Show_detail_random\"):"
    },
    {
        "line": 45,
        "fullcodeline": "if to_save.get(\"default_language\"):"
    },
    {
        "line": 47,
        "fullcodeline": "if to_save.get(\"locale\"):"
    },
    {
        "line": 75,
        "fullcodeline": "flash(_(u\"User '%(nick)s' updated\", nick=content.name), category=\"success\")"
    },
    {
        "line": 4,
        "fullcodeline": "flash(_delete_user(content), category=\"success\")"
    },
    {
        "line": 10,
        "fullcodeline": "if not ub.session.query(ub.User).filter(ub.User.role.op('&')(constants.ROLE_ADMIN) == constants.ROLE_ADMIN,"
    },
    {
        "line": 11,
        "fullcodeline": "ub.User.id != content.id).count() and 'admin_role' not in to_save:"
    },
    {
        "line": 16,
        "fullcodeline": "content.password = generate_password_hash(to_save[\"password\"])"
    },
    {
        "line": 20,
        "fullcodeline": "content.role |= constants.ROLE_ANONYMOUS"
    },
    {
        "line": 22,
        "fullcodeline": "content.role &= ~constants.ROLE_ANONYMOUS"
    },
    {
        "line": 34,
        "fullcodeline": "content.sidebar_view |= constants.DETAIL_RANDOM"
    },
    {
        "line": 36,
        "fullcodeline": "content.sidebar_view &= ~constants.DETAIL_RANDOM"
    },
    {
        "line": 43,
        "fullcodeline": "if old_state == 0 and content.kobo_only_shelves_sync == 1:"
    },
    {
        "line": 44,
        "fullcodeline": "kobo_sync_status.update_on_sync_shelfs(content.id)"
    },
    {
        "line": 46,
        "fullcodeline": "content.default_language = to_save[\"default_language\"]"
    },
    {
        "line": 48,
        "fullcodeline": "content.locale = to_save[\"locale\"]"
    },
    {
        "line": 13,
        "fullcodeline": "flash(_(\"No admin user remaining, can't remove admin role\"), category=\"error\")"
    },
    {
        "line": 14,
        "fullcodeline": "return redirect(url_for('admin.admin'))"
    },
    {
        "line": 27,
        "fullcodeline": "value = element['visibility']"
    },
    {
        "line": 50,
        "fullcodeline": "if to_save.get(\"email\", content.email) != content.email:"
    },
    {
        "line": 53,
        "fullcodeline": "if to_save.get(\"name\", content.name) != content.name:"
    },
    {
        "line": 57,
        "fullcodeline": "if to_save.get(\"kindle_mail\") != content.kindle_mail:"
    },
    {
        "line": 77,
        "fullcodeline": "ub.session.rollback()"
    },
    {
        "line": 79,
        "fullcodeline": "flash(_(u\"An unknown error occurred. Please try again later.\"), category=\"error\")"
    },
    {
        "line": 81,
        "fullcodeline": "ub.session.rollback()"
    },
    {
        "line": 83,
        "fullcodeline": "flash(_(\"Settings DB is not Writeable\"), category=\"error\")"
    },
    {
        "line": 6,
        "fullcodeline": "log.error(ex)"
    },
    {
        "line": 7,
        "fullcodeline": "flash(str(ex), category=\"error\")"
    },
    {
        "line": 12,
        "fullcodeline": "log.warning(\"No admin user remaining, can't remove admin role from {}\".format(content.name))"
    },
    {
        "line": 51,
        "fullcodeline": "content.email = check_email(to_save[\"email\"])"
    },
    {
        "line": 56,
        "fullcodeline": "content.name = check_username(to_save[\"name\"])"
    },
    {
        "line": 58,
        "fullcodeline": "content.kindle_mail = valid_email(to_save[\"kindle_mail\"]) if to_save[\"kindle_mail\"] else \"\""
    },
    {
        "line": 60,
        "fullcodeline": "log.error(ex)"
    },
    {
        "line": 78,
        "fullcodeline": "log.error(\"An unknown error occurred while changing user: {}\".format(str(ex)))"
    },
    {
        "line": 28,
        "fullcodeline": "if value in val and not content.check_visibility(value):"
    },
    {
        "line": 29,
        "fullcodeline": "content.sidebar_view |= value"
    },
    {
        "line": 61,
        "fullcodeline": "flash(str(ex), category=\"error\")"
    },
    {
        "line": 62,
        "fullcodeline": "return render_title_template(\"user_edit.html\","
    },
    {
        "line": 54,
        "fullcodeline": "if to_save.get(\"name\") == \"Guest\":"
    },
    {
        "line": 65,
        "fullcodeline": "mail_configured=config.get_mail_server_configured(),"
    },
    {
        "line": 71,
        "fullcodeline": "title=_(u\"Edit User %(nick)s\", nick=content.name),"
    },
    {
        "line": 30,
        "fullcodeline": "elif value not in val and content.check_visibility(value):"
    },
    {
        "line": 31,
        "fullcodeline": "content.sidebar_view &= ~value"
    },
    {
        "line": 55,
        "fullcodeline": "raise Exception(_(\"Guest Name can't be changed\"))"
    }
]