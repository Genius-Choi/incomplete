[
    {
        "line": 2,
        "fullcodeline": "warning = {}"
    },
    {
        "line": 47,
        "fullcodeline": "message = _(\"You are missing permissions to delete books\")"
    },
    {
        "line": 3,
        "fullcodeline": "if current_user.role_delete_books():"
    },
    {
        "line": 4,
        "fullcodeline": "book = calibre_db.get_book(book_id)"
    },
    {
        "line": 46,
        "fullcodeline": "return render_delete_book_result(book_format, jsonResponse, warning, book_id)"
    },
    {
        "line": 49,
        "fullcodeline": "return json.dumps({\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 55,
        "fullcodeline": "return redirect(url_for('editbook.edit_book', book_id=book_id))"
    },
    {
        "line": 45,
        "fullcodeline": "log.error('Book with id \"%s\" could not be deleted: not found', book_id)"
    },
    {
        "line": 7,
        "fullcodeline": "result, error = helper.delete_book(book, config.config_calibre_dir, book_format=book_format.upper())"
    },
    {
        "line": 8,
        "fullcodeline": "if not result:"
    },
    {
        "line": 25,
        "fullcodeline": "if not book_format:"
    },
    {
        "line": 30,
        "fullcodeline": "calibre_db.session.commit()"
    },
    {
        "line": 26,
        "fullcodeline": "delete_whole_book(book_id, book)"
    },
    {
        "line": 32,
        "fullcodeline": "log.debug_or_exception(ex)"
    },
    {
        "line": 28,
        "fullcodeline": "calibre_db.session.query(db.Data).filter(db.Data.book == book.id).\\"
    },
    {
        "line": 33,
        "fullcodeline": "calibre_db.session.rollback()"
    },
    {
        "line": 15,
        "fullcodeline": "flash(error, category=\"error\")"
    },
    {
        "line": 19,
        "fullcodeline": "warning = {\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 10,
        "fullcodeline": "return json.dumps([{\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 16,
        "fullcodeline": "return redirect(url_for('editbook.edit_book', book_id=book_id))"
    },
    {
        "line": 35,
        "fullcodeline": "return json.dumps([{\"location\": url_for(\"editbook.edit_book\", book_id=book_id),"
    },
    {
        "line": 40,
        "fullcodeline": "flash(str(ex), category=\"error\")"
    },
    {
        "line": 41,
        "fullcodeline": "return redirect(url_for('editbook.edit_book', book_id=book_id))"
    },
    {
        "line": 29,
        "fullcodeline": "filter(db.Data.format == book_format).delete()"
    }
]