[
    {
        "line": 3,
        "fullcodeline": "field_attributes = {:field_format => 'string', :is_for_all => true, :is_filter => true, :trackers => Tracker.all}"
    },
    {
        "line": 4,
        "fullcodeline": "@fields = []"
    },
    {
        "line": 5,
        "fullcodeline": "@fields << (@field1 = IssueCustomField.create!(field_attributes.merge(:name => 'Field 1', :visible => true)))"
    },
    {
        "line": 6,
        "fullcodeline": "@fields << (@field2 = IssueCustomField.create!(field_attributes.merge(:name => 'Field 2', :visible => false, :role_ids => [1, 2])))"
    },
    {
        "line": 7,
        "fullcodeline": "@fields << (@field3 = IssueCustomField.create!(field_attributes.merge(:name => 'Field 3', :visible => false, :role_ids => [1, 3])))"
    },
    {
        "line": 8,
        "fullcodeline": "@issue = Issue.generate!("
    },
    {
        "line": 14,
        "fullcodeline": "@issue.init_journal(User.find(1))"
    },
    {
        "line": 15,
        "fullcodeline": "@issue.update_attribute :custom_field_values, {@field1.id => 'NewValue0', @field2.id => 'NewValue1', @field3.id => 'NewValue2'}"
    },
    {
        "line": 19,
        "fullcodeline": "User.add_to_project(user_with_role_on_other_project, Project.find(2), Role.find(3))"
    },
    {
        "line": 20,
        "fullcodeline": "users_to_test = {"
    },
    {
        "line": 28,
        "fullcodeline": "users_to_test.each do |user, visible_fields|"
    },
    {
        "line": 21,
        "fullcodeline": "User.find(1) => [@field1, @field2, @field3],"
    },
    {
        "line": 22,
        "fullcodeline": "User.find(3) => [@field1, @field2],"
    },
    {
        "line": 23,
        "fullcodeline": "user_with_role_on_other_project => [@field1], # should see field1 only on Project 1"
    },
    {
        "line": 24,
        "fullcodeline": "User.generate! => [@field1],"
    },
    {
        "line": 25,
        "fullcodeline": "User.anonymous => [@field1]"
    },
    {
        "line": 12,
        "fullcodeline": ":custom_field_values => {@field1.id => 'Value0', @field2.id => 'Value1', @field3.id => 'Value2'}"
    }
]