[
    {
        "line": 2,
        "fullcodeline": "debug(D_WEB_CLIENT, \"%llu: API v1 data with URL '%s'\", w->id, url);"
    },
    {
        "line": 4,
        "fullcodeline": "int ret = 400;"
    },
    {
        "line": 5,
        "fullcodeline": "BUFFER *dimensions = NULL;"
    },
    {
        "line": 9,
        "fullcodeline": "char    *google_version = \"0.6\","
    },
    {
        "line": 10,
        "fullcodeline": "*google_reqId = \"0\","
    },
    {
        "line": 11,
        "fullcodeline": "*google_sig = \"0\","
    },
    {
        "line": 12,
        "fullcodeline": "*google_out = \"json\","
    },
    {
        "line": 13,
        "fullcodeline": "*responseHandler = NULL,"
    },
    {
        "line": 14,
        "fullcodeline": "*outFileName = NULL;"
    },
    {
        "line": 16,
        "fullcodeline": "time_t last_timestamp_in_data = 0, google_timestamp = 0;"
    },
    {
        "line": 18,
        "fullcodeline": "char *chart = NULL"
    },
    {
        "line": 19,
        "fullcodeline": ", *before_str = NULL"
    },
    {
        "line": 20,
        "fullcodeline": ", *after_str = NULL"
    },
    {
        "line": 21,
        "fullcodeline": ", *group_time_str = NULL"
    },
    {
        "line": 22,
        "fullcodeline": ", *points_str = NULL;"
    },
    {
        "line": 24,
        "fullcodeline": "int group = RRDR_GROUPING_AVERAGE;"
    },
    {
        "line": 25,
        "fullcodeline": "uint32_t format = DATASOURCE_JSON;"
    },
    {
        "line": 26,
        "fullcodeline": "uint32_t options = 0x00000000;"
    },
    {
        "line": 104,
        "fullcodeline": "RRDSET *st = rrdset_find(host, chart);"
    },
    {
        "line": 112,
        "fullcodeline": "st->last_accessed_time = now_realtime_sec();"
    },
    {
        "line": 114,
        "fullcodeline": "long long before = (before_str && *before_str)?str2l(before_str):0;"
    },
    {
        "line": 115,
        "fullcodeline": "long long after  = (after_str  && *after_str) ?str2l(after_str):0;"
    },
    {
        "line": 116,
        "fullcodeline": "int       points = (points_str && *points_str)?str2i(points_str):0;"
    },
    {
        "line": 117,
        "fullcodeline": "long      group_time = (group_time_str && *group_time_str)?str2l(group_time_str):0;"
    },
    {
        "line": 119,
        "fullcodeline": "debug(D_WEB_CLIENT, \"%llu: API command 'data' for chart '%s', dimensions '%s', after '%lld', before '%lld', points '%d', group '%d', format '%u', options '0x%08x'\""
    },
    {
        "line": 156,
        "fullcodeline": "ret = rrdset2anything_api_v1(st, w->response.data, dimensions, format, points, after, before, group, group_time"
    },
    {
        "line": 175,
        "fullcodeline": "buffer_free(dimensions);"
    },
    {
        "line": 99,
        "fullcodeline": "if(!chart || !*chart) {"
    },
    {
        "line": 105,
        "fullcodeline": "if(!st) st = rrdset_find_byname(host, chart);"
    },
    {
        "line": 106,
        "fullcodeline": "if(!st) {"
    },
    {
        "line": 122,
        "fullcodeline": ", (dimensions)?buffer_tostring(dimensions):\"\""
    },
    {
        "line": 131,
        "fullcodeline": "if(outFileName && *outFileName) {"
    },
    {
        "line": 136,
        "fullcodeline": "if(format == DATASOURCE_DATATABLE_JSONP) {"
    },
    {
        "line": 159,
        "fullcodeline": "if(format == DATASOURCE_DATATABLE_JSONP) {"
    },
    {
        "line": 29,
        "fullcodeline": "char *value = mystrsep(&url, \"?&\");"
    },
    {
        "line": 32,
        "fullcodeline": "char *name = mystrsep(&value, \"=\");"
    },
    {
        "line": 36,
        "fullcodeline": "debug(D_WEB_CLIENT, \"%llu: API v1 data query param '%s' with value '%s'\", w->id, name, value);"
    },
    {
        "line": 100,
        "fullcodeline": "buffer_sprintf(w->response.data, \"No chart id is given at the request.\");"
    },
    {
        "line": 107,
        "fullcodeline": "buffer_strcat(w->response.data, \"Chart is not found: \");"
    },
    {
        "line": 108,
        "fullcodeline": "buffer_strcat_htmlescape(w->response.data, chart);"
    },
    {
        "line": 109,
        "fullcodeline": "ret = 404;"
    },
    {
        "line": 132,
        "fullcodeline": "buffer_sprintf(w->response.header, \"Content-Disposition: attachment; filename=\\\"%s\\\"\\r\\n\", outFileName);"
    },
    {
        "line": 133,
        "fullcodeline": "debug(D_WEB_CLIENT, \"%llu: generating outfilename header: '%s'\", w->id, outFileName);"
    },
    {
        "line": 140,
        "fullcodeline": "debug(D_WEB_CLIENT_ACCESS, \"%llu: GOOGLE JSON/JSONP: version = '%s', reqId = '%s', sig = '%s', out = '%s', responseHandler = '%s', outFileName = '%s'\","
    },
    {
        "line": 144,
        "fullcodeline": "buffer_sprintf(w->response.data,"
    },
    {
        "line": 30,
        "fullcodeline": "if(!value || !*value) continue;"
    },
    {
        "line": 33,
        "fullcodeline": "if(!name || !*name) continue;"
    },
    {
        "line": 34,
        "fullcodeline": "if(!value || !*value) continue;"
    },
    {
        "line": 41,
        "fullcodeline": "if(!strcmp(name, \"chart\")) chart = value;"
    },
    {
        "line": 137,
        "fullcodeline": "if(responseHandler == NULL)"
    },
    {
        "line": 160,
        "fullcodeline": "if(google_timestamp < last_timestamp_in_data)"
    },
    {
        "line": 138,
        "fullcodeline": "responseHandler = \"google.visualization.Query.setResponse\";"
    },
    {
        "line": 148,
        "fullcodeline": "else if(format == DATASOURCE_JSONP) {"
    },
    {
        "line": 161,
        "fullcodeline": "buffer_strcat(w->response.data, \"});\");"
    },
    {
        "line": 171,
        "fullcodeline": "else if(format == DATASOURCE_JSONP)"
    },
    {
        "line": 152,
        "fullcodeline": "buffer_strcat(w->response.data, responseHandler);"
    },
    {
        "line": 153,
        "fullcodeline": "buffer_strcat(w->response.data, \"(\");"
    },
    {
        "line": 165,
        "fullcodeline": "buffer_flush(w->response.data);"
    },
    {
        "line": 166,
        "fullcodeline": "buffer_sprintf(w->response.data,"
    },
    {
        "line": 172,
        "fullcodeline": "buffer_strcat(w->response.data, \");\");"
    },
    {
        "line": 42,
        "fullcodeline": "else if(!strcmp(name, \"dimension\") || !strcmp(name, \"dim\") || !strcmp(name, \"dimensions\") || !strcmp(name, \"dims\")) {"
    },
    {
        "line": 149,
        "fullcodeline": "if(responseHandler == NULL)"
    },
    {
        "line": 44,
        "fullcodeline": "buffer_strcat(dimensions, \"|\");"
    },
    {
        "line": 45,
        "fullcodeline": "buffer_strcat(dimensions, value);"
    },
    {
        "line": 150,
        "fullcodeline": "responseHandler = \"callback\";"
    },
    {
        "line": 43,
        "fullcodeline": "if(!dimensions) dimensions = buffer_create(100);"
    },
    {
        "line": 47,
        "fullcodeline": "else if(!strcmp(name, \"after\")) after_str = value;"
    },
    {
        "line": 48,
        "fullcodeline": "else if(!strcmp(name, \"before\")) before_str = value;"
    },
    {
        "line": 49,
        "fullcodeline": "else if(!strcmp(name, \"points\")) points_str = value;"
    },
    {
        "line": 50,
        "fullcodeline": "else if(!strcmp(name, \"gtime\")) group_time_str = value;"
    },
    {
        "line": 51,
        "fullcodeline": "else if(!strcmp(name, \"group\")) {"
    },
    {
        "line": 52,
        "fullcodeline": "group = web_client_api_request_v1_data_group(value, RRDR_GROUPING_AVERAGE);"
    },
    {
        "line": 54,
        "fullcodeline": "else if(!strcmp(name, \"format\")) {"
    },
    {
        "line": 55,
        "fullcodeline": "format = web_client_api_request_v1_data_format(value);"
    },
    {
        "line": 57,
        "fullcodeline": "else if(!strcmp(name, \"options\")) {"
    },
    {
        "line": 58,
        "fullcodeline": "options |= web_client_api_request_v1_data_options(value);"
    },
    {
        "line": 60,
        "fullcodeline": "else if(!strcmp(name, \"callback\")) {"
    },
    {
        "line": 61,
        "fullcodeline": "responseHandler = value;"
    },
    {
        "line": 63,
        "fullcodeline": "else if(!strcmp(name, \"filename\")) {"
    },
    {
        "line": 64,
        "fullcodeline": "outFileName = value;"
    },
    {
        "line": 66,
        "fullcodeline": "else if(!strcmp(name, \"tqx\")) {"
    },
    {
        "line": 72,
        "fullcodeline": "tqx_value = mystrsep(&value, \";\");"
    },
    {
        "line": 75,
        "fullcodeline": "tqx_name = mystrsep(&tqx_value, \":\");"
    },
    {
        "line": 73,
        "fullcodeline": "if(!tqx_value || !*tqx_value) continue;"
    },
    {
        "line": 76,
        "fullcodeline": "if(!tqx_name || !*tqx_name) continue;"
    },
    {
        "line": 77,
        "fullcodeline": "if(!tqx_value || !*tqx_value) continue;"
    },
    {
        "line": 79,
        "fullcodeline": "if(!strcmp(tqx_name, \"version\"))"
    },
    {
        "line": 80,
        "fullcodeline": "google_version = tqx_value;"
    },
    {
        "line": 81,
        "fullcodeline": "else if(!strcmp(tqx_name, \"reqId\"))"
    },
    {
        "line": 82,
        "fullcodeline": "google_reqId = tqx_value;"
    },
    {
        "line": 83,
        "fullcodeline": "else if(!strcmp(tqx_name, \"sig\")) {"
    },
    {
        "line": 84,
        "fullcodeline": "google_sig = tqx_value;"
    },
    {
        "line": 85,
        "fullcodeline": "google_timestamp = strtoul(google_sig, NULL, 0);"
    },
    {
        "line": 87,
        "fullcodeline": "else if(!strcmp(tqx_name, \"out\")) {"
    },
    {
        "line": 88,
        "fullcodeline": "google_out = tqx_value;"
    },
    {
        "line": 89,
        "fullcodeline": "format = web_client_api_request_v1_data_google_format(google_out);"
    },
    {
        "line": 91,
        "fullcodeline": "else if(!strcmp(tqx_name, \"responseHandler\"))"
    },
    {
        "line": 92,
        "fullcodeline": "responseHandler = tqx_value;"
    },
    {
        "line": 93,
        "fullcodeline": "else if(!strcmp(tqx_name, \"outFileName\"))"
    },
    {
        "line": 94,
        "fullcodeline": "outFileName = tqx_value;"
    }
]