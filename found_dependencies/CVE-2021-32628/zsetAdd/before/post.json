[
    {
        "line": 3,
        "fullcodeline": "int incr = (*flags & ZADD_INCR) != 0;"
    },
    {
        "line": 4,
        "fullcodeline": "int nx = (*flags & ZADD_NX) != 0;"
    },
    {
        "line": 5,
        "fullcodeline": "int xx = (*flags & ZADD_XX) != 0;"
    },
    {
        "line": 6,
        "fullcodeline": "*flags = 0; /* We'll return our response flags. */"
    },
    {
        "line": 10,
        "fullcodeline": "if (isnan(score)) {"
    },
    {
        "line": 16,
        "fullcodeline": "if (zobj->encoding == OBJ_ENCODING_ZIPLIST) {"
    },
    {
        "line": 11,
        "fullcodeline": "*flags = ZADD_NAN;"
    },
    {
        "line": 19,
        "fullcodeline": "if ((eptr = zzlFind(zobj->ptr,ele,&curscore)) != NULL) {"
    },
    {
        "line": 57,
        "fullcodeline": "} else if (zobj->encoding == OBJ_ENCODING_SKIPLIST) {"
    },
    {
        "line": 37,
        "fullcodeline": "if (score != curscore) {"
    },
    {
        "line": 58,
        "fullcodeline": "zset *zs = zobj->ptr;"
    },
    {
        "line": 62,
        "fullcodeline": "de = dictFind(zs->dict,ele);"
    },
    {
        "line": 22,
        "fullcodeline": "*flags |= ZADD_NOP;"
    },
    {
        "line": 28,
        "fullcodeline": "score += curscore;"
    },
    {
        "line": 38,
        "fullcodeline": "zobj->ptr = zzlDelete(zobj->ptr,eptr);"
    },
    {
        "line": 39,
        "fullcodeline": "zobj->ptr = zzlInsert(zobj->ptr,ele,score);"
    },
    {
        "line": 40,
        "fullcodeline": "*flags |= ZADD_UPDATED;"
    },
    {
        "line": 43,
        "fullcodeline": "} else if (!xx) {"
    },
    {
        "line": 63,
        "fullcodeline": "if (de != NULL) {"
    },
    {
        "line": 103,
        "fullcodeline": "serverPanic(\"Unknown sorted set encoding\");"
    },
    {
        "line": 29,
        "fullcodeline": "if (isnan(score)) {"
    },
    {
        "line": 46,
        "fullcodeline": "zobj->ptr = zzlInsert(zobj->ptr,ele,score);"
    },
    {
        "line": 51,
        "fullcodeline": "*flags |= ZADD_ADDED;"
    },
    {
        "line": 30,
        "fullcodeline": "*flags |= ZADD_NAN;"
    },
    {
        "line": 33,
        "fullcodeline": "if (newscore) *newscore = score;"
    },
    {
        "line": 47,
        "fullcodeline": "if (zzlLength(zobj->ptr) > server.zset_max_ziplist_entries ||"
    },
    {
        "line": 54,
        "fullcodeline": "*flags |= ZADD_NOP;"
    },
    {
        "line": 82,
        "fullcodeline": "if (score != curscore) {"
    },
    {
        "line": 48,
        "fullcodeline": "sdslen(ele) > server.zset_max_ziplist_value)"
    },
    {
        "line": 49,
        "fullcodeline": "zsetConvert(zobj,OBJ_ENCODING_SKIPLIST);"
    },
    {
        "line": 50,
        "fullcodeline": "if (newscore) *newscore = score;"
    },
    {
        "line": 66,
        "fullcodeline": "*flags |= ZADD_NOP;"
    },
    {
        "line": 69,
        "fullcodeline": "curscore = *(double*)dictGetVal(de);"
    },
    {
        "line": 73,
        "fullcodeline": "score += curscore;"
    },
    {
        "line": 83,
        "fullcodeline": "znode = zslUpdateScore(zs->zsl,curscore,ele,score);"
    },
    {
        "line": 87,
        "fullcodeline": "dictGetVal(de) = &znode->score; /* Update score ptr. */"
    },
    {
        "line": 88,
        "fullcodeline": "*flags |= ZADD_UPDATED;"
    },
    {
        "line": 91,
        "fullcodeline": "} else if (!xx) {"
    },
    {
        "line": 74,
        "fullcodeline": "if (isnan(score)) {"
    },
    {
        "line": 92,
        "fullcodeline": "ele = sdsdup(ele);"
    },
    {
        "line": 93,
        "fullcodeline": "znode = zslInsert(zs->zsl,score,ele);"
    },
    {
        "line": 94,
        "fullcodeline": "serverAssert(dictAdd(zs->dict,ele,&znode->score) == DICT_OK);"
    },
    {
        "line": 95,
        "fullcodeline": "*flags |= ZADD_ADDED;"
    },
    {
        "line": 75,
        "fullcodeline": "*flags |= ZADD_NAN;"
    },
    {
        "line": 78,
        "fullcodeline": "if (newscore) *newscore = score;"
    },
    {
        "line": 99,
        "fullcodeline": "*flags |= ZADD_NOP;"
    },
    {
        "line": 96,
        "fullcodeline": "if (newscore) *newscore = score;"
    }
]