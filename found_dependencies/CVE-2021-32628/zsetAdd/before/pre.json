[
    {
        "line": 3,
        "fullcodeline": "int incr = (*flags & ZADD_INCR) != 0;"
    },
    {
        "line": 4,
        "fullcodeline": "int nx = (*flags & ZADD_NX) != 0;"
    },
    {
        "line": 5,
        "fullcodeline": "int xx = (*flags & ZADD_XX) != 0;"
    },
    {
        "line": 6,
        "fullcodeline": "*flags = 0; /* We'll return our response flags. */"
    },
    {
        "line": 10,
        "fullcodeline": "if (isnan(score)) {"
    },
    {
        "line": 16,
        "fullcodeline": "if (zobj->encoding == OBJ_ENCODING_ZIPLIST) {"
    },
    {
        "line": 11,
        "fullcodeline": "*flags = ZADD_NAN;"
    },
    {
        "line": 19,
        "fullcodeline": "if ((eptr = zzlFind(zobj->ptr,ele,&curscore)) != NULL) {"
    },
    {
        "line": 37,
        "fullcodeline": "if (score != curscore) {"
    },
    {
        "line": 58,
        "fullcodeline": "zset *zs = zobj->ptr;"
    },
    {
        "line": 62,
        "fullcodeline": "de = dictFind(zs->dict,ele);"
    },
    {
        "line": 28,
        "fullcodeline": "score += curscore;"
    },
    {
        "line": 38,
        "fullcodeline": "zobj->ptr = zzlDelete(zobj->ptr,eptr);"
    },
    {
        "line": 63,
        "fullcodeline": "if (de != NULL) {"
    },
    {
        "line": 29,
        "fullcodeline": "if (isnan(score)) {"
    },
    {
        "line": 39,
        "fullcodeline": "zobj->ptr = zzlInsert(zobj->ptr,ele,score);"
    },
    {
        "line": 46,
        "fullcodeline": "zobj->ptr = zzlInsert(zobj->ptr,ele,score);"
    },
    {
        "line": 69,
        "fullcodeline": "curscore = *(double*)dictGetVal(de);"
    },
    {
        "line": 82,
        "fullcodeline": "if (score != curscore) {"
    },
    {
        "line": 47,
        "fullcodeline": "if (zzlLength(zobj->ptr) > server.zset_max_ziplist_entries ||"
    },
    {
        "line": 48,
        "fullcodeline": "sdslen(ele) > server.zset_max_ziplist_value)"
    },
    {
        "line": 73,
        "fullcodeline": "score += curscore;"
    },
    {
        "line": 83,
        "fullcodeline": "znode = zslUpdateScore(zs->zsl,curscore,ele,score);"
    },
    {
        "line": 87,
        "fullcodeline": "dictGetVal(de) = &znode->score; /* Update score ptr. */"
    },
    {
        "line": 74,
        "fullcodeline": "if (isnan(score)) {"
    },
    {
        "line": 92,
        "fullcodeline": "ele = sdsdup(ele);"
    },
    {
        "line": 93,
        "fullcodeline": "znode = zslInsert(zs->zsl,score,ele);"
    },
    {
        "line": 94,
        "fullcodeline": "serverAssert(dictAdd(zs->dict,ele,&znode->score) == DICT_OK);"
    }
]