[
    {
        "line": 2,
        "fullcodeline": "cc = calibre_db.session.query(db.CustomColumns).filter(db.CustomColumns.datatype.notin_(db.cc_exceptions)).all()"
    },
    {
        "line": 3,
        "fullcodeline": "book = calibre_db.get_filtered_book(book_id, allow_show_archived=True)"
    },
    {
        "line": 12,
        "fullcodeline": "book.authors = calibre_db.order_authors([book])"
    },
    {
        "line": 14,
        "fullcodeline": "author_names = []"
    },
    {
        "line": 19,
        "fullcodeline": "valid_source_formats = list()"
    },
    {
        "line": 20,
        "fullcodeline": "allowed_conversion_formats = list()"
    },
    {
        "line": 21,
        "fullcodeline": "kepub_possible = None"
    },
    {
        "line": 4,
        "fullcodeline": "if not book:"
    },
    {
        "line": 9,
        "fullcodeline": "for lang in book.languages:"
    },
    {
        "line": 15,
        "fullcodeline": "for authr in book.authors:"
    },
    {
        "line": 26,
        "fullcodeline": "if config.config_kepubifypath and 'epub' in [file.format.lower() for file in book.data]:"
    },
    {
        "line": 39,
        "fullcodeline": "return render_title_template('book_edit.html', book=book, authors=author_names, cc=cc,"
    },
    {
        "line": 5,
        "fullcodeline": "flash(_(u\"Oops! Selected book title is unavailable. File does not exist or is not accessible\"),"
    },
    {
        "line": 27,
        "fullcodeline": "kepub_possible = True"
    },
    {
        "line": 33,
        "fullcodeline": "allowed_conversion_formats = constants.EXTENSIONS_CONVERT_TO[:]"
    },
    {
        "line": 38,
        "fullcodeline": "allowed_conversion_formats.append('kepub')"
    },
    {
        "line": 40,
        "fullcodeline": "title=_(u\"edit metadata\"), page=\"editbook\","
    },
    {
        "line": 7,
        "fullcodeline": "return redirect(url_for(\"web.index\"))"
    },
    {
        "line": 10,
        "fullcodeline": "lang.language_name = isoLanguages.get_language_name(get_locale(), lang.lang_code)"
    },
    {
        "line": 16,
        "fullcodeline": "author_names.append(authr.name.replace('|', ','))"
    },
    {
        "line": 23,
        "fullcodeline": "for file in book.data:"
    },
    {
        "line": 34,
        "fullcodeline": "for file in book.data:"
    },
    {
        "line": 29,
        "fullcodeline": "valid_source_formats.append('epub')"
    },
    {
        "line": 24,
        "fullcodeline": "if file.format.lower() in constants.EXTENSIONS_CONVERT_FROM:"
    },
    {
        "line": 35,
        "fullcodeline": "if file.format.lower() in allowed_conversion_formats:"
    },
    {
        "line": 25,
        "fullcodeline": "valid_source_formats.append(file.format.lower())"
    },
    {
        "line": 36,
        "fullcodeline": "allowed_conversion_formats.remove(file.format.lower())"
    }
]