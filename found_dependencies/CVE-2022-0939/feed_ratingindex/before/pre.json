[
    {
        "line": 2,
        "fullcodeline": "off = request.args.get(\"offset\") or 0"
    },
    {
        "line": 3,
        "fullcodeline": "entries = calibre_db.session.query(db.Ratings, func.count('books_ratings_link.book').label('count'),"
    },
    {
        "line": 11,
        "fullcodeline": "pagination = Pagination((int(off) / (int(config.config_books_per_page)) + 1), config.config_books_per_page,"
    },
    {
        "line": 13,
        "fullcodeline": "element = list()"
    },
    {
        "line": 14,
        "fullcodeline": "for entry in entries:"
    },
    {
        "line": 16,
        "fullcodeline": "return render_xml_template('feed.xml', listelements=element, folder='opds.feed_ratings', pagination=pagination)"
    },
    {
        "line": 12,
        "fullcodeline": "len(entries))"
    },
    {
        "line": 15,
        "fullcodeline": "element.append(FeedObject(entry[0].id, _(\"{} Stars\").format(entry.name)))"
    },
    {
        "line": 8,
        "fullcodeline": ".group_by(text('books_ratings_link.rating'))\\"
    },
    {
        "line": 7,
        "fullcodeline": ".filter(calibre_db.common_filters()) \\"
    },
    {
        "line": 4,
        "fullcodeline": "(db.Ratings.rating / 2).label('name')) \\"
    }
]