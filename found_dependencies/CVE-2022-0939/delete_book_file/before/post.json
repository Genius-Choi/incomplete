[
    {
        "line": 34,
        "fullcodeline": "log.error(\"Deleting book %s from database only, book path in database not valid: %s\","
    },
    {
        "line": 3,
        "fullcodeline": "if book.path.count('/') == 1:"
    },
    {
        "line": 36,
        "fullcodeline": "return True, _(\"Deleting book %(id)s from database only, book path in database not valid: %(path)s\","
    },
    {
        "line": 4,
        "fullcodeline": "path = os.path.join(calibrepath, book.path)"
    },
    {
        "line": 6,
        "fullcodeline": "for file in os.listdir(path):"
    },
    {
        "line": 9,
        "fullcodeline": "return True, None"
    },
    {
        "line": 11,
        "fullcodeline": "if os.path.isdir(path):"
    },
    {
        "line": 26,
        "fullcodeline": "authorpath = os.path.join(calibrepath, os.path.split(book.path)[0])"
    },
    {
        "line": 27,
        "fullcodeline": "if not os.listdir(authorpath):"
    },
    {
        "line": 32,
        "fullcodeline": "return True, None"
    },
    {
        "line": 22,
        "fullcodeline": "shutil.rmtree(path)"
    },
    {
        "line": 7,
        "fullcodeline": "if file.upper().endswith(\".\"+book_format):"
    },
    {
        "line": 8,
        "fullcodeline": "os.remove(os.path.join(path, file))"
    },
    {
        "line": 13,
        "fullcodeline": "for root, folders, files in os.walk(path):"
    },
    {
        "line": 24,
        "fullcodeline": "log.error(\"Deleting book %s failed: %s\", book.id, e)"
    },
    {
        "line": 29,
        "fullcodeline": "shutil.rmtree(authorpath)"
    },
    {
        "line": 25,
        "fullcodeline": "return False, _(\"Deleting book %(id)s failed: %(message)s\", id=book.id, message=e)"
    },
    {
        "line": 14,
        "fullcodeline": "for f in files:"
    },
    {
        "line": 16,
        "fullcodeline": "if len(folders):"
    },
    {
        "line": 31,
        "fullcodeline": "log.error(\"Deleting authorpath for book %s failed: %s\", book.id, e)"
    },
    {
        "line": 17,
        "fullcodeline": "log.warning(\"Deleting book {} failed, path {} has subfolders: {}\".format(book.id,"
    },
    {
        "line": 15,
        "fullcodeline": "os.unlink(os.path.join(root, f))"
    },
    {
        "line": 19,
        "fullcodeline": "return True, _(\"Deleting bookfolder for book %(id)s failed, path has subfolders: %(path)s\","
    }
]