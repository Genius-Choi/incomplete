[
    {
        "line": 2,
        "fullcodeline": "cover_section = tree.xpath(\"/pkg:package/pkg:manifest/pkg:item[@id='cover-image']/@href\", namespaces=ns)"
    },
    {
        "line": 3,
        "fullcodeline": "cover_file = None"
    },
    {
        "line": 4,
        "fullcodeline": "if len(cover_section) > 0:"
    },
    {
        "line": 5,
        "fullcodeline": "cover_file = _extract_cover(epub_zip, cover_section[0], cover_path, tmp_file_path)"
    },
    {
        "line": 7,
        "fullcodeline": "meta_cover = tree.xpath(\"/pkg:package/pkg:metadata/pkg:meta[@name='cover']/@content\", namespaces=ns)"
    },
    {
        "line": 8,
        "fullcodeline": "if len(meta_cover) > 0:"
    },
    {
        "line": 16,
        "fullcodeline": "for cs in cover_section:"
    },
    {
        "line": 9,
        "fullcodeline": "cover_section = tree.xpath("
    },
    {
        "line": 15,
        "fullcodeline": "cover_section = tree.xpath(\"/pkg:package/pkg:guide/pkg:reference/@href\", namespaces=ns)"
    },
    {
        "line": 11,
        "fullcodeline": "if not cover_section:"
    },
    {
        "line": 17,
        "fullcodeline": "filetype = cs.rsplit('.', 1)[-1]"
    },
    {
        "line": 10,
        "fullcodeline": "\"/pkg:package/pkg:manifest/pkg:item[@id='\"+meta_cover[0]+\"']/@href\", namespaces=ns)"
    },
    {
        "line": 12,
        "fullcodeline": "cover_section = tree.xpath("
    },
    {
        "line": 18,
        "fullcodeline": "if filetype == \"xhtml\" or filetype == \"html\":  # if cover is (x)html format"
    },
    {
        "line": 19,
        "fullcodeline": "markup = epub_zip.read(os.path.join(cover_path, cs))"
    },
    {
        "line": 20,
        "fullcodeline": "markup_tree = etree.fromstring(markup)"
    },
    {
        "line": 22,
        "fullcodeline": "img_src = markup_tree.xpath(\"//*[local-name() = 'img']/@src\")"
    },
    {
        "line": 32,
        "fullcodeline": "cover_file = _extract_cover(epub_zip, cs, cover_path, tmp_file_path)"
    },
    {
        "line": 13,
        "fullcodeline": "\"/pkg:package/pkg:manifest/pkg:item[@properties='\" + meta_cover[0] + \"']/@href\", namespaces=ns)"
    },
    {
        "line": 24,
        "fullcodeline": "if not len(img_src):"
    },
    {
        "line": 26,
        "fullcodeline": "if len(img_src):"
    },
    {
        "line": 25,
        "fullcodeline": "img_src = markup_tree.xpath(\"//attribute::*[contains(local-name(), 'href')]\")"
    },
    {
        "line": 28,
        "fullcodeline": "filename = os.path.relpath(os.path.join(os.path.dirname(os.path.join(cover_path, cover_section[0])),"
    },
    {
        "line": 30,
        "fullcodeline": "cover_file = _extract_cover(epub_zip, filename, \"\", tmp_file_path)"
    }
]