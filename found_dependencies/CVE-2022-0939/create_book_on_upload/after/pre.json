[
    {
        "line": 2,
        "fullcodeline": "title = meta.title"
    },
    {
        "line": 3,
        "fullcodeline": "authr = meta.author"
    },
    {
        "line": 6,
        "fullcodeline": "title_dir = helper.get_valid_filename(title, chars=96)"
    },
    {
        "line": 7,
        "fullcodeline": "author_dir = helper.get_valid_filename(db_author.name, chars=96)"
    },
    {
        "line": 10,
        "fullcodeline": "path = os.path.join(author_dir, title_dir).replace('\\\\', '/')"
    },
    {
        "line": 13,
        "fullcodeline": "db_book = db.Books(title, \"\", sort_authors, datetime.utcnow(), datetime(101, 1, 1),"
    },
    {
        "line": 16,
        "fullcodeline": "modify_date |= modify_database_object(input_authors, db_book.authors, db.Authors, calibre_db.session,"
    },
    {
        "line": 20,
        "fullcodeline": "modify_date |= edit_book_series_index(meta.series_id, db_book)"
    },
    {
        "line": 23,
        "fullcodeline": "invalid = []"
    },
    {
        "line": 24,
        "fullcodeline": "modify_date |= edit_book_languages(meta.languages, db_book, upload_mode=True, invalid=invalid)"
    },
    {
        "line": 30,
        "fullcodeline": "modify_date |= edit_book_tags(meta.tags, db_book)"
    },
    {
        "line": 33,
        "fullcodeline": "modify_date |= edit_book_publisher(meta.publisher, db_book)"
    },
    {
        "line": 36,
        "fullcodeline": "modify_date |= edit_book_series(meta.series, db_book)"
    },
    {
        "line": 39,
        "fullcodeline": "file_size = os.path.getsize(meta.file_path)"
    },
    {
        "line": 40,
        "fullcodeline": "db_data = db.Data(db_book, meta.extension.upper()[1:], file_size, title_dir)"
    },
    {
        "line": 4,
        "fullcodeline": "sort_authors, input_authors, db_author, renamed_authors = prepare_authors_on_upload(title, authr)"
    },
    {
        "line": 41,
        "fullcodeline": "db_book.data.append(db_data)"
    },
    {
        "line": 42,
        "fullcodeline": "calibre_db.session.add(db_book)"
    },
    {
        "line": 45,
        "fullcodeline": "calibre_db.session.flush()"
    },
    {
        "line": 46,
        "fullcodeline": "return db_book, input_authors, title_dir, renamed_authors"
    },
    {
        "line": 14,
        "fullcodeline": "'1', datetime.utcnow(), path, meta.cover, db_author, [], \"\")"
    },
    {
        "line": 26,
        "fullcodeline": "for lang in invalid:"
    },
    {
        "line": 27,
        "fullcodeline": "flash(_(u\"'%(langname)s' is not a valid language\", langname=lang), category=\"warning\")"
    }
]