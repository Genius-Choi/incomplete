[
    {
        "line": 2,
        "fullcodeline": "to_save = request.form.to_dict()"
    },
    {
        "line": 3,
        "fullcodeline": "current_user.random_books = 0"
    },
    {
        "line": 42,
        "fullcodeline": "val = 0"
    },
    {
        "line": 46,
        "fullcodeline": "current_user.sidebar_view = val"
    },
    {
        "line": 4,
        "fullcodeline": "if current_user.role_passwd() or current_user.role_admin():"
    },
    {
        "line": 43,
        "fullcodeline": "for key, __ in to_save.items():"
    },
    {
        "line": 47,
        "fullcodeline": "if to_save.get(\"Show_detail_random\"):"
    },
    {
        "line": 16,
        "fullcodeline": "current_user.random_books = 1 if to_save.get(\"show_random\") == \"on\" else 0"
    },
    {
        "line": 21,
        "fullcodeline": "old_state = current_user.kobo_only_shelves_sync"
    },
    {
        "line": 25,
        "fullcodeline": "current_user.kobo_only_shelves_sync = int(to_save.get(\"kobo_only_shelves_sync\") == \"on\") or 0"
    },
    {
        "line": 48,
        "fullcodeline": "current_user.sidebar_view += constants.DETAIL_RANDOM"
    },
    {
        "line": 52,
        "fullcodeline": "flash(_(u\"Profile updated\"), category=\"success\")"
    },
    {
        "line": 53,
        "fullcodeline": "log.debug(u\"Profile updated\")"
    },
    {
        "line": 5,
        "fullcodeline": "if to_save.get(\"password\"):"
    },
    {
        "line": 8,
        "fullcodeline": "if to_save.get(\"kindle_mail\", current_user.kindle_mail) != current_user.kindle_mail:"
    },
    {
        "line": 10,
        "fullcodeline": "if to_save.get(\"email\", current_user.email) != current_user.email:"
    },
    {
        "line": 12,
        "fullcodeline": "if current_user.role_admin():"
    },
    {
        "line": 17,
        "fullcodeline": "if to_save.get(\"default_language\"):"
    },
    {
        "line": 19,
        "fullcodeline": "if to_save.get(\"locale\"):"
    },
    {
        "line": 26,
        "fullcodeline": "if old_state == 0 and current_user.kobo_only_shelves_sync == 1:"
    },
    {
        "line": 51,
        "fullcodeline": "ub.session.commit()"
    },
    {
        "line": 6,
        "fullcodeline": "current_user.password = generate_password_hash(to_save[\"password\"])"
    },
    {
        "line": 9,
        "fullcodeline": "current_user.kindle_mail = valid_email(to_save[\"kindle_mail\"])"
    },
    {
        "line": 11,
        "fullcodeline": "current_user.email = check_email(to_save[\"email\"])"
    },
    {
        "line": 18,
        "fullcodeline": "current_user.default_language = to_save[\"default_language\"]"
    },
    {
        "line": 20,
        "fullcodeline": "current_user.locale = to_save[\"locale\"]"
    },
    {
        "line": 27,
        "fullcodeline": "kobo_sync_status.update_on_sync_shelfs(current_user.id)"
    },
    {
        "line": 30,
        "fullcodeline": "flash(str(ex), category=\"error\")"
    },
    {
        "line": 44,
        "fullcodeline": "if key.startswith('show'):"
    },
    {
        "line": 56,
        "fullcodeline": "flash(_(u\"Found an existing account for this e-mail address\"), category=\"error\")"
    },
    {
        "line": 57,
        "fullcodeline": "log.debug(u\"Found an existing account for this e-mail address\")"
    },
    {
        "line": 60,
        "fullcodeline": "log.error(\"Database error: %s\", e)"
    },
    {
        "line": 61,
        "fullcodeline": "flash(_(u\"Database error: %(error)s.\", error=e), category=\"error\")"
    },
    {
        "line": 13,
        "fullcodeline": "if to_save.get(\"name\", current_user.name) != current_user.name:"
    },
    {
        "line": 31,
        "fullcodeline": "return render_title_template(\"user_edit.html\","
    },
    {
        "line": 45,
        "fullcodeline": "val += int(key[5:])"
    },
    {
        "line": 55,
        "fullcodeline": "ub.session.rollback()"
    },
    {
        "line": 59,
        "fullcodeline": "ub.session.rollback()"
    },
    {
        "line": 15,
        "fullcodeline": "current_user.name = check_username(to_save[\"name\"])"
    },
    {
        "line": 36,
        "fullcodeline": "title=_(u\"%(name)s's profile\", name=current_user.name),"
    }
]