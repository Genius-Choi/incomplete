[
    {
        "line": 4,
        "fullcodeline": "user = topic.user ? \"#{topic.user.username} (#{topic.user.name})\" : \"(deleted user)\""
    },
    {
        "line": 6,
        "fullcodeline": "details = ["
    },
    {
        "line": 1,
        "fullcodeline": "def log_topic_delete_recover(topic, action = \"delete_topic\", opts = {})"
    },
    {
        "line": 2,
        "fullcodeline": "raise Discourse::InvalidParameters.new(:topic) unless topic && topic.is_a?(Topic)"
    },
    {
        "line": 17,
        "fullcodeline": "UserHistory.create!("
    },
    {
        "line": 7,
        "fullcodeline": "\"id: #{topic.id}\","
    },
    {
        "line": 8,
        "fullcodeline": "\"created_at: #{topic.created_at}\","
    },
    {
        "line": 9,
        "fullcodeline": "\"user: #{user}\","
    },
    {
        "line": 10,
        "fullcodeline": "\"title: #{topic.title}\","
    },
    {
        "line": 14,
        "fullcodeline": "details << \"raw: #{truncate(first_post.raw)}\""
    },
    {
        "line": 18,
        "fullcodeline": "params(opts).merge("
    },
    {
        "line": 21,
        "fullcodeline": "details: details.join(\"\\n\"),"
    },
    {
        "line": 13,
        "fullcodeline": "if first_post = topic.ordered_posts.with_deleted.first"
    }
]