[
    {
        "line": 6,
        "fullcodeline": "topic = deleted_post.topic || Topic.with_deleted.find_by(id: deleted_post.topic_id)"
    },
    {
        "line": 8,
        "fullcodeline": "username = deleted_post.user.try(:username) || I18n.t(\"staff_action_logs.unknown\")"
    },
    {
        "line": 9,
        "fullcodeline": "name = deleted_post.user.try(:name) || I18n.t(\"staff_action_logs.unknown\")"
    },
    {
        "line": 10,
        "fullcodeline": "topic_title = topic.try(:title) || I18n.t(\"staff_action_logs.not_found\")"
    },
    {
        "line": 12,
        "fullcodeline": "details = ["
    },
    {
        "line": 1,
        "fullcodeline": "def log_post_deletion(deleted_post, opts = {})"
    },
    {
        "line": 2,
        "fullcodeline": "unless deleted_post && deleted_post.is_a?(Post)"
    },
    {
        "line": 21,
        "fullcodeline": "UserHistory.create!("
    },
    {
        "line": 13,
        "fullcodeline": "\"id: #{deleted_post.id}\","
    },
    {
        "line": 14,
        "fullcodeline": "\"created_at: #{deleted_post.created_at}\","
    },
    {
        "line": 15,
        "fullcodeline": "\"user: #{username} (#{name})\","
    },
    {
        "line": 16,
        "fullcodeline": "\"topic: #{topic_title}\","
    },
    {
        "line": 17,
        "fullcodeline": "\"post_number: #{deleted_post.post_number}\","
    },
    {
        "line": 18,
        "fullcodeline": "\"raw: #{deleted_post.raw}\","
    },
    {
        "line": 22,
        "fullcodeline": "params(opts).merge("
    },
    {
        "line": 25,
        "fullcodeline": "details: details.join(\"\\n\"),"
    },
    {
        "line": 3,
        "fullcodeline": "raise Discourse::InvalidParameters.new(:deleted_post)"
    }
]