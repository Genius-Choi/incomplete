[
    {
        "line": 14,
        "fullcodeline": "body = response.body"
    },
    {
        "line": 26,
        "fullcodeline": "os.write(fd, body)"
    },
    {
        "line": 27,
        "fullcodeline": "os.close(fd)"
    },
    {
        "line": 11,
        "fullcodeline": "from scrapy.http import HtmlResponse, TextResponse"
    },
    {
        "line": 15,
        "fullcodeline": "if isinstance(response, HtmlResponse):"
    },
    {
        "line": 25,
        "fullcodeline": "fd, fname = tempfile.mkstemp(ext)"
    },
    {
        "line": 28,
        "fullcodeline": "return _openfunc(f\"file://{fname}\")"
    },
    {
        "line": 20,
        "fullcodeline": "ext = \".html\""
    },
    {
        "line": 16,
        "fullcodeline": "if b\"<base\" not in body:"
    },
    {
        "line": 21,
        "fullcodeline": "elif isinstance(response, TextResponse):"
    },
    {
        "line": 17,
        "fullcodeline": "repl = rf'\\1<base href=\"{response.url}\">'"
    },
    {
        "line": 18,
        "fullcodeline": "body = re.sub(b\"<!--.*?-->\", b\"\", body, flags=re.DOTALL)"
    },
    {
        "line": 19,
        "fullcodeline": "body = re.sub(rb\"(<head(?:>|\\s.*?>))\", to_bytes(repl), body)"
    },
    {
        "line": 22,
        "fullcodeline": "ext = \".txt\""
    },
    {
        "line": 24,
        "fullcodeline": "raise TypeError(\"Unsupported response type: \" f\"{response.__class__.__name__}\")"
    }
]