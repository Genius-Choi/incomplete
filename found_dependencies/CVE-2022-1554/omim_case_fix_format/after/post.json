[
    {
        "line": 3,
        "fullcodeline": "client = MongoClient(db_uri)"
    },
    {
        "line": 4,
        "fullcodeline": "db = client[db_name]"
    },
    {
        "line": 6,
        "fullcodeline": "click.echo(\"database connection info:{}\".format(db))"
    },
    {
        "line": 8,
        "fullcodeline": "cases_with_dia = list(db.case.find(CASES_WITH_DIA, SELECT_FIELDS))"
    },
    {
        "line": 9,
        "fullcodeline": "click.echo(f\"Total number of cases with diagnosis:{len(cases_with_dia)}\")"
    },
    {
        "line": 12,
        "fullcodeline": "cases_with_old_dia = ["
    },
    {
        "line": 15,
        "fullcodeline": "click.echo(f\"Total number of cases with old diagnosis format:{len(cases_with_old_dia)}\")"
    },
    {
        "line": 17,
        "fullcodeline": "for i, case in enumerate(cases_with_old_dia):"
    },
    {
        "line": 44,
        "fullcodeline": "click.echo(\"Error {}\".format(err))"
    },
    {
        "line": 18,
        "fullcodeline": "click.echo(f\"n:{i}\\t{case['owner']}\\t{case['display_name']}\")"
    },
    {
        "line": 19,
        "fullcodeline": "old_dia = case[\"diagnosis_phenotypes\"]"
    },
    {
        "line": 20,
        "fullcodeline": "new_dia = []"
    },
    {
        "line": 41,
        "fullcodeline": "click.echo(f\"old dia:{old_dia}--->new dia:{new_dia}\\n\")"
    },
    {
        "line": 22,
        "fullcodeline": "for dia_nr in old_dia:"
    },
    {
        "line": 35,
        "fullcodeline": "if fix is False:"
    },
    {
        "line": 36,
        "fullcodeline": "new_dia = old_dia"
    },
    {
        "line": 13,
        "fullcodeline": "case for case in cases_with_dia if isinstance(case[\"diagnosis_phenotypes\"][0], int)"
    },
    {
        "line": 23,
        "fullcodeline": "disease_term = db.disease_term.find_one({\"disease_nr\": dia_nr})"
    },
    {
        "line": 27,
        "fullcodeline": "new_dia.append("
    },
    {
        "line": 38,
        "fullcodeline": "db.case.find_one_and_update("
    },
    {
        "line": 24,
        "fullcodeline": "if disease_term is None:"
    },
    {
        "line": 25,
        "fullcodeline": "click.echo(f\"Could not find a disease term with id:{dia_nr}\")"
    },
    {
        "line": 28,
        "fullcodeline": "{"
    },
    {
        "line": 39,
        "fullcodeline": "{\"_id\": case[\"_id\"]}, {\"$set\": {\"diagnosis_phenotypes\": new_dia}}"
    }
]