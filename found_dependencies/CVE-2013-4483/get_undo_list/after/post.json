[
    {
        "line": 16,
        "fullcodeline": "*undo_listp = undo_list;"
    },
    {
        "line": 6,
        "fullcodeline": "if (!undo_list) {"
    },
    {
        "line": 7,
        "fullcodeline": "undo_list = kzalloc(sizeof(*undo_list), GFP_KERNEL);"
    },
    {
        "line": 10,
        "fullcodeline": "spin_lock_init(&undo_list->lock);"
    },
    {
        "line": 11,
        "fullcodeline": "atomic_set(&undo_list->refcnt, 1);"
    },
    {
        "line": 12,
        "fullcodeline": "INIT_LIST_HEAD(&undo_list->list_proc);"
    },
    {
        "line": 14,
        "fullcodeline": "current->sysvsem.undo_list = undo_list;"
    },
    {
        "line": 8,
        "fullcodeline": "if (undo_list == NULL)"
    },
    {
        "line": 9,
        "fullcodeline": "return -ENOMEM;"
    }
]