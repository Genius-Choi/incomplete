[
    {
        "line": 18,
        "fullcodeline": "template = None"
    },
    {
        "line": 20,
        "fullcodeline": "manager = None"
    },
    {
        "line": 321,
        "fullcodeline": "context[\"template\"] = template"
    },
    {
        "line": 21,
        "fullcodeline": "if o_type in ("
    },
    {
        "line": 48,
        "fullcodeline": "if action == \"addnewcontainer\":"
    },
    {
        "line": 34,
        "fullcodeline": "kw = {}"
    },
    {
        "line": 56,
        "fullcodeline": "form = ContainerForm(data=request.POST.copy())"
    },
    {
        "line": 35,
        "fullcodeline": "if o_type is not None and int(o_id) > 0:"
    },
    {
        "line": 42,
        "fullcodeline": "elif o_type in (\"share\", \"sharecomment\", \"chat\"):"
    },
    {
        "line": 57,
        "fullcodeline": "if form.is_valid():"
    },
    {
        "line": 99,
        "fullcodeline": "elif action == \"edit\":"
    },
    {
        "line": 36,
        "fullcodeline": "o_id = int(o_id)"
    },
    {
        "line": 37,
        "fullcodeline": "kw[str(o_type)] = o_id"
    },
    {
        "line": 39,
        "fullcodeline": "manager = BaseContainer(conn, **kw)"
    },
    {
        "line": 43,
        "fullcodeline": "manager = BaseShare(conn, o_id)"
    },
    {
        "line": 45,
        "fullcodeline": "manager = BaseContainer(conn)"
    },
    {
        "line": 51,
        "fullcodeline": "if not request.method == \"POST\":"
    },
    {
        "line": 59,
        "fullcodeline": "name = form.cleaned_data[\"name\"]"
    },
    {
        "line": 60,
        "fullcodeline": "description = form.cleaned_data[\"description\"]"
    },
    {
        "line": 61,
        "fullcodeline": "owner = form.cleaned_data[\"owner\"]"
    },
    {
        "line": 90,
        "fullcodeline": "rdict = {\"bad\": \"false\", \"id\": oid}"
    },
    {
        "line": 93,
        "fullcodeline": "d = dict()"
    },
    {
        "line": 96,
        "fullcodeline": "rdict = {\"bad\": \"true\", \"errs\": d}"
    },
    {
        "line": 52,
        "fullcodeline": "return JsonResponse("
    },
    {
        "line": 58,
        "fullcodeline": "logger.debug(\"Create new in %s: %s\" % (o_type, str(form.cleaned_data)))"
    },
    {
        "line": 63,
        "fullcodeline": "if o_type == \"project\" and hasattr(manager, o_type) and o_id > 0:"
    },
    {
        "line": 91,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 94,
        "fullcodeline": "for e in form.errors.items():"
    },
    {
        "line": 97,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 101,
        "fullcodeline": "if o_id is None:"
    },
    {
        "line": 122,
        "fullcodeline": "elif action == \"save\":"
    },
    {
        "line": 64,
        "fullcodeline": "oid = manager.createDataset(name, description, owner=owner)"
    },
    {
        "line": 103,
        "fullcodeline": "if o_type == \"share\" and int(o_id) > 0:"
    },
    {
        "line": 104,
        "fullcodeline": "template = \"webclient/public/share_form.html\""
    },
    {
        "line": 105,
        "fullcodeline": "manager.getMembers(o_id)"
    },
    {
        "line": 106,
        "fullcodeline": "manager.getComments(o_id)"
    },
    {
        "line": 107,
        "fullcodeline": "experimenters = list(conn.getExperimenters())"
    },
    {
        "line": 108,
        "fullcodeline": "experimenters.sort(key=lambda x: x.getOmeName().lower())"
    },
    {
        "line": 109,
        "fullcodeline": "initial = {"
    },
    {
        "line": 120,
        "fullcodeline": "form = ShareForm(initial=initial)  # 'guests':share.guestsInShare,"
    },
    {
        "line": 121,
        "fullcodeline": "context = {\"manager\": manager, \"form\": form}"
    },
    {
        "line": 41,
        "fullcodeline": "return handlerInternalError(request, x)"
    },
    {
        "line": 53,
        "fullcodeline": "{\"Error\": \"Must use POST to create container\"}, status=405"
    },
    {
        "line": 95,
        "fullcodeline": "d.update({e[0]: unicode(e[1])})"
    },
    {
        "line": 102,
        "fullcodeline": "raise Http404(\"No share ID\")"
    },
    {
        "line": 157,
        "fullcodeline": "elif action == \"editname\":"
    },
    {
        "line": 65,
        "fullcodeline": "elif o_type == \"tagset\" and o_id > 0:"
    },
    {
        "line": 66,
        "fullcodeline": "oid = manager.createTag(name, description, owner=owner)"
    },
    {
        "line": 117,
        "fullcodeline": "initial[\"expiration\"] = manager.share.getExpireDate().strftime("
    },
    {
        "line": 124,
        "fullcodeline": "if not request.method == \"POST\":"
    },
    {
        "line": 129,
        "fullcodeline": "experimenters = list(conn.getExperimenters())"
    },
    {
        "line": 130,
        "fullcodeline": "experimenters.sort(key=lambda x: x.getOmeName().lower())"
    },
    {
        "line": 131,
        "fullcodeline": "form = ShareForm("
    },
    {
        "line": 116,
        "fullcodeline": "if manager.share.getExpireDate() is not None:"
    },
    {
        "line": 125,
        "fullcodeline": "return HttpResponseRedirect("
    },
    {
        "line": 134,
        "fullcodeline": "if form.is_valid():"
    },
    {
        "line": 156,
        "fullcodeline": "return HttpResponseServerError(\"Object does not exist\")"
    },
    {
        "line": 170,
        "fullcodeline": "elif action == \"savename\":"
    },
    {
        "line": 67,
        "fullcodeline": "elif request.POST.get(\"folder_type\") in ("
    },
    {
        "line": 76,
        "fullcodeline": "folder_type = request.POST.get(\"folder_type\")"
    },
    {
        "line": 126,
        "fullcodeline": "reverse(\"manage_action_containers\", args=[\"edit\", o_type, o_id])"
    },
    {
        "line": 136,
        "fullcodeline": "message = form.cleaned_data[\"message\"]"
    },
    {
        "line": 137,
        "fullcodeline": "expiration = form.cleaned_data[\"expiration\"]"
    },
    {
        "line": 138,
        "fullcodeline": "members = form.cleaned_data[\"members\"]"
    },
    {
        "line": 140,
        "fullcodeline": "enable = form.cleaned_data[\"enable\"]"
    },
    {
        "line": 141,
        "fullcodeline": "host = \"%s?server=%i\" % ("
    },
    {
        "line": 150,
        "fullcodeline": "r = \"enable\" if enable else \"disable\""
    },
    {
        "line": 153,
        "fullcodeline": "template = \"webclient/public/share_form.html\""
    },
    {
        "line": 154,
        "fullcodeline": "context = {\"share\": manager, \"form\": form}"
    },
    {
        "line": 159,
        "fullcodeline": "if hasattr(manager, o_type) and o_id > 0:"
    },
    {
        "line": 160,
        "fullcodeline": "obj = getattr(manager, o_type)"
    },
    {
        "line": 161,
        "fullcodeline": "template = \"webclient/ajax_form/container_form_ajax.html\""
    },
    {
        "line": 166,
        "fullcodeline": "form = ContainerNameForm(initial={\"name\": txtValue})"
    },
    {
        "line": 167,
        "fullcodeline": "context = {\"manager\": manager, \"form\": form}"
    },
    {
        "line": 77,
        "fullcodeline": "if folder_type == \"dataset\":"
    },
    {
        "line": 89,
        "fullcodeline": "return HttpResponseServerError(\"Object does not exist\")"
    },
    {
        "line": 132,
        "fullcodeline": "initial={\"experimenters\": experimenters}, data=request.POST.copy()"
    },
    {
        "line": 135,
        "fullcodeline": "logger.debug(\"Update share: %s\" % (str(form.cleaned_data)))"
    },
    {
        "line": 151,
        "fullcodeline": "return HttpResponse(r)"
    },
    {
        "line": 169,
        "fullcodeline": "return HttpResponseServerError(\"Object does not exist\")"
    },
    {
        "line": 192,
        "fullcodeline": "elif action == \"editdescription\":"
    },
    {
        "line": 78,
        "fullcodeline": "oid = manager.createDataset("
    },
    {
        "line": 85,
        "fullcodeline": "oid = conn.createContainer("
    },
    {
        "line": 163,
        "fullcodeline": "txtValue = obj.textValue"
    },
    {
        "line": 165,
        "fullcodeline": "txtValue = obj.getName()"
    },
    {
        "line": 172,
        "fullcodeline": "if not request.method == \"POST\":"
    },
    {
        "line": 176,
        "fullcodeline": "if hasattr(manager, o_type) and o_id > 0:"
    },
    {
        "line": 177,
        "fullcodeline": "form = ContainerNameForm(data=request.POST.copy())"
    },
    {
        "line": 142,
        "fullcodeline": "request.build_absolute_uri("
    },
    {
        "line": 145,
        "fullcodeline": "int(conn.server_id),"
    },
    {
        "line": 173,
        "fullcodeline": "return HttpResponseRedirect("
    },
    {
        "line": 178,
        "fullcodeline": "if form.is_valid():"
    },
    {
        "line": 191,
        "fullcodeline": "return HttpResponseServerError(\"Object does not exist\")"
    },
    {
        "line": 201,
        "fullcodeline": "elif action == \"savedescription\":"
    },
    {
        "line": 143,
        "fullcodeline": "reverse(\"load_template\", args=[\"public\"])"
    },
    {
        "line": 174,
        "fullcodeline": "reverse(\"manage_action_containers\", args=[\"edit\", o_type, o_id])"
    },
    {
        "line": 180,
        "fullcodeline": "name = form.cleaned_data[\"name\"]"
    },
    {
        "line": 181,
        "fullcodeline": "rdict = {\"bad\": \"false\", \"o_type\": o_type}"
    },
    {
        "line": 185,
        "fullcodeline": "d = dict()"
    },
    {
        "line": 188,
        "fullcodeline": "rdict = {\"bad\": \"true\", \"errs\": d}"
    },
    {
        "line": 194,
        "fullcodeline": "if hasattr(manager, o_type) and o_id > 0:"
    },
    {
        "line": 195,
        "fullcodeline": "obj = getattr(manager, o_type)"
    },
    {
        "line": 196,
        "fullcodeline": "template = \"webclient/ajax_form/container_form_ajax.html\""
    },
    {
        "line": 197,
        "fullcodeline": "form = ContainerDescriptionForm(initial={\"description\": obj.description})"
    },
    {
        "line": 198,
        "fullcodeline": "context = {\"manager\": manager, \"form\": form}"
    },
    {
        "line": 82,
        "fullcodeline": "img_ids=request.POST.getlist(\"image\", None),"
    },
    {
        "line": 183,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 186,
        "fullcodeline": "for e in form.errors.items():"
    },
    {
        "line": 189,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 200,
        "fullcodeline": "return HttpResponseServerError(\"Object does not exist\")"
    },
    {
        "line": 224,
        "fullcodeline": "elif action == \"remove\":"
    },
    {
        "line": 179,
        "fullcodeline": "logger.debug(\"Update name form:\" + str(form.cleaned_data))"
    },
    {
        "line": 203,
        "fullcodeline": "if not request.method == \"POST\":"
    },
    {
        "line": 208,
        "fullcodeline": "if hasattr(manager, o_type) and o_id > 0:"
    },
    {
        "line": 209,
        "fullcodeline": "form = ContainerDescriptionForm(data=request.POST.copy())"
    },
    {
        "line": 228,
        "fullcodeline": "parents = request.POST[\"parent\"]"
    },
    {
        "line": 236,
        "fullcodeline": "rdict = {\"bad\": \"false\"}"
    },
    {
        "line": 187,
        "fullcodeline": "d.update({e[0]: unicode(e[1])})"
    },
    {
        "line": 204,
        "fullcodeline": "return HttpResponseServerError("
    },
    {
        "line": 210,
        "fullcodeline": "if form.is_valid():"
    },
    {
        "line": 223,
        "fullcodeline": "return HttpResponseServerError(\"Object does not exist\")"
    },
    {
        "line": 237,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 238,
        "fullcodeline": "elif action == \"removefromshare\":"
    },
    {
        "line": 205,
        "fullcodeline": "\"Action '%s' on the '%s' id:%s cannot be complited\""
    },
    {
        "line": 212,
        "fullcodeline": "description = form.cleaned_data[\"description\"]"
    },
    {
        "line": 214,
        "fullcodeline": "rdict = {\"bad\": \"false\"}"
    },
    {
        "line": 217,
        "fullcodeline": "d = dict()"
    },
    {
        "line": 220,
        "fullcodeline": "rdict = {\"bad\": \"true\", \"errs\": d}"
    },
    {
        "line": 239,
        "fullcodeline": "image_id = request.POST.get(\"source\")"
    },
    {
        "line": 246,
        "fullcodeline": "rdict = {\"bad\": \"false\"}"
    },
    {
        "line": 206,
        "fullcodeline": "% (action, o_type, o_id)"
    },
    {
        "line": 215,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 218,
        "fullcodeline": "for e in form.errors.items():"
    },
    {
        "line": 221,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 230,
        "fullcodeline": "manager.remove(parents.split(\"|\"))"
    },
    {
        "line": 247,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 248,
        "fullcodeline": "elif action == \"delete\":"
    },
    {
        "line": 211,
        "fullcodeline": "logger.debug(\"Update name form:\" + str(form.cleaned_data))"
    },
    {
        "line": 233,
        "fullcodeline": "rdict = {\"bad\": \"true\", \"errs\": str(x)}"
    },
    {
        "line": 250,
        "fullcodeline": "child = toBoolean(request.POST.get(\"child\"))"
    },
    {
        "line": 251,
        "fullcodeline": "anns = toBoolean(request.POST.get(\"anns\"))"
    },
    {
        "line": 219,
        "fullcodeline": "d.update({e[0]: unicode(e[1])})"
    },
    {
        "line": 232,
        "fullcodeline": "logger.error(traceback.format_exc())"
    },
    {
        "line": 234,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 272,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 244,
        "fullcodeline": "rdict = {\"bad\": \"true\", \"errs\": str(x)}"
    },
    {
        "line": 253,
        "fullcodeline": "handle = manager.deleteItem(child, anns)"
    },
    {
        "line": 275,
        "fullcodeline": "object_ids = {"
    },
    {
        "line": 285,
        "fullcodeline": "child = toBoolean(request.POST.get(\"child\"))"
    },
    {
        "line": 286,
        "fullcodeline": "anns = toBoolean(request.POST.get(\"anns\"))"
    },
    {
        "line": 287,
        "fullcodeline": "logger.debug("
    },
    {
        "line": 243,
        "fullcodeline": "logger.error(traceback.format_exc())"
    },
    {
        "line": 245,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 271,
        "fullcodeline": "rdict = {\"bad\": \"false\"}"
    },
    {
        "line": 288,
        "fullcodeline": "\"Delete many: child? %s anns? %s object_ids %s\" % (child, anns, object_ids)"
    },
    {
        "line": 320,
        "fullcodeline": "return JsonResponse(rdict)"
    },
    {
        "line": 254,
        "fullcodeline": "request.session[\"callback\"][str(handle)] = {"
    },
    {
        "line": 269,
        "fullcodeline": "rdict = {\"bad\": \"true\", \"errs\": str(x)}"
    },
    {
        "line": 261,
        "fullcodeline": "\"dreport\": _formatReport(handle),"
    },
    {
        "line": 267,
        "fullcodeline": "\"Failed to delete: %r\" % {\"did\": o_id, \"dtype\": o_type}, exc_info=True"
    },
    {
        "line": 291,
        "fullcodeline": "for key, ids in object_ids.items():"
    },
    {
        "line": 319,
        "fullcodeline": "rdict = {\"bad\": \"false\"}"
    },
    {
        "line": 262,
        "fullcodeline": "\"start_time\": datetime.datetime.now(),"
    },
    {
        "line": 276,
        "fullcodeline": "\"Image\": request.POST.getlist(\"image\"),"
    },
    {
        "line": 277,
        "fullcodeline": "\"Dataset\": request.POST.getlist(\"dataset\"),"
    },
    {
        "line": 278,
        "fullcodeline": "\"Project\": request.POST.getlist(\"project\"),"
    },
    {
        "line": 279,
        "fullcodeline": "\"Annotation\": request.POST.getlist(\"tag\"),"
    },
    {
        "line": 280,
        "fullcodeline": "\"Screen\": request.POST.getlist(\"screen\"),"
    },
    {
        "line": 281,
        "fullcodeline": "\"Plate\": request.POST.getlist(\"plate\"),"
    },
    {
        "line": 282,
        "fullcodeline": "\"Well\": request.POST.getlist(\"well\"),"
    },
    {
        "line": 283,
        "fullcodeline": "\"PlateAcquisition\": request.POST.getlist(\"acquisition\"),"
    },
    {
        "line": 314,
        "fullcodeline": "\"Failed to delete: %r\" % {\"did\": ids, \"dtype\": key}, exc_info=True"
    },
    {
        "line": 292,
        "fullcodeline": "if ids is not None and len(ids) > 0:"
    },
    {
        "line": 293,
        "fullcodeline": "handle = manager.deleteObjects(key, ids, child, anns)"
    },
    {
        "line": 296,
        "fullcodeline": "dMap = {"
    },
    {
        "line": 294,
        "fullcodeline": "if key == \"PlateAcquisition\":"
    },
    {
        "line": 295,
        "fullcodeline": "key = \"Plate Run\"  # for nicer user message"
    },
    {
        "line": 304,
        "fullcodeline": "if len(ids) > 1:"
    },
    {
        "line": 305,
        "fullcodeline": "dMap[\"delmany\"] = len(ids)"
    },
    {
        "line": 306,
        "fullcodeline": "dMap[\"did\"] = ids"
    },
    {
        "line": 308,
        "fullcodeline": "dMap[\"delmany\"] = False"
    },
    {
        "line": 309,
        "fullcodeline": "dMap[\"did\"] = ids[0]"
    },
    {
        "line": 301,
        "fullcodeline": "\"dreport\": _formatReport(handle),"
    },
    {
        "line": 298,
        "fullcodeline": "\"start_time\": datetime.datetime.now(),"
    }
]