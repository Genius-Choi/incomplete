[
    {
        "line": 4,
        "fullcodeline": "struct rds_ib_connection *ic = conn->c_transport_data;"
    },
    {
        "line": 6,
        "fullcodeline": "struct rds_ib_send_work *send = NULL;"
    },
    {
        "line": 14,
        "fullcodeline": "u32 credit_alloc = 0;"
    },
    {
        "line": 16,
        "fullcodeline": "u32 adv_credits = 0;"
    },
    {
        "line": 17,
        "fullcodeline": "int send_flags = 0;"
    },
    {
        "line": 18,
        "fullcodeline": "int bytes_sent = 0;"
    },
    {
        "line": 20,
        "fullcodeline": "int flow_controlled = 0;"
    },
    {
        "line": 21,
        "fullcodeline": "int nr_sig = 0;"
    },
    {
        "line": 23,
        "fullcodeline": "BUG_ON(off % RDS_FRAG_SIZE);"
    },
    {
        "line": 24,
        "fullcodeline": "BUG_ON(hdr_off != 0 && hdr_off != sizeof(struct rds_header));"
    },
    {
        "line": 39,
        "fullcodeline": "work_alloc = rds_ib_ring_alloc(&ic->i_send_ring, i, &pos);"
    },
    {
        "line": 133,
        "fullcodeline": "first = send;"
    },
    {
        "line": 134,
        "fullcodeline": "prev = NULL;"
    },
    {
        "line": 136,
        "fullcodeline": "i = 0;"
    },
    {
        "line": 230,
        "fullcodeline": "failed_wr = &first->s_wr;"
    },
    {
        "line": 231,
        "fullcodeline": "ret = ib_post_send(ic->i_cm_id->qp, &first->s_wr, &failed_wr);"
    },
    {
        "line": 232,
        "fullcodeline": "rdsdebug(\"ic %p first %p (wr %p) ret %d wr %p\\n\", ic,"
    },
    {
        "line": 234,
        "fullcodeline": "BUG_ON(failed_wr != &first->s_wr);"
    },
    {
        "line": 249,
        "fullcodeline": "ret = bytes_sent;"
    },
    {
        "line": 251,
        "fullcodeline": "BUG_ON(adv_credits);"
    },
    {
        "line": 27,
        "fullcodeline": "if (conn->c_loopback"
    },
    {
        "line": 34,
        "fullcodeline": "if (be32_to_cpu(rm->m_inc.i_hdr.h_len) == 0)"
    },
    {
        "line": 40,
        "fullcodeline": "if (work_alloc == 0) {"
    },
    {
        "line": 64,
        "fullcodeline": "if (!ic->i_data_op) {"
    },
    {
        "line": 203,
        "fullcodeline": "} while (i < work_alloc"
    },
    {
        "line": 208,
        "fullcodeline": "if (hdr_off == 0)"
    },
    {
        "line": 212,
        "fullcodeline": "if (scat == &rm->data.op_sg[rm->data.op_count]) {"
    },
    {
        "line": 219,
        "fullcodeline": "if (i < work_alloc) {"
    },
    {
        "line": 223,
        "fullcodeline": "if (ic->i_flowctl && i < credit_alloc)"
    },
    {
        "line": 28,
        "fullcodeline": "&& rm->m_inc.i_hdr.h_flags & RDS_FLAG_CONG_BITMAP) {"
    },
    {
        "line": 29,
        "fullcodeline": "rds_cong_map_updated(conn->c_fcong, ~(u64) 0);"
    },
    {
        "line": 35,
        "fullcodeline": "i = 1;"
    },
    {
        "line": 41,
        "fullcodeline": "set_bit(RDS_LL_SEND_FULL, &conn->c_flags);"
    },
    {
        "line": 42,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_ring_full);"
    },
    {
        "line": 43,
        "fullcodeline": "ret = -ENOMEM;"
    },
    {
        "line": 48,
        "fullcodeline": "credit_alloc = rds_ib_send_grab_credits(ic, work_alloc, &posted, 0, RDS_MAX_ADV_CREDIT);"
    },
    {
        "line": 49,
        "fullcodeline": "adv_credits += posted;"
    },
    {
        "line": 81,
        "fullcodeline": "rds_message_addref(rm);"
    },
    {
        "line": 82,
        "fullcodeline": "ic->i_data_op = &rm->data;"
    },
    {
        "line": 109,
        "fullcodeline": "rm->m_inc.i_hdr.h_ack = cpu_to_be64(rds_ib_piggyb_ack(ic));"
    },
    {
        "line": 110,
        "fullcodeline": "rds_message_make_checksum(&rm->m_inc.i_hdr);"
    },
    {
        "line": 129,
        "fullcodeline": "send_flags = IB_SEND_FENCE;"
    },
    {
        "line": 138,
        "fullcodeline": "unsigned int len = 0;"
    },
    {
        "line": 141,
        "fullcodeline": "send->s_wr.send_flags = send_flags;"
    },
    {
        "line": 142,
        "fullcodeline": "send->s_wr.opcode = IB_WR_SEND;"
    },
    {
        "line": 143,
        "fullcodeline": "send->s_wr.num_sge = 1;"
    },
    {
        "line": 144,
        "fullcodeline": "send->s_wr.next = NULL;"
    },
    {
        "line": 145,
        "fullcodeline": "send->s_queued = jiffies;"
    },
    {
        "line": 146,
        "fullcodeline": "send->s_op = NULL;"
    },
    {
        "line": 148,
        "fullcodeline": "send->s_sge[0].addr = ic->i_send_hdrs_dma"
    },
    {
        "line": 152,
        "fullcodeline": "memcpy(&ic->i_send_hdrs[pos], &rm->m_inc.i_hdr, sizeof(struct rds_header));"
    },
    {
        "line": 171,
        "fullcodeline": "rds_ib_set_wr_signal_state(ic, send, 0);"
    },
    {
        "line": 182,
        "fullcodeline": "rdsdebug(\"send %p wr %p num_sge %u next %p\\n\", send,"
    },
    {
        "line": 197,
        "fullcodeline": "prev = send;"
    },
    {
        "line": 199,
        "fullcodeline": "pos = (pos + 1) % ic->i_send_ring.w_nr;"
    },
    {
        "line": 201,
        "fullcodeline": "i++;"
    },
    {
        "line": 204,
        "fullcodeline": "&& scat != &rm->data.op_sg[rm->data.op_count]);"
    },
    {
        "line": 209,
        "fullcodeline": "bytes_sent += sizeof(struct rds_header);"
    },
    {
        "line": 213,
        "fullcodeline": "prev->s_op = ic->i_data_op;"
    },
    {
        "line": 214,
        "fullcodeline": "prev->s_wr.send_flags |= IB_SEND_SOLICITED;"
    },
    {
        "line": 215,
        "fullcodeline": "ic->i_data_op = NULL;"
    },
    {
        "line": 220,
        "fullcodeline": "rds_ib_ring_unalloc(&ic->i_send_ring, work_alloc - i);"
    },
    {
        "line": 221,
        "fullcodeline": "work_alloc = i;"
    },
    {
        "line": 224,
        "fullcodeline": "rds_ib_send_add_credits(conn, credit_alloc - i);"
    },
    {
        "line": 227,
        "fullcodeline": "atomic_add(nr_sig, &ic->i_signaled_sends);"
    },
    {
        "line": 238,
        "fullcodeline": "rds_ib_ring_unalloc(&ic->i_send_ring, work_alloc);"
    },
    {
        "line": 239,
        "fullcodeline": "rds_ib_sub_signaled(ic, nr_sig);"
    },
    {
        "line": 245,
        "fullcodeline": "rds_ib_conn_error(ic->conn, \"ib_post_send failed\\n\");"
    },
    {
        "line": 30,
        "fullcodeline": "return sizeof(struct rds_header) + RDS_CONG_MAP_BYTES;"
    },
    {
        "line": 50,
        "fullcodeline": "if (credit_alloc < work_alloc) {"
    },
    {
        "line": 55,
        "fullcodeline": "if (work_alloc == 0) {"
    },
    {
        "line": 85,
        "fullcodeline": "if (test_bit(RDS_MSG_ACK_REQUIRED, &rm->m_flags))"
    },
    {
        "line": 87,
        "fullcodeline": "if (test_bit(RDS_MSG_RETRANSMITTED, &rm->m_flags))"
    },
    {
        "line": 155,
        "fullcodeline": "if (i < work_alloc"
    },
    {
        "line": 176,
        "fullcodeline": "if (ic->i_flowctl && flow_controlled && i == (work_alloc-1))"
    },
    {
        "line": 179,
        "fullcodeline": "if (send->s_wr.send_flags & IB_SEND_SIGNALED)"
    },
    {
        "line": 185,
        "fullcodeline": "if (ic->i_flowctl && adv_credits) {"
    },
    {
        "line": 37,
        "fullcodeline": "i = ceil(be32_to_cpu(rm->m_inc.i_hdr.h_len), RDS_FRAG_SIZE);"
    },
    {
        "line": 51,
        "fullcodeline": "rds_ib_ring_unalloc(&ic->i_send_ring, work_alloc - credit_alloc);"
    },
    {
        "line": 52,
        "fullcodeline": "work_alloc = credit_alloc;"
    },
    {
        "line": 53,
        "fullcodeline": "flow_controlled = 1;"
    },
    {
        "line": 56,
        "fullcodeline": "set_bit(RDS_LL_SEND_FULL, &conn->c_flags);"
    },
    {
        "line": 57,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_throttle);"
    },
    {
        "line": 58,
        "fullcodeline": "ret = -ENOMEM;"
    },
    {
        "line": 66,
        "fullcodeline": "rm->data.op_count = ib_dma_map_sg(dev,"
    },
    {
        "line": 70,
        "fullcodeline": "rdsdebug(\"ic %p mapping rm %p: %d\\n\", ic, rm, rm->data.op_count);"
    },
    {
        "line": 86,
        "fullcodeline": "rm->m_inc.i_hdr.h_flags |= RDS_FLAG_ACK_REQUIRED;"
    },
    {
        "line": 88,
        "fullcodeline": "rm->m_inc.i_hdr.h_flags |= RDS_FLAG_RETRANSMITTED;"
    },
    {
        "line": 95,
        "fullcodeline": "ext_hdr.h_rdma_rkey = cpu_to_be32(rm->rdma.op_rkey);"
    },
    {
        "line": 96,
        "fullcodeline": "rds_message_add_extension(&rm->m_inc.i_hdr,"
    },
    {
        "line": 100,
        "fullcodeline": "rds_message_add_rdma_dest_extension(&rm->m_inc.i_hdr,"
    },
    {
        "line": 116,
        "fullcodeline": "rds_ib_send_grab_credits(ic, 0, &posted, 1, RDS_MAX_ADV_CREDIT - adv_credits);"
    },
    {
        "line": 117,
        "fullcodeline": "adv_credits += posted;"
    },
    {
        "line": 118,
        "fullcodeline": "BUG_ON(adv_credits > 255);"
    },
    {
        "line": 149,
        "fullcodeline": "+ (pos * sizeof(struct rds_header));"
    },
    {
        "line": 156,
        "fullcodeline": "&& scat != &rm->data.op_sg[rm->data.op_count]) {"
    },
    {
        "line": 157,
        "fullcodeline": "len = min(RDS_FRAG_SIZE, ib_sg_dma_len(dev, scat) - off);"
    },
    {
        "line": 158,
        "fullcodeline": "send->s_wr.num_sge = 2;"
    },
    {
        "line": 160,
        "fullcodeline": "send->s_sge[1].addr = ib_sg_dma_address(dev, scat) + off;"
    },
    {
        "line": 161,
        "fullcodeline": "send->s_sge[1].length = len;"
    },
    {
        "line": 163,
        "fullcodeline": "bytes_sent += len;"
    },
    {
        "line": 164,
        "fullcodeline": "off += len;"
    },
    {
        "line": 177,
        "fullcodeline": "send->s_wr.send_flags |= IB_SEND_SIGNALED | IB_SEND_SOLICITED;"
    },
    {
        "line": 180,
        "fullcodeline": "nr_sig++;"
    },
    {
        "line": 186,
        "fullcodeline": "struct rds_header *hdr = &ic->i_send_hdrs[pos];"
    },
    {
        "line": 189,
        "fullcodeline": "hdr->h_credit = adv_credits;"
    },
    {
        "line": 190,
        "fullcodeline": "rds_message_make_checksum(hdr);"
    },
    {
        "line": 191,
        "fullcodeline": "adv_credits = 0;"
    },
    {
        "line": 192,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_credit_updates);"
    },
    {
        "line": 196,
        "fullcodeline": "prev->s_wr.next = &send->s_wr;"
    },
    {
        "line": 241,
        "fullcodeline": "ic->i_data_op = prev->s_op;"
    },
    {
        "line": 242,
        "fullcodeline": "prev->s_op = NULL;"
    },
    {
        "line": 71,
        "fullcodeline": "if (rm->data.op_count == 0) {"
    },
    {
        "line": 78,
        "fullcodeline": "rm->data.op_count = 0;"
    },
    {
        "line": 101,
        "fullcodeline": "rds_rdma_cookie_key(rm->m_rdma_cookie),"
    },
    {
        "line": 102,
        "fullcodeline": "rds_rdma_cookie_offset(rm->m_rdma_cookie));"
    },
    {
        "line": 165,
        "fullcodeline": "if (off == ib_sg_dma_len(dev, scat)) {"
    },
    {
        "line": 72,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_sg_mapping_failure);"
    },
    {
        "line": 73,
        "fullcodeline": "rds_ib_ring_unalloc(&ic->i_send_ring, work_alloc);"
    },
    {
        "line": 74,
        "fullcodeline": "ret = -ENOMEM; /* XXX ? */"
    },
    {
        "line": 166,
        "fullcodeline": "scat++;"
    },
    {
        "line": 167,
        "fullcodeline": "off = 0;"
    }
]