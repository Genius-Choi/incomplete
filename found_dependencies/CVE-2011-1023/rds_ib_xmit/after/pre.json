[
    {
        "line": 4,
        "fullcodeline": "struct rds_ib_connection *ic = conn->c_transport_data;"
    },
    {
        "line": 5,
        "fullcodeline": "struct ib_device *dev = ic->i_cm_id->device;"
    },
    {
        "line": 6,
        "fullcodeline": "struct rds_ib_send_work *send = NULL;"
    },
    {
        "line": 14,
        "fullcodeline": "u32 credit_alloc = 0;"
    },
    {
        "line": 16,
        "fullcodeline": "u32 adv_credits = 0;"
    },
    {
        "line": 17,
        "fullcodeline": "int send_flags = 0;"
    },
    {
        "line": 18,
        "fullcodeline": "int bytes_sent = 0;"
    },
    {
        "line": 20,
        "fullcodeline": "int flow_controlled = 0;"
    },
    {
        "line": 21,
        "fullcodeline": "int nr_sig = 0;"
    },
    {
        "line": 23,
        "fullcodeline": "BUG_ON(off % RDS_FRAG_SIZE);"
    },
    {
        "line": 24,
        "fullcodeline": "BUG_ON(hdr_off != 0 && hdr_off != sizeof(struct rds_header));"
    },
    {
        "line": 42,
        "fullcodeline": "work_alloc = rds_ib_ring_alloc(&ic->i_send_ring, i, &pos);"
    },
    {
        "line": 135,
        "fullcodeline": "send = &ic->i_sends[pos];"
    },
    {
        "line": 136,
        "fullcodeline": "first = send;"
    },
    {
        "line": 138,
        "fullcodeline": "scat = &ic->i_data_op->op_sg[sg];"
    },
    {
        "line": 139,
        "fullcodeline": "i = 0;"
    },
    {
        "line": 233,
        "fullcodeline": "failed_wr = &first->s_wr;"
    },
    {
        "line": 234,
        "fullcodeline": "ret = ib_post_send(ic->i_cm_id->qp, &first->s_wr, &failed_wr);"
    },
    {
        "line": 235,
        "fullcodeline": "rdsdebug(\"ic %p first %p (wr %p) ret %d wr %p\\n\", ic,"
    },
    {
        "line": 252,
        "fullcodeline": "ret = bytes_sent;"
    },
    {
        "line": 27,
        "fullcodeline": "if (conn->c_loopback"
    },
    {
        "line": 43,
        "fullcodeline": "if (work_alloc == 0) {"
    },
    {
        "line": 67,
        "fullcodeline": "if (!ic->i_data_op) {"
    },
    {
        "line": 206,
        "fullcodeline": "} while (i < work_alloc"
    },
    {
        "line": 222,
        "fullcodeline": "if (i < work_alloc) {"
    },
    {
        "line": 226,
        "fullcodeline": "if (ic->i_flowctl && i < credit_alloc)"
    },
    {
        "line": 237,
        "fullcodeline": "BUG_ON(failed_wr != &first->s_wr);"
    },
    {
        "line": 28,
        "fullcodeline": "&& rm->m_inc.i_hdr.h_flags & RDS_FLAG_CONG_BITMAP) {"
    },
    {
        "line": 29,
        "fullcodeline": "rds_cong_map_updated(conn->c_fcong, ~(u64) 0);"
    },
    {
        "line": 30,
        "fullcodeline": "scat = &rm->data.op_sg[sg];"
    },
    {
        "line": 31,
        "fullcodeline": "ret = sizeof(struct rds_header) + RDS_CONG_MAP_BYTES;"
    },
    {
        "line": 37,
        "fullcodeline": "if (be32_to_cpu(rm->m_inc.i_hdr.h_len) == 0)"
    },
    {
        "line": 38,
        "fullcodeline": "i = 1;"
    },
    {
        "line": 45,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_ring_full);"
    },
    {
        "line": 46,
        "fullcodeline": "ret = -ENOMEM;"
    },
    {
        "line": 51,
        "fullcodeline": "credit_alloc = rds_ib_send_grab_credits(ic, work_alloc, &posted, 0, RDS_MAX_ADV_CREDIT);"
    },
    {
        "line": 52,
        "fullcodeline": "adv_credits += posted;"
    },
    {
        "line": 84,
        "fullcodeline": "rds_message_addref(rm);"
    },
    {
        "line": 85,
        "fullcodeline": "ic->i_data_op = &rm->data;"
    },
    {
        "line": 112,
        "fullcodeline": "rm->m_inc.i_hdr.h_ack = cpu_to_be64(rds_ib_piggyb_ack(ic));"
    },
    {
        "line": 113,
        "fullcodeline": "rds_message_make_checksum(&rm->m_inc.i_hdr);"
    },
    {
        "line": 132,
        "fullcodeline": "send_flags = IB_SEND_FENCE;"
    },
    {
        "line": 145,
        "fullcodeline": "send->s_wr.opcode = IB_WR_SEND;"
    },
    {
        "line": 148,
        "fullcodeline": "send->s_queued = jiffies;"
    },
    {
        "line": 149,
        "fullcodeline": "send->s_op = NULL;"
    },
    {
        "line": 155,
        "fullcodeline": "memcpy(&ic->i_send_hdrs[pos], &rm->m_inc.i_hdr, sizeof(struct rds_header));"
    },
    {
        "line": 174,
        "fullcodeline": "rds_ib_set_wr_signal_state(ic, send, 0);"
    },
    {
        "line": 185,
        "fullcodeline": "rdsdebug(\"send %p wr %p num_sge %u next %p\\n\", send,"
    },
    {
        "line": 200,
        "fullcodeline": "prev = send;"
    },
    {
        "line": 202,
        "fullcodeline": "pos = (pos + 1) % ic->i_send_ring.w_nr;"
    },
    {
        "line": 203,
        "fullcodeline": "send = &ic->i_sends[pos];"
    },
    {
        "line": 204,
        "fullcodeline": "i++;"
    },
    {
        "line": 207,
        "fullcodeline": "&& scat != &rm->data.op_sg[rm->data.op_count]);"
    },
    {
        "line": 212,
        "fullcodeline": "bytes_sent += sizeof(struct rds_header);"
    },
    {
        "line": 216,
        "fullcodeline": "prev->s_op = ic->i_data_op;"
    },
    {
        "line": 218,
        "fullcodeline": "ic->i_data_op = NULL;"
    },
    {
        "line": 223,
        "fullcodeline": "rds_ib_ring_unalloc(&ic->i_send_ring, work_alloc - i);"
    },
    {
        "line": 224,
        "fullcodeline": "work_alloc = i;"
    },
    {
        "line": 230,
        "fullcodeline": "atomic_add(nr_sig, &ic->i_signaled_sends);"
    },
    {
        "line": 242,
        "fullcodeline": "rds_ib_sub_signaled(ic, nr_sig);"
    },
    {
        "line": 40,
        "fullcodeline": "i = ceil(be32_to_cpu(rm->m_inc.i_hdr.h_len), RDS_FRAG_SIZE);"
    },
    {
        "line": 53,
        "fullcodeline": "if (credit_alloc < work_alloc) {"
    },
    {
        "line": 58,
        "fullcodeline": "if (work_alloc == 0) {"
    },
    {
        "line": 88,
        "fullcodeline": "if (test_bit(RDS_MSG_ACK_REQUIRED, &rm->m_flags))"
    },
    {
        "line": 90,
        "fullcodeline": "if (test_bit(RDS_MSG_RETRANSMITTED, &rm->m_flags))"
    },
    {
        "line": 158,
        "fullcodeline": "if (i < work_alloc"
    },
    {
        "line": 182,
        "fullcodeline": "if (send->s_wr.send_flags & IB_SEND_SIGNALED)"
    },
    {
        "line": 188,
        "fullcodeline": "if (ic->i_flowctl && adv_credits) {"
    },
    {
        "line": 227,
        "fullcodeline": "rds_ib_send_add_credits(conn, credit_alloc - i);"
    },
    {
        "line": 54,
        "fullcodeline": "rds_ib_ring_unalloc(&ic->i_send_ring, work_alloc - credit_alloc);"
    },
    {
        "line": 55,
        "fullcodeline": "work_alloc = credit_alloc;"
    },
    {
        "line": 56,
        "fullcodeline": "flow_controlled = 1;"
    },
    {
        "line": 60,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_throttle);"
    },
    {
        "line": 61,
        "fullcodeline": "ret = -ENOMEM;"
    },
    {
        "line": 69,
        "fullcodeline": "rm->data.op_count = ib_dma_map_sg(dev,"
    },
    {
        "line": 73,
        "fullcodeline": "rdsdebug(\"ic %p mapping rm %p: %d\\n\", ic, rm, rm->data.op_count);"
    },
    {
        "line": 89,
        "fullcodeline": "rm->m_inc.i_hdr.h_flags |= RDS_FLAG_ACK_REQUIRED;"
    },
    {
        "line": 91,
        "fullcodeline": "rm->m_inc.i_hdr.h_flags |= RDS_FLAG_RETRANSMITTED;"
    },
    {
        "line": 98,
        "fullcodeline": "ext_hdr.h_rdma_rkey = cpu_to_be32(rm->rdma.op_rkey);"
    },
    {
        "line": 99,
        "fullcodeline": "rds_message_add_extension(&rm->m_inc.i_hdr,"
    },
    {
        "line": 103,
        "fullcodeline": "rds_message_add_rdma_dest_extension(&rm->m_inc.i_hdr,"
    },
    {
        "line": 119,
        "fullcodeline": "rds_ib_send_grab_credits(ic, 0, &posted, 1, RDS_MAX_ADV_CREDIT - adv_credits);"
    },
    {
        "line": 120,
        "fullcodeline": "adv_credits += posted;"
    },
    {
        "line": 152,
        "fullcodeline": "+ (pos * sizeof(struct rds_header));"
    },
    {
        "line": 159,
        "fullcodeline": "&& scat != &rm->data.op_sg[rm->data.op_count]) {"
    },
    {
        "line": 160,
        "fullcodeline": "len = min(RDS_FRAG_SIZE, ib_sg_dma_len(dev, scat) - off);"
    },
    {
        "line": 166,
        "fullcodeline": "bytes_sent += len;"
    },
    {
        "line": 167,
        "fullcodeline": "off += len;"
    },
    {
        "line": 179,
        "fullcodeline": "if (ic->i_flowctl && flow_controlled && i == (work_alloc-1))"
    },
    {
        "line": 180,
        "fullcodeline": "send->s_wr.send_flags |= IB_SEND_SIGNALED | IB_SEND_SOLICITED;"
    },
    {
        "line": 183,
        "fullcodeline": "nr_sig++;"
    },
    {
        "line": 189,
        "fullcodeline": "struct rds_header *hdr = &ic->i_send_hdrs[pos];"
    },
    {
        "line": 192,
        "fullcodeline": "hdr->h_credit = adv_credits;"
    },
    {
        "line": 194,
        "fullcodeline": "adv_credits = 0;"
    },
    {
        "line": 195,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_credit_updates);"
    },
    {
        "line": 104,
        "fullcodeline": "rds_rdma_cookie_key(rm->m_rdma_cookie),"
    },
    {
        "line": 105,
        "fullcodeline": "rds_rdma_cookie_offset(rm->m_rdma_cookie));"
    },
    {
        "line": 121,
        "fullcodeline": "BUG_ON(adv_credits > 255);"
    },
    {
        "line": 168,
        "fullcodeline": "if (off == ib_sg_dma_len(dev, scat)) {"
    },
    {
        "line": 75,
        "fullcodeline": "rds_ib_stats_inc(s_ib_tx_sg_mapping_failure);"
    },
    {
        "line": 77,
        "fullcodeline": "ret = -ENOMEM; /* XXX ? */"
    },
    {
        "line": 163,
        "fullcodeline": "send->s_sge[1].addr = ib_sg_dma_address(dev, scat) + off;"
    },
    {
        "line": 169,
        "fullcodeline": "scat++;"
    },
    {
        "line": 170,
        "fullcodeline": "off = 0;"
    }
]