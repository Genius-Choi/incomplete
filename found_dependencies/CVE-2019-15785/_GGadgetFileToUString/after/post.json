[
    {
        "line": 4,
        "fullcodeline": "int format=0;"
    },
    {
        "line": 7,
        "fullcodeline": "file = fopen( filename,\"r\" );"
    },
    {
        "line": 11,
        "fullcodeline": "ungetc(ch3,file);"
    },
    {
        "line": 23,
        "fullcodeline": "space = upt = malloc((max+1)*sizeof(unichar_t));"
    },
    {
        "line": 24,
        "fullcodeline": "end = space+max;"
    },
    {
        "line": 64,
        "fullcodeline": "*upt = '\\0';"
    },
    {
        "line": 65,
        "fullcodeline": "fclose(file);"
    },
    {
        "line": 8,
        "fullcodeline": "if ( file==NULL )"
    },
    {
        "line": 10,
        "fullcodeline": "ch = getc(file); ch2 = getc(file); ch3 = getc(file);"
    },
    {
        "line": 12,
        "fullcodeline": "if ( ch==0xfe && ch2==0xff )"
    },
    {
        "line": 25,
        "fullcodeline": "if ( format==3 ) {\t\t/* utf8 */"
    },
    {
        "line": 13,
        "fullcodeline": "format = 1;\t\t/* normal ucs2 */"
    },
    {
        "line": 26,
        "fullcodeline": "while ( upt<end ) {"
    },
    {
        "line": 14,
        "fullcodeline": "else if ( ch==0xff && ch2==0xfe )"
    },
    {
        "line": 47,
        "fullcodeline": "} else if ( format!=0 ) {"
    },
    {
        "line": 15,
        "fullcodeline": "format = 2;\t\t/* byte-swapped ucs2 */"
    },
    {
        "line": 27,
        "fullcodeline": "ch=getc(file);"
    },
    {
        "line": 28,
        "fullcodeline": "if ( ch==EOF )"
    },
    {
        "line": 30,
        "fullcodeline": "if ( ch<0x80 )"
    },
    {
        "line": 31,
        "fullcodeline": "*upt++ = ch;"
    },
    {
        "line": 48,
        "fullcodeline": "while ( upt<end ) {"
    },
    {
        "line": 58,
        "fullcodeline": "char buffer[400];"
    },
    {
        "line": 16,
        "fullcodeline": "else if ( ch==0xef && ch2==0xbb && ch3==0xbf ) {"
    },
    {
        "line": 59,
        "fullcodeline": "while ( fgets(buffer,sizeof(buffer),file)!=NULL ) {"
    },
    {
        "line": 17,
        "fullcodeline": "format = 3;\t\t/* utf8 */"
    },
    {
        "line": 18,
        "fullcodeline": "getc(file);"
    },
    {
        "line": 32,
        "fullcodeline": "else if ( ch<0xe0 ) {"
    },
    {
        "line": 49,
        "fullcodeline": "ch = getc(file); ch2 = getc(file);"
    },
    {
        "line": 50,
        "fullcodeline": "if ( ch2==EOF )"
    },
    {
        "line": 52,
        "fullcodeline": "if ( format==1 )"
    },
    {
        "line": 60,
        "fullcodeline": "def2u_strncpy(upt,buffer,end-upt);"
    },
    {
        "line": 61,
        "fullcodeline": "upt += u_strlen(upt);"
    },
    {
        "line": 20,
        "fullcodeline": "getc(file);\t\t/* rewind probably undoes the ungetc, but let's not depend on it */"
    },
    {
        "line": 21,
        "fullcodeline": "rewind(file);"
    },
    {
        "line": 34,
        "fullcodeline": "*upt++ = ((ch&0x1f)<<6)|(ch2&0x3f);"
    },
    {
        "line": 53,
        "fullcodeline": "*upt ++ = (ch<<8)|ch2;"
    },
    {
        "line": 33,
        "fullcodeline": "ch2 = getc(file);"
    },
    {
        "line": 55,
        "fullcodeline": "*upt ++ = (ch2<<8)|ch;"
    },
    {
        "line": 35,
        "fullcodeline": "} else if ( ch<0xf0 ) {"
    },
    {
        "line": 37,
        "fullcodeline": "*upt++ = ((ch&0xf)<<12)|((ch2&0x3f)<<6)|(ch3&0x3f);"
    },
    {
        "line": 36,
        "fullcodeline": "ch2 = getc(file); ch3 = getc(file);"
    },
    {
        "line": 41,
        "fullcodeline": "w = ( ((ch&7)<<2) | ((ch2&0x30)>>4) ) -1;"
    },
    {
        "line": 42,
        "fullcodeline": "*upt++ = 0xd800 | (w<<6) | ((ch2&0xf)<<2) | ((ch3&0x30)>>4);"
    },
    {
        "line": 40,
        "fullcodeline": "ch2 = getc(file); ch3 = getc(file); ch4=getc(file);"
    },
    {
        "line": 43,
        "fullcodeline": "if ( upt<end )"
    },
    {
        "line": 44,
        "fullcodeline": "*upt++ = 0xdc00 | ((ch3&0xf)<<6) | (ch4&0x3f);"
    }
]