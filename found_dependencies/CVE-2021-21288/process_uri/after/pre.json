[
    {
        "line": 2,
        "fullcodeline": "uri_parts = uri.split('?')"
    },
    {
        "line": 3,
        "fullcodeline": "encoded_uri = Addressable::URI.parse(uri_parts.shift).normalize.to_s"
    },
    {
        "line": 4,
        "fullcodeline": "query = uri_parts.any? ? \"?#{uri_parts.join('?')}\" : ''"
    },
    {
        "line": 6,
        "fullcodeline": "URI.parse(\"#{encoded_uri}#{query}\")"
    },
    {
        "line": 8,
        "fullcodeline": "URI.parse(\"#{encoded_uri}#{URI::DEFAULT_PARSER.escape(query)}\")"
    }
]