[
    {
        "line": 2,
        "fullcodeline": "filename = filename_from_header || filename_from_uri"
    },
    {
        "line": 3,
        "fullcodeline": "mime_type = MiniMime.lookup_by_content_type(file.content_type)"
    },
    {
        "line": 4,
        "fullcodeline": "unless File.extname(filename).present? || mime_type.blank?"
    },
    {
        "line": 5,
        "fullcodeline": "filename = \"#{filename}.#{mime_type.extension}\""
    }
]