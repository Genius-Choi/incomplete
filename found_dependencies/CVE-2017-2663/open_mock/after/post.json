[
    {
        "line": 2,
        "fullcodeline": "content_out = StringIO.StringIO()"
    },
    {
        "line": 3,
        "fullcodeline": "m = mock_open(read_data=content)"
    },
    {
        "line": 4,
        "fullcodeline": "with patch('__builtin__.open', m, create=True, **kwargs) as mo:"
    },
    {
        "line": 5,
        "fullcodeline": "stream = StringIO.StringIO(content)"
    },
    {
        "line": 6,
        "fullcodeline": "rv = mo.return_value"
    },
    {
        "line": 7,
        "fullcodeline": "rv.write = lambda x: content_out.write(x)"
    },
    {
        "line": 8,
        "fullcodeline": "rv.content_out = lambda: content_out.getvalue()"
    },
    {
        "line": 9,
        "fullcodeline": "rv.__iter__ = lambda x: iter(stream.readlines())"
    }
]