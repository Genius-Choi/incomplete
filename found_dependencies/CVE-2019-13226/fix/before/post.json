[
    {
        "line": 3,
        "fullcodeline": "m_lastErrorString.clear();"
    },
    {
        "line": 5,
        "fullcodeline": "DDevicePartInfo part_info(partDevice);"
    },
    {
        "line": 6,
        "fullcodeline": "const QString part_old_uuid = part_info.uuid();"
    },
    {
        "line": 22,
        "fullcodeline": "bool device_is_mounted = Helper::isMounted(partDevice);"
    },
    {
        "line": 23,
        "fullcodeline": "const QString &mount_root = Helper::temporaryMountDevice(partDevice, QFileInfo(partDevice).fileName());"
    },
    {
        "line": 241,
        "fullcodeline": "dCDebug(\"Restore partition uuid\");"
    },
    {
        "line": 8,
        "fullcodeline": "if (Helper::processExec(\"lsblk -s -d -n -o UUID\") == 0) {"
    },
    {
        "line": 25,
        "fullcodeline": "if (mount_root.isEmpty()) {"
    },
    {
        "line": 31,
        "fullcodeline": "const QStringList &tmp_paths = QStandardPaths::standardLocations(QStandardPaths::TempLocation);"
    },
    {
        "line": 32,
        "fullcodeline": "const QString tmp_dir = (tmp_paths.isEmpty() ? \"/tmp\" : tmp_paths.first()) + \"/.deepin-clone\";"
    },
    {
        "line": 39,
        "fullcodeline": "const QString &repo_path = tmp_dir + \"/repo.iso\";"
    },
    {
        "line": 47,
        "fullcodeline": "bool ok = false;"
    },
    {
        "line": 49,
        "fullcodeline": "const QString &repo_mount_point = mount_root + \"/deepin-clone\";"
    },
    {
        "line": 50,
        "fullcodeline": "QFile file_boot_fix(mount_root + \"/boot_fix.sh\");"
    },
    {
        "line": 184,
        "fullcodeline": "Helper::processExec(\"umount \" + repo_mount_point);"
    },
    {
        "line": 185,
        "fullcodeline": "QDir(mount_root).rmdir(\"deepin-clone\");"
    },
    {
        "line": 186,
        "fullcodeline": "file_boot_fix.remove();"
    },
    {
        "line": 187,
        "fullcodeline": "Helper::processExec(\"umount \" + mount_root + \"/dev/pts\");"
    },
    {
        "line": 188,
        "fullcodeline": "Helper::processExec(\"umount \" + mount_root + \"/dev\");"
    },
    {
        "line": 189,
        "fullcodeline": "Helper::processExec(\"umount \" + mount_root + \"/proc\");"
    },
    {
        "line": 190,
        "fullcodeline": "Helper::processExec(\"umount \" + mount_root + \"/sys\");"
    },
    {
        "line": 191,
        "fullcodeline": "Helper::processExec(\"umount \" + mount_root + \"/boot/efi\");"
    },
    {
        "line": 235,
        "fullcodeline": "if (!device_is_mounted)"
    },
    {
        "line": 238,
        "fullcodeline": "if (m_lastErrorString.isEmpty())"
    },
    {
        "line": 243,
        "fullcodeline": "if (!Helper::resetPartUUID(part_info, part_old_uuid.toLatin1())) {"
    },
    {
        "line": 26,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Failed to mount partition \\\"%1\\\"\").arg(partDevice);"
    },
    {
        "line": 34,
        "fullcodeline": "if (!QDir::current().mkpath(tmp_dir)) {"
    },
    {
        "line": 41,
        "fullcodeline": "if (!QFile::exists(repo_path)"
    },
    {
        "line": 193,
        "fullcodeline": "if (ok && process.exitCode() == 0) {"
    },
    {
        "line": 236,
        "fullcodeline": "Helper::umountDevice(partDevice);"
    },
    {
        "line": 239,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Boot for repair system failed\");"
    },
    {
        "line": 244,
        "fullcodeline": "dCWarning(\"Failed to restore partition uuid, part: %s, uuid: %s\", qPrintable(partDevice), qPrintable(part_old_uuid));"
    },
    {
        "line": 9,
        "fullcodeline": "if (Helper::lastProcessStandardOutput().contains(part_old_uuid.toLatin1())) {"
    },
    {
        "line": 35,
        "fullcodeline": "dCError(\"mkpath \\\"%s\\\" failed\", qPrintable(tmp_dir));"
    },
    {
        "line": 42,
        "fullcodeline": "&& !QFile::copy(QString(\":/repo_%1.iso\").arg(HOST_ARCH), repo_path)) {"
    },
    {
        "line": 43,
        "fullcodeline": "dCError(\"copy file failed, new name: %s\", qPrintable(repo_path));"
    },
    {
        "line": 110,
        "fullcodeline": "ok = true;"
    },
    {
        "line": 116,
        "fullcodeline": "const QString &parent_device = Helper::parentDevice(partDevice);"
    },
    {
        "line": 118,
        "fullcodeline": "bool is_efi = false;"
    },
    {
        "line": 53,
        "fullcodeline": "if (!QDir(mount_root).exists(\"deepin-clone\") && !QDir(mount_root).mkdir(\"deepin-clone\")) {"
    },
    {
        "line": 58,
        "fullcodeline": "if (!Helper::mountDevice(repo_path, repo_mount_point, true)) {"
    },
    {
        "line": 63,
        "fullcodeline": "if (file_boot_fix.exists()) {"
    },
    {
        "line": 67,
        "fullcodeline": "if (!QFile::copy(QString(\":/scripts/boot_fix_%1.sh\").arg("
    },
    {
        "line": 85,
        "fullcodeline": "if (!file_boot_fix.setPermissions(file_boot_fix.permissions() | QFile::ExeUser)) {"
    },
    {
        "line": 90,
        "fullcodeline": "if (Helper::processExec(QString(\"mount --bind -v --bind /dev %1/dev\").arg(mount_root)) != 0) {"
    },
    {
        "line": 95,
        "fullcodeline": "if (Helper::processExec(QString(\"mount --bind -v --bind /dev/pts %1/dev/pts\").arg(mount_root)) != 0) {"
    },
    {
        "line": 100,
        "fullcodeline": "if (Helper::processExec(QString(\"mount --bind -v --bind /proc %1/proc\").arg(mount_root)) != 0) {"
    },
    {
        "line": 105,
        "fullcodeline": "if (Helper::processExec(QString(\"mount --bind -v --bind /sys %1/sys\").arg(mount_root)) != 0) {"
    },
    {
        "line": 120,
        "fullcodeline": "if (!parent_device.isEmpty()) {"
    },
    {
        "line": 194,
        "fullcodeline": "if (part_old_uuid != part_info.uuid()) {"
    },
    {
        "line": 227,
        "fullcodeline": "if (!device_is_mounted)"
    },
    {
        "line": 11,
        "fullcodeline": "if (Helper::resetPartUUID(part_info)) {"
    },
    {
        "line": 54,
        "fullcodeline": "dCError(\"Create \\\"deepin-clone\\\" dir failed(\\\"%s\\\")\", qPrintable(mount_root));"
    },
    {
        "line": 59,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Failed to mount partition \\\"%1\\\"\").arg(repo_path);"
    },
    {
        "line": 64,
        "fullcodeline": "file_boot_fix.remove();"
    },
    {
        "line": 81,
        "fullcodeline": "dCError(\"copy file failed, new name: %s\", qPrintable(file_boot_fix.fileName()));"
    },
    {
        "line": 86,
        "fullcodeline": "dCError(\"Set \\\"%s\\\" permissions failed\", qPrintable(file_boot_fix.fileName()));"
    },
    {
        "line": 91,
        "fullcodeline": "dCError(\"Failed to bind /dev\");"
    },
    {
        "line": 96,
        "fullcodeline": "dCError(\"Failed to bind /dev/pts\");"
    },
    {
        "line": 101,
        "fullcodeline": "dCError(\"Failed to bind /proc\");"
    },
    {
        "line": 106,
        "fullcodeline": "dCError(\"Failed to bind /sys\");"
    },
    {
        "line": 121,
        "fullcodeline": "DDeviceDiskInfo info(parent_device);"
    },
    {
        "line": 123,
        "fullcodeline": "dCDebug(\"Disk partition table type: %d\", info.ptType());"
    },
    {
        "line": 156,
        "fullcodeline": "process.setProcessChannelMode(QProcess::MergedChannels);"
    },
    {
        "line": 157,
        "fullcodeline": "process.start(QString(\"chroot %1 ./boot_fix.sh %2 %3 /deepin-clone\")"
    },
    {
        "line": 168,
        "fullcodeline": "process.waitForFinished(-1);"
    },
    {
        "line": 195,
        "fullcodeline": "dCDebug(\"Reset the uuid from \\\"%s\\\" to \\\"%s\\\"\", qPrintable(part_old_uuid), qPrintable(part_info.uuid()));"
    },
    {
        "line": 198,
        "fullcodeline": "QFile file(mount_root + \"/etc/fstab\");"
    },
    {
        "line": 212,
        "fullcodeline": "file.setFileName(mount_root + \"/etc/crypttab\");"
    },
    {
        "line": 228,
        "fullcodeline": "Helper::umountDevice(partDevice);"
    },
    {
        "line": 12,
        "fullcodeline": "QThread::sleep(1);"
    },
    {
        "line": 13,
        "fullcodeline": "part_info.refresh();"
    },
    {
        "line": 15,
        "fullcodeline": "qDebug() << part_old_uuid << part_info.uuid();"
    },
    {
        "line": 80,
        "fullcodeline": "), file_boot_fix.fileName())) {"
    },
    {
        "line": 125,
        "fullcodeline": "if (info.ptType() == DDeviceDiskInfo::GPT) {"
    },
    {
        "line": 162,
        "fullcodeline": "while (process.waitForReadyRead()) {"
    },
    {
        "line": 170,
        "fullcodeline": "switch (process.exitCode()) {"
    },
    {
        "line": 200,
        "fullcodeline": "if (file.exists() && file.open(QIODevice::ReadWrite)) {"
    },
    {
        "line": 214,
        "fullcodeline": "if (file.exists() && file.open(QIODevice::ReadWrite)) {"
    },
    {
        "line": 17,
        "fullcodeline": "dCWarning(\"Failed to reset uuid\");"
    },
    {
        "line": 160,
        "fullcodeline": ".arg(is_efi ? \"true\" : \"false\"));"
    },
    {
        "line": 163,
        "fullcodeline": "const QByteArray &data = process.readAll().simplified().constData();"
    },
    {
        "line": 165,
        "fullcodeline": "dCDebug(data.constData());"
    },
    {
        "line": 172,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Boot for install system failed\");"
    },
    {
        "line": 175,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Boot for update system failed\");"
    },
    {
        "line": 201,
        "fullcodeline": "QByteArray data = file.readAll();"
    },
    {
        "line": 207,
        "fullcodeline": "file.close();"
    },
    {
        "line": 215,
        "fullcodeline": "QByteArray data = file.readAll();"
    },
    {
        "line": 221,
        "fullcodeline": "file.close();"
    },
    {
        "line": 145,
        "fullcodeline": "if (!is_efi && m_lastErrorString.isEmpty()) {"
    },
    {
        "line": 203,
        "fullcodeline": "if (file.seek(0)) {"
    },
    {
        "line": 209,
        "fullcodeline": "dCWarning(\"Failed to update /etc/fstab, error: %s\", qPrintable(file.errorString()));"
    },
    {
        "line": 217,
        "fullcodeline": "if (file.seek(0)) {"
    },
    {
        "line": 223,
        "fullcodeline": "dCWarning(\"Failed to update /etc/crypttab, error: %s\", qPrintable(file.errorString()));"
    },
    {
        "line": 146,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"EFI partition not found\");"
    },
    {
        "line": 147,
        "fullcodeline": "ok = false;"
    },
    {
        "line": 149,
        "fullcodeline": "} else if (info.ptType() == DDeviceDiskInfo::Unknow) {"
    },
    {
        "line": 204,
        "fullcodeline": "file.write(data.replace(part_old_uuid.toLatin1(), part_info.uuid().toLatin1()));"
    },
    {
        "line": 218,
        "fullcodeline": "file.write(data.replace(part_old_uuid.toLatin1(), part_info.uuid().toLatin1()));"
    },
    {
        "line": 127,
        "fullcodeline": "if (part.guidType() == DPartInfo::EFI_SP_None) {"
    },
    {
        "line": 150,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Unknown partition style\");"
    },
    {
        "line": 151,
        "fullcodeline": "ok = false;"
    },
    {
        "line": 128,
        "fullcodeline": "const QString &efi_path = mount_root + \"/boot/efi\";"
    },
    {
        "line": 130,
        "fullcodeline": "QDir::current().mkpath(efi_path);"
    },
    {
        "line": 139,
        "fullcodeline": "is_efi = true;"
    },
    {
        "line": 132,
        "fullcodeline": "if (Helper::processExec(QString(\"mount %1 %2\").arg(part.filePath()).arg(efi_path)) != 0) {"
    },
    {
        "line": 133,
        "fullcodeline": "dCError(\"Failed to mount EFI partition\");"
    },
    {
        "line": 134,
        "fullcodeline": "m_lastErrorString = QObject::tr(\"Failed to mount partition \\\"%1\\\"\").arg(part.filePath());"
    },
    {
        "line": 135,
        "fullcodeline": "ok = false;"
    }
]