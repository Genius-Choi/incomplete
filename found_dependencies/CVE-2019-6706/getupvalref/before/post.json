[
    {
        "line": 3,
        "fullcodeline": "StkId fi = index2addr(L, fidx);"
    },
    {
        "line": 4,
        "fullcodeline": "api_check(L, ttisLclosure(fi), \"Lua function expected\");"
    },
    {
        "line": 5,
        "fullcodeline": "f = clLvalue(fi);"
    },
    {
        "line": 6,
        "fullcodeline": "api_check(L, (1 <= n && n <= f->p->sizeupvalues), \"invalid upvalue index\");"
    },
    {
        "line": 7,
        "fullcodeline": "if (pf) *pf = f;"
    },
    {
        "line": 8,
        "fullcodeline": "return &f->upvals[n - 1];  /* get its upvalue pointer */"
    }
]