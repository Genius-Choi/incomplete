[
    {
        "line": 3,
        "fullcodeline": "execute \"DELETE FROM architectures_operatingsystems WHERE architecture_id NOT IN (SELECT id FROM architectures) OR operatingsystem_id NOT IN (SELECT id FROM operatingsystems)\""
    },
    {
        "line": 4,
        "fullcodeline": "execute \"DELETE FROM config_templates_operatingsystems WHERE config_template_id NOT IN (SELECT id FROM config_templates) OR operatingsystem_id NOT IN (SELECT id FROM operatingsystems)\""
    },
    {
        "line": 5,
        "fullcodeline": "execute \"DELETE FROM features_smart_proxies WHERE feature_id NOT IN (SELECT id FROM features) OR smart_proxy_id NOT IN (SELECT id FROM smart_proxies)\""
    },
    {
        "line": 6,
        "fullcodeline": "execute \"DELETE FROM features_smart_proxies WHERE feature_id NOT IN (SELECT id FROM features) OR smart_proxy_id NOT IN (SELECT id FROM smart_proxies)\""
    },
    {
        "line": 7,
        "fullcodeline": "execute \"DELETE FROM media_operatingsystems WHERE medium_id NOT IN (SELECT id FROM media) OR operatingsystem_id NOT IN (SELECT id FROM operatingsystems)\""
    },
    {
        "line": 8,
        "fullcodeline": "execute \"DELETE FROM operatingsystems_ptables WHERE ptable_id NOT IN (SELECT id FROM ptables) OR operatingsystem_id NOT IN (SELECT id FROM operatingsystems)\""
    },
    {
        "line": 9,
        "fullcodeline": "execute \"DELETE FROM operatingsystems_puppetclasses WHERE puppetclass_id NOT IN (SELECT id FROM puppetclasses) OR operatingsystem_id NOT IN (SELECT id FROM operatingsystems)\""
    },
    {
        "line": 10,
        "fullcodeline": "execute \"DELETE FROM subnet_domains WHERE domain_id NOT IN (SELECT id FROM domains) OR subnet_id NOT IN (SELECT id FROM subnets)\""
    },
    {
        "line": 11,
        "fullcodeline": "execute \"DELETE FROM user_compute_resources WHERE compute_resource_id NOT IN (SELECT id FROM compute_resources) OR user_id NOT IN (SELECT id FROM users)\""
    },
    {
        "line": 12,
        "fullcodeline": "execute \"DELETE FROM user_domains WHERE domain_id NOT IN (SELECT id FROM domains) OR user_id NOT IN (SELECT id FROM users)\""
    },
    {
        "line": 13,
        "fullcodeline": "execute \"DELETE FROM user_facts WHERE fact_name_id NOT IN (SELECT id FROM fact_names) OR user_id NOT IN (SELECT id FROM users)\""
    },
    {
        "line": 14,
        "fullcodeline": "execute \"DELETE FROM user_hostgroups WHERE hostgroup_id NOT IN (SELECT id FROM hostgroups) OR user_id NOT IN (SELECT id FROM users)\""
    },
    {
        "line": 15,
        "fullcodeline": "execute \"DELETE FROM user_roles WHERE role_id NOT IN (SELECT id FROM roles) OR user_id NOT IN (SELECT id FROM users)\""
    },
    {
        "line": 18,
        "fullcodeline": "execute \"DELETE FROM environment_classes WHERE environment_id NOT IN (SELECT id FROM environments) OR lookup_key_id NOT IN (SELECT id FROM lookup_keys) OR puppetclass_id NOT IN (SELECT id FROM puppetclasses)\""
    },
    {
        "line": 31,
        "fullcodeline": "Audit.unscoped.where(\"user_id NOT IN (?)\", User.unscoped.pluck(:id)).update_all(:user_id => nil)"
    },
    {
        "line": 32,
        "fullcodeline": "FakeConfigTemplate.where(\"template_kind_id NOT IN (?)\", TemplateKind.pluck(:id)).update_all(:template_kind_id => nil)"
    },
    {
        "line": 33,
        "fullcodeline": "Domain.where(\"dns_id NOT IN (?)\", SmartProxy.unscoped.pluck(:id)).update_all(:dns_id => nil)"
    },
    {
        "line": 34,
        "fullcodeline": "Subnet.where(\"dhcp_id NOT IN (?)\", SmartProxy.unscoped.pluck(:id)).update_all(:dhcp_id => nil)"
    },
    {
        "line": 35,
        "fullcodeline": "Subnet.where(\"dns_id NOT IN (?)\", SmartProxy.unscoped.pluck(:id)).update_all(:dns_id => nil)"
    },
    {
        "line": 36,
        "fullcodeline": "Subnet.where(\"tftp_id NOT IN (?)\", SmartProxy.unscoped.pluck(:id)).update_all(:tftp_id => nil)"
    },
    {
        "line": 37,
        "fullcodeline": "Image.where(\"architecture_id NOT IN (?)\", Architecture.unscoped.pluck(:id)).update_all(:architecture_id => nil)"
    },
    {
        "line": 38,
        "fullcodeline": "Image.where(\"compute_resource_id NOT IN (?)\", ComputeResource.unscoped.pluck(:id)).update_all(:compute_resource_id => nil)"
    },
    {
        "line": 39,
        "fullcodeline": "Image.where(\"operatingsystem_id NOT IN (?)\", Operatingsystem.unscoped.pluck(:id)).update_all(:operatingsystem_id => nil)"
    },
    {
        "line": 40,
        "fullcodeline": "Nic::Base.where(\"domain_id NOT IN (?)\", Domain.unscoped.pluck(:id)).update_all(:domain_id => nil)"
    },
    {
        "line": 41,
        "fullcodeline": "Nic::Base.where(\"host_id NOT IN (?)\", Host::Base.unscoped.pluck(:id)).update_all(:host_id => nil)"
    },
    {
        "line": 42,
        "fullcodeline": "Nic::Base.where(\"subnet_id NOT IN (?)\", Subnet.unscoped.pluck(:id)).update_all(:subnet_id => nil)"
    },
    {
        "line": 43,
        "fullcodeline": "OsDefaultTemplate.where(\"config_template_id NOT IN (?)\", FakeConfigTemplate.unscoped.pluck(:id)).update_all(:config_template_id => nil)"
    },
    {
        "line": 44,
        "fullcodeline": "OsDefaultTemplate.where(\"operatingsystem_id NOT IN (?)\", Operatingsystem.unscoped.pluck(:id)).update_all(:operatingsystem_id => nil)"
    },
    {
        "line": 45,
        "fullcodeline": "OsDefaultTemplate.where(\"template_kind_id NOT IN (?)\", TemplateKind.unscoped.pluck(:id)).update_all(:template_kind_id => nil)"
    },
    {
        "line": 46,
        "fullcodeline": "TemplateCombination.where(\"config_template_id NOT IN (?)\", FakeConfigTemplate.unscoped.pluck(:id)).update_all(:config_template_id => nil)"
    },
    {
        "line": 47,
        "fullcodeline": "TemplateCombination.where(\"environment_id NOT IN (?)\", Environment.unscoped.pluck(:id)).update_all(:environment_id => nil)"
    },
    {
        "line": 48,
        "fullcodeline": "TemplateCombination.where(\"hostgroup_id NOT IN (?)\", Hostgroup.unscoped.pluck(:id)).update_all(:hostgroup_id => nil)"
    },
    {
        "line": 16,
        "fullcodeline": "KeyPair.where(\"compute_resource_id NOT IN (?)\", ComputeResource.pluck(:id)).delete_all"
    },
    {
        "line": 17,
        "fullcodeline": "LookupKey.where(\"puppetclass_id NOT IN (?)\", Puppetclass.pluck(:id)).delete_all"
    },
    {
        "line": 19,
        "fullcodeline": "LookupValue.where(\"lookup_key_id NOT IN (?)\", LookupKey.pluck(:id)).delete_all"
    },
    {
        "line": 20,
        "fullcodeline": "FactValue.where(\"fact_name_id NOT IN (?) OR host_id NOT IN (?)\", FactName.pluck(:id), Host::Base.pluck(:id)).delete_all"
    },
    {
        "line": 21,
        "fullcodeline": "TaxableTaxonomy.where(\"taxonomy_id NOT IN (?)\", Taxonomy.unscoped.pluck(:id)).delete_all"
    },
    {
        "line": 22,
        "fullcodeline": "HostClass.where(\"host_id NOT IN (?) OR puppetclass_id NOT IN (?)\", Host::Base.pluck(:id), Puppetclass.pluck(:id)).delete_all"
    },
    {
        "line": 24,
        "fullcodeline": "HostgroupClass.where(\"hostgroup_id NOT IN (?) OR puppetclass_id NOT IN (?)\", Hostgroup.unscoped.pluck(:id), Puppetclass.pluck(:id)).delete_all"
    },
    {
        "line": 25,
        "fullcodeline": "Report.where(\"host_id NOT IN (?)\", Host::Base.pluck(:id)).delete_all"
    },
    {
        "line": 26,
        "fullcodeline": "Log.where(\"message_id NOT IN (?) OR report_id NOT IN (?) OR source_id NOT IN (?)\", Message.pluck(:id), Report.pluck(:id), Source.pluck(:id)).delete_all"
    },
    {
        "line": 27,
        "fullcodeline": "Token.where(\"host_id NOT IN (?)\", Host::Base.pluck(:id)).delete_all"
    },
    {
        "line": 28,
        "fullcodeline": "TrendCounter.where(\"trend_id NOT IN (?)\", Trend.pluck(:id)).delete_all"
    }
]