[
    {
        "line": 2,
        "fullcodeline": "current_config_state = config_states.get_config()"
    },
    {
        "line": 4,
        "fullcodeline": "name = os.path.basename(name or \"Config\")"
    },
    {
        "line": 6,
        "fullcodeline": "current_config_state[\"name\"] = name"
    },
    {
        "line": 7,
        "fullcodeline": "timestamp = datetime.now().strftime('%Y_%m_%d-%H_%M_%S')"
    },
    {
        "line": 8,
        "fullcodeline": "filename = os.path.join(config_states_dir, f\"{timestamp}_{name}.json\")"
    },
    {
        "line": 9,
        "fullcodeline": "print(f\"Saving backup of webui/extension state to {filename}.\")"
    },
    {
        "line": 12,
        "fullcodeline": "config_states.list_config_states()"
    },
    {
        "line": 13,
        "fullcodeline": "new_value = next(iter(config_states.all_config_states.keys()), \"Current\")"
    },
    {
        "line": 14,
        "fullcodeline": "new_choices = [\"Current\"] + list(config_states.all_config_states.keys())"
    },
    {
        "line": 10,
        "fullcodeline": "with open(filename, \"w\", encoding=\"utf-8\") as f:"
    },
    {
        "line": 15,
        "fullcodeline": "return gr.Dropdown.update(value=new_value, choices=new_choices), f\"<span>Saved current webui/extension state to \\\"{filename}\\\"</span>\""
    },
    {
        "line": 11,
        "fullcodeline": "json.dump(current_config_state, f, indent=4, ensure_ascii=False)"
    }
]