[
    {
        "line": 5,
        "fullcodeline": "realm = user_profile.realm"
    },
    {
        "line": 6,
        "fullcodeline": "all_streams = get_active_streams(realm).values("
    },
    {
        "line": 12,
        "fullcodeline": "recip_id_to_stream_id: Dict[int, int] = {"
    },
    {
        "line": 15,
        "fullcodeline": "all_streams_map: Dict[int, RawStreamDict] = {stream[\"id\"]: stream for stream in all_streams}"
    },
    {
        "line": 17,
        "fullcodeline": "sub_dicts_query: Iterable[RawSubscriptionDict] = ("
    },
    {
        "line": 28,
        "fullcodeline": "sub_dicts: List[RawSubscriptionDict] = ["
    },
    {
        "line": 34,
        "fullcodeline": "def get_stream_id(sub_dict: RawSubscriptionDict) -> int:"
    },
    {
        "line": 37,
        "fullcodeline": "traffic_stream_ids = {get_stream_id(sub_dict) for sub_dict in sub_dicts}"
    },
    {
        "line": 38,
        "fullcodeline": "recent_traffic = get_streams_traffic(stream_ids=traffic_stream_ids)"
    },
    {
        "line": 42,
        "fullcodeline": "subscribed: List[SubscriptionStreamDict] = []"
    },
    {
        "line": 43,
        "fullcodeline": "unsubscribed: List[SubscriptionStreamDict] = []"
    },
    {
        "line": 44,
        "fullcodeline": "never_subscribed: List[NeverSubscribedStreamDict] = []"
    },
    {
        "line": 46,
        "fullcodeline": "sub_unsub_stream_ids = set()"
    },
    {
        "line": 80,
        "fullcodeline": "never_subscribed_streams = ["
    },
    {
        "line": 118,
        "fullcodeline": "subscribed.sort(key=lambda x: x[\"name\"])"
    },
    {
        "line": 119,
        "fullcodeline": "unsubscribed.sort(key=lambda x: x[\"name\"])"
    },
    {
        "line": 120,
        "fullcodeline": "never_subscribed.sort(key=lambda x: x[\"name\"])"
    },
    {
        "line": 47,
        "fullcodeline": "for sub_dict in sub_dicts:"
    },
    {
        "line": 74,
        "fullcodeline": "if user_profile.can_access_public_streams():"
    },
    {
        "line": 84,
        "fullcodeline": "for raw_stream_dict in never_subscribed_streams:"
    },
    {
        "line": 122,
        "fullcodeline": "return SubscriptionInfo("
    },
    {
        "line": 18,
        "fullcodeline": "get_stream_subscriptions_for_user(user_profile)"
    },
    {
        "line": 75,
        "fullcodeline": "never_subscribed_stream_ids = set(all_streams_map) - sub_unsub_stream_ids"
    },
    {
        "line": 77,
        "fullcodeline": "web_public_stream_ids = {stream[\"id\"] for stream in all_streams if stream[\"is_web_public\"]}"
    },
    {
        "line": 78,
        "fullcodeline": "never_subscribed_stream_ids = web_public_stream_ids - sub_unsub_stream_ids"
    },
    {
        "line": 97,
        "fullcodeline": "subscribed_stream_ids = {"
    },
    {
        "line": 101,
        "fullcodeline": "subscriber_map = bulk_get_subscriber_user_ids("
    },
    {
        "line": 7,
        "fullcodeline": "*Stream.API_FIELDS,"
    },
    {
        "line": 48,
        "fullcodeline": "stream_id = get_stream_id(sub_dict)"
    },
    {
        "line": 49,
        "fullcodeline": "sub_unsub_stream_ids.add(stream_id)"
    },
    {
        "line": 50,
        "fullcodeline": "raw_stream_dict = all_streams_map[stream_id]"
    },
    {
        "line": 52,
        "fullcodeline": "stream_dict = build_stream_dict_for_sub("
    },
    {
        "line": 60,
        "fullcodeline": "is_active = sub_dict[\"active\"]"
    },
    {
        "line": 85,
        "fullcodeline": "is_public = not raw_stream_dict[\"invite_only\"]"
    },
    {
        "line": 107,
        "fullcodeline": "for lst in [subscribed, unsubscribed]:"
    },
    {
        "line": 113,
        "fullcodeline": "for slim_stream_dict in never_subscribed:"
    },
    {
        "line": 86,
        "fullcodeline": "if is_public or user_profile.is_realm_admin:"
    },
    {
        "line": 20,
        "fullcodeline": "*Subscription.API_FIELDS,"
    },
    {
        "line": 62,
        "fullcodeline": "subscribed.append(stream_dict)"
    },
    {
        "line": 87,
        "fullcodeline": "slim_stream_dict = build_stream_dict_for_never_sub("
    },
    {
        "line": 91,
        "fullcodeline": "never_subscribed.append(slim_stream_dict)"
    },
    {
        "line": 114,
        "fullcodeline": "assert isinstance(slim_stream_dict[\"stream_id\"], int)"
    },
    {
        "line": 115,
        "fullcodeline": "stream_id = slim_stream_dict[\"stream_id\"]"
    },
    {
        "line": 116,
        "fullcodeline": "slim_stream_dict[\"subscribers\"] = subscriber_map[stream_id]"
    },
    {
        "line": 31,
        "fullcodeline": "if recip_id_to_stream_id.get(sub_dict[\"recipient_id\"])"
    },
    {
        "line": 64,
        "fullcodeline": "if has_metadata_access_to_previously_subscribed_stream(user_profile, stream_dict):"
    },
    {
        "line": 108,
        "fullcodeline": "for stream_dict in lst:"
    },
    {
        "line": 72,
        "fullcodeline": "unsubscribed.append(stream_dict)"
    },
    {
        "line": 98,
        "fullcodeline": "get_stream_id(sub_dict) for sub_dict in sub_dicts if sub_dict[\"active\"]"
    },
    {
        "line": 109,
        "fullcodeline": "assert isinstance(stream_dict[\"stream_id\"], int)"
    },
    {
        "line": 110,
        "fullcodeline": "stream_id = stream_dict[\"stream_id\"]"
    },
    {
        "line": 111,
        "fullcodeline": "stream_dict[\"subscribers\"] = subscriber_map[stream_id]"
    }
]