[
    {
        "line": 5,
        "fullcodeline": "FlatpakTransactionPrivate *priv = flatpak_transaction_get_instance_private (self);"
    },
    {
        "line": 8,
        "fullcodeline": "for (l = priv->ops; l != NULL; l = l->next)"
    },
    {
        "line": 10,
        "fullcodeline": "FlatpakTransactionOperation *op = l->data;"
    },
    {
        "line": 11,
        "fullcodeline": "g_autoptr(FlatpakRemoteState) state = NULL;"
    },
    {
        "line": 12,
        "fullcodeline": "g_autofree char *checksum = NULL;"
    },
    {
        "line": 13,
        "fullcodeline": "g_autoptr(GBytes) metadata_bytes = NULL;"
    },
    {
        "line": 66,
        "fullcodeline": "state = flatpak_transaction_ensure_remote_state (self, op->kind, op->remote, NULL, error);"
    },
    {
        "line": 30,
        "fullcodeline": "if (op->kind == FLATPAK_TRANSACTION_OPERATION_UNINSTALL)"
    },
    {
        "line": 44,
        "fullcodeline": "if (op->kind == FLATPAK_TRANSACTION_OPERATION_INSTALL_BUNDLE)"
    },
    {
        "line": 53,
        "fullcodeline": "if (flatpak_decomposed_is_app (op->ref))"
    },
    {
        "line": 67,
        "fullcodeline": "if (state == NULL)"
    },
    {
        "line": 71,
        "fullcodeline": "if (transaction_is_local_only (self, op->kind))"
    },
    {
        "line": 25,
        "fullcodeline": "g_assert (op->resolved_commit != NULL);"
    },
    {
        "line": 26,
        "fullcodeline": "mark_op_resolved (op, op->resolved_commit, NULL, NULL, NULL);"
    },
    {
        "line": 34,
        "fullcodeline": "metadata_bytes = load_deployed_metadata (self, op->ref, &checksum, NULL);"
    },
    {
        "line": 40,
        "fullcodeline": "mark_op_resolved (op, checksum, NULL, metadata_bytes, NULL);"
    },
    {
        "line": 46,
        "fullcodeline": "g_assert (op->commit != NULL);"
    },
    {
        "line": 47,
        "fullcodeline": "mark_op_resolved (op, op->commit, NULL, op->external_metadata, NULL);"
    },
    {
        "line": 73,
        "fullcodeline": "g_autoptr(GVariant) commit_data = flatpak_dir_read_latest_commit (priv->dir, op->remote, op->ref,"
    },
    {
        "line": 78,
        "fullcodeline": "resolve_op_from_commit (self, op, checksum, NULL, commit_data);"
    },
    {
        "line": 35,
        "fullcodeline": "if (metadata_bytes == NULL)"
    },
    {
        "line": 55,
        "fullcodeline": "if (op->kind == FLATPAK_TRANSACTION_OPERATION_INSTALL)"
    },
    {
        "line": 75,
        "fullcodeline": "if (commit_data == NULL)"
    },
    {
        "line": 82,
        "fullcodeline": "g_autoptr(GError) local_error = NULL;"
    },
    {
        "line": 83,
        "fullcodeline": "g_autoptr(GFile) sideload_path = NULL;"
    },
    {
        "line": 37,
        "fullcodeline": "op->skip = TRUE;"
    },
    {
        "line": 56,
        "fullcodeline": "priv->max_op = APP_INSTALL;"
    },
    {
        "line": 60,
        "fullcodeline": "else if (flatpak_decomposed_is_runtime (op->ref))"
    },
    {
        "line": 85,
        "fullcodeline": "if (op->commit != NULL)"
    },
    {
        "line": 137,
        "fullcodeline": "if (!try_resolve_op_from_metadata (self, op, checksum, sideload_path, state))"
    },
    {
        "line": 58,
        "fullcodeline": "priv->max_op = MAX (priv->max_op, APP_UPDATE);"
    },
    {
        "line": 87,
        "fullcodeline": "checksum = g_strdup (op->commit);"
    },
    {
        "line": 89,
        "fullcodeline": "sideload_path = flatpak_remote_state_lookup_sideload_checksum (state, op->commit);"
    },
    {
        "line": 142,
        "fullcodeline": "g_autoptr(GVariant) commit_data = NULL;"
    },
    {
        "line": 151,
        "fullcodeline": "commit_data = flatpak_remote_state_load_ref_commit (state, priv->dir,"
    },
    {
        "line": 175,
        "fullcodeline": "resolve_op_from_commit (self, op, checksum, sideload_path, commit_data);"
    },
    {
        "line": 62,
        "fullcodeline": "if (op->kind == FLATPAK_TRANSACTION_OPERATION_INSTALL)"
    },
    {
        "line": 93,
        "fullcodeline": "g_autofree char *latest_checksum = NULL;"
    },
    {
        "line": 94,
        "fullcodeline": "g_autoptr(GFile) latest_sideload_path = NULL;"
    },
    {
        "line": 95,
        "fullcodeline": "g_autofree char *local_checksum = NULL;"
    },
    {
        "line": 97,
        "fullcodeline": "g_autoptr(GVariant) local_commit_data = flatpak_dir_read_latest_commit (priv->dir, op->remote, op->ref,"
    },
    {
        "line": 146,
        "fullcodeline": "if (op->summary_metadata == NULL &&"
    },
    {
        "line": 155,
        "fullcodeline": "if (commit_data == NULL)"
    },
    {
        "line": 63,
        "fullcodeline": "priv->max_op = MAX (priv->max_op, RUNTIME_INSTALL);"
    },
    {
        "line": 100,
        "fullcodeline": "if (flatpak_dir_find_latest_rev (priv->dir, state, flatpak_decomposed_get_ref (op->ref), op->commit,"
    },
    {
        "line": 147,
        "fullcodeline": "flatpak_remote_state_lookup_ref (state, flatpak_decomposed_get_ref (op->ref),"
    },
    {
        "line": 149,
        "fullcodeline": "op->summary_metadata = var_metadata_dup_to_gvariant (var_ref_info_get_metadata (ref_info));"
    },
    {
        "line": 152,
        "fullcodeline": "flatpak_decomposed_get_ref (op->ref),"
    },
    {
        "line": 157,
        "fullcodeline": "if (g_error_matches (local_error, FLATPAK_HTTP_ERROR, FLATPAK_HTTP_ERROR_UNAUTHORIZED) && !op->requested_token)"
    },
    {
        "line": 171,
        "fullcodeline": "g_propagate_error (error, g_steal_pointer (&local_error));"
    },
    {
        "line": 106,
        "fullcodeline": "if (latest_sideload_path != NULL && local_commit_data && latest_timestamp != 0 &&"
    },
    {
        "line": 128,
        "fullcodeline": "g_message (_(\"Warning: Treating remote fetch error as non-fatal since %s is already installed: %s\"),"
    },
    {
        "line": 130,
        "fullcodeline": "g_clear_error (&local_error);"
    },
    {
        "line": 132,
        "fullcodeline": "checksum = g_steal_pointer (&local_checksum);"
    },
    {
        "line": 160,
        "fullcodeline": "g_debug (\"Unauthorized access during resolve by commit of %s, retrying with token\", flatpak_decomposed_get_ref (op->ref));"
    },
    {
        "line": 161,
        "fullcodeline": "priv->needs_resolve = TRUE;"
    },
    {
        "line": 162,
        "fullcodeline": "priv->needs_tokens = TRUE;"
    },
    {
        "line": 165,
        "fullcodeline": "op->token_type = G_MAXINT32;"
    },
    {
        "line": 166,
        "fullcodeline": "op->resolved_commit = g_strdup (checksum);"
    },
    {
        "line": 168,
        "fullcodeline": "g_clear_error (&local_error);"
    },
    {
        "line": 107,
        "fullcodeline": "ostree_commit_get_timestamp (local_commit_data) > latest_timestamp)"
    },
    {
        "line": 109,
        "fullcodeline": "g_debug (\"Installed commit %s newer than sideloaded %s, ignoring\", local_checksum, latest_checksum);"
    },
    {
        "line": 110,
        "fullcodeline": "checksum = g_steal_pointer (&local_checksum);"
    },
    {
        "line": 122,
        "fullcodeline": "if (local_commit_data == NULL)"
    },
    {
        "line": 129,
        "fullcodeline": "flatpak_decomposed_get_ref (op->ref), local_error->message);"
    },
    {
        "line": 115,
        "fullcodeline": "checksum = g_steal_pointer (&latest_checksum);"
    },
    {
        "line": 116,
        "fullcodeline": "sideload_path = g_steal_pointer (&latest_sideload_path);"
    },
    {
        "line": 124,
        "fullcodeline": "g_propagate_error (error, g_steal_pointer (&local_error));"
    }
]