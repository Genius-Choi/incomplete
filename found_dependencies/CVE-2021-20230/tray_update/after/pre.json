[
    {
        "line": 3,
        "fullcodeline": "static ICON_TYPE previous_icon=ICON_NONE;"
    },
    {
        "line": 20,
        "fullcodeline": "ZeroMemory(&nid, sizeof nid);"
    },
    {
        "line": 21,
        "fullcodeline": "nid.cbSize=sizeof nid;"
    },
    {
        "line": 22,
        "fullcodeline": "nid.uID=1; /* application-defined icon ID */"
    },
    {
        "line": 23,
        "fullcodeline": "nid.uFlags=NIF_MESSAGE|NIF_TIP;"
    },
    {
        "line": 24,
        "fullcodeline": "nid.uCallbackMessage=WM_SYSTRAY; /* notification message */"
    },
    {
        "line": 25,
        "fullcodeline": "nid.hWnd=hwnd; /* window to receive notifications */"
    },
    {
        "line": 36,
        "fullcodeline": "_tcsncpy(nid.szTip, tip, 63);"
    },
    {
        "line": 39,
        "fullcodeline": "nid.hIcon=global_options.icon[current_icon];"
    },
    {
        "line": 47,
        "fullcodeline": "nid.uFlags|=NIF_ICON;"
    },
    {
        "line": 48,
        "fullcodeline": "Shell_NotifyIcon(NIM_ADD, &nid);"
    },
    {
        "line": 7,
        "fullcodeline": "if(!global_options.option.taskbar) { /* currently disabled */"
    },
    {
        "line": 11,
        "fullcodeline": "if(!tray_menu_handle) /* initialize taskbar */"
    },
    {
        "line": 13,
        "fullcodeline": "if(!tray_menu_handle) {"
    },
    {
        "line": 26,
        "fullcodeline": "if(num<0) {"
    },
    {
        "line": 37,
        "fullcodeline": "nid.szTip[63]=TEXT('\\0');"
    },
    {
        "line": 40,
        "fullcodeline": "if(current_icon!=previous_icon) {"
    },
    {
        "line": 44,
        "fullcodeline": "if(Shell_NotifyIcon(NIM_MODIFY, &nid)) /* modify tooltip */"
    },
    {
        "line": 8,
        "fullcodeline": "tray_delete(); /* remove the taskbark icon if exists */"
    },
    {
        "line": 12,
        "fullcodeline": "tray_menu_handle=LoadMenu(ghInst, MAKEINTRESOURCE(IDM_TRAYMENU));"
    },
    {
        "line": 18,
        "fullcodeline": "EnableMenuItem(tray_menu_handle, IDM_EDIT_CONFIG, MF_GRAYED);"
    },
    {
        "line": 27,
        "fullcodeline": "tip=str_tprintf(TEXT(\"stunnel is down\"));"
    },
    {
        "line": 28,
        "fullcodeline": "current_icon=ICON_ERROR;"
    },
    {
        "line": 41,
        "fullcodeline": "nid.uFlags|=NIF_ICON;"
    },
    {
        "line": 29,
        "fullcodeline": "} else if(num>0) {"
    },
    {
        "line": 30,
        "fullcodeline": "tip=str_tprintf(TEXT(\"stunnel connections: %d\"), num);"
    },
    {
        "line": 31,
        "fullcodeline": "current_icon=ICON_ACTIVE;"
    },
    {
        "line": 33,
        "fullcodeline": "tip=str_tprintf(TEXT(\"stunnel is idle\"));"
    },
    {
        "line": 34,
        "fullcodeline": "current_icon=ICON_IDLE;"
    }
]