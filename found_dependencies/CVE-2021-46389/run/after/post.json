[
    {
        "line": 14,
        "fullcodeline": "this->session = session;"
    },
    {
        "line": 15,
        "fullcodeline": "checkImage();"
    },
    {
        "line": 23,
        "fullcodeline": "string arg = argument;"
    },
    {
        "line": 24,
        "fullcodeline": "int delimitter = arg.find( \",\" );"
    },
    {
        "line": 25,
        "fullcodeline": "int resolution = atoi( arg.substr(0,delimitter).c_str() );"
    },
    {
        "line": 27,
        "fullcodeline": "arg = arg.substr( delimitter + 1, arg.length() );"
    },
    {
        "line": 28,
        "fullcodeline": "delimitter = arg.find( \",\" );"
    },
    {
        "line": 29,
        "fullcodeline": "int tile = atoi( arg.substr(0,delimitter).c_str() );"
    },
    {
        "line": 31,
        "fullcodeline": "arg = arg.substr( delimitter + 1, arg.length() );"
    },
    {
        "line": 32,
        "fullcodeline": "delimitter = arg.find( \",\" );"
    },
    {
        "line": 33,
        "fullcodeline": "int x = atoi( arg.substr(0,delimitter).c_str() );"
    },
    {
        "line": 35,
        "fullcodeline": "arg = arg.substr( delimitter + 1, arg.length() );"
    },
    {
        "line": 36,
        "fullcodeline": "delimitter = arg.find( \",\" );"
    },
    {
        "line": 37,
        "fullcodeline": "int y = atoi( arg.substr(0,arg.length()).c_str() );"
    },
    {
        "line": 53,
        "fullcodeline": "TileManager tilemanager( session->tileCache, *session->image, session->watermark, session->jpeg, session->logfile, session->loglevel );"
    },
    {
        "line": 56,
        "fullcodeline": "list <int> views = (*session->image)->getHorizontalViewsList();"
    },
    {
        "line": 66,
        "fullcodeline": "header << session->response->createHTTPHeader( \"xml\", (*session->image)->getTimestamp() );"
    },
    {
        "line": 67,
        "fullcodeline": "session->out->putStr( (const char*) header.str().c_str(), header.tellp() );"
    },
    {
        "line": 68,
        "fullcodeline": "session->out->flush();"
    },
    {
        "line": 71,
        "fullcodeline": "session->out->putS( \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" );"
    },
    {
        "line": 72,
        "fullcodeline": "session->out->putS( \"<spectra>\\n\" );"
    },
    {
        "line": 73,
        "fullcodeline": "session->out->flush();"
    },
    {
        "line": 131,
        "fullcodeline": "session->out->putS( \"</spectra>\" );"
    },
    {
        "line": 141,
        "fullcodeline": "session->response->setImageSent();"
    },
    {
        "line": 10,
        "fullcodeline": "if( session->loglevel >= 3 ) (*session->logfile) << \"SPECTRA handler reached\" << endl;"
    },
    {
        "line": 19,
        "fullcodeline": "if( session->loglevel >= 2 ) command_timer.start();"
    },
    {
        "line": 39,
        "fullcodeline": "if( session->loglevel >= 5 ){"
    },
    {
        "line": 47,
        "fullcodeline": "if( x < 0 || x >= (int)(*session->image)->getTileWidth() ||"
    },
    {
        "line": 75,
        "fullcodeline": "for( i = views.begin(); i != views.end(); i++ ){"
    },
    {
        "line": 133,
        "fullcodeline": "if( session->out->flush() == -1 ) {"
    },
    {
        "line": 144,
        "fullcodeline": "if( session->loglevel >= 2 ){"
    },
    {
        "line": 40,
        "fullcodeline": "(*session->logfile) << \"SPECTRA :: resolution: \" << resolution"
    },
    {
        "line": 48,
        "fullcodeline": "y < 0 || y >= (int)(*session->image)->getTileHeight() ){"
    },
    {
        "line": 79,
        "fullcodeline": "RawTile rawtile = tilemanager.getTile( resolution, tile, n, session->view->yangle, session->view->getLayers(), UNCOMPRESSED );"
    },
    {
        "line": 90,
        "fullcodeline": "unsigned int tw = (*session->image)->getTileWidth();"
    },
    {
        "line": 91,
        "fullcodeline": "unsigned int index = y*tw + x;"
    },
    {
        "line": 94,
        "fullcodeline": "float reflectance = 0.0;"
    },
    {
        "line": 118,
        "fullcodeline": "spectrum.push_front( reflectance );"
    },
    {
        "line": 120,
        "fullcodeline": "string metadata = (*session->image)->getMetadata( \"subject\" );"
    },
    {
        "line": 122,
        "fullcodeline": "char tmp[1024];"
    },
    {
        "line": 123,
        "fullcodeline": "snprintf( tmp, 1024, \"\\t<point>\\n\\t\\t<wavelength>%d</wavelength>\\n\\t\\t<reflectance>%f</reflectance>\\n\\t</point>\\n\", n, reflectance );"
    },
    {
        "line": 124,
        "fullcodeline": "session->out->putS( tmp );"
    },
    {
        "line": 125,
        "fullcodeline": "session->out->flush();"
    },
    {
        "line": 145,
        "fullcodeline": "*(session->logfile) << \"SPECTRA :: Total command time \" << command_timer.getTime() << \" microseconds\" << endl;"
    },
    {
        "line": 49,
        "fullcodeline": "throw invalid_argument( \"SPECTRA :: Error: x,y coordinates outside of tile boundaries\" );"
    },
    {
        "line": 82,
        "fullcodeline": "if( x >= (int)rawtile.width || y >= (int)rawtile.height ){"
    },
    {
        "line": 96,
        "fullcodeline": "if( session->loglevel >= 5 ) (*session->logfile) << \"SPECTRA :: \" << rawtile.bpc << \" bits per channel data\" << endl;"
    },
    {
        "line": 99,
        "fullcodeline": "if( rawtile.bpc == 8 ){"
    },
    {
        "line": 127,
        "fullcodeline": "if( session->loglevel >= 3 ) (*session->logfile) << \"SPECTRA :: Band: \" << n << \", reflectance: \" << reflectance << endl;"
    },
    {
        "line": 134,
        "fullcodeline": "if( session->loglevel >= 1 ){"
    },
    {
        "line": 100,
        "fullcodeline": "ptr = (unsigned char*) (rawtile.data);"
    },
    {
        "line": 101,
        "fullcodeline": "reflectance = static_cast<float>((float)((unsigned char*)ptr)[index]) / 255.0;"
    },
    {
        "line": 135,
        "fullcodeline": "*(session->logfile) << \"SPECTRA :: Error flushing XML\" << endl;"
    },
    {
        "line": 83,
        "fullcodeline": "if( session->loglevel >= 1 ){"
    },
    {
        "line": 84,
        "fullcodeline": "(*session->logfile) << \"SPECTRA :: Error: x,y coordinates outside of tile boundaries\" << endl;"
    },
    {
        "line": 103,
        "fullcodeline": "else if( rawtile.bpc == 16 ){"
    },
    {
        "line": 104,
        "fullcodeline": "ptr = (unsigned short*) (rawtile.data);"
    },
    {
        "line": 105,
        "fullcodeline": "reflectance = static_cast<float>((float)((unsigned short*)ptr)[index]) / 65535.0;"
    },
    {
        "line": 107,
        "fullcodeline": "else if( rawtile.bpc == 32 ){"
    },
    {
        "line": 108,
        "fullcodeline": "if( rawtile.sampleType == FIXEDPOINT ) {"
    },
    {
        "line": 109,
        "fullcodeline": "ptr = (unsigned int*) rawtile.data;"
    },
    {
        "line": 113,
        "fullcodeline": "ptr = (float*) rawtile.data;"
    },
    {
        "line": 110,
        "fullcodeline": "reflectance = static_cast<float>((float)((unsigned int*)ptr)[index]);"
    },
    {
        "line": 114,
        "fullcodeline": "reflectance = static_cast<float>((float)((float*)ptr)[index]);"
    }
]