[
    {
        "line": 2,
        "fullcodeline": "ref = options[:ref] ? options[:ref] : \"HEAD\""
    },
    {
        "line": 3,
        "fullcodeline": "query = Shellwords.split(query).select {|q| !(q =~ /^(-O)|(--open-files-in-pager)/) }"
    },
    {
        "line": 4,
        "fullcodeline": "query = Shellwords.join(query)"
    },
    {
        "line": 5,
        "fullcodeline": "args = [{}, '-I', '-i', '-c', query, ref, '--']"
    },
    {
        "line": 7,
        "fullcodeline": "result = @git.grep(*args).split(\"\\n\")"
    },
    {
        "line": 1,
        "fullcodeline": "def grep(query, options={})"
    },
    {
        "line": 8,
        "fullcodeline": "result.map do |line|"
    },
    {
        "line": 6,
        "fullcodeline": "args << options[:path] if options[:path]"
    }
]