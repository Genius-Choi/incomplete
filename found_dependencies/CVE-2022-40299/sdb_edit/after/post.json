[
    {
        "line": 3,
        "fullcodeline": "char * filename = omStrDup(\"/tmp/sdXXXXXX\");"
    },
    {
        "line": 4,
        "fullcodeline": "int f=mkstemp(filename);"
    },
    {
        "line": 85,
        "fullcodeline": "si_unlink(filename);"
    },
    {
        "line": 86,
        "fullcodeline": "omFree(filename);"
    },
    {
        "line": 5,
        "fullcodeline": "if (f==-1)"
    },
    {
        "line": 11,
        "fullcodeline": "if (pi->language!= LANG_SINGULAR)"
    },
    {
        "line": 7,
        "fullcodeline": "Print(\"cannot open %s\\n\",filename);"
    },
    {
        "line": 8,
        "fullcodeline": "omFree(filename);"
    },
    {
        "line": 13,
        "fullcodeline": "Print(\"cannot edit type %d\\n\",pi->language);"
    },
    {
        "line": 14,
        "fullcodeline": "close(f);"
    },
    {
        "line": 15,
        "fullcodeline": "f=NULL;"
    },
    {
        "line": 19,
        "fullcodeline": "const char *editor=getenv(\"EDITOR\");"
    },
    {
        "line": 24,
        "fullcodeline": "editor=omStrDup(editor);"
    },
    {
        "line": 39,
        "fullcodeline": "write(f,pi->data.s.body,strlen(pi->data.s.body));"
    },
    {
        "line": 40,
        "fullcodeline": "close(f);"
    },
    {
        "line": 42,
        "fullcodeline": "int pid=fork();"
    },
    {
        "line": 67,
        "fullcodeline": "FILE* fp=fopen(filename,\"r\");"
    },
    {
        "line": 20,
        "fullcodeline": "if (editor==NULL)"
    },
    {
        "line": 22,
        "fullcodeline": "if (editor==NULL)"
    },
    {
        "line": 26,
        "fullcodeline": "if (pi->data.s.body==NULL)"
    },
    {
        "line": 43,
        "fullcodeline": "if (pid!=0)"
    },
    {
        "line": 68,
        "fullcodeline": "if (fp==NULL)"
    },
    {
        "line": 21,
        "fullcodeline": "editor=getenv(\"VISUAL\");"
    },
    {
        "line": 23,
        "fullcodeline": "editor=\"vi\";"
    },
    {
        "line": 28,
        "fullcodeline": "iiGetLibProcBuffer(pi);"
    },
    {
        "line": 45,
        "fullcodeline": "si_wait(&pid);"
    },
    {
        "line": 70,
        "fullcodeline": "Print(\"cannot read from %s\\n\",filename);"
    },
    {
        "line": 29,
        "fullcodeline": "if (pi->data.s.body==NULL)"
    },
    {
        "line": 74,
        "fullcodeline": "fseek(fp,0L,SEEK_END);"
    },
    {
        "line": 75,
        "fullcodeline": "long len=ftell(fp);"
    },
    {
        "line": 76,
        "fullcodeline": "fseek(fp,0L,SEEK_SET);"
    },
    {
        "line": 78,
        "fullcodeline": "omFree((ADDRESS)pi->data.s.body);"
    },
    {
        "line": 79,
        "fullcodeline": "pi->data.s.body=(char *)omAlloc((int)len+1);"
    },
    {
        "line": 80,
        "fullcodeline": "myfread( pi->data.s.body, len, 1, fp);"
    },
    {
        "line": 81,
        "fullcodeline": "pi->data.s.body[len]='\\0';"
    },
    {
        "line": 82,
        "fullcodeline": "fclose(fp);"
    },
    {
        "line": 31,
        "fullcodeline": "PrintS(\"cannot get the procedure body\\n\");"
    },
    {
        "line": 32,
        "fullcodeline": "close(f);"
    },
    {
        "line": 33,
        "fullcodeline": "si_unlink(filename);"
    },
    {
        "line": 34,
        "fullcodeline": "omFree(filename);"
    },
    {
        "line": 47,
        "fullcodeline": "else if(pid==0)"
    },
    {
        "line": 60,
        "fullcodeline": "exit(0);"
    },
    {
        "line": 49,
        "fullcodeline": "if (strchr(editor,' ')==NULL)"
    },
    {
        "line": 64,
        "fullcodeline": "PrintS(\"cannot fork\\n\");"
    },
    {
        "line": 51,
        "fullcodeline": "execlp(editor,editor,filename,NULL);"
    },
    {
        "line": 52,
        "fullcodeline": "Print(\"cannot exec %s\\n\",editor);"
    },
    {
        "line": 56,
        "fullcodeline": "char *p=(char *)omAlloc(strlen(editor)+strlen(filename)+2);"
    },
    {
        "line": 57,
        "fullcodeline": "sprintf(p,\"%s %s\",editor,filename);"
    },
    {
        "line": 58,
        "fullcodeline": "system(p);"
    }
]