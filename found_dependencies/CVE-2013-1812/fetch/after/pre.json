[
    {
        "line": 2,
        "fullcodeline": "unparsed_url = url.dup"
    },
    {
        "line": 3,
        "fullcodeline": "url = URI::parse(url)"
    },
    {
        "line": 1,
        "fullcodeline": "def fetch(url, body=nil, headers=nil, redirect_limit=REDIRECT_LIMIT)"
    },
    {
        "line": 50,
        "fullcodeline": "case response"
    },
    {
        "line": 8,
        "fullcodeline": "headers ||= {}"
    },
    {
        "line": 9,
        "fullcodeline": "headers['User-agent'] ||= USER_AGENT"
    },
    {
        "line": 12,
        "fullcodeline": "conn = make_connection(url)"
    },
    {
        "line": 15,
        "fullcodeline": "whole_body = ''"
    },
    {
        "line": 25,
        "fullcodeline": "response = conn.start {"
    },
    {
        "line": 64,
        "fullcodeline": "response = HTTPResponse._from_net_response(response, unparsed_url)"
    },
    {
        "line": 65,
        "fullcodeline": "response.body = whole_body"
    },
    {
        "line": 66,
        "fullcodeline": "setup_encoding(response)"
    },
    {
        "line": 52,
        "fullcodeline": "if redirect_limit <= 0"
    },
    {
        "line": 57,
        "fullcodeline": "return fetch(response['location'], body, headers, redirect_limit - 1)"
    },
    {
        "line": 53,
        "fullcodeline": "raise HTTPRedirectLimitReached.new("
    },
    {
        "line": 54,
        "fullcodeline": "\"Too many redirects, not fetching #{response['location']}\")"
    }
]