[
    {
        "line": 12,
        "fullcodeline": "work_dir = os.path.join(__opts__['cachedir'], 'tmp')"
    },
    {
        "line": 15,
        "fullcodeline": "install_file = tempfile.NamedTemporaryFile(dir=work_dir,"
    },
    {
        "line": 18,
        "fullcodeline": "install_filename = install_file.name"
    },
    {
        "line": 19,
        "fullcodeline": "install_file.close()"
    },
    {
        "line": 20,
        "fullcodeline": "account_url = get_sd_auth('account_url')"
    },
    {
        "line": 22,
        "fullcodeline": "__salt__['cmd.run']("
    },
    {
        "line": 26,
        "fullcodeline": "__salt__['cmd.run'](cmd='chmod +x {0}'.format(install_filename), cwd=work_dir)"
    },
    {
        "line": 13,
        "fullcodeline": "if not os.path.isdir(work_dir):"
    },
    {
        "line": 28,
        "fullcodeline": "return __salt__['cmd.run']("
    },
    {
        "line": 14,
        "fullcodeline": "os.mkdir(work_dir)"
    },
    {
        "line": 23,
        "fullcodeline": "cmd='curl https://www.serverdensity.com/downloads/agent-install.sh -o {0}'.format(install_filename),"
    },
    {
        "line": 29,
        "fullcodeline": "cmd='./{filename} -a {account_url} -k {agent_key}'.format("
    }
]