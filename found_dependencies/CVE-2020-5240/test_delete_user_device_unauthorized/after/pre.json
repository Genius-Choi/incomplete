[
    {
        "line": 2,
        "fullcodeline": "with override_settings(WAGTAIL_2FA_REQUIRED=True):"
    },
    {
        "line": 3,
        "fullcodeline": "user = get_user_model().objects.filter(is_staff=False).first()"
    },
    {
        "line": 4,
        "fullcodeline": "device = TOTPDevice.objects.create(name='Initial', user=user, confirmed=True)"
    },
    {
        "line": 6,
        "fullcodeline": "endpoint = reverse('wagtail_2fa_device_remove', kwargs={'pk': device.id})"
    },
    {
        "line": 7,
        "fullcodeline": "response = client.post(endpoint, {"
    },
    {
        "line": 10,
        "fullcodeline": "assert response.status_code == 302"
    },
    {
        "line": 11,
        "fullcodeline": "assert TOTPDevice.objects.all().count() == 1"
    }
]