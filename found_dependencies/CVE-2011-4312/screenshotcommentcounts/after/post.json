[
    {
        "line": 18,
        "fullcodeline": "comments = {}"
    },
    {
        "line": 19,
        "fullcodeline": "user = context.get('user', None)"
    },
    {
        "line": 21,
        "fullcodeline": "for comment in screenshot.comments.all():"
    },
    {
        "line": 44,
        "fullcodeline": "return simplejson.dumps(comments)"
    },
    {
        "line": 22,
        "fullcodeline": "review = get_object_or_none(comment.review)"
    },
    {
        "line": 24,
        "fullcodeline": "if review and (review.public or review.user == user):"
    },
    {
        "line": 25,
        "fullcodeline": "position = '%dx%d+%d+%d' % (comment.w, comment.h, \\"
    },
    {
        "line": 28,
        "fullcodeline": "comments.setdefault(position, []).append({"
    },
    {
        "line": 30,
        "fullcodeline": "'text': escape(comment.text),"
    },
    {
        "line": 35,
        "fullcodeline": "'url': comment.get_review_url(),"
    },
    {
        "line": 36,
        "fullcodeline": "'localdraft' : review.user == user and \\"
    },
    {
        "line": 31,
        "fullcodeline": "'user': {"
    },
    {
        "line": 37,
        "fullcodeline": "not review.public,"
    },
    {
        "line": 33,
        "fullcodeline": "'name': review.user.get_full_name() or review.user.username,"
    }
]