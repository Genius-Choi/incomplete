[
    {
        "line": 21,
        "fullcodeline": "comment_dict = {}"
    },
    {
        "line": 22,
        "fullcodeline": "user = context.get('user', None)"
    },
    {
        "line": 52,
        "fullcodeline": "comments_array = []"
    },
    {
        "line": 61,
        "fullcodeline": "comments_array.sort(cmp=lambda x, y: cmp(x['linenum'], y['linenum'] or"
    },
    {
        "line": 31,
        "fullcodeline": "for comment in query:"
    },
    {
        "line": 54,
        "fullcodeline": "for key, value in comment_dict.iteritems():"
    },
    {
        "line": 64,
        "fullcodeline": "return simplejson.dumps(comments_array)"
    },
    {
        "line": 25,
        "fullcodeline": "query = Comment.objects.filter(filediff=filediff,"
    },
    {
        "line": 28,
        "fullcodeline": "query = Comment.objects.filter(filediff=filediff,"
    },
    {
        "line": 32,
        "fullcodeline": "review = get_object_or_none(comment.review)"
    },
    {
        "line": 55,
        "fullcodeline": "comments_array.append({"
    },
    {
        "line": 34,
        "fullcodeline": "if review and (review.public or review.user == user):"
    },
    {
        "line": 35,
        "fullcodeline": "key = (comment.first_line, comment.num_lines)"
    },
    {
        "line": 37,
        "fullcodeline": "comment_dict.setdefault(key, []).append({"
    },
    {
        "line": 39,
        "fullcodeline": "'text': escape(comment.text),"
    },
    {
        "line": 47,
        "fullcodeline": "'url': comment.get_review_url(),"
    },
    {
        "line": 48,
        "fullcodeline": "'localdraft': review.user == user and \\"
    },
    {
        "line": 42,
        "fullcodeline": "'user': {"
    },
    {
        "line": 49,
        "fullcodeline": "not review.public,"
    },
    {
        "line": 44,
        "fullcodeline": "'name': review.user.get_full_name() or review.user.username,"
    }
]