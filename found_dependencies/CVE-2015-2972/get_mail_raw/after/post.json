[
    {
        "line": 2,
        "fullcodeline": "Log.add_info(request, params.inspect)"
    },
    {
        "line": 4,
        "fullcodeline": "email = Email.find(params[:id])"
    },
    {
        "line": 5,
        "fullcodeline": "email_name = email.subject + Email::EXT_RAW"
    },
    {
        "line": 16,
        "fullcodeline": "filepath = File.join(email.get_dir, email.id.to_s + Email::EXT_RAW)"
    },
    {
        "line": 8,
        "fullcodeline": "unless agent.nil?"
    },
    {
        "line": 17,
        "fullcodeline": "if FileTest.exist?(filepath)"
    },
    {
        "line": 9,
        "fullcodeline": "ie_ver = nil"
    },
    {
        "line": 10,
        "fullcodeline": "agent.scan(/\\sMSIE\\s?(\\d+)[.](\\d+)/){|m|"
    },
    {
        "line": 13,
        "fullcodeline": "email_name = CGI::escape(email_name) unless ie_ver.nil?"
    },
    {
        "line": 18,
        "fullcodeline": "send_file(filepath, :filename => email_name, :stream => true, :disposition => 'attachment')"
    },
    {
        "line": 20,
        "fullcodeline": "send_data('', :type => 'application/octet-stream;', :disposition => 'attachment;filename=\"'+email_name+'\"')"
    }
]