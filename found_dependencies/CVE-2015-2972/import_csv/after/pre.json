[
    {
        "line": 2,
        "fullcodeline": "Log.add_info(request, params.inspect)"
    },
    {
        "line": 6,
        "fullcodeline": "file = params[:imp_file]"
    },
    {
        "line": 7,
        "fullcodeline": "mode = params[:mode]"
    },
    {
        "line": 8,
        "fullcodeline": "enc = params[:enc]"
    },
    {
        "line": 9,
        "fullcodeline": "book = params[:filter_book]"
    },
    {
        "line": 12,
        "fullcodeline": "all_addresses = Address.get_for(@login_user, book)"
    },
    {
        "line": 21,
        "fullcodeline": "@imp_errs = {}"
    },
    {
        "line": 23,
        "fullcodeline": "addresses = []"
    },
    {
        "line": 25,
        "fullcodeline": "opt = {"
    },
    {
        "line": 29,
        "fullcodeline": "csv = file.read"
    },
    {
        "line": 36,
        "fullcodeline": "found_update = false"
    },
    {
        "line": 37,
        "fullcodeline": "err_col_names = nil"
    },
    {
        "line": 94,
        "fullcodeline": "@imp_cnt = 0"
    },
    {
        "line": 119,
        "fullcodeline": "del_cnt = 0"
    },
    {
        "line": 4,
        "fullcodeline": "return unless request.post?"
    },
    {
        "line": 15,
        "fullcodeline": "if (mode == 'add')"
    },
    {
        "line": 22,
        "fullcodeline": "count = -1  # 0 for Header-line"
    },
    {
        "line": 135,
        "fullcodeline": "render(:action => 'list')"
    },
    {
        "line": 10,
        "fullcodeline": "book = Address::BOOK_PRIVATE unless @login_user.admin?(User::AUTH_ADDRESSBOOK)"
    },
    {
        "line": 16,
        "fullcodeline": "all_addresses.each do |address|"
    },
    {
        "line": 26,
        "fullcodeline": ":skip_blanks => true"
    },
    {
        "line": 31,
        "fullcodeline": "csv.encode!(Encoding::UTF_8, enc, {:invalid => :replace, :undef => :replace, :replace => ' '})"
    },
    {
        "line": 40,
        "fullcodeline": "CSV.parse(csv, opt) do |row|"
    },
    {
        "line": 96,
        "fullcodeline": "addresses.each do |address|"
    },
    {
        "line": 120,
        "fullcodeline": "if (@imp_errs.empty? and mode == 'update')"
    },
    {
        "line": 128,
        "fullcodeline": "flash[:notice] = t('address.imported', :count => addresses.length)"
    },
    {
        "line": 33,
        "fullcodeline": "Log.add_error(request, evar)"
    },
    {
        "line": 129,
        "fullcodeline": "if (del_cnt > 0)"
    },
    {
        "line": 84,
        "fullcodeline": "@imp_errs[0] = [t('address.nothing_to_import')]"
    },
    {
        "line": 86,
        "fullcodeline": "if (mode == 'update') and !found_update"
    },
    {
        "line": 87,
        "fullcodeline": "@imp_errs[0] = [t('address.nothing_to_update')]"
    },
    {
        "line": 130,
        "fullcodeline": "flash[:notice] << '<br/>' + t('address.deleted', :count => del_cnt)"
    }
]