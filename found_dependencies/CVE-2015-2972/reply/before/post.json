[
    {
        "line": 2,
        "fullcodeline": "Log.add_info(request, '')   # Not to show passwords."
    },
    {
        "line": 15,
        "fullcodeline": "item = target.item"
    },
    {
        "line": 17,
        "fullcodeline": "comment = ZeptairDistHelper.get_comment_of(item.id, @login_user.id)"
    },
    {
        "line": 4,
        "fullcodeline": "unless params[:attach_id].nil? or params[:attach_id].empty?"
    },
    {
        "line": 7,
        "fullcodeline": "unless params[:cmd_id].nil? or params[:cmd_id].empty?"
    },
    {
        "line": 10,
        "fullcodeline": "if target.nil? or target.item.nil? \\"
    },
    {
        "line": 98,
        "fullcodeline": "render(:text => '')"
    },
    {
        "line": 5,
        "fullcodeline": "target = Attachment.find(params[:attach_id])"
    },
    {
        "line": 8,
        "fullcodeline": "target = ZeptairCommand.find(params[:cmd_id])"
    },
    {
        "line": 11,
        "fullcodeline": "or target.item.xtype != Item::XTYPE_ZEPTAIR_DIST"
    },
    {
        "line": 12,
        "fullcodeline": "render(:text => 'ERROR:' + t('msg.system_error'))"
    },
    {
        "line": 20,
        "fullcodeline": "when ZeptairDistHelper::ENTRY_STATUS_SAVED, ZeptairDistHelper::ENTRY_STATUS_EXECUTED, ZeptairDistHelper::ENTRY_STATUS_ERROR"
    },
    {
        "line": 21,
        "fullcodeline": "new_entry = \"#{target.class}#{ZeptairDistHelper::ACK_CLASS_SEP}#{target.id}#{ZeptairDistHelper::ACK_ID_SEP}#{params[:timestamp]}#{ZeptairDistHelper::ACK_TS_SEP}#{params[:status]}\""
    },
    {
        "line": 73,
        "fullcodeline": "when 'canceled'"
    },
    {
        "line": 24,
        "fullcodeline": "comment = Comment.new"
    },
    {
        "line": 26,
        "fullcodeline": "comment.item_id = item.id"
    },
    {
        "line": 28,
        "fullcodeline": "comment.message = new_entry + \"\\n\""
    },
    {
        "line": 31,
        "fullcodeline": "class_order = {'Attachment' => 0, 'ZeptairCommand' => 1}"
    },
    {
        "line": 32,
        "fullcodeline": "target_order = class_order[target.class.to_s]"
    },
    {
        "line": 34,
        "fullcodeline": "entries = ZeptairDistHelper.get_ack_array_of(comment)"
    },
    {
        "line": 36,
        "fullcodeline": "unless entries.include?(new_entry)"
    },
    {
        "line": 74,
        "fullcodeline": "unless comment.nil?"
    },
    {
        "line": 25,
        "fullcodeline": "comment.user_id = @login_user.id"
    },
    {
        "line": 37,
        "fullcodeline": "msg = ''"
    },
    {
        "line": 38,
        "fullcodeline": "inserted = false"
    },
    {
        "line": 40,
        "fullcodeline": "entries.each do |entry|"
    },
    {
        "line": 70,
        "fullcodeline": "comment.update_attribute(:message, msg)"
    },
    {
        "line": 80,
        "fullcodeline": "msg = ''"
    },
    {
        "line": 81,
        "fullcodeline": "exp = \"^#{target.class}#{ZeptairDistHelper::ACK_CLASS_SEP}#{target.id}#{ZeptairDistHelper::ACK_ID_SEP}\""
    },
    {
        "line": 83,
        "fullcodeline": "entries.each do |entry|"
    },
    {
        "line": 67,
        "fullcodeline": "unless inserted"
    },
    {
        "line": 68,
        "fullcodeline": "msg << new_entry + \"\\n\""
    },
    {
        "line": 75,
        "fullcodeline": "if comment.message.nil?"
    },
    {
        "line": 76,
        "fullcodeline": "entries = []"
    },
    {
        "line": 78,
        "fullcodeline": "entries = comment.message.split(\"\\n\")"
    },
    {
        "line": 94,
        "fullcodeline": "comment.update_attribute(:message, msg)"
    }
]