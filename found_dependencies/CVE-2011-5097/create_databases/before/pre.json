[
    {
        "line": 2,
        "fullcodeline": "Chef::Log.info(\"Creating bootstrap databases\")"
    },
    {
        "line": 3,
        "fullcodeline": "cdb = Chef::CouchDB.new(Chef::Config[:couchdb_url], \"chef_integration\")"
    },
    {
        "line": 15,
        "fullcodeline": "db_created = nil"
    },
    {
        "line": 16,
        "fullcodeline": "max_tries = 10"
    },
    {
        "line": 17,
        "fullcodeline": "num_tries = 1"
    },
    {
        "line": 51,
        "fullcodeline": "Chef::Certificate.gen_validation_key(Chef::Config[:web_ui_client_name], Chef::Config[:web_ui_key])"
    },
    {
        "line": 53,
        "fullcodeline": "system(\"cp #{File.join(Dir.tmpdir, \"chef_integration\", \"validation.pem\")} #{Dir.tmpdir}\")"
    },
    {
        "line": 54,
        "fullcodeline": "system(\"cp #{File.join(Dir.tmpdir, \"chef_integration\", \"webui.pem\")} #{Dir.tmpdir}\")"
    },
    {
        "line": 56,
        "fullcodeline": "cmd = [KNIFE_CMD, \"cookbook\", \"upload\", \"-a\", \"-o\", INTEGRATION_COOKBOOKS, \"-u\", \"validator\", \"-k\", File.join(Dir.tmpdir, \"validation.pem\"), \"-c\", KNIFE_CONFIG]"
    },
    {
        "line": 57,
        "fullcodeline": "Chef::Log.info(\"Uploading fixture cookbooks with #{cmd.join(' ')}\")"
    },
    {
        "line": 58,
        "fullcodeline": "cmd << {:timeout => 120}"
    },
    {
        "line": 18,
        "fullcodeline": "while !db_created && num_tries <= max_tries"
    },
    {
        "line": 39,
        "fullcodeline": "Chef::Node.create_design_document"
    },
    {
        "line": 40,
        "fullcodeline": "Chef::Role.create_design_document"
    },
    {
        "line": 41,
        "fullcodeline": "Chef::DataBag.create_design_document"
    },
    {
        "line": 42,
        "fullcodeline": "Chef::ApiClient.create_design_document"
    },
    {
        "line": 43,
        "fullcodeline": "Chef::WebUIUser.create_design_document"
    },
    {
        "line": 44,
        "fullcodeline": "Chef::CookbookVersion.create_design_document"
    },
    {
        "line": 45,
        "fullcodeline": "Chef::Sandbox.create_design_document"
    },
    {
        "line": 46,
        "fullcodeline": "Chef::Checksum.create_design_document"
    },
    {
        "line": 47,
        "fullcodeline": "Chef::Environment.create_design_document"
    },
    {
        "line": 49,
        "fullcodeline": "Chef::Certificate.generate_signing_ca"
    },
    {
        "line": 50,
        "fullcodeline": "Chef::Certificate.gen_validation_key"
    },
    {
        "line": 52,
        "fullcodeline": "Chef::Environment.create_default_environment"
    },
    {
        "line": 59,
        "fullcodeline": "shell_out!(*cmd)"
    },
    {
        "line": 35,
        "fullcodeline": "num_tries += 1"
    },
    {
        "line": 21,
        "fullcodeline": "db_created = true"
    },
    {
        "line": 23,
        "fullcodeline": "unless e.response.code.to_i == 412"
    },
    {
        "line": 28,
        "fullcodeline": "if num_tries <= max_tries"
    },
    {
        "line": 25,
        "fullcodeline": "raise"
    },
    {
        "line": 29,
        "fullcodeline": "Chef::Log.debug(\"In creating chef_integration try #{num_tries}/#{max_tries}, got #{e}; try again\")"
    },
    {
        "line": 30,
        "fullcodeline": "sleep 0.25"
    },
    {
        "line": 32,
        "fullcodeline": "Chef::Log.error(\"In creating chef_integration, tried #{max_tries} times: got #{e}; giving up\")"
    }
]