[
    {
        "line": 3,
        "fullcodeline": "char offset[40] = \"\", name[200] = \"\", path[256];"
    },
    {
        "line": 4,
        "fullcodeline": "mg_http_get_var(&hm->query, \"offset\", offset, sizeof(offset));"
    },
    {
        "line": 5,
        "fullcodeline": "mg_http_get_var(&hm->query, \"name\", name, sizeof(name));"
    },
    {
        "line": 6,
        "fullcodeline": "if (name[0] == '\\0') {"
    },
    {
        "line": 7,
        "fullcodeline": "mg_http_reply(c, 400, \"\", \"%s\", \"name required\");"
    },
    {
        "line": 8,
        "fullcodeline": "return -1;"
    },
    {
        "line": 11,
        "fullcodeline": "size_t oft = strtoul(offset, NULL, 0);"
    },
    {
        "line": 12,
        "fullcodeline": "snprintf(path, sizeof(path), \"%s%c%s\", dir, MG_DIRSEP, name);"
    },
    {
        "line": 13,
        "fullcodeline": "LOG(LL_DEBUG,"
    },
    {
        "line": 14,
        "fullcodeline": "(\"%p %d bytes @ %d [%s]\", c->fd, (int) hm->body.len, (int) oft, name));"
    },
    {
        "line": 15,
        "fullcodeline": "if ((fp = fopen(path, oft == 0 ? \"wb\" : \"ab\")) == NULL) {"
    },
    {
        "line": 16,
        "fullcodeline": "mg_http_reply(c, 400, \"\", \"fopen(%s): %d\", name, errno);"
    },
    {
        "line": 17,
        "fullcodeline": "return -2;"
    },
    {
        "line": 22,
        "fullcodeline": "return (int) hm->body.len;"
    }
]