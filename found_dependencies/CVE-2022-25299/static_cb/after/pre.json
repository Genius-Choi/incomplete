[
    {
        "line": 3,
        "fullcodeline": "if (ev == MG_EV_WRITE || ev == MG_EV_POLL) {"
    },
    {
        "line": 4,
        "fullcodeline": "struct mg_fd *fd = (struct mg_fd *) fn_data;"
    },
    {
        "line": 6,
        "fullcodeline": "size_t n, max = 2 * MG_IO_SIZE;"
    },
    {
        "line": 9,
        "fullcodeline": "n = fd->fs->read(fd->fd, c->send.buf + c->send.len,"
    },
    {
        "line": 7,
        "fullcodeline": "if (c->send.size < max) mg_iobuf_resize(&c->send, max);"
    },
    {
        "line": 8,
        "fullcodeline": "if (c->send.len >= c->send.size) return;  // Rate limit"
    },
    {
        "line": 11,
        "fullcodeline": "if (n > 0) c->send.len += n;"
    },
    {
        "line": 10,
        "fullcodeline": "c->send.size - c->send.len);"
    },
    {
        "line": 13,
        "fullcodeline": "} else if (ev == MG_EV_CLOSE) {"
    }
]