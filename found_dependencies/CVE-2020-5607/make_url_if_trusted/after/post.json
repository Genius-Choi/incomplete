[
    {
        "line": 4,
        "fullcodeline": "ref = URI::decode(ref)"
    },
    {
        "line": 6,
        "fullcodeline": "site_url = URI.parse(@cur_site.full_url)"
    },
    {
        "line": 12,
        "fullcodeline": "full_url.fragment = nil"
    },
    {
        "line": 13,
        "fullcodeline": "full_url.query = nil"
    },
    {
        "line": 9,
        "fullcodeline": "return unless %w(http https).include?(full_url.scheme)"
    },
    {
        "line": 16,
        "fullcodeline": "return if full_url.scheme != site_url.scheme"
    },
    {
        "line": 17,
        "fullcodeline": "return if full_url.host != site_url.host"
    },
    {
        "line": 18,
        "fullcodeline": "return if full_url.port != site_url.port"
    },
    {
        "line": 7,
        "fullcodeline": "full_url = URI.join(site_url, ref) rescue nil"
    }
]