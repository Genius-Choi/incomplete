[
    {
        "line": 2,
        "fullcodeline": "if request.method == \"POST\":"
    },
    {
        "line": 49,
        "fullcodeline": "return \"\", 204"
    },
    {
        "line": 4,
        "fullcodeline": "if \"file\" not in request.files:"
    },
    {
        "line": 10,
        "fullcodeline": "if file.filename == \"\":"
    },
    {
        "line": 16,
        "fullcodeline": "if len(file.filename) > 1000:"
    },
    {
        "line": 19,
        "fullcodeline": "if file and allowed_file(file.filename):"
    },
    {
        "line": 5,
        "fullcodeline": "flash(\"No file part\")"
    },
    {
        "line": 11,
        "fullcodeline": "flash(\"No selected file\")"
    },
    {
        "line": 17,
        "fullcodeline": "flash(\"Filename too long\")"
    },
    {
        "line": 20,
        "fullcodeline": "filename = secure_filename(file.filename)"
    },
    {
        "line": 21,
        "fullcodeline": "new_filename = os.urandom(16).hex()"
    },
    {
        "line": 38,
        "fullcodeline": "user = Users.query.filter_by(id=current_user.id).first()"
    },
    {
        "line": 41,
        "fullcodeline": "new_full_filename = new_filename + \".jpg\""
    },
    {
        "line": 46,
        "fullcodeline": "user.avatar_uri = new_full_filename"
    },
    {
        "line": 22,
        "fullcodeline": "f, ext = os.path.splitext(filename)"
    },
    {
        "line": 24,
        "fullcodeline": "if ext in [\".jpg\", \".jpeg\"]:"
    },
    {
        "line": 42,
        "fullcodeline": "if user.avatar_uri != \"empty.jpg\":"
    },
    {
        "line": 47,
        "fullcodeline": "db.session.commit()"
    },
    {
        "line": 25,
        "fullcodeline": "file.save(os.path.join(UPLOAD_FOLDER + \"/\" + new_filename + \".jpg\"))"
    },
    {
        "line": 28,
        "fullcodeline": "file.save("
    },
    {
        "line": 43,
        "fullcodeline": "if os.path.isfile(UPLOAD_FOLDER + \"/\" + user.avatar_uri):"
    },
    {
        "line": 44,
        "fullcodeline": "os.unlink(UPLOAD_FOLDER + \"/\" + user.avatar_uri)"
    },
    {
        "line": 31,
        "fullcodeline": "with Image.open(UPLOAD_TMP_FOLDER + \"/\" + new_filename + ext) as im:"
    },
    {
        "line": 29,
        "fullcodeline": "os.path.join(UPLOAD_TMP_FOLDER + \"/\" + new_filename + ext)"
    },
    {
        "line": 36,
        "fullcodeline": "print(\"cannot convert\", new_filename + \".jpg\")"
    },
    {
        "line": 32,
        "fullcodeline": "rgb_im = im.convert(\"RGB\")"
    },
    {
        "line": 33,
        "fullcodeline": "rgb_im.save(UPLOAD_FOLDER + \"/\" + new_filename + \".jpg\")"
    },
    {
        "line": 34,
        "fullcodeline": "os.unlink(UPLOAD_TMP_FOLDER + \"/\" + new_filename + ext)"
    }
]