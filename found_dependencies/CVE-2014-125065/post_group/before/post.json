[
    {
        "line": 2,
        "fullcodeline": "groups_table = db.get_table('groups')"
    },
    {
        "line": 3,
        "fullcodeline": "group_exist = groups_table.find_one(name=group_name)"
    },
    {
        "line": 5,
        "fullcodeline": "if request.method=='POST':"
    },
    {
        "line": 13,
        "fullcodeline": "elif request.method == 'PUT':"
    },
    {
        "line": 9,
        "fullcodeline": "groups_table.insert(dict(name=group_name, userid=None))"
    },
    {
        "line": 7,
        "fullcodeline": "return error(409, {'error': 'Group already exists'})"
    },
    {
        "line": 14,
        "fullcodeline": "if not group_exist:"
    },
    {
        "line": 10,
        "fullcodeline": "return {'status': 200}"
    },
    {
        "line": 17,
        "fullcodeline": "userids = request.json.get('userids')"
    },
    {
        "line": 21,
        "fullcodeline": "user_table = get_user_table(db)"
    },
    {
        "line": 22,
        "fullcodeline": "groups_table.delete(name=group_name)"
    },
    {
        "line": 23,
        "fullcodeline": "unknown_users = []"
    },
    {
        "line": 31,
        "fullcodeline": "ret = {'status': 200}"
    },
    {
        "line": 15,
        "fullcodeline": "return error(400, {'error': 'Group does not exist'})"
    },
    {
        "line": 18,
        "fullcodeline": "if not userids:"
    },
    {
        "line": 24,
        "fullcodeline": "for userid in userids:"
    },
    {
        "line": 33,
        "fullcodeline": "ret = { 'status': 207, 'unknown_users': unknown_users }"
    },
    {
        "line": 19,
        "fullcodeline": "return error(400, {'error': 'Need a userids key'})"
    },
    {
        "line": 25,
        "fullcodeline": "user = user_table.find_one(userid=userid)"
    },
    {
        "line": 26,
        "fullcodeline": "if not user:"
    },
    {
        "line": 27,
        "fullcodeline": "unknown_users.append(userid)"
    },
    {
        "line": 29,
        "fullcodeline": "groups_table.insert(dict(name=group_name, userid=userid))"
    }
]