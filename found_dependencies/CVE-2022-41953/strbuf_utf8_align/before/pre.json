[
    {
        "line": 4,
        "fullcodeline": "int slen = strlen(s);"
    },
    {
        "line": 5,
        "fullcodeline": "int display_len = utf8_strnwidth(s, slen, 0);"
    },
    {
        "line": 6,
        "fullcodeline": "int utf8_compensation = slen - display_len;"
    },
    {
        "line": 8,
        "fullcodeline": "if (display_len >= width) {"
    },
    {
        "line": 13,
        "fullcodeline": "if (position == ALIGN_LEFT)"
    },
    {
        "line": 9,
        "fullcodeline": "strbuf_addstr(buf, s);"
    },
    {
        "line": 15,
        "fullcodeline": "else if (position == ALIGN_MIDDLE) {"
    },
    {
        "line": 16,
        "fullcodeline": "int left = (width - display_len) / 2;"
    },
    {
        "line": 17,
        "fullcodeline": "strbuf_addf(buf, \"%*s%-*s\", left, \"\", width - left + utf8_compensation, s);"
    },
    {
        "line": 18,
        "fullcodeline": "} else if (position == ALIGN_RIGHT)"
    }
]