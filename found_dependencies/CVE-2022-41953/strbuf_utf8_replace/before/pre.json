[
    {
        "line": 4,
        "fullcodeline": "struct strbuf sb_dst = STRBUF_INIT;"
    },
    {
        "line": 5,
        "fullcodeline": "char *src = sb_src->buf;"
    },
    {
        "line": 6,
        "fullcodeline": "char *end = src + sb_src->len;"
    },
    {
        "line": 8,
        "fullcodeline": "int w = 0, subst_len = 0;"
    },
    {
        "line": 12,
        "fullcodeline": "strbuf_grow(&sb_dst, sb_src->len + subst_len);"
    },
    {
        "line": 13,
        "fullcodeline": "dst = sb_dst.buf;"
    },
    {
        "line": 45,
        "fullcodeline": "strbuf_setlen(&sb_dst, dst - sb_dst.buf);"
    },
    {
        "line": 46,
        "fullcodeline": "strbuf_swap(sb_src, &sb_dst);"
    },
    {
        "line": 48,
        "fullcodeline": "strbuf_release(&sb_dst);"
    },
    {
        "line": 15,
        "fullcodeline": "while (src < end) {"
    },
    {
        "line": 11,
        "fullcodeline": "subst_len = strlen(subst);"
    },
    {
        "line": 28,
        "fullcodeline": "old = src;"
    },
    {
        "line": 29,
        "fullcodeline": "n = utf8_width((const char**)&src, NULL);"
    },
    {
        "line": 41,
        "fullcodeline": "memcpy(dst, old, src - old);"
    },
    {
        "line": 42,
        "fullcodeline": "dst += src - old;"
    },
    {
        "line": 43,
        "fullcodeline": "w += n;"
    },
    {
        "line": 19,
        "fullcodeline": "while ((n = display_mode_esc_sequence_len(src))) {"
    },
    {
        "line": 25,
        "fullcodeline": "if (src >= end)"
    },
    {
        "line": 30,
        "fullcodeline": "if (!src) \t/* broken utf-8, do nothing */"
    },
    {
        "line": 32,
        "fullcodeline": "if (n && w >= pos && w < pos + width) {"
    },
    {
        "line": 20,
        "fullcodeline": "memcpy(dst, src, n);"
    },
    {
        "line": 21,
        "fullcodeline": "src += n;"
    },
    {
        "line": 22,
        "fullcodeline": "dst += n;"
    },
    {
        "line": 38,
        "fullcodeline": "w += n;"
    },
    {
        "line": 34,
        "fullcodeline": "memcpy(dst, subst, subst_len);"
    },
    {
        "line": 35,
        "fullcodeline": "dst += subst_len;"
    },
    {
        "line": 36,
        "fullcodeline": "subst = NULL;"
    }
]