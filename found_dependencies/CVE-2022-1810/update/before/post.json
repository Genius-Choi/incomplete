[
    {
        "line": 4,
        "fullcodeline": "id = params[:article][:id] || params[:id]"
    },
    {
        "line": 5,
        "fullcodeline": "@article = Article.find(id)"
    },
    {
        "line": 2,
        "fullcodeline": "return unless access_granted?(params[:id])"
    },
    {
        "line": 15,
        "fullcodeline": "if @article.draft"
    },
    {
        "line": 16,
        "fullcodeline": "@article.state = \"draft\""
    },
    {
        "line": 21,
        "fullcodeline": "if @article.save"
    },
    {
        "line": 23,
        "fullcodeline": "flash[:success] = I18n.t(\"admin.content.update.success\")"
    },
    {
        "line": 26,
        "fullcodeline": "@article.keywords = Tag.collection_to_string @article.tags"
    },
    {
        "line": 24,
        "fullcodeline": "redirect_to action: \"index\""
    },
    {
        "line": 28,
        "fullcodeline": "render \"edit\""
    },
    {
        "line": 10,
        "fullcodeline": "@article = Article.find(@article.parent_id) unless @article.parent_id.nil?"
    },
    {
        "line": 22,
        "fullcodeline": "Article.where(parent_id: @article.id).map(&:destroy) unless @article.draft"
    },
    {
        "line": 18,
        "fullcodeline": "@article.publish!"
    }
]