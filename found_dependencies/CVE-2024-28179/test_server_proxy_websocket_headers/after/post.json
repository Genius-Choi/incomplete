[
    {
        "line": 3,
        "fullcodeline": "url = f\"ws://{LOCALHOST}:{PORT}/python-websocket/headerssocket?token={TOKEN}\""
    },
    {
        "line": 4,
        "fullcodeline": "conn = await websocket_connect(url)"
    },
    {
        "line": 5,
        "fullcodeline": "await conn.write_message(\"Hello\")"
    },
    {
        "line": 6,
        "fullcodeline": "msg = await conn.read_message()"
    },
    {
        "line": 7,
        "fullcodeline": "headers = json.loads(msg)"
    },
    {
        "line": 8,
        "fullcodeline": "assert \"X-Custom-Header\" in headers"
    },
    {
        "line": 9,
        "fullcodeline": "assert headers[\"X-Custom-Header\"] == \"pytest-23456\""
    },
    {
        "line": 2,
        "fullcodeline": "PORT, TOKEN = a_server_port_and_token"
    }
]