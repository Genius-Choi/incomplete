[
    {
        "line": 4,
        "fullcodeline": "Jsi_Value *val = Jsi_ValueArrayIndex(interp, args, 0);"
    },
    {
        "line": 5,
        "fullcodeline": "Jsi_Value *flag = Jsi_ValueArrayIndex(interp, args, 1);"
    },
    {
        "line": 37,
        "fullcodeline": "Jsi_ValueMakeNull(interp, ret);"
    },
    {
        "line": 6,
        "fullcodeline": "if (!val) goto bail;"
    },
    {
        "line": 7,
        "fullcodeline": "if (Jsi_ValueIsNumber(interp, val)) {"
    },
    {
        "line": 29,
        "fullcodeline": "if (Jsi_ValueIsString(interp, val)) {"
    },
    {
        "line": 8,
        "fullcodeline": "char buf[200];"
    },
    {
        "line": 12,
        "fullcodeline": "jsi_VersionNormalize(n, buf, sizeof(buf));"
    },
    {
        "line": 13,
        "fullcodeline": "int trunc = 0;"
    },
    {
        "line": 26,
        "fullcodeline": "Jsi_ValueMakeStringDup(interp, ret, buf);"
    },
    {
        "line": 10,
        "fullcodeline": "if (Jsi_GetNumberFromValue(interp, val, &n) != JSI_OK)"
    },
    {
        "line": 14,
        "fullcodeline": "if (flag && (Jsi_GetIntFromValue(interp, flag, &trunc) != JSI_OK"
    },
    {
        "line": 31,
        "fullcodeline": "if (jsi_GetVerFromVal(interp, val, &n, 0) == JSI_OK) {"
    },
    {
        "line": 18,
        "fullcodeline": "int len = Jsi_Strlen(buf)-1;"
    },
    {
        "line": 32,
        "fullcodeline": "Jsi_ValueMakeNumber(interp, ret, n);"
    },
    {
        "line": 15,
        "fullcodeline": "|| trunc<0 || trunc>2))"
    },
    {
        "line": 16,
        "fullcodeline": "return Jsi_LogError(\"arg2: bad trunc: expected int between 0 and 2\");"
    },
    {
        "line": 19,
        "fullcodeline": "while (trunc>0 && len>1) {"
    },
    {
        "line": 22,
        "fullcodeline": "len -= 2;"
    },
    {
        "line": 23,
        "fullcodeline": "trunc--;"
    },
    {
        "line": 20,
        "fullcodeline": "if (buf[len] == '0' && buf[len-1] == '.')"
    },
    {
        "line": 21,
        "fullcodeline": "buf[len-1] = 0;"
    }
]