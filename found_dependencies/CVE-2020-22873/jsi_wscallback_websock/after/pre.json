[
    {
        "line": 5,
        "fullcodeline": "struct lws_context *context = lws_get_context(wsi);"
    },
    {
        "line": 7,
        "fullcodeline": "jsi_wsPss *pss = NULL;"
    },
    {
        "line": 8,
        "fullcodeline": "jsi_wsCmdObj *cmdPtr = (jsi_wsCmdObj *)lws_context_user(context);"
    },
    {
        "line": 13,
        "fullcodeline": "Jsi_Interp *interp = cmdPtr->interp;"
    },
    {
        "line": 14,
        "fullcodeline": "char *inPtr = (char*)in;"
    },
    {
        "line": 15,
        "fullcodeline": "int sLen, n, rc =0;"
    },
    {
        "line": 16,
        "fullcodeline": "WSSIGASSERT(cmdPtr, OBJ);"
    },
    {
        "line": 9,
        "fullcodeline": "if (!cmdPtr) {"
    },
    {
        "line": 17,
        "fullcodeline": "if (Jsi_InterpGone(interp))"
    },
    {
        "line": 20,
        "fullcodeline": "if (cmdPtr->debug>=32) {"
    },
    {
        "line": 10,
        "fullcodeline": "fprintf(stderr, \"null ws context\\n\");"
    },
    {
        "line": 18,
        "fullcodeline": "cmdPtr->deleted = 1;"
    },
    {
        "line": 37,
        "fullcodeline": "pss = jsi_wsgetPss(cmdPtr, wsi, user, 1, 1);"
    },
    {
        "line": 111,
        "fullcodeline": "pss = jsi_wsgetPss(cmdPtr, wsi, user, 0, 0);"
    },
    {
        "line": 11,
        "fullcodeline": "return -1;"
    },
    {
        "line": 43,
        "fullcodeline": "if (cmdPtr->onFilter && !cmdPtr->deleted) {"
    },
    {
        "line": 77,
        "fullcodeline": "if (cmdPtr->bufferPwr2>0) {"
    },
    {
        "line": 83,
        "fullcodeline": "if (!pss)"
    },
    {
        "line": 85,
        "fullcodeline": "if (cmdPtr->onOpen && !cmdPtr->deleted) {"
    },
    {
        "line": 112,
        "fullcodeline": "if (!pss) break;"
    },
    {
        "line": 113,
        "fullcodeline": "if (cmdPtr->onClose || pss->onClose) {"
    },
    {
        "line": 139,
        "fullcodeline": "pss = jsi_wsgetPss(cmdPtr, wsi, user, 0, 0);"
    },
    {
        "line": 144,
        "fullcodeline": "char *data = pss->lastData = (char*)Jsi_StackUnshift(pss->stack);"
    },
    {
        "line": 149,
        "fullcodeline": "pss->state = PWS_SENT;"
    },
    {
        "line": 150,
        "fullcodeline": "p = (unsigned char *)data+LWS_PRE;"
    },
    {
        "line": 151,
        "fullcodeline": "sLen = Jsi_Strlen((char*)p);"
    },
    {
        "line": 152,
        "fullcodeline": "n = jsi_wswrite(pss, wsi, p, sLen, (pss->stats.isBinary?LWS_WRITE_BINARY:LWS_WRITE_TEXT));"
    },
    {
        "line": 176,
        "fullcodeline": "pss = jsi_wsgetPss(cmdPtr, wsi, user, 0, 0);"
    },
    {
        "line": 26,
        "fullcodeline": "fprintf(stderr, \"WS CALLBACK: len=%d, %p %d:%s\\n\", (int)len, user, reason, jsw_getReasonStr(reason));"
    },
    {
        "line": 39,
        "fullcodeline": "if (cmdPtr->instCtx == context && (cmdPtr->clientName[0] || cmdPtr->clientIP[0])) {"
    },
    {
        "line": 40,
        "fullcodeline": "pss->clientName = cmdPtr->clientName;"
    },
    {
        "line": 41,
        "fullcodeline": "pss->clientIP = cmdPtr->clientIP;"
    },
    {
        "line": 46,
        "fullcodeline": "int killcon = 0, n = 0;"
    },
    {
        "line": 48,
        "fullcodeline": "Jsi_Value *vpargs, *vargs[10], *ret = Jsi_ValueNew1(interp);"
    },
    {
        "line": 53,
        "fullcodeline": "vargs[n++] = Jsi_ValueNewBoolean(interp, 0);"
    },
    {
        "line": 54,
        "fullcodeline": "vpargs = Jsi_ValueMakeObject(interp, NULL, oarg1 = Jsi_ObjNewArray(interp, vargs, n, 0));"
    },
    {
        "line": 55,
        "fullcodeline": "Jsi_IncrRefCount(interp, vpargs);"
    },
    {
        "line": 56,
        "fullcodeline": "Jsi_ValueMakeUndef(interp, &ret);"
    },
    {
        "line": 57,
        "fullcodeline": "rc = Jsi_FunctionInvoke(interp, cmdPtr->onFilter, vpargs, &ret, NULL);"
    },
    {
        "line": 64,
        "fullcodeline": "Jsi_DecrRefCount(interp, vpargs);"
    },
    {
        "line": 79,
        "fullcodeline": "snprintf(nbuf, sizeof(nbuf), \"%d\", cmdPtr->bufferPwr2);"
    },
    {
        "line": 80,
        "fullcodeline": "lws_set_extension_option(wsi, \"permessage-deflate\", \"rx_buf_size\", nbuf);"
    },
    {
        "line": 81,
        "fullcodeline": "lws_set_extension_option(wsi, \"permessage-deflate\", \"tx_buf_size\", nbuf);"
    },
    {
        "line": 84,
        "fullcodeline": "pss = jsi_wsgetPss(cmdPtr, wsi, user, 1, 0);"
    },
    {
        "line": 88,
        "fullcodeline": "Jsi_Value *vpargs, *vargs[10];"
    },
    {
        "line": 89,
        "fullcodeline": "int n = 0;"
    },
    {
        "line": 91,
        "fullcodeline": "vargs[n++] = Jsi_ValueNewNumber(interp, (Jsi_Number)(pss->wid));"
    },
    {
        "line": 92,
        "fullcodeline": "vpargs = Jsi_ValueMakeObject(interp, NULL, oarg1 = Jsi_ObjNewArray(interp, vargs, n, 0));"
    },
    {
        "line": 93,
        "fullcodeline": "Jsi_IncrRefCount(interp, vpargs);"
    },
    {
        "line": 95,
        "fullcodeline": "Jsi_Value *ret = Jsi_ValueNew1(interp);"
    },
    {
        "line": 96,
        "fullcodeline": "Jsi_ValueMakeUndef(interp, &ret);"
    },
    {
        "line": 97,
        "fullcodeline": "rc = Jsi_FunctionInvoke(interp, cmdPtr->onOpen, vpargs, &ret, NULL);"
    },
    {
        "line": 99,
        "fullcodeline": "Jsi_DecrRefCount(interp, vpargs);"
    },
    {
        "line": 114,
        "fullcodeline": "rc = jsi_wsrecv_callback(interp, cmdPtr, pss, inPtr, len, 1);"
    },
    {
        "line": 119,
        "fullcodeline": "if (cmdPtr->stats.connectCnt<=0 && cmdPtr->onCloseLast && !Jsi_InterpGone(interp)) {"
    },
    {
        "line": 121,
        "fullcodeline": "Jsi_Value *retStr = Jsi_ValueNew1(interp);"
    },
    {
        "line": 123,
        "fullcodeline": "Jsi_Value *vpargs, *vargs[10];"
    },
    {
        "line": 124,
        "fullcodeline": "int n = 0;"
    },
    {
        "line": 125,
        "fullcodeline": "vargs[n++] = (cmdPtr->deleted?Jsi_ValueNewNull(interp):Jsi_ValueNewObj(interp, cmdPtr->fobj));"
    },
    {
        "line": 126,
        "fullcodeline": "vpargs = Jsi_ValueMakeObject(interp, NULL, Jsi_ObjNewArray(interp, vargs, n, 0));"
    },
    {
        "line": 127,
        "fullcodeline": "Jsi_IncrRefCount(interp, vpargs);"
    },
    {
        "line": 128,
        "fullcodeline": "jrc = Jsi_FunctionInvoke(interp, cmdPtr->onCloseLast, vpargs, &retStr, NULL);"
    },
    {
        "line": 129,
        "fullcodeline": "Jsi_DecrRefCount(interp, vpargs);"
    },
    {
        "line": 130,
        "fullcodeline": "Jsi_DecrRefCount(interp, retStr);"
    },
    {
        "line": 146,
        "fullcodeline": "if (data == NULL)"
    },
    {
        "line": 156,
        "fullcodeline": "if (n >= 0) {"
    },
    {
        "line": 177,
        "fullcodeline": "if (!pss) break;"
    },
    {
        "line": 180,
        "fullcodeline": "pss->stats.recvLast = time(NULL);"
    },
    {
        "line": 182,
        "fullcodeline": "cmdPtr->stats.recvLast = time(NULL);"
    },
    {
        "line": 184,
        "fullcodeline": "if (cmdPtr->onRecv || pss->onRecv) {"
    },
    {
        "line": 219,
        "fullcodeline": "lws_callback_on_writable_all_protocol(cmdPtr->context, lws_get_protocol(wsi));"
    },
    {
        "line": 44,
        "fullcodeline": "if (!pss)"
    },
    {
        "line": 50,
        "fullcodeline": "vargs[n++] = Jsi_ValueNewObj(interp, cmdPtr->fobj);"
    },
    {
        "line": 51,
        "fullcodeline": "vargs[n++] = Jsi_ValueNewNumber(interp, (Jsi_Number)(pss->wid));"
    },
    {
        "line": 52,
        "fullcodeline": "vargs[n++] = Jsi_ValueNewBlob(interp, (uchar*)in, len);"
    },
    {
        "line": 66,
        "fullcodeline": "if (rc != JSI_OK) {"
    },
    {
        "line": 78,
        "fullcodeline": "char nbuf[JSI_MAX_NUMBER_STRING];"
    },
    {
        "line": 90,
        "fullcodeline": "vargs[n++] = Jsi_ValueNewObj(interp, cmdPtr->fobj);"
    },
    {
        "line": 101,
        "fullcodeline": "if (rc != JSI_OK)"
    },
    {
        "line": 115,
        "fullcodeline": "if (rc != JSI_OK)"
    },
    {
        "line": 140,
        "fullcodeline": "if (!pss || !pss->stack) break;"
    },
    {
        "line": 154,
        "fullcodeline": "fprintf(stderr, \"WS:CLIENT WRITE(%p): %d=>%d\\n\", pss, sLen, n);"
    },
    {
        "line": 186,
        "fullcodeline": "int nlen = len;"
    },
    {
        "line": 189,
        "fullcodeline": "int rblen = Jsi_DSLength(&pss->recvBuf),"
    },
    {
        "line": 190,
        "fullcodeline": "bmax = cmdPtr->recvBufMax,"
    },
    {
        "line": 191,
        "fullcodeline": "isfin = pss->stats.isFinal = lws_is_final_fragment(wsi);"
    },
    {
        "line": 211,
        "fullcodeline": "rc = jsi_wsrecv_callback(interp, cmdPtr, pss, inPtr, nlen, 0);"
    },
    {
        "line": 45,
        "fullcodeline": "pss = jsi_wsgetPss(cmdPtr, wsi, user, 1, 0);"
    },
    {
        "line": 58,
        "fullcodeline": "if (rc == JSI_OK && Jsi_ValueIsFalse(interp, ret)) {"
    },
    {
        "line": 158,
        "fullcodeline": "cmdPtr->stats.sentLast = time(NULL);"
    },
    {
        "line": 160,
        "fullcodeline": "pss->stats.sentLast = time(NULL);"
    },
    {
        "line": 163,
        "fullcodeline": "pss->state = PWS_SENDERR;"
    },
    {
        "line": 168,
        "fullcodeline": "rc = 1;"
    },
    {
        "line": 187,
        "fullcodeline": "if (nlen<=0)"
    },
    {
        "line": 192,
        "fullcodeline": "pss->stats.isBinary = lws_frame_is_binary(wsi);"
    },
    {
        "line": 212,
        "fullcodeline": "if (inPtr != in)"
    },
    {
        "line": 214,
        "fullcodeline": "if (rc != JSI_OK) {"
    },
    {
        "line": 102,
        "fullcodeline": "return Jsi_LogError(\"websock bad rcv eval\");"
    },
    {
        "line": 116,
        "fullcodeline": "return Jsi_LogError(\"websock bad rcv eval\");"
    },
    {
        "line": 165,
        "fullcodeline": "pss->stats.sentErrLast = time(NULL);"
    },
    {
        "line": 167,
        "fullcodeline": "cmdPtr->stats.sentErrLast = time(NULL);"
    },
    {
        "line": 199,
        "fullcodeline": "Jsi_DSAppendLen(&pss->recvBuf, inPtr, len);"
    },
    {
        "line": 201,
        "fullcodeline": "cmdPtr->recvBufCnt--;"
    },
    {
        "line": 202,
        "fullcodeline": "nlen = Jsi_DSLength(&pss->recvBuf);"
    },
    {
        "line": 203,
        "fullcodeline": "inPtr = Jsi_DSFreeDup(&pss->recvBuf);"
    },
    {
        "line": 194,
        "fullcodeline": "if (bmax && rblen>bmax) {"
    },
    {
        "line": 196,
        "fullcodeline": "rc = 1;"
    }
]