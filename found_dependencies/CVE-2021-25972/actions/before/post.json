[
    {
        "line": 2,
        "fullcodeline": "if params[:media_action] != 'crop_url'"
    },
    {
        "line": 6,
        "fullcodeline": "case params[:media_action]"
    },
    {
        "line": 3,
        "fullcodeline": "authorize! :manage, :media"
    },
    {
        "line": 5,
        "fullcodeline": "params[:folder] = params[:folder].gsub(\"//\", \"/\") if params[:folder].present?"
    },
    {
        "line": 7,
        "fullcodeline": "when \"new_folder\""
    },
    {
        "line": 8,
        "fullcodeline": "params[:folder] = slugify_folder(params[:folder])"
    },
    {
        "line": 9,
        "fullcodeline": "render partial: \"render_file_item\", locals: {files: [cama_uploader.add_folder(params[:folder])]}"
    },
    {
        "line": 10,
        "fullcodeline": "when \"del_folder\""
    },
    {
        "line": 11,
        "fullcodeline": "cama_uploader.delete_folder(params[:folder])"
    },
    {
        "line": 12,
        "fullcodeline": "render inline: \"\""
    },
    {
        "line": 13,
        "fullcodeline": "when \"del_file\""
    },
    {
        "line": 14,
        "fullcodeline": "cama_uploader.delete_file(params[:folder].gsub(\"//\", \"/\"))"
    },
    {
        "line": 15,
        "fullcodeline": "render inline: \"\""
    },
    {
        "line": 16,
        "fullcodeline": "when 'crop_url'"
    },
    {
        "line": 20,
        "fullcodeline": "r = cama_tmp_upload( params[:url], formats: params[:formats], name: params[:name])"
    },
    {
        "line": 17,
        "fullcodeline": "unless params[:url].start_with?('data:')"
    },
    {
        "line": 18,
        "fullcodeline": "params[:url] = (params[:url].start_with?('http') ? '' : current_site.the_url(locale: nil)) + params[:url]"
    },
    {
        "line": 22,
        "fullcodeline": "params[:file_upload] = r[:file_path]"
    },
    {
        "line": 23,
        "fullcodeline": "sett = {remove_source: true}"
    },
    {
        "line": 21,
        "fullcodeline": "unless r[:error].present?"
    },
    {
        "line": 26,
        "fullcodeline": "upload(sett)"
    },
    {
        "line": 28,
        "fullcodeline": "render inline: r[:error]"
    },
    {
        "line": 24,
        "fullcodeline": "sett[:same_name] = true if params[:same_name].present?"
    },
    {
        "line": 25,
        "fullcodeline": "sett[:name] = params[:name] if params[:name].present?"
    }
]