[
    {
        "line": 1,
        "fullcodeline": "def truncate_text(text, description, max_length = 100_000)"
    },
    {
        "line": 2,
        "fullcodeline": "raise ArgumentError, \"max_length must be positive\" unless max_length > 0"
    },
    {
        "line": 3,
        "fullcodeline": "return text if text.size <= max_length"
    },
    {
        "line": 4,
        "fullcodeline": "\"Truncating #{description} to #{max_length.to_s.reverse.gsub(/...(?=.)/,'\\&,').reverse} characters:\\n\" + text[0, max_length]"
    }
]