[
    {
        "line": 9,
        "fullcodeline": "path_id = f\"{realm_id_str}/{filename}\""
    },
    {
        "line": 10,
        "fullcodeline": "realm = get_valid_realm_from_request(request)"
    },
    {
        "line": 11,
        "fullcodeline": "is_authorized = validate_attachment_request(maybe_user_profile, path_id, realm)"
    },
    {
        "line": 13,
        "fullcodeline": "if is_authorized is None:"
    },
    {
        "line": 15,
        "fullcodeline": "if not is_authorized:"
    },
    {
        "line": 21,
        "fullcodeline": "if settings.LOCAL_UPLOADS_DIR is not None:"
    },
    {
        "line": 18,
        "fullcodeline": "url = generate_unauthed_file_access_url(path_id)"
    },
    {
        "line": 14,
        "fullcodeline": "return HttpResponseNotFound(_(\"<p>File not found.</p>\"))"
    },
    {
        "line": 16,
        "fullcodeline": "return HttpResponseForbidden(_(\"<p>You are not authorized to view this file.</p>\"))"
    },
    {
        "line": 19,
        "fullcodeline": "return json_success(request, data=dict(url=url))"
    },
    {
        "line": 22,
        "fullcodeline": "return serve_local(request, path_id, force_download=force_download)"
    },
    {
        "line": 24,
        "fullcodeline": "return serve_s3(request, path_id, force_download=force_download)"
    }
]