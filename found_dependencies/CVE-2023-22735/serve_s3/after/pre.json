[
    {
        "line": 2,
        "fullcodeline": "url = get_signed_upload_url(path_id, force_download=force_download)"
    },
    {
        "line": 3,
        "fullcodeline": "assert url.startswith(\"https://\")"
    },
    {
        "line": 14,
        "fullcodeline": "parsed_url = urlparse(url)"
    },
    {
        "line": 18,
        "fullcodeline": "escaped_path_parts = parsed_url.hostname + quote(parsed_url.path) + \"?\" + parsed_url.query"
    },
    {
        "line": 19,
        "fullcodeline": "response = internal_nginx_redirect(\"/internal/s3/\" + escaped_path_parts)"
    },
    {
        "line": 28,
        "fullcodeline": "patch_cache_control(response, private=True, immutable=True)"
    },
    {
        "line": 15,
        "fullcodeline": "assert parsed_url.hostname is not None"
    },
    {
        "line": 16,
        "fullcodeline": "assert parsed_url.path is not None"
    },
    {
        "line": 17,
        "fullcodeline": "assert parsed_url.query is not None"
    },
    {
        "line": 10,
        "fullcodeline": "return redirect(url)"
    }
]