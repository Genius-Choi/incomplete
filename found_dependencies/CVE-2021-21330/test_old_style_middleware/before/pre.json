[
    {
        "line": 2,
        "fullcodeline": "async def view_handler(request):"
    },
    {
        "line": 15,
        "fullcodeline": "app = web.Application(middlewares=[middleware])"
    },
    {
        "line": 17,
        "fullcodeline": "client = await aiohttp_client(app)"
    },
    {
        "line": 18,
        "fullcodeline": "resp = await client.get(\"/\")"
    },
    {
        "line": 19,
        "fullcodeline": "assert 201 == resp.status"
    },
    {
        "line": 20,
        "fullcodeline": "txt = await resp.text()"
    },
    {
        "line": 21,
        "fullcodeline": "assert \"OK[old style middleware]\" == txt"
    },
    {
        "line": 5,
        "fullcodeline": "with pytest.warns(DeprecationWarning, match=\"Middleware decorator is deprecated\"):"
    },
    {
        "line": 16,
        "fullcodeline": "app.router.add_route(\"GET\", \"/\", view_handler)"
    },
    {
        "line": 8,
        "fullcodeline": "async def middleware(request, handler):"
    },
    {
        "line": 7,
        "fullcodeline": "@web.middleware"
    }
]