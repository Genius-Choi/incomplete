[
    {
        "line": 3,
        "fullcodeline": "form_data = {\"username\": form_user, \"password\": form_password}"
    },
    {
        "line": 4,
        "fullcodeline": "expected_auth = {\"username\": auth_user, \"password\": form_password}"
    },
    {
        "line": 5,
        "fullcodeline": "base_url = public_url(app)"
    },
    {
        "line": 6,
        "fullcodeline": "called_with = []"
    },
    {
        "line": 8,
        "fullcodeline": "async def mock_authenticate(handler, data):"
    },
    {
        "line": 24,
        "fullcodeline": "assert called_with == [expected_auth]"
    },
    {
        "line": 11,
        "fullcodeline": "with mock.patch.object(app.authenticator, 'authenticate', mock_authenticate):"
    },
    {
        "line": 12,
        "fullcodeline": "r = await async_requests.get(base_url + 'hub/login')"
    },
    {
        "line": 13,
        "fullcodeline": "r.raise_for_status()"
    },
    {
        "line": 14,
        "fullcodeline": "cookies = r.cookies"
    },
    {
        "line": 15,
        "fullcodeline": "xsrf = cookies['_xsrf']"
    },
    {
        "line": 16,
        "fullcodeline": "page = BeautifulSoup(r.text, \"html.parser\")"
    },
    {
        "line": 17,
        "fullcodeline": "action_url = public_host(app) + page.find(\"form\")[\"action\"]"
    },
    {
        "line": 18,
        "fullcodeline": "xsrf_input = page.find(\"form\").find(\"input\", attrs={\"name\": \"_xsrf\"})"
    },
    {
        "line": 19,
        "fullcodeline": "form_data[\"_xsrf\"] = xsrf_input[\"value\"]"
    },
    {
        "line": 20,
        "fullcodeline": "await async_requests.post("
    }
]