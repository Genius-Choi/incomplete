[
    {
        "line": 2,
        "fullcodeline": "await user.spawn()"
    },
    {
        "line": 3,
        "fullcodeline": "token = user.new_api_token(scopes=[\"access:servers!user\"])"
    },
    {
        "line": 4,
        "fullcodeline": "url = url_path_join(public_url(app, user), user.spawner.default_url or \"/tree/\")"
    },
    {
        "line": 7,
        "fullcodeline": "r = await async_requests.get(url + f\"?token={token}\", allow_redirects=False)"
    },
    {
        "line": 8,
        "fullcodeline": "print(r.url, r.status_code)"
    },
    {
        "line": 9,
        "fullcodeline": "assert r.status_code == 200"
    },
    {
        "line": 10,
        "fullcodeline": "assert r.cookies"
    },
    {
        "line": 13,
        "fullcodeline": "r = await async_requests.get(url, cookies=r.cookies, allow_redirects=False)"
    },
    {
        "line": 14,
        "fullcodeline": "assert r.status_code == 200"
    },
    {
        "line": 15,
        "fullcodeline": "await user.stop()"
    }
]