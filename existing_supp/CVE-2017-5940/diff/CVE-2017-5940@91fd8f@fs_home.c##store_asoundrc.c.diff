--- before
+++ after
@@ -32,24 +32,8 @@
 			free(rp);

 		}

 

-		pid_t child = fork();

-		if (child < 0)

-			errExit("fork");

-		if (child == 0) {

-			// drop privileges

-			drop_privs(0);

-	

-			// copy, set permissions and ownership

-			int rv = copy_file(src, dest, getuid(), getgid(), 0644);

-			if (rv)

-				fprintf(stderr, "Warning: cannot transfer .asoundrc in private home directory\n");

-			else {

-				fs_logger2("clone", dest);

-			}

-			_exit(0);

-		}

-		// wait for the child to finish

-		waitpid(child, NULL, 0);

+		copy_file_as_user(src, dest, getuid(), getgid(), 0644);

+		fs_logger2("clone", dest);

 		return 1; // file copied

 	}

 	

