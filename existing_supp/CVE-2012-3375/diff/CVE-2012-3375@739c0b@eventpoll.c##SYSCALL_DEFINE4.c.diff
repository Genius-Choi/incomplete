--- before
+++ after
@@ -63,8 +63,10 @@
 	if (op == EPOLL_CTL_ADD) {

 		if (is_file_epoll(tfile)) {

 			error = -ELOOP;

-			if (ep_loop_check(ep, tfile) != 0)

+			if (ep_loop_check(ep, tfile) != 0) {

+				clear_tfile_check_list();

 				goto error_tgt_fput;

+			}

 		} else

 			list_add(&tfile->f_tfile_llink, &tfile_check_list);

 	}

