Variant fb_compact_unserialize(const char* str, int len,
                               bool& success,
                               Variant& errcode) {

  Variant ret;
  int p = 0;
  int err = fb_compact_unserialize_from_buffer(ret, str, len, p);
  if (err) {
    success = false;
    errcode = err;
    return false;
  }
  success = true;
  errcode = init_null();
  return ret;
}
