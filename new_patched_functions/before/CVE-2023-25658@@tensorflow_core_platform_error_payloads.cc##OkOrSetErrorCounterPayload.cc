void OkOrSetErrorCounterPayload(
    const ErrorSourceProto::ErrorSource& error_source,
    tensorflow::Status& status) {
  if (!status.ok() &&
      !status.GetPayload(tensorflow::kErrorSource).has_value()) {
    ErrorSourceProto error_source_proto;
    error_source_proto.set_error_source(error_source);
    status.SetPayload(tensorflow::kErrorSource,
                      error_source_proto.SerializeAsString());
  }
}
