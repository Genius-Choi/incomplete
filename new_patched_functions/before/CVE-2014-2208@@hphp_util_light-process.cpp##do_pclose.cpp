static void do_pclose(FILE *fin, FILE *fout) {
  char buf[BUFFER_SIZE];

  int64_t fptr = 0;
  read_buf(fin, buf);
  sscanf(buf, "%" PRId64, &fptr);
  FILE *f = (FILE *)fptr;
  int ret = ::pclose(f);

  fprintf(fout, "%d\n", ret);
  if (ret < 0) {
    fprintf(fout, "%d\n", errno);
  }
  fflush(fout);
}
