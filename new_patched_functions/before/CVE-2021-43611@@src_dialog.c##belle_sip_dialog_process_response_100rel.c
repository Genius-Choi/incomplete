static int belle_sip_dialog_process_response_100rel(belle_sip_dialog_t *obj, belle_sip_transaction_t* transaction){
	belle_sip_response_t *resp = belle_sip_transaction_get_response(transaction);
	belle_sip_message_t* msg = (belle_sip_message_t*)resp;
	belle_sip_header_cseq_t *header_cseq_resp = belle_sip_message_get_header_by_type(msg, belle_sip_header_cseq_t);
	int ret = 0;

	if (header_cseq_resp == NULL){
		belle_sip_message("Message [%p] does not contain CSeq header!", msg);
	}

	belle_sip_header_require_t* header_require = belle_sip_message_get_header_by_type(msg, belle_sip_header_require_t);
	if (header_require){
		belle_sip_list_t* list = belle_sip_header_require_get_require(header_require);
		int require_100rel = 0;
		while (list){
			if (strcmp(list->data, "100rel") == 0){
				require_100rel = 1;
				break;
			}
			list=list->next;
		}
		if (require_100rel){
			belle_sip_message("Found header Require with value 100rel in message [%p].", msg);
			belle_sip_header_t *header_rseq = belle_sip_message_get_header(msg, "RSeq");
			if (header_rseq){
				const char* header_rseq_value = belle_sip_header_get_unparsed_value(header_rseq);
				long rseq = strtol(header_rseq_value, NULL, 10);
				unsigned int cseq_resp = belle_sip_header_cseq_get_seq_number(header_cseq_resp);
				const char* method_resp = belle_sip_header_cseq_get_method(header_cseq_resp);
				/*"A response is a retransmission when
				 its dialog ID, CSeq, and RSeq match the original response". Currently we only store last acknoledged Rseq. This data is used to detect retransmitions*/
				belle_sip_ict_t * ict = BELLE_SIP_CAST(transaction,belle_sip_ict_t);
				if (ict->r_cseq > 0 &&  ict->r_cseq >= (unsigned int)rseq) {
					belle_sip_warning("provisionnal response with sequence number [%ld] already acknoledged, dropping",rseq);
					ret = -1;
				} else {
					/*send PRACK from callee */
					belle_sip_request_t *prack = belle_sip_dialog_create_prack(obj, rseq, cseq_resp, method_resp);
					if (prack){
						/*put auth header*/
						belle_sip_provider_add_authorization(transaction->provider,prack,transaction->last_response,NULL,NULL,NULL);
						belle_sip_dialog_send_prack(obj, prack);
						ict->r_cseq = rseq;
					} else {
						belle_sip_message("Failed to create PRACK message!");
					}
				}
			}
			else {
				belle_sip_message("Message [%p] does not contain RSeq header! (required be with 100rel)", msg);
			}
		}
	}
	return ret;
}
