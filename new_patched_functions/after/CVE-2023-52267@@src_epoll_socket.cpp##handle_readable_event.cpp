int EpollSocket::handle_readable_event(epoll_event &event) {
    EpollContext *epoll_context = (EpollContext *) event.data.ptr;
    if (epoll_context == NULL) {
        LOG_WARN("Get context from read event fail!");
        return -1;
    }
    int fd = epoll_context->fd;

    int ret = _watcher->on_readable(_epollfd, event);
    if (ret == READ_CLOSE) {
        return close_and_release(event);
    }
    if (epoll_context != NULL) {
        epoll_context->_ctx_status = CONTEXT_READ_OVER;
    }

    if (ret == READ_CONTINUE) {
        event.events = EPOLLIN | EPOLLONESHOT;
        ret = epoll_ctl(_epollfd, EPOLL_CTL_MOD, fd, &event);
    } else if (ret == READ_OVER) { // READ_OVER
        event.events = EPOLLOUT | EPOLLONESHOT;
        ret = epoll_ctl(_epollfd, EPOLL_CTL_MOD, fd, &event);
    } else {
        LOG_ERROR("unkonw read ret:%d", ret);
    }
    return ret;
}
