display_name(pbelle_sip_messageParser ctx, belle_sip_header_address_t* object)
{
    belle_sip_messageParser_display_name_tokens_return display_name_tokens61;
    #undef	RETURN_TYPE_display_name_tokens61
    #define	RETURN_TYPE_display_name_tokens61 belle_sip_messageParser_display_name_tokens_return

    belle_sip_messageParser_quoted_string_return quoted_string62;
    #undef	RETURN_TYPE_quoted_string62
    #define	RETURN_TYPE_quoted_string62 belle_sip_messageParser_quoted_string_return

    /* Initialize rule variables
     */

    {
        {
            //  ../grammars/belle_sip_message.g:804:3: ( display_name_tokens | quoted_string )

            ANTLR3_UINT32 alt83;

            alt83=2;

            switch ( LA(1) )
            {
            case BQUOTE:
            case COMMON_CHAR:
            case DASH:
            case DIGIT:
            case DOT:
            case EMARK:
            case HEX_CHAR:
            case LPAREN:
            case PERCENT:
            case PLUS:
            case RPAREN:
            case SQUOTE:
            case STAR:
            case TILDE:
            case USCORE:
            	{
            		alt83=1;
            	}
                break;
            case DQUOTE:
            	{
            		alt83=2;
            	}
                break;

            default:
                if (BACKTRACKING>0)
                {
                    FAILEDFLAG = ANTLR3_TRUE;
                    return ;
                }

                CONSTRUCTEX();
                EXCEPTION->type         = ANTLR3_NO_VIABLE_ALT_EXCEPTION;
                EXCEPTION->message      = (void *)"";
                EXCEPTION->decisionNum  = 83;
                EXCEPTION->state        = 0;


                goto ruledisplay_nameEx;

            }

            switch (alt83)
            {
        	case 1:
        	    // ../grammars/belle_sip_message.g:804:6: display_name_tokens
        	    {
        	        FOLLOWPUSH(FOLLOW_display_name_tokens_in_display_name3182);
        	        display_name_tokens61=display_name_tokens(ctx);

        	        FOLLOWPOP();
        	        if  (HASEXCEPTION())
        	        {
        	            goto ruledisplay_nameEx;
        	        }
        	        if (HASFAILED())
        	        {
        	            return ;
        	        }


        	        if ( BACKTRACKING==0 )
        	        {
        	            belle_sip_header_address_set_displayname(object,(const char*)((STRSTREAM->toStringTT(STRSTREAM, display_name_tokens61.start, display_name_tokens61.stop))
        	            ->chars));
        	        }


        	    }
        	    break;
        	case 2:
        	    // ../grammars/belle_sip_message.g:805:8: quoted_string
        	    {
        	        FOLLOWPUSH(FOLLOW_quoted_string_in_display_name3193);
        	        quoted_string62=quoted_string(ctx);

        	        FOLLOWPOP();
        	        if  (HASEXCEPTION())
        	        {
        	            goto ruledisplay_nameEx;
        	        }
        	        if (HASFAILED())
        	        {
        	            return ;
        	        }


        	        if ( BACKTRACKING==0 )
        	        {

        	                 	char* unescaped_char = belle_sip_string_to_backslash_less_unescaped_string((const char*)((STRSTREAM->toStringTT(STRSTREAM, quoted_string62.start, quoted_string62.stop))
        	            ->chars));
        	                 	belle_sip_header_address_set_quoted_displayname(object,(const char*)unescaped_char);
        	                 	belle_sip_free(unescaped_char);
        	                 	
        	        }


        	    }
        	    break;

            }
        }
    }

    // This is where rules clean up and exit
    //
    goto ruledisplay_nameEx; /* Prevent compiler warnings */
    ruledisplay_nameEx: ;


                if (HASEXCEPTION())
                {

                // This is ugly.  We set the exception type to ANTLR3_RECOGNITION_EXCEPTION so we can always
                // catch them.
                //PREPORTERROR();
                EXCEPTION->type = ANTLR3_RECOGNITION_EXCEPTION;
                }

    return ;
}
