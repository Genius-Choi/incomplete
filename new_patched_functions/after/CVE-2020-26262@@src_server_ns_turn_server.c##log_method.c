static inline void log_method(ts_ur_super_session* ss, const char *method, int err_code, const uint8_t *reason)
{
  if(ss) {
	  if(!method) method = "unknown";
	  if(!err_code) {
		  if(ss->origin[0]) {
			  TURN_LOG_FUNC(TURN_LOG_LEVEL_INFO,
					"session %018llu: origin <%s> realm <%s> user <%s>: incoming packet %s processed, success\n",
					(unsigned long long)(ss->id), (const char*)(ss->origin),(const char*)(ss->realm_options.name),(const char*)(ss->username),method);
		} else {
			TURN_LOG_FUNC(TURN_LOG_LEVEL_INFO,
				"session %018llu: realm <%s> user <%s>: incoming packet %s processed, success\n",
				(unsigned long long)(ss->id), (const char*)(ss->realm_options.name),(const char*)(ss->username),method);
		}
	  } else {
		  if(!reason) reason=get_default_reason(err_code);
		  if(ss->origin[0]) {
			  TURN_LOG_FUNC(TURN_LOG_LEVEL_INFO,
					  "session %018llu: origin <%s> realm <%s> user <%s>: incoming packet %s processed, error %d: %s\n",
					  (unsigned long long)(ss->id), (const char*)(ss->origin),(const char*)(ss->realm_options.name),(const char*)(ss->username), method, err_code, reason);
		  } else {
			  TURN_LOG_FUNC(TURN_LOG_LEVEL_INFO,
					  "session %018llu: realm <%s> user <%s>: incoming packet %s processed, error %d: %s\n",
					  (unsigned long long)(ss->id), (const char*)(ss->realm_options.name),(const char*)(ss->username), method, err_code, reason);
		  }
	  }
  }
}
