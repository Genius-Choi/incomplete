static void xen_irq_lateeoi_locked(struct irq_info *info)
{
	evtchn_port_t evtchn;
	unsigned int cpu;

	evtchn = info->evtchn;
	if (!VALID_EVTCHN(evtchn) || !list_empty(&info->eoi_list))
		return;

	cpu = info->eoi_cpu;
	if (info->eoi_time && info->irq_epoch == per_cpu(irq_epoch, cpu)) {
		lateeoi_list_add(info);
		return;
	}

	info->eoi_time = 0;
	unmask_evtchn(evtchn);
}
