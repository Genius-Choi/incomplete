bool AdminRequestHandler::handleDumpStaticStringsRequest(folly::File& file) {
  auto const& list = lookupDefinedStaticStrings();
  for (auto item : list) {
    auto const line = formatStaticString(item);
    folly::writeFull(file.fd(), line.data(), line.size());
    if (RuntimeOption::EvalPerfDataMap) {
      auto const len = std::min<size_t>(item->size(), 255);
      std::string str(item->data(), len);
      // Only print the first line (up to 255 characters). Since we want '\0' in
      // the list of characters to avoid, we need to use the version of
      // `find_first_of()' with explicit length.
      auto cutOffPos = str.find_first_of("\r\n", 0, 3);
      if (cutOffPos != std::string::npos) str.erase(cutOffPos);
      Debug::DebugInfo::recordDataMap(item->mutableData(),
                                      item->mutableData() + item->size(),
                                      "Str-" + str);
    }
  }
  return true;
}
